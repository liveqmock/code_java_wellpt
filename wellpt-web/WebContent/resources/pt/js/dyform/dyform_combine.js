(function($){$.jgrid=$.jgrid||{};$.extend($.jgrid,{htmlDecode:function(value){if(value&&(value=="&nbsp;"||value=="&#160;"||(value.length==1&&value.charCodeAt(0)==160))){return""}return !value?value:String(value).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")},format:function(format){var args=$.makeArray(arguments).slice(1);if(format===undefined){format=""}return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];if($.browser.msie){return $.inArray(c,c.parentNode.cells)}return c.cellIndex},stripHtml:function(v){v=v+"";var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(v){v=v.replace(regexp,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}else{return v}},stringToDoc:function(xmlString){var xmlDoc;if(typeof xmlString!=="string"){return xmlString}try{var parser=new DOMParser();xmlDoc=parser.parseFromString(xmlString,"text/xml")}catch(e){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(xmlString)}return(xmlDoc&&xmlDoc.documentElement&&xmlDoc.documentElement.tagName!="parsererror")?xmlDoc:null},parse:function(jsonString){var js=jsonString;if(js.substr(0,9)=="while(1);"){js=js.substr(9)}if(js.substr(0,2)=="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return($.jgrid.useJSON===true&&typeof(JSON)==="object"&&typeof(JSON.parse)==="function")?JSON.parse(js):eval("("+js+")")},parseDate:function(format,date){var tsp={m:1,d:1,y:1970,h:0,i:0,s:0},k,hl,dM,regdate=/[\\\/:_;.,\t\T\s-]/;if(date&&date!==null&&date!==undefined){date=$.trim(date);date=date.split(regdate);format=format.split(regdate);var dfmt=$.jgrid.formatter.date.monthNames;var afmt=$.jgrid.formatter.date.AmPm;var h12to24=function(ampm,h){if(ampm===0){if(h==12){h=0}}else{if(h!=12){h+=12}}return h};for(k=0,hl=format.length;k<hl;k++){if(format[k]=="M"){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM<12){date[k]=dM+1}}if(format[k]=="F"){dM=$.inArray(date[k],dfmt);if(dM!==-1&&dM>11){date[k]=dM+1-12}}if(format[k]=="a"){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM<2&&date[k]==afmt[dM]){date[k]=dM;tsp.h=h12to24(date[k],tsp.h)}}if(format[k]=="A"){dM=$.inArray(date[k],afmt);if(dM!==-1&&dM>1&&date[k]==afmt[dM]){date[k]=dM-2;tsp.h=h12to24(date[k],tsp.h)}}if(date[k]!==undefined){tsp[format[k].toLowerCase()]=parseInt(date[k],10)}}tsp.m=parseInt(tsp.m,10)-1;var ty=tsp.y;if(ty>=70&&ty<=99){tsp.y=1900+tsp.y}else{if(ty>=0&&ty<=69){tsp.y=2000+tsp.y}}}return new Date(tsp.y,tsp.m,tsp.d,tsp.h,tsp.i,tsp.s,0)},jqID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(prefix){return(prefix?prefix:$.jgrid.uidPref)+($.jgrid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(e){}}return ret},ajaxOptions:{},from:function(source,initalQuery){var queryObject=function(d,q){if(typeof(d)=="string"){d=$.data(d)}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true;if(typeof(d)=="object"&&d.push){if(d.length>0){if(typeof(d[0])!="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toLowerCase()")}return phrase.join("")};this._strComp=function(val){if(typeof(val)=="string"){return".toString()"}else{return""}};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)}if(!_usecase){phrase=phrase.toLowerCase()}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return phrase};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator=""};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(!_usecase&&typeof(a)!=="number"&&typeof(b)!=="number"){a=String(a).toLowerCase();b=String(b).toLowerCase()}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return}_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt;if(q==_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt)}q++;var values=self._getGroup(d,by,dir,type,dfmt);var results=[];for(var i=0;i<values.length;i++){var sorted=self._doSort(values[i].items,q);for(var j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt){var sortData=[],_sortData=[],newDir=dir=="a"?1:-1,i,ab,j,findSortKey;if(type===undefined){type="text"}if(type=="float"||type=="number"||type=="currency"||type=="numeric"){findSortKey=function($cell,a){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?0:key}}else{if(type=="int"||type=="integer"){findSortKey=function($cell,a){return $cell?parseFloat(String($cell).replace(_stripNum,"")):0}}else{if(type=="date"||type=="datetime"){findSortKey=function($cell,a){return $.jgrid.parseDate(dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell,a){if(!$cell){$cell=""}return $.trim(String($cell).toUpperCase())}}}}}$.each(data,function(i,v){ab=by!==""?$.jgrid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});_sortData.sort(function(a,b){a=a.vSort;b=b.vSort;return self._compare(a,b,newDir)});j=0;var nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null,val;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){val=$.jgrid.getAccessor(v,by);if(val===undefined){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(f){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld="jQuery.jgrid.getAccessor(this,'"+f+"')"}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=(isNaN(Number(val))||val==="")?"0":val;fld="parseInt("+fld+",10)";val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":val;fld="parseFloat("+fld+")";val="parseFloat("+val+")";break;case"date":case"datetime":val=String($.jgrid.parseDate(t.newfmt||"Y-m-d",val).getTime());fld='jQuery.jgrid.parseDate("'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v===undefined||v===null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{length=_trim?$.trim(v.toString()).length:v.toString().length;self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v===undefined||v===null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt){dir=dir===undefined||dir===null?"a":$.trim(dir.toString().toLowerCase());if(stype===null||stype===undefined){stype="text"}if(dfmt===null||dfmt===undefined){dfmt="Y-m-d"}if(dir=="desc"||dir=="descending"){dir="d"}if(dir=="asc"||dir=="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt});return self};return self};return new queryObject(source,null)},extend:function(methods){$.extend($.fn.jqGrid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}}});$.fn.jqGrid=function(pin){if(typeof pin=="string"){var fn=$.jgrid.getAccessor($.fn.jqGrid,pin);if(!fn){throw ("jqGrid - No such method: "+pin)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}return this.each(function(){if(this.grid){return}var p=$.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],groupDataSorted:false,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:false,cmTemplate:{}},$.jgrid.defaults,pin||{});var grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y){this.resizing={idx:i,startX:x.clientX,sOL:y[0]};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(p.id),"#gbox_"+$.jgrid.jqID(p.id));this.curGbox.css({display:"block",left:y[0],top:y[1],height:y[2]});if($.isFunction(p.resizeStart)){p.resizeStart.call(this,x,i)}document.onselectstart=function(){return false}},dragMove:function(x){if(this.resizing){var diff=x.clientX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth=p.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;if(newWidth>33){this.curGbox.css({left:this.resizing.sOL+diff});if(p.forceFit===true){hn=this.headers[this.resizing.idx+p.nv];nWn=p.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>33){h.newWidth=newWidth;hn.newWidth=nWn}}else{this.newWidth=p.direction==="ltr"?p.tblwidth+diff:p.tblwidth-diff;h.newWidth=newWidth}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;nw=parseInt(nw,10);this.resizing=false;$("#rs_m"+$.jgrid.jqID(p.id)).css("display","none");p.colModel[idx].width=nw;this.headers[idx].width=nw;this.headers[idx].el.style.width=nw+"px";this.cols[idx].style.width=nw+"px";if(this.footers.length>0){this.footers[idx].style.width=nw+"px"}if(p.forceFit===true){nw=this.headers[idx+p.nv].newWidth||this.headers[idx+p.nv].width;this.headers[idx+p.nv].width=nw;this.headers[idx+p.nv].el.style.width=nw+"px";this.cols[idx+p.nv].style.width=nw+"px";if(this.footers.length>0){this.footers[idx+p.nv].style.width=nw+"px"}p.colModel[idx+p.nv].width=nw}else{p.tblwidth=this.newWidth||p.tblwidth;$("table:first",this.bDiv).css("width",p.tblwidth+"px");$("table:first",this.hDiv).css("width",p.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(p.footerrow){$("table:first",this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}if($.isFunction(p.resizeStop)){p.resizeStop.call(this,nw,idx)}}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){if(grid.timer){clearTimeout(grid.timer)}grid.timer=null;var dh=$(grid.bDiv).height();if(!dh){return}var table=$("table:first",grid.bDiv);var rows,rh;if(table[0].rows.length){try{rows=table[0].rows[1];rh=rows?$(rows).outerHeight()||grid.prevRowHeight:grid.prevRowHeight}catch(pv){rh=grid.prevRowHeight}}if(!rh){return}grid.prevRowHeight=rh;var rn=p.rowNum;var scrollTop=grid.scrollTop=grid.bDiv.scrollTop;var ttop=Math.round(table.position().top)-scrollTop;var tbot=ttop+table.height();var div=rh*rn;var page,npage,empty;if(tbot<dh&&ttop<=0&&(p.lastpage===undefined||parseInt((tbot+scrollTop+div-1)/div,10)<=p.lastpage)){npage=parseInt((dh-tbot+div-1)/div,10);if(tbot>=0||npage<2||p.scroll===true){page=Math.round((tbot+scrollTop)/div)+1;ttop=-1}else{ttop=1}}if(ttop>0){page=parseInt(scrollTop/div,10)+1;npage=parseInt((scrollTop+dh)/div,10)+2-page;empty=true}if(npage){if(p.lastpage&&page>p.lastpage||p.lastpage==1||(page===p.page&&page===p.lastpage)){return}if(grid.hDiv.loading){grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout)}else{p.page=page;if(empty){grid.selectionPreserver(table[0]);grid.emptyRows(grid.bDiv,false,false)}grid.populate(npage)}}},scrollGrid:function(e){if(p.scroll){var scrollTop=grid.bDiv.scrollTop;if(grid.scrollTop===undefined){grid.scrollTop=0}if(scrollTop!=grid.scrollTop){grid.scrollTop=scrollTop;if(grid.timer){clearTimeout(grid.timer)}grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout)}}grid.hDiv.scrollLeft=grid.bDiv.scrollLeft;if(p.footerrow){grid.sDiv.scrollLeft=grid.bDiv.scrollLeft}if(e){e.stopPropagation()}},selectionPreserver:function(ts){var p=ts.p;var sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null;var left=ts.grid.bDiv.scrollLeft;var complete=p.gridComplete;p.gridComplete=function(){p.selrow=null;p.selarrrow=[];if(p.multiselect&&sra&&sra.length>0){for(var i=0;i<sra.length;i++){if(sra[i]!=sr){$(ts).jqGrid("setSelection",sra[i],false)}}}if(sr){$(ts).jqGrid("setSelection",sr,false)}ts.grid.bDiv.scrollLeft=left;p.gridComplete=complete;if(p.gridComplete){complete()}}}};if(this.tagName.toUpperCase()!="TABLE"){alert("Element is not a table");return}$(this).empty().attr("tabindex","1");this.p=p;var i,dir,ts;if(this.p.colNames.length===0){for(i=0;i<this.p.colModel.length;i++){this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name}}if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}var gv=$("<div class='ui-jqgrid-view'></div>"),ii,isMSIE=$.browser.msie?true:false,isSafari=$.browser.webkit||$.browser.safari?true:false;ts=this;ts.p.direction=$.trim(ts.p.direction.toLowerCase());if($.inArray(ts.p.direction,["ltr","rtl"])==-1){ts.p.direction="ltr"}dir=ts.p.direction;$(gv).insertBefore(this);$(this).appendTo(gv).removeClass("scroll");var eg=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(eg).insertBefore(gv).attr({id:"gbox_"+this.id,dir:dir});$(gv).appendTo(eg).attr("id","gview_"+this.id);if(isMSIE&&$.browser.version<=6){ii='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>'}else{ii=""}$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(ii).insertBefore(gv);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(gv);$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var sortkeys=["shiftKey","altKey","ctrlKey"],intNum=function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval?defval:0}else{return val}},formatCol=function(pos,rowInd,tv,rawObject,rowId,rdata){var cm=ts.p.colModel[pos],ral=cm.align,result='style="',clas=cm.classes,nm=cm.name,celp,acp=[];if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if(cm.cellattr&&$.isFunction(cm.cellattr)){celp=cm.cellattr.call(ts,rowId,tv,rawObject,cm,rdata);if(celp&&typeof(celp)==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.split("style");if(acp.length===2){acp[1]=$.trim(acp[1].replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')}else{result+='"'}}}}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&tv)?(' title="'+$.jgrid.stripHtml(tv)+'"'):"");result+=' aria-describedby="'+ts.p.id+"_"+nm+'"';return result+acp[0]},cellVal=function(val){return val===undefined||val===null||val===""?"&#160;":(ts.p.autoencode?$.jgrid.htmlEncode(val):val+"")},formatter=function(rowId,cellval,colpos,rwdat,_act){var cm=ts.p.colModel[colpos],v;if(typeof cm.formatter!=="undefined"){var opts={rowId:rowId,colModel:cm,gid:ts.p.id,pos:colpos};if($.isFunction(cm.formatter)){v=cm.formatter.call(ts,cellval,opts,rwdat,_act)}else{if($.fmatter){v=$.fn.fmatter(cm.formatter,cellval,opts,rwdat,_act)}else{v=cellVal(cellval)}}}else{v=cellVal(cellval)}return v},addCell=function(rowId,cell,pos,irow,srvr){var v,prp;v=formatter(rowId,cell,pos,srvr,"add");prp=formatCol(pos,irow,v,srvr,rowId,true);return'<td role="gridcell" '+prp+">"+v+"</td>"},addMulti=function(rowid,pos,irow){var v='<input role="checkbox" type="checkbox" id="jqg_'+ts.p.id+"_"+rowid+'" class="cbox" name="jqg_'+ts.p.id+"_"+rowid+'"/>',prp=formatCol(pos,irow,"",null,rowid,true);return'<td role="gridcell" '+prp+">"+v+"</td>"},addRowNum=function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=formatCol(pos,irow,v,null,irow,true);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+prp+">"+v+"</td>"},reader=function(datatype){var field,f=[],j=0,i;for(i=0;i<ts.p.colModel.length;i++){field=ts.p.colModel[i];if(field.name!=="cb"&&field.name!=="subgrid"&&field.name!=="rn"){if(datatype=="local"){f[j]=field.name}else{f[j]=(datatype=="xml")?field.xmlmap||field.name:field.jsonmap||field.name}j++}}return f},orderedCols=function(offset){var order=ts.p.remapColumns;if(!order||!order.length){order=$.map(ts.p.colModel,function(v,i){return i})}if(offset){order=$.map(order,function(v){return v<offset?null:v-offset})}return order},emptyRows=function(parent,scroll,locdata){if(ts.p.deepempty){$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first").empty().append(trf)}if(scroll&&ts.p.scroll){$(">div:first",parent).css({height:"auto"}).children("div:first").css({height:0,display:"none"});parent.scrollTop=0}if(locdata===true){if(ts.p.treeGrid===true){ts.p.data=[];ts.p._index={}}}},refreshIndex=function(){var datalen=ts.p.data.length,idname,i,val,ni=ts.p.rownumbers===true?1:0,gi=ts.p.multiselect===true?1:0,si=ts.p.subGrid===true?1:0;if(ts.p.keyIndex===false||ts.p.loadonce===true){idname=ts.p.localReader.id}else{idname=ts.p.colModel[ts.p.keyIndex+gi+si+ni].name}for(i=0;i<datalen;i++){val=$.jgrid.getAccessor(ts.p.data[i],idname);ts.p._index[val]=i}},addXmlData=function(xml,t,rcnt,more,adjust){var startReq=new Date(),locdata=(ts.p.datatype!="local"&&ts.p.loadonce)||ts.p.datatype=="xmlstring",xmlid="_id_",frd=ts.p.datatype=="local"?"local":"xml";if(locdata){ts.p.data=[];ts.p._index={};ts.p.localReader.id=xmlid}ts.p.reccount=0;if($.isXMLDoc(xml)){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows(t,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var i,fpos,ir=0,v,row,gi=0,si=0,ni=0,idn,getId,f=[],F,rd={},xmlr,rid,rowData=[],cn=(ts.p.altRows===true)?" "+ts.p.altclass:"",cn1;if(!ts.p.xmlReader.repeatitems){f=reader(frd)}if(ts.p.keyIndex===false){idn=ts.p.xmlReader.id}else{idn=ts.p.keyIndex}if(f.length>0&&!isNaN(idn)){if(ts.p.remapColumns&&ts.p.remapColumns.length){idn=$.inArray(idn,ts.p.remapColumns)}idn=f[idn]}if((idn+"").indexOf("[")===-1){if(f.length){getId=function(trow,k){return $(idn,trow).text()||k}}else{getId=function(trow,k){return $(ts.p.xmlReader.cell,trow).eq(idn).text()||k}}}else{getId=function(trow,k){return trow.getAttribute(idn.replace(/[\[\]]/g,""))||k}}ts.p.userData={};$(ts.p.xmlReader.page,xml).each(function(){ts.p.page=this.textContent||this.text||0});$(ts.p.xmlReader.total,xml).each(function(){ts.p.lastpage=this.textContent||this.text;if(ts.p.lastpage===undefined){ts.p.lastpage=1}});$(ts.p.xmlReader.records,xml).each(function(){ts.p.records=this.textContent||this.text||0});$(ts.p.xmlReader.userdata,xml).each(function(){ts.p.userData[this.getAttribute("name")]=this.textContent||this.text});var gxml=$(ts.p.xmlReader.root+" "+ts.p.xmlReader.row,xml);if(!gxml){gxml=[]}var gl=gxml.length,j=0,grpdata={},rn;if(gxml&&gl){rn=parseInt(ts.p.rowNum,10);var br=ts.p.scroll?$.jgrid.randId():1,altr;if(adjust){rn*=adjust+1}var afterInsRow=$.isFunction(ts.p.afterInsertRow),hiderow="";if(ts.p.grouping&&ts.p.groupingView.groupCollapse===true){hiderow=' style="display:none;"'}while(j<gl){xmlr=gxml[j];rid=getId(xmlr,br+j);altr=rcnt===0?0:rcnt+1;cn1=(altr+j)%2==1?cn:"";rowData.push("<tr"+hiderow+' id="'+rid+'" tabindex="-1" role="row" class ="ui-widget-content jqgrow ui-row-'+ts.p.direction+""+cn1+'">');if(ts.p.rownumbers===true){rowData.push(addRowNum(0,j,ts.p.page,ts.p.rowNum));ni=1}if(ts.p.multiselect===true){rowData.push(addMulti(rid,ni,j));gi=1}if(ts.p.subGrid===true){rowData.push($(ts).jqGrid("addSubGridCell",gi+ni,j+rcnt));si=1}if(ts.p.xmlReader.repeatitems){if(!F){F=orderedCols(gi+si+ni)}var cells=$(ts.p.xmlReader.cell,xmlr);$.each(F,function(k){var cell=cells[this];if(!cell){return false}v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v;rowData.push(addCell(rid,v,k+gi+si+ni,j+rcnt,xmlr))})}else{for(i=0;i<f.length;i++){v=$(f[i],xmlr).text();rd[ts.p.colModel[i+gi+si+ni].name]=v;rowData.push(addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr))}}rowData.push("</tr>");if(ts.p.grouping){var grlen=ts.p.groupingView.groupField.length,grpitem=[];for(var z=0;z<grlen;z++){grpitem.push(rd[ts.p.groupingView.groupField[z]])}grpdata=$(ts).jqGrid("groupingPrepare",rowData,grpitem,grpdata,rd);rowData=[]}if(locdata||ts.p.treeGrid===true){rd[xmlid]=rid;ts.p.data.push(rd);ts.p._index[rid]=ts.p.data.length-1}if(ts.p.gridview===false){$("tbody:first",t).append(rowData.join(""));if(afterInsRow){ts.p.afterInsertRow.call(ts,rid,rd,xmlr)}rowData=[]}rd={};ir++;j++;if(ir==rn){break}}}if(ts.p.gridview===true){fpos=ts.p.treeANode>-1?ts.p.treeANode:0;if(ts.p.grouping){$(ts).jqGrid("groupingRender",grpdata,ts.p.colModel.length);grpdata=null}else{if(ts.p.treeGrid===true&&fpos>0){$(ts.rows[fpos]).after(rowData.join(""))}else{$("tbody:first",t).append(rowData.join(""))}}}if(ts.p.subGrid===true){try{$(ts).jqGrid("addSubGrid",gi+ni)}catch(_){}}ts.p.totaltime=new Date()-startReq;if(ir>0){if(ts.p.records===0){ts.p.records=gl}}rowData=null;if(ts.p.treeGrid===true){try{$(ts).jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}if(!ts.p.treeGrid&&!ts.p.scroll){ts.grid.bDiv.scrollTop=0}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){$(ts).jqGrid("footerData","set",ts.p.userData,true)}if(locdata){ts.p.records=gl;ts.p.lastpage=Math.ceil(gl/rn)}if(!more){ts.updatepager(false,true)}if(locdata){while(ir<gl){xmlr=gxml[ir];rid=getId(xmlr,ir);if(ts.p.xmlReader.repeatitems){if(!F){F=orderedCols(gi+si+ni)}var cells2=$(ts.p.xmlReader.cell,xmlr);$.each(F,function(k){var cell=cells2[this];if(!cell){return false}v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v})}else{for(i=0;i<f.length;i++){v=$(f[i],xmlr).text();rd[ts.p.colModel[i+gi+si+ni].name]=v}}rd[xmlid]=rid;ts.p.data.push(rd);ts.p._index[rid]=ts.p.data.length-1;rd={};ir++}}},addJSONData=function(data,t,rcnt,more,adjust){var startReq=new Date();if(data){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows(t,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return}var dReader,locid="_id_",frd,locdata=(ts.p.datatype!="local"&&ts.p.loadonce)||ts.p.datatype=="jsonstring";if(locdata){ts.p.data=[];ts.p._index={};ts.p.localReader.id=locid}ts.p.reccount=0;if(ts.p.datatype=="local"){dReader=ts.p.localReader;frd="local"}else{dReader=ts.p.jsonReader;frd="json"}var ir=0,v,i,j,f=[],F,cur,gi=0,si=0,ni=0,len,drows,idn,rd={},fpos,idr,rowData=[],cn=(ts.p.altRows===true)?" "+ts.p.altclass:"",cn1,lp;ts.p.page=$.jgrid.getAccessor(data,dReader.page)||0;lp=$.jgrid.getAccessor(data,dReader.total);ts.p.lastpage=lp===undefined?1:lp;ts.p.records=$.jgrid.getAccessor(data,dReader.records)||0;ts.p.userData=$.jgrid.getAccessor(data,dReader.userdata)||{};if(!dReader.repeatitems){F=f=reader(frd)}if(ts.p.keyIndex===false){idn=dReader.id}else{idn=ts.p.keyIndex}if(f.length>0&&!isNaN(idn)){if(ts.p.remapColumns&&ts.p.remapColumns.length){idn=$.inArray(idn,ts.p.remapColumns)}idn=f[idn]}drows=$.jgrid.getAccessor(data,dReader.root);if(!drows){drows=[]}len=drows.length;i=0;var rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?$.jgrid.randId():1,altr;if(adjust){rn*=adjust+1}var afterInsRow=$.isFunction(ts.p.afterInsertRow),grpdata={},hiderow="";if(ts.p.grouping&&ts.p.groupingView.groupCollapse===true){hiderow=' style="display:none;"'}while(i<len){cur=drows[i];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){idr=br+i;if(f.length===0){if(dReader.cell){var ccur=$.jgrid.getAccessor(cur,dReader.cell);idr=ccur[idn]||idr;ccur=null}}}altr=rcnt===1?0:rcnt;cn1=(altr+i)%2==1?cn:"";rowData.push("<tr"+hiderow+' id="'+idr+'" tabindex="-1" role="row" class= "ui-widget-content jqgrow ui-row-'+ts.p.direction+""+cn1+'">');if(ts.p.rownumbers===true){rowData.push(addRowNum(0,i,ts.p.page,ts.p.rowNum));ni=1}if(ts.p.multiselect){rowData.push(addMulti(idr,ni,i));gi=1}if(ts.p.subGrid){rowData.push($(ts).jqGrid("addSubGridCell",gi+ni,i+rcnt));si=1}if(dReader.repeatitems){if(dReader.cell){cur=$.jgrid.getAccessor(cur,dReader.cell)}if(!F){F=orderedCols(gi+si+ni)}}for(j=0;j<F.length;j++){v=$.jgrid.getAccessor(cur,F[j]);rowData.push(addCell(idr,v,j+gi+si+ni,i+rcnt,cur));rd[ts.p.colModel[j+gi+si+ni].name]=v}rowData.push("</tr>");if(ts.p.grouping){var grlen=ts.p.groupingView.groupField.length,grpitem=[];for(var z=0;z<grlen;z++){grpitem.push(rd[ts.p.groupingView.groupField[z]])}grpdata=$(ts).jqGrid("groupingPrepare",rowData,grpitem,grpdata,rd);rowData=[]}if(locdata||ts.p.treeGrid===true){rd[locid]=idr;ts.p.data.push(rd);ts.p._index[idr]=ts.p.data.length-1}if(ts.p.gridview===false){$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first").append(rowData.join(""));if(afterInsRow){ts.p.afterInsertRow.call(ts,idr,rd,cur)}rowData=[]}rd={};ir++;i++;if(ir==rn){break}}if(ts.p.gridview===true){fpos=ts.p.treeANode>-1?ts.p.treeANode:0;if(ts.p.grouping){$(ts).jqGrid("groupingRender",grpdata,ts.p.colModel.length);grpdata=null}else{if(ts.p.treeGrid===true&&fpos>0){$(ts.rows[fpos]).after(rowData.join(""))}else{$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first").append(rowData.join(""))}}}if(ts.p.subGrid===true){try{$(ts).jqGrid("addSubGrid",gi+ni)}catch(_){}}ts.p.totaltime=new Date()-startReq;if(ir>0){if(ts.p.records===0){ts.p.records=len}}rowData=null;if(ts.p.treeGrid===true){try{$(ts).jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}if(!ts.p.treeGrid&&!ts.p.scroll){ts.grid.bDiv.scrollTop=0}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){$(ts).jqGrid("footerData","set",ts.p.userData,true)}if(locdata){ts.p.records=len;ts.p.lastpage=Math.ceil(len/rn)}if(!more){ts.updatepager(false,true)}if(locdata){while(ir<len&&drows[ir]){cur=drows[ir];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){idr=br+ir;if(f.length===0){if(dReader.cell){var ccur2=$.jgrid.getAccessor(cur,dReader.cell);idr=ccur2[idn]||idr;ccur2=null}}}if(cur){if(dReader.repeatitems){if(dReader.cell){cur=$.jgrid.getAccessor(cur,dReader.cell)}if(!F){F=orderedCols(gi+si+ni)}}for(j=0;j<F.length;j++){v=$.jgrid.getAccessor(cur,F[j]);rd[ts.p.colModel[j+gi+si+ni].name]=v}rd[locid]=idr;ts.p.data.push(rd);ts.p._index[idr]=ts.p.data.length-1;rd={}}ir++}}},addLocalData=function(){var st,fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat;if(!$.isArray(ts.p.data)){return}var grpview=ts.p.grouping?ts.p.groupingView:false;$.each(ts.p.colModel,function(i,v){sorttype=this.sorttype||"text";if(sorttype=="date"||sorttype=="datetime"){if(this.formatter&&typeof(this.formatter)==="string"&&this.formatter=="date"){if(this.formatoptions&&this.formatoptions.srcformat){srcformat=this.formatoptions.srcformat}else{srcformat=$.jgrid.formatter.date.srcformat}if(this.formatoptions&&this.formatoptions.newformat){newformat=this.formatoptions.newformat}else{newformat=$.jgrid.formatter.date.newformat}}else{srcformat=newformat=this.datefmt||"Y-m-d"}cmtypes[this.name]={stype:sorttype,srcfmt:srcformat,newfmt:newformat}}else{cmtypes[this.name]={stype:sorttype,srcfmt:"",newfmt:""}}if(ts.p.grouping&&this.name==grpview.groupField[0]){var grindex=this.name;if(typeof this.index!="undefined"){grindex=this.index}grtypes[0]=cmtypes[grindex];grindexes.push(grindex)}if(!fndsort&&(this.index==ts.p.sortname||this.name==ts.p.sortname)){st=this.name;fndsort=true}});if(ts.p.treeGrid){$(ts).jqGrid("SortTree",st,ts.p.sortorder,cmtypes[st].stype,cmtypes[st].srcfmt);return}var compareFnMap={eq:function(queryObj,op){return queryObj.equals},ne:function(queryObj,op){return queryObj.notEquals},lt:function(queryObj,op){return queryObj.less},le:function(queryObj,op){return queryObj.lessOrEquals},gt:function(queryObj,op){return queryObj.greater},ge:function(queryObj,op){return queryObj.greaterOrEquals},cn:function(queryObj,op){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj,op){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj,op){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj,op){return queryObj.equals},nu:function(queryObj,op){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=$.jgrid.from(ts.p.data);if(ts.p.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,opr,rule;if(group.groups!==undefined){for(index=0;index<group.groups.length;index++){try{tojLinq(group.groups[index])}catch(e){alert(e)}s++}}if(group.rules!==undefined){if(s>0){var result=query.select();query=$.jgrid.from(result)}try{for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}query=compareFnMap[rule.op](query,opr)(rule.field,rule.data,cmtypes[rule.field])}s++}}catch(g){alert(g)}}}if(ts.p.search===true){var srules=ts.p.postData.filters;if(srules){if(typeof srules=="string"){srules=$.jgrid.parse(srules)}tojLinq(srules)}else{try{query=compareFnMap[ts.p.postData.searchOper](query)(ts.p.postData.searchField,ts.p.postData.searchString,cmtypes[ts.p.postData.searchField])}catch(se){}}}if(ts.p.grouping){query.orderBy(grindexes,grpview.groupOrder[0],grtypes[0].stype,grtypes[0].srcfmt);grpview.groupDataSorted=true}if(st&&ts.p.sortorder&&fndsort){if(ts.p.sortorder.toUpperCase()=="DESC"){query.orderBy(ts.p.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt)}else{query.orderBy(ts.p.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt)}}var queryResults=query.select(),recordsperpage=parseInt(ts.p.rowNum,10),total=queryResults.length,page=parseInt(ts.p.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};queryResults=queryResults.slice((page-1)*recordsperpage,page*recordsperpage);query=null;cmtypes=null;retresult[ts.p.localReader.total]=totalpages;retresult[ts.p.localReader.page]=page;retresult[ts.p.localReader.records]=total;retresult[ts.p.localReader.root]=queryResults;queryResults=null;return retresult},updatepager=function(rn,dnd){var cp,last,base,from,to,tot,fmt,pgboxes="",sppg,tspg=ts.p.pager?"_"+$.jgrid.jqID(ts.p.pager.substr(1)):"",tspg_t=ts.p.toppager?"_"+ts.p.toppager.substr(1):"";base=parseInt(ts.p.page,10)-1;if(base<0){base=0}base=base*parseInt(ts.p.rowNum,10);to=base+ts.p.reccount;if(ts.p.scroll){var rows=$("tbody:first > tr:gt(0)",ts.grid.bDiv);base=to-rows.length;ts.p.reccount=rows.length;var rh=rows.outerHeight()||ts.grid.prevRowHeight;if(rh){var top=base*rh;var height=parseInt(ts.p.records,10)*rh;$(">div:first",ts.grid.bDiv).css({height:height}).children("div:first").css({height:top,display:top?"":"none"})}ts.grid.bDiv.scrollLeft=ts.grid.hDiv.scrollLeft}pgboxes=ts.p.pager?ts.p.pager:"";pgboxes+=ts.p.toppager?(pgboxes?","+ts.p.toppager:ts.p.toppager):"";if(pgboxes){fmt=$.jgrid.formatter.integer||{};cp=intNum(ts.p.page);last=intNum(ts.p.lastpage);$(".selbox",pgboxes).attr("disabled",false);if(ts.p.pginput===true){$(".ui-pg-input",pgboxes).val(ts.p.page);sppg=ts.p.toppager?"#sp_1"+tspg+",#sp_1"+tspg_t:"#sp_1"+tspg;$(sppg).html($.fmatter?$.fmatter.util.NumberFormat(ts.p.lastpage,fmt):ts.p.lastpage)}if(ts.p.viewrecords){if(ts.p.reccount===0){$(".ui-paging-info",pgboxes).html(ts.p.emptyrecords)}else{from=base+1;tot=ts.p.records;if($.fmatter){from=$.fmatter.util.NumberFormat(from,fmt);to=$.fmatter.util.NumberFormat(to,fmt);tot=$.fmatter.util.NumberFormat(tot,fmt)}$(".ui-paging-info",pgboxes).html($.jgrid.format(ts.p.recordtext,from,to,tot))}}if(ts.p.pgbuttons===true){if(cp<=0){cp=last=0}if(cp==1||cp===0){$("#first"+tspg+", #prev"+tspg).addClass("ui-state-disabled").removeClass("ui-state-hover");if(ts.p.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{$("#first"+tspg+", #prev"+tspg).removeClass("ui-state-disabled");if(ts.p.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).removeClass("ui-state-disabled")}}if(cp==last||cp===0){$("#next"+tspg+", #last"+tspg).addClass("ui-state-disabled").removeClass("ui-state-hover");if(ts.p.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{$("#next"+tspg+", #last"+tspg).removeClass("ui-state-disabled");if(ts.p.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).removeClass("ui-state-disabled")}}}}if(rn===true&&ts.p.rownumbers===true){$("td.jqgrid-rownum",ts.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&ts.p.jqgdnd){$(ts).jqGrid("gridDnD","updateDnD")}if($.isFunction(ts.p.gridComplete)){ts.p.gridComplete.call(ts)}},beginReq=function(){ts.grid.hDiv.loading=true;if(ts.p.hiddengrid){return}switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(ts.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(ts.p.id)).show();$("#load_"+$.jgrid.jqID(ts.p.id)).show();break}},endReq=function(){ts.grid.hDiv.loading=false;switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(ts.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(ts.p.id)).hide();$("#load_"+$.jgrid.jqID(ts.p.id)).hide();break}},populate=function(npage){if(!ts.grid.hDiv.loading){var pvis=ts.p.scroll&&npage===false;var prm={},dt,dstr,pN=ts.p.prmNames;if(ts.p.page<=0){ts.p.page=1}if(pN.search!==null){prm[pN.search]=ts.p.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(pN.rows!==null){prm[pN.rows]=ts.p.rowNum}if(pN.page!==null){prm[pN.page]=ts.p.page}if(pN.sort!==null){prm[pN.sort]=ts.p.sortname}if(pN.order!==null){prm[pN.order]=ts.p.sortorder}if(ts.p.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=ts.p.rowTotal}var lc=ts.p.loadComplete;var lcf=$.isFunction(lc);if(!lcf){lc=null}var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){ts.p.page++;ts.grid.hDiv.loading=false;if(lcf){ts.p.loadComplete.call(ts,req)}populate(npage-1)}}}else{if(pN.npage!==null){delete ts.p.postData[pN.npage]}}if(ts.p.grouping){$(ts).jqGrid("groupingSetup");if(ts.p.groupingView.groupDataSorted===true){prm[pN.sort]=ts.p.groupingView.groupField[0]+" "+ts.p.groupingView.groupOrder[0]+", "+prm[pN.sort]}}$.extend(ts.p.postData,prm);var rcnt=!ts.p.scroll?1:ts.rows.length-1;if($.isFunction(ts.p.datatype)){ts.p.datatype.call(ts,ts.p.postData,"load_"+ts.p.id);return}else{if($.isFunction(ts.p.beforeRequest)){ts.p.beforeRequest.call(ts)}}dt=ts.p.datatype.toLowerCase();switch(dt){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:ts.p.url,type:ts.p.mtype,dataType:dt,data:$.isFunction(ts.p.serializeGridData)?ts.p.serializeGridData.call(ts,ts.p.postData):ts.p.postData,success:function(data,st){if(dt==="xml"){addXmlData(data,ts.grid.bDiv,rcnt,npage>1,adjust)}else{addJSONData(data,ts.grid.bDiv,rcnt,npage>1,adjust)}if(lc){lc.call(ts,data)}if(pvis){ts.grid.populateVisible()}if(ts.p.loadonce||ts.p.treeGrid){ts.p.datatype="local"}data=null;endReq()},error:function(xhr,st,err){if($.isFunction(ts.p.loadError)){ts.p.loadError.call(ts,xhr,st,err)}endReq();xhr=null},beforeSend:function(xhr){beginReq();if($.isFunction(ts.p.loadBeforeSend)){ts.p.loadBeforeSend.call(ts,xhr)}}},$.jgrid.ajaxOptions,ts.p.ajaxGridOptions));break;case"xmlstring":beginReq();dstr=$.jgrid.stringToDoc(ts.p.datastr);addXmlData(dstr,ts.grid.bDiv);if(lcf){ts.p.loadComplete.call(ts,dstr)}ts.p.datatype="local";ts.p.datastr=null;endReq();break;case"jsonstring":beginReq();if(typeof ts.p.datastr=="string"){dstr=$.jgrid.parse(ts.p.datastr)}else{dstr=ts.p.datastr}addJSONData(dstr,ts.grid.bDiv);if(lcf){ts.p.loadComplete.call(ts,dstr)}ts.p.datatype="local";ts.p.datastr=null;endReq();break;case"local":case"clientside":beginReq();ts.p.datatype="local";var req=addLocalData();addJSONData(req,ts.grid.bDiv,rcnt,npage>1,adjust);if(lc){lc.call(ts,req)}if(pvis){ts.grid.populateVisible()}endReq();break}}},setPager=function(pgid,tp){var sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",pginp="",pgl="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",str="",pgcnt,lft,cent,rgt,twd,tdw,i,clearVals=function(onpaging){var ret;if($.isFunction(ts.p.onPaging)){ret=ts.p.onPaging.call(ts,onpaging)}ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false)}ts.p.savedRow=[];if(ret=="stop"){return false}return true};pgid=pgid.substr(1);tp+="_"+pgid;pgcnt="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";$("#"+$.jgrid.jqID(pgid)).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+lft+"' align='left'></td><td id='"+cent+"' align='center' style='white-space:pre;'></td><td id='"+rgt+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(ts.p.rowList.length>0){str="<td dir='"+dir+"'>";str+="<select class='ui-pg-selbox' role='listbox'>";for(i=0;i<ts.p.rowList.length;i++){str+='<option role="option" value="'+ts.p.rowList[i]+'"'+((ts.p.rowNum==ts.p.rowList[i])?' selected="selected"':"")+">"+ts.p.rowList[i]+"</option>"}str+="</select></td>"}if(dir=="rtl"){pgl+=str}if(ts.p.pginput===true){pginp="<td dir='"+dir+"'>"+$.jgrid.format(ts.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"'></span>")+"</td>"}if(ts.p.pgbuttons===true){var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp];if(dir=="rtl"){po.reverse()}pgl+="<td id='"+po[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";pgl+="<td id='"+po[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";pgl+=pginp!==""?sep+pginp+sep:"";pgl+="<td id='"+po[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";pgl+="<td id='"+po[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else{if(pginp!==""){pgl+=pginp}}if(dir=="ltr"){pgl+=str}pgl+="</tr></tbody></table>";if(ts.p.viewrecords===true){$("td#"+pgid+"_"+ts.p.recordpos,"#"+pgcnt).append("<div dir='"+dir+"' style='text-align:"+ts.p.recordpos+"' class='ui-paging-info'></div>")}$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).append(pgl);tdw=$(".ui-jqgrid").css("font-size")||"11px";$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(pgl).clone().appendTo("#testpg").width();$("#testpg").remove();if(twd>0){if(pginp!==""){twd+=50}$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).width(twd)}ts.p._nvtd=[];ts.p._nvtd[0]=twd?Math.floor((ts.p.width-twd)/2):Math.floor(ts.p.width/3);ts.p._nvtd[1]=0;pgl=null;$(".ui-pg-selbox","#"+pgcnt).bind("change",function(){ts.p.page=Math.round(ts.p.rowNum*(ts.p.page-1)/this.value-0.5)+1;ts.p.rowNum=this.value;if(tp){$(".ui-pg-selbox",ts.p.pager).val(this.value)}else{if(ts.p.toppager){$(".ui-pg-selbox",ts.p.toppager).val(this.value)}}if(!clearVals("records")){return false}populate();return false});if(ts.p.pgbuttons===true){$(".ui-pg-button","#"+pgcnt).hover(function(e){if($(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{$(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(e){if($(this).hasClass("ui-state-disabled")){}else{$(this).removeClass("ui-state-hover");this.style.cursor="default"}});$("#first"+$.jgrid.jqID(tp)+", #prev"+$.jgrid.jqID(tp)+", #next"+$.jgrid.jqID(tp)+", #last"+$.jgrid.jqID(tp)).click(function(e){var cp=intNum(ts.p.page,1),last=intNum(ts.p.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp>1&&cp<last){}else{if(cp===last){np=false;lp=false}}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(this.id==="first"+tp&&fp){ts.p.page=1;selclick=true}if(this.id==="prev"+tp&&pp){ts.p.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){ts.p.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){ts.p.page=last;selclick=true}if(selclick){if(!clearVals(this.id)){return false}populate()}return false})}if(ts.p.pginput===true){$("input.ui-pg-input","#"+pgcnt).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13){ts.p.page=($(this).val()>0)?$(this).val():ts.p.page;if(!clearVals("user")){return false}populate();return false}return this})}},sortData=function(index,idxcol,reload,sor){if(!ts.p.colModel[idxcol].sortable){return}var so;if(ts.p.savedRow.length>0){return}if(!reload){if(ts.p.lastsort==idxcol){if(ts.p.sortorder=="asc"){ts.p.sortorder="desc"}else{if(ts.p.sortorder=="desc"){ts.p.sortorder="asc"}}}else{ts.p.sortorder=ts.p.colModel[idxcol].firstsortorder||"asc"}ts.p.page=1}if(sor){if(ts.p.lastsort==idxcol&&ts.p.sortorder==sor&&!reload){return}else{ts.p.sortorder=sor}}var thd=$("thead:first",ts.grid.hDiv).get(0);$("tr th:eq("+ts.p.lastsort+") span.ui-grid-ico-sort",thd).addClass("ui-state-disabled");$("tr th:eq("+ts.p.lastsort+")",thd).attr("aria-selected","false");$("tr th:eq("+idxcol+") span.ui-icon-"+ts.p.sortorder,thd).removeClass("ui-state-disabled");$("tr th:eq("+idxcol+")",thd).attr("aria-selected","true");if(!ts.p.viewsortcols[0]){if(ts.p.lastsort!=idxcol){$("tr th:eq("+ts.p.lastsort+") span.s-ico",thd).hide();$("tr th:eq("+idxcol+") span.s-ico",thd).show()}}index=index.substring(5);ts.p.sortname=ts.p.colModel[idxcol].index||index;so=ts.p.sortorder;if($.isFunction(ts.p.onSortCol)){if(ts.p.onSortCol.call(ts,index,idxcol,so)=="stop"){ts.p.lastsort=idxcol;return}}if(ts.p.datatype=="local"){if(ts.p.deselectAfterSort){$(ts).jqGrid("resetSelection")}}else{ts.p.selrow=null;if(ts.p.multiselect){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false)}ts.p.selarrrow=[];ts.p.savedRow=[]}if(ts.p.scroll){var sscroll=ts.grid.bDiv.scrollLeft;emptyRows(ts.grid.bDiv,true,false);ts.grid.hDiv.scrollLeft=sscroll}if(ts.p.subGrid&&ts.p.datatype=="local"){$("td.sgexpanded","#"+$.jgrid.jqID(ts.p.id)).each(function(){$(this).trigger("click")})}populate();ts.p.lastsort=idxcol;if(ts.p.sortname!=index&&idxcol){ts.p.lastsort=idxcol}},setColWidth=function(){var initwidth=0,brd=isSafari?0:ts.p.cellLayout,vc=0,lvc,scw=ts.p.scrollOffset,cw,hs=false,aw,gw=0,cl=0,cr;$.each(ts.p.colModel,function(i){if(typeof this.hidden==="undefined"){this.hidden=false}this.widthOrg=cw=intNum(this.width,0);if(this.hidden===false){initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}cl++}});if(isNaN(ts.p.width)){ts.p.width=grid.width=initwidth}else{grid.width=ts.p.width}ts.p.tblwidth=initwidth;if(ts.p.shrinkToFit===false&&ts.p.forceFit===true){ts.p.forceFit=false}if(ts.p.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(isNaN(ts.p.height)){}else{aw-=scw;hs=true}initwidth=0;$.each(ts.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=Math.round(aw*this.width/(ts.p.tblwidth-brd*vc-gw));this.width=cw;initwidth+=cw;lvc=i}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw}}else{if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc)}}ts.p.colModel[lvc].width+=cr;ts.p.tblwidth=initwidth+cr+brd*vc+gw;if(ts.p.tblwidth>ts.p.width){ts.p.colModel[lvc].width-=(ts.p.tblwidth-parseInt(ts.p.width,10));ts.p.tblwidth=ts.p.width}}},nextVisible=function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].hidden!==true){j=i;break}}return j-ret},getOffset=function(iCol){var i,ret={},brd1=isSafari?0:ts.p.cellLayout;ret[0]=ret[1]=ret[2]=0;for(i=0;i<=iCol;i++){if(ts.p.colModel[i].hidden===false){ret[0]+=ts.p.colModel[i].width+brd1}}if(ts.p.direction=="rtl"){ret[0]=ts.p.width-ret[0]}ret[0]=ret[0]-ts.grid.bDiv.scrollLeft;if($(ts.grid.cDiv).is(":visible")){ret[1]+=$(ts.grid.cDiv).height()+parseInt($(ts.grid.cDiv).css("padding-top"),10)+parseInt($(ts.grid.cDiv).css("padding-bottom"),10)}if(ts.p.toolbar[0]===true&&(ts.p.toolbar[1]=="top"||ts.p.toolbar[1]=="both")){ret[1]+=$(ts.grid.uDiv).height()+parseInt($(ts.grid.uDiv).css("border-top-width"),10)+parseInt($(ts.grid.uDiv).css("border-bottom-width"),10)}if(ts.p.toppager){ret[1]+=$(ts.grid.topDiv).height()+parseInt($(ts.grid.topDiv).css("border-bottom-width"),10)}ret[2]+=$(ts.grid.bDiv).height()+$(ts.grid.hDiv).height();return ret};this.p.id=this.id;if($.inArray(ts.p.multikey,sortkeys)==-1){ts.p.multikey=false}ts.p.keyIndex=false;for(i=0;i<ts.p.colModel.length;i++){ts.p.colModel[i]=$.extend(true,{},ts.p.cmTemplate,ts.p.colModel[i].template||{},ts.p.colModel[i]);if(ts.p.keyIndex===false&&ts.p.colModel[i].key===true){ts.p.keyIndex=i}}ts.p.sortorder=ts.p.sortorder.toLowerCase();if(ts.p.grouping===true){ts.p.scroll=false;ts.p.rownumbers=false;ts.p.subGrid=false;ts.p.treeGrid=false;ts.p.gridview=true}if(this.p.treeGrid===true){try{$(this).jqGrid("setTreeGrid")}catch(_){}if(ts.p.datatype!="local"){ts.p.localReader={id:"_id_"}}}if(this.p.subGrid){try{$(ts).jqGrid("setSubGrid")}catch(s){}}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:isSafari?ts.p.multiselectWidth+ts.p.cellLayout:ts.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:ts.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}ts.p.xmlReader=$.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},ts.p.xmlReader);ts.p.jsonReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.jsonReader);ts.p.localReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.localReader);if(ts.p.scroll){ts.p.pgbuttons=false;ts.p.pginput=false;ts.p.rowList=[]}if(ts.p.data.length){refreshIndex()}var thead="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",tdc,idn,w,res,sort,td,ptr,tbody,imgs,iac="",idc="";if(ts.p.shrinkToFit===true&&ts.p.forceFit===true){for(i=ts.p.colModel.length-1;i>=0;i--){if(!ts.p.colModel[i].hidden){ts.p.colModel[i].resizable=false;break}}}if(ts.p.viewsortcols[1]=="horizontal"){iac=" ui-i-asc";idc=" ui-i-desc"}tdc=isMSIE?"class='ui-th-div-ie'":"";imgs="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+dir+"'></span>";imgs+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+dir+"'></span></span>";for(i=0;i<this.p.colNames.length;i++){var tooltip=ts.p.headertitles?(' title="'+$.jgrid.stripHtml(ts.p.colNames[i])+'"'):"";thead+="<th id='"+ts.p.id+"_"+ts.p.colModel[i].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+dir+"'"+tooltip+">";idn=ts.p.colModel[i].index||ts.p.colModel[i].name;thead+="<div id='jqgh_"+ts.p.id+"_"+ts.p.colModel[i].name+"' "+tdc+">"+ts.p.colNames[i];if(!ts.p.colModel[i].width){ts.p.colModel[i].width=150}else{ts.p.colModel[i].width=parseInt(ts.p.colModel[i].width,10)}if(typeof(ts.p.colModel[i].title)!=="boolean"){ts.p.colModel[i].title=true}if(idn==ts.p.sortname){ts.p.lastsort=i}thead+=imgs+"</div></th>"}thead+="</tr></thead>";imgs=null;$(this).append(thead);$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});if(this.p.multiselect){var emp=[],chk;$("#cb_"+$.jgrid.jqID(ts.p.id),this).bind("click",function(){ts.p.selarrrow=[];if(this.checked){$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass("ui-state-disabled")){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id)).attr("checked","checked");$(this).addClass("ui-state-highlight").attr("aria-selected","true");ts.p.selarrrow.push(this.id);ts.p.selrow=this.id}}});chk=true;emp=[]}else{$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("subgrid")&&!$(this).hasClass("ui-state-disabled")){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id)).removeAttr("checked");$(this).removeClass("ui-state-highlight").attr("aria-selected","false");emp.push(this.id)}}});ts.p.selrow=null;chk=false}if($.isFunction(ts.p.onSelectAll)){ts.p.onSelectAll.call(ts,chk?ts.p.selarrrow:emp,chk)}})}if(ts.p.autowidth===true){var pw=$(eg).innerWidth();ts.p.width=pw>0?pw:"nw"}setColWidth();$(eg).css("width",grid.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ts.p.id+"'>&#160;</div>");$(gv).css("width",grid.width+"px");thead=$("thead:first",ts).get(0);var tfoot="";if(ts.p.footerrow){tfoot+="<table role='grid' style='width:"+ts.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+dir+"'>"}var thr=$("tr:first",thead),firstr="<tr class='jqgfirstrow' role='row' style='height:auto'>";ts.p.disableClick=false;$("th",thr).each(function(j){w=ts.p.colModel[j].width;if(typeof ts.p.colModel[j].resizable==="undefined"){ts.p.colModel[j].resizable=true}if(ts.p.colModel[j].resizable){res=document.createElement("span");$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir);if(!$.browser.opera){$(res).css("cursor","col-resize")}$(this).addClass(ts.p.resizeclass)}else{res=""}$(this).css("width",w+"px").prepend(res);var hdcol="";if(ts.p.colModel[j].hidden){$(this).css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0px;width:"+w+"px;"+hdcol+"'></td>";grid.headers[j]={width:w,el:this};sort=ts.p.colModel[j].sortable;if(typeof sort!=="boolean"){ts.p.colModel[j].sortable=true;sort=true}var nm=ts.p.colModel[j].name;if(!(nm=="cb"||nm=="subgrid"||nm=="rn")){if(ts.p.viewsortcols[2]){$("div",this).addClass("ui-jqgrid-sortable")}}if(sort){if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(j==ts.p.lastsort){$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled")}}else{if(j==ts.p.lastsort){$("div span.s-ico",this).show();$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled")}}}if(ts.p.footerrow){tfoot+="<td role='gridcell' "+formatCol(j,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!=1){return}var ci=$.jgrid.getCellIndex(this);if(ts.p.forceFit===true){ts.p.nv=nextVisible(ci)}grid.dragStart(ci,e,getOffset(ci));return false}).click(function(e){if(ts.p.disableClick){ts.p.disableClick=false;return false}var s="th>div.ui-jqgrid-sortable",r,d;if(!ts.p.viewsortcols[2]){s="th>div>span>span.ui-grid-ico-sort"}var t=$(e.target).closest(s);if(t.length!=1){return}var ci=$.jgrid.getCellIndex(this);if(!ts.p.viewsortcols[2]){r=true;d=t.attr("sort")}sortData($("div",this)[0].id,ci,r,d);return false});if(ts.p.sortable&&$.fn.sortable){try{$(ts).jqGrid("sortableColumns",thr)}catch(e){}}if(ts.p.footerrow){tfoot+="</tr></tbody></table>"}firstr+="</tr>";tbody=document.createElement("tbody");this.appendChild(tbody);$(this).addClass("ui-jqgrid-btable").append(firstr);firstr=null;var hTable=$("<table class='ui-jqgrid-htable' style='width:"+ts.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(thead),hg=(ts.p.caption&&ts.p.hiddengrid===true)?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir=="rtl"?"-rtl":"")+"'></div>");thead=null;grid.hDiv=document.createElement("div");$(grid.hDiv).css({width:grid.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(hb);$(hb).append(hTable);hTable=null;if(hg){$(grid.hDiv).hide()}if(ts.p.pager){if(typeof ts.p.pager=="string"){if(ts.p.pager.substr(0,1)!="#"){ts.p.pager="#"+ts.p.pager}}else{ts.p.pager="#"+$(ts.p.pager).attr("id")}$(ts.p.pager).css({width:grid.width+"px"}).appendTo(eg).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");if(hg){$(ts.p.pager).hide()}setPager(ts.p.pager,"")}if(ts.p.cellEdit===false&&ts.p.hoverrows===true){$(ts).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="subgrid"){$(ptr).addClass("ui-state-hover")}return false}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass("ui-state-hover");return false})}var ri,ci;$(ts).before(grid.hDiv).click(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0||ptr[0].className.indexOf("ui-state-disabled")>-1){return this}var scb=$(td).hasClass("cbox"),cSel=true;if($.isFunction(ts.p.beforeSelectRow)){cSel=ts.p.beforeSelectRow.call(ts,ptr[0].id,e)}if(td.tagName=="A"||((td.tagName=="INPUT"||td.tagName=="TEXTAREA"||td.tagName=="OPTION"||td.tagName=="SELECT")&&!scb)){return this}if(cSel===true){if(ts.p.cellEdit===true){if(ts.p.multiselect&&scb){$(ts).jqGrid("setSelection",ptr[0].id,true)}else{ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);try{$(ts).jqGrid("editCell",ri,ci,true)}catch(_){}}}else{if(!ts.p.multikey){if(ts.p.multiselect&&ts.p.multiboxonly){if(scb){$(ts).jqGrid("setSelection",ptr[0].id,true)}else{$(ts.p.selarrrow).each(function(i,n){var ind=ts.rows.namedItem(n);$(ind).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n)).attr("checked",false)});ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false);$(ts).jqGrid("setSelection",ptr[0].id,true)}}else{$(ts).jqGrid("setSelection",ptr[0].id,true)}}else{if(e[ts.p.multikey]){$(ts).jqGrid("setSelection",ptr[0].id,true)}else{if(ts.p.multiselect&&scb){scb=$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ptr[0].id).attr("checked");$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ptr[0].id).attr("checked",!scb)}}}}if($.isFunction(ts.p.onCellSelect)){ri=ptr[0].id;ci=$.jgrid.getCellIndex(td);ts.p.onCellSelect.call(ts,ri,ci,$(td).html(),e)}}return this}).bind("reloadGrid",function(e,opts){if(ts.p.treeGrid===true){ts.p.datatype=ts.p.treedatatype}if(opts&&opts.current){ts.grid.selectionPreserver(ts)}if(ts.p.datatype=="local"){$(ts).jqGrid("resetSelection");if(ts.p.data.length){refreshIndex()}}else{if(!ts.p.treeGrid){ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv).attr("checked",false)}ts.p.savedRow=[]}}if(ts.p.scroll){emptyRows(ts.grid.bDiv,true,false)}if(opts&&opts.page){var page=opts.page;if(page>ts.p.lastpage){page=ts.p.lastpage}if(page<1){page=1}ts.p.page=page;if(ts.grid.prevRowHeight){ts.grid.bDiv.scrollTop=(page-1)*ts.grid.prevRowHeight*ts.p.rowNum}else{ts.grid.bDiv.scrollTop=0}}if(ts.grid.prevRowHeight&&ts.p.scroll){delete ts.p.lastpage;ts.grid.populateVisible()}else{ts.grid.populate()}return false});if($.isFunction(this.p.ondblClickRow)){$(this).dblclick(function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return false}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);ts.p.ondblClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);return false})}if($.isFunction(this.p.onRightClickRow)){$(this).bind("contextmenu",function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return false}if(!ts.p.multiselect){$(ts).jqGrid("setSelection",ptr[0].id,true)}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);ts.p.onRightClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);return false})}grid.bDiv=document.createElement("div");if(isMSIE){if(String(ts.p.height).toLowerCase()==="auto"){ts.p.height="100%"}}$(grid.bDiv).append($('<div style="position:relative;'+(isMSIE&&$.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:ts.p.height+(isNaN(ts.p.height)?"":"px"),width:(grid.width)+"px"}).scroll(grid.scrollGrid);$("table:first",grid.bDiv).css({width:ts.p.tblwidth+"px"});if(isMSIE){if($("tbody",this).size()==2){$("tbody:gt(0)",this).remove()}if(ts.p.multikey){$(grid.bDiv).bind("selectstart",function(){return false})}}else{if(ts.p.multikey){$(grid.bDiv).bind("mousedown",function(){return false})}}if(hg){$(grid.bDiv).hide()}grid.cDiv=document.createElement("div");var arf=ts.p.hidegrid===true?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){arf.addClass("ui-state-hover")},function(){arf.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css((dir=="rtl"?"left":"right"),"0px"):"";$(grid.cDiv).append(arf).append("<span class='ui-jqgrid-title"+(dir=="rtl"?"-rtl":"")+"'>"+ts.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");$(grid.cDiv).insertBefore(grid.hDiv);if(ts.p.toolbar[0]){grid.uDiv=document.createElement("div");if(ts.p.toolbar[1]=="top"){$(grid.uDiv).insertBefore(grid.hDiv)}else{if(ts.p.toolbar[1]=="bottom"){$(grid.uDiv).insertAfter(grid.hDiv)}}if(ts.p.toolbar[1]=="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).insertBefore(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);$(grid.ubDiv).insertAfter(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);if(hg){$(grid.ubDiv).hide()}}else{$(grid.uDiv).width(grid.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id)}if(hg){$(grid.uDiv).hide()}}if(ts.p.toppager){ts.p.toppager=$.jgrid.jqID(ts.p.id)+"_toppager";grid.topDiv=$("<div id='"+ts.p.toppager+"'></div>")[0];ts.p.toppager="#"+ts.p.toppager;$(grid.topDiv).insertBefore(grid.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(grid.width);setPager(ts.p.toppager,"_t")}if(ts.p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir=="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).insertAfter(grid.hDiv).width(grid.width);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(ts.p.rownumbers){grid.footers[0].className="ui-state-default jqgrid-rownum"}if(hg){$(grid.sDiv).hide()}}hb=null;if(ts.p.caption){var tdt=ts.p.datatype;if(ts.p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var onHdCl=$.isFunction(ts.p.onHeaderClick),elems=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",counter,self=this;if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]=="both"){elems+=", #"+$(grid.ubDiv).attr("id")}elems+=", #"+$(grid.uDiv).attr("id")}counter=$(elems,"#gview_"+$.jgrid.jqID(ts.p.id)).length;if(ts.p.gridstate=="visible"){$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideUp("fast",function(){counter--;if(counter===0){$("span",self).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");ts.p.gridstate="hidden";if($("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).hide()}if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}})}else{if(ts.p.gridstate=="hidden"){$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideDown("fast",function(){counter--;if(counter===0){$("span",self).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(hg){ts.p.datatype=tdt;populate();hg=false}ts.p.gridstate="visible";if($("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).show()}if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}})}}return false});if(hg){ts.p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")}}}else{$(grid.cDiv).hide()}$(grid.hDiv).after(grid.bDiv).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return false});$(document).mouseup(function(e){if(grid.resizing){grid.dragEnd();return false}return true});ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.refreshIndex=refreshIndex;ts.formatter=function(rowId,cellval,colpos,rwdat,act){return formatter(rowId,cellval,colpos,rwdat,act)};$.extend(grid,{populate:populate,emptyRows:emptyRows});this.grid=grid;ts.addXmlData=function(d){addXmlData(d,ts.grid.bDiv)};ts.addJSONData=function(d){addJSONData(d,ts.grid.bDiv)};this.grid.cols=this.rows[0].cells;populate();ts.p.hiddengrid=false;$(window).unload(function(){ts=null})})};$.jgrid.extend({getGridParam:function(pName){var $t=this[0];if(!$t||!$t.grid){return}if(!pName){return $t.p}else{return typeof($t.p[pName])!="undefined"?$t.p[pName]:null}},setGridParam:function(newParams){return this.each(function(){if(this.grid&&typeof(newParams)==="object"){$.extend(true,this.p,newParams)}})},getDataIDs:function(){var ids=[],i=0,len,j=0;this.each(function(){len=this.rows.length;if(len&&len>0){while(i<len){if($(this.rows[i]).hasClass("jqgrow")){ids[j]=this.rows[i].id;j++}i++}}});return ids},setSelection:function(selection,onsr){return this.each(function(){var $t=this,stat,pt,ner,ia,tpsr;if(selection===undefined){return}onsr=onsr===false?false:true;pt=$t.rows.namedItem(selection+"");if(!pt||pt.className.indexOf("ui-state-disabled")>-1){return}function scrGrid(iR){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,rpos=$t.rows[iR].offsetTop,rh=$t.rows[iR].clientHeight;if(rpos+rh>=ch+st){$($t.grid.bDiv)[0].scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){$($t.grid.bDiv)[0].scrollTop=rpos}}}}if($t.p.scrollrows===true){ner=$t.rows.namedItem(selection).rowIndex;if(ner>=0){scrGrid(ner)}}if(!$t.p.multiselect){if(pt.className!=="ui-subgrid"){if($t.p.selrow!=pt.id){$($t.rows.namedItem($t.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});$(pt).addClass("ui-state-highlight").attr({"aria-selected":true,tabindex:"0"});stat=true}else{stat=false}$t.p.selrow=pt.id;if($t.p.onSelectRow&&onsr){$t.p.onSelectRow.call($t,pt.id,stat)}}}else{$t.p.selrow=pt.id;ia=$.inArray($t.p.selrow,$t.p.selarrrow);if(ia===-1){if(pt.className!=="ui-subgrid"){$(pt).addClass("ui-state-highlight").attr("aria-selected","true")}stat=true;$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID($t.p.selrow)).attr("checked",stat);$t.p.selarrrow.push($t.p.selrow)}else{if(pt.className!=="ui-subgrid"){$(pt).removeClass("ui-state-highlight").attr("aria-selected","false")}stat=false;$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID($t.p.selrow)).attr("checked",stat);$t.p.selarrrow.splice(ia,1);tpsr=$t.p.selarrrow[0];$t.p.selrow=(tpsr===undefined)?null:tpsr}if($t.p.onSelectRow&&onsr){$t.p.onSelectRow.call($t,pt.id,stat)}}})},resetSelection:function(rowid){return this.each(function(){var t=this,ind,sr;if(typeof(rowid)!=="undefined"){sr=rowid===t.p.selrow?t.p.selrow:rowid;$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(sr)).removeClass("ui-state-highlight").attr("aria-selected","false");if(t.p.multiselect){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr)).attr("checked",false);$("#cb_"+$.jgrid.jqID(t.p.id)).attr("checked",false)}sr=null}else{if(!t.p.multiselect){if(t.p.selrow){$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");t.p.selrow=null}}else{$(t.p.selarrrow).each(function(i,n){ind=t.rows.namedItem(n);$(ind).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n)).attr("checked",false)});$("#cb_"+$.jgrid.jqID(t.p.id)).attr("checked",false);t.p.selarrrow=[]}}t.p.savedRow=[]})},getRowData:function(rowid){var res={},resall,getall=false,len,j=0;this.each(function(){var $t=this,nm,ind;if(typeof(rowid)=="undefined"){getall=true;resall=[];len=$t.rows.length}else{ind=$t.rows.namedItem(rowid);if(!ind){return res}len=2}while(j<len){if(getall){ind=$t.rows[j]}if($(ind).hasClass("jqgrow")){$("td",ind).each(function(i){nm=$t.p.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if($t.p.treeGrid===true&&nm==$t.p.ExpandColumn){res[nm]=$.jgrid.htmlDecode($("span:first",this).html())}else{try{res[nm]=$.unformat(this,{rowId:ind.id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}});if(getall){resall.push(res);res={}}}j++}});return resall?resall:res},delRowData:function(rowid){var success=false,rowInd,ia,ri;this.each(function(){var $t=this;rowInd=$t.rows.namedItem(rowid);if(!rowInd){return false}else{ri=rowInd.rowIndex;$(rowInd).remove();$t.p.records--;$t.p.reccount--;$t.updatepager(true,false);success=true;if($t.p.multiselect){ia=$.inArray(rowid,$t.p.selarrrow);if(ia!=-1){$t.p.selarrrow.splice(ia,1)}}if(rowid==$t.p.selrow){$t.p.selrow=null}}if($t.p.datatype=="local"){var pos=$t.p._index[rowid];if(typeof(pos)!="undefined"){$t.p.data.splice(pos,1);$t.refreshIndex()}}if($t.p.altRows===true&&success){var cn=$t.p.altclass;$($t.rows).each(function(i){if(i%2==1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}});return success},setRowData:function(rowid,data,cssp){var nm,success=true,title;this.each(function(){if(!this.grid){return false}var t=this,vl,ind,cp=typeof cssp,lcdata={};ind=t.rows.namedItem(rowid);if(!ind){return false}if(data){try{$(this.p.colModel).each(function(i){nm=this.name;if(data[nm]!==undefined){lcdata[nm]=this.formatter&&typeof(this.formatter)==="string"&&this.formatter=="date"?$.unformat.date(data[nm],this):data[nm];vl=t.formatter(rowid,data[nm],i,data,"edit");title=this.title?{title:$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm==t.p.ExpandColumn){$("td:eq("+i+") > span:first",ind).html(vl).attr(title)}else{$("td:eq("+i+")",ind).html(vl).attr(title)}}});if(t.p.datatype=="local"){var pos=t.p._index[rowid];if(t.p.treeGrid){for(var key in t.p.treeReader){if(lcdata.hasOwnProperty(t.p.treeReader[key])){delete lcdata[t.p.treeReader[key]]}}}if(typeof(pos)!="undefined"){t.p.data[pos]=$.extend(true,t.p.data[pos],lcdata)}lcdata=null}}catch(e){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cp==="object"){$(ind).css(cssp)}}}});return success},addRowData:function(rowid,rdata,pos,src){var elemID=$(this).attr("id");if(!pos){pos="last"}var success=false,nm,row,gi,si,ni,sind,i,v,prp="",aradd,cnm,cn,data,cm;if(rdata){if($.isArray(rdata)){aradd=true;pos="last";cnm=rowid}else{rdata=[rdata];aradd=false}this.each(function(){var t=this,datalen=rdata.length;ni=t.p.rownumbers===true?1:0;gi=t.p.multiselect===true?1:0;si=t.p.subGrid===true?1:0;if(!aradd){if(typeof(rowid)!="undefined"){rowid=rowid+""}else{rowid=$.jgrid.randId();if(t.p.keyIndex!==false){cnm=t.p.colModel[t.p.keyIndex+gi+si+ni].name;if(typeof rdata[0][cnm]!="undefined"){rowid=rdata[0][cnm]}}}}cn=t.p.altclass;var k=0,cna="",lcdata={},air=$.isFunction(t.p.afterInsertRow)?true:false;while(k<datalen){data=rdata[k];row="";if(aradd){try{rowid=data[cnm]}catch(e){rowid=$.jgrid.randId()}cna=t.p.altRows===true?(t.rows.length-1)%2===0?cn:"":""}if(ni){prp=t.formatCol(0,1,"",null,rowid,true);row+='<td role="gridcell" aria-describedby="'+t.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+prp+">0</td>"}if(gi){v='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+rowid+'" class="cbox"/>';prp=t.formatCol(ni,1,"",null,rowid,true);row+='<td role="gridcell" aria-describedby="'+t.p.id+'_cb" '+prp+">"+v+"</td>"}if(si){row+=$(t).jqGrid("addSubGridCell",gi+ni,1)}for(i=gi+si+ni;i<t.p.colModel.length;i++){cm=t.p.colModel[i];nm=cm.name;lcdata[nm]=cm.formatter&&typeof(cm.formatter)==="string"&&cm.formatter=="date"?$.unformat.date(data[nm],cm):data[nm];if(cm.edittype=="fileupload"){var el=document.createElement("div");el.innerHTML="<div>"+data[cm.name].length+"</div>";var ctlID=rowid+"_"+cm.name;var fileupload=new WellFileUpload(ctlID);fileupload.init(false,$($(el).find("div")[0]),false,true,data[cm.name]);v=$(el).html();$(el).remove()}else{v=t.formatter(rowid,$.jgrid.getAccessor(data,nm),i,data,"edit")}prp=t.formatCol(i,1,v,rowid,data,true);row+='<td role="gridcell" aria-describedby="'+t.p.id+"_"+nm+'" '+prp+">"+v+"</td>"}row='<tr id="'+rowid+'" role="row" tabindex="-1" class="ui-widget-content jqgrow ui-row-'+t.p.direction+" "+cna+'">'+row+"</tr>";if(t.rows.length===0){$("table:first",t.grid.bDiv).append(row)}else{switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row);sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row);sind=1;break;case"after":sind=t.rows.namedItem(src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("ui-subgrid")){$(t.rows[sind.rowIndex+1]).after(row)}else{$(sind).after(row)}}sind++;break;case"before":sind=t.rows.namedItem(src);if(sind){$(sind).before(row);sind=sind.rowIndex}sind--;break}}if(t.p.subGrid===true){$(t).jqGrid("addSubGrid",gi+ni,sind)}t.p.records++;t.p.reccount++;if(air){t.p.afterInsertRow.call(t,rowid,data,data)}k++;if(t.p.datatype=="local"){lcdata[t.p.localReader.id]=rowid;t.p._index[rowid]=t.p.data.length;t.p.data.push(lcdata);lcdata={}}}if(t.p.altRows===true&&!aradd){if(pos=="last"){if((t.rows.length-1)%2==1){$(t.rows[t.rows.length-1]).addClass(cn)}}else{$(t.rows).each(function(i){if(i%2==1){$(this).addClass(cn)}else{$(this).removeClass(cn)}})}}t.updatepager(true,true);success=true})}return success},footerData:function(action,data,format){var nm,success=false,res={},title;function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i)){return false}}return true}if(typeof(action)=="undefined"){action="get"}if(typeof(format)!="boolean"){format=true}action=action.toLowerCase();this.each(function(){var t=this,vl;if(!t.grid||!t.p.footerrow){return false}if(action=="set"){if(isEmpty(data)){return false}}success=true;$(this.p.colModel).each(function(i){nm=this.name;if(action=="set"){if(data[nm]!==undefined){vl=format?t.formatter("",data[nm],i,data,"edit"):data[nm];title=this.title?{title:$.jgrid.stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true}}else{if(action=="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html()}}})});return action=="get"?res:success},showHideCol:function(colname,show){return this.each(function(){var $t=this,fndh=false,brd=$.browser.webkit||$.browser.safari?0:$t.p.cellLayout,cw;if(!$t.grid){return}if(typeof colname==="string"){colname=[colname]}show=show!="none"?"":"none";var sw=show===""?true:false;$(this.p.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){$("tr",$t.grid.hDiv).each(function(){$(this).children("th:eq("+i+")").css("display",show)});$($t.rows).each(function(j){$(this).children("td:eq("+i+")").css("display",show)});if($t.p.footerrow){$("tr.footrow td:eq("+i+")",$t.grid.sDiv).css("display",show)}cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);if(show==="none"){$t.p.tblwidth-=cw+brd}else{$t.p.tblwidth+=cw+brd}this.hidden=!sw;fndh=true}});if(fndh===true){if($t.p.shrinkToFit===false){$($t).jqGrid("setGridWidth",$t.grid.width)}else{if($t.grid.width!==$t.p.tblwidth){$($t).jqGrid("setGridWidth",$t.p.tblwidth)}}}})},hideCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"none")})},showCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"")})},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;if(a.length){ac=$.makeArray(a)}else{ac=$.extend({},a)}$.each(permutation,function(i){a[i]=ac[this]})}var ts=this.get(0);function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e)}})})}resortArray(ts.p.colModel);resortArray(ts.p.colNames);resortArray(ts.grid.headers);resortRows($("thead:first",ts.grid.hDiv),keepHeader&&":not(.ui-jqgrid-labels)");if(updateCells){resortRows($("#"+$.jgrid.jqID(ts.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(ts.p.footerrow){resortRows($("tbody:first",ts.grid.sDiv))}if(ts.p.remapColumns){if(!ts.p.remapColumns.length){ts.p.remapColumns=$.makeArray(permutation)}else{resortArray(ts.p.remapColumns)}}ts.p.lastsort=$.inArray(ts.p.lastsort,permutation);if(ts.p.treeGrid){ts.p.expColInd=$.inArray(ts.p.expColInd,permutation)}},setGridWidth:function(nwidth,shrink){return this.each(function(){if(!this.grid){return}var $t=this,cw,initwidth=0,brd=$.browser.webkit||$.browser.safari?0:$t.p.cellLayout,lvc,vc=0,hs=false,scw=$t.p.scrollOffset,aw,gw=0,cl=0,cr;if(typeof shrink!="boolean"){shrink=$t.p.shrinkToFit}if(isNaN(nwidth)){return}else{nwidth=parseInt(nwidth,10);$t.grid.width=$t.p.width=nwidth}$("#gbox_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px");$("#gview_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px");$($t.grid.bDiv).css("width",nwidth+"px");$($t.grid.hDiv).css("width",nwidth+"px");if($t.p.pager){$($t.p.pager).css("width",nwidth+"px")}if($t.p.toppager){$($t.p.toppager).css("width",nwidth+"px")}if($t.p.toolbar[0]===true){$($t.grid.uDiv).css("width",nwidth+"px");if($t.p.toolbar[1]=="both"){$($t.grid.ubDiv).css("width",nwidth+"px")}}if($t.p.footerrow){$($t.grid.sDiv).css("width",nwidth+"px")}if(shrink===false&&$t.p.forceFit===true){$t.p.forceFit=false}if(shrink===true){$.each($t.p.colModel,function(i){if(this.hidden===false){cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}cl++}});if(vc===0){return}$t.p.tblwidth=initwidth;aw=nwidth-brd*vc-gw;if(!isNaN($t.p.height)){if($($t.grid.bDiv)[0].clientHeight<$($t.grid.bDiv)[0].scrollHeight||$t.rows.length===1){hs=true;aw-=scw}}initwidth=0;var cle=$t.grid.cols.length>0;$.each($t.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=this.widthOrg?this.widthOrg:parseInt(this.width,10);cw=Math.round(aw*cw/($t.p.tblwidth-brd*vc-gw));if(cw<0){return}this.width=cw;initwidth+=cw;$t.grid.headers[i].width=cw;$t.grid.headers[i].el.style.width=cw+"px";if($t.p.footerrow){$t.grid.footers[i].style.width=cw+"px"}if(cle){$t.grid.cols[i].style.width=cw+"px"}lvc=i}});cr=0;if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw}}else{if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc)}}$t.p.colModel[lvc].width+=cr;$t.p.tblwidth=initwidth+cr+brd*vc+gw;if($t.p.tblwidth>nwidth){var delta=$t.p.tblwidth-parseInt(nwidth,10);$t.p.tblwidth=nwidth;cw=$t.p.colModel[lvc].width=$t.p.colModel[lvc].width-delta}else{cw=$t.p.colModel[lvc].width}$t.grid.headers[lvc].width=cw;$t.grid.headers[lvc].el.style.width=cw+"px";if(cle){$t.grid.cols[lvc].style.width=cw+"px"}if($t.p.footerrow){$t.grid.footers[lvc].style.width=cw+"px"}}if($t.p.tblwidth){$("table:first",$t.grid.bDiv).css("width",$t.p.tblwidth+"px");$("table:first",$t.grid.hDiv).css("width",$t.p.tblwidth+"px");$t.grid.hDiv.scrollLeft=$t.grid.bDiv.scrollLeft;if($t.p.footerrow){$("table:first",$t.grid.sDiv).css("width",$t.p.tblwidth+"px")}}})},setGridHeight:function(nh){return this.each(function(){var $t=this;if(!$t.grid){return}$($t.grid.bDiv).css({height:nh+(isNaN(nh)?"":"px")});$t.p.height=nh;if($t.p.scroll){$t.grid.populateVisible()}})},setCaption:function(newcap){return this.each(function(){this.p.caption=newcap;$("span.ui-jqgrid-title",this.grid.cDiv).html(newcap);$(this.grid.cDiv).show()})},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(typeof(colname)!="undefined"){$($t.p.colModel).each(function(i){if(this.name==colname){pos=i;return false}})}else{return}if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);$t.p.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}})},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){return this.each(function(){var $t=this,pos=-1,v,title;if(!$t.grid){return}if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name==colname){pos=i;return false}})}else{pos=parseInt(colname,10)}if(pos>=0){var ind=$t.rows.namedItem(rowid);if(ind){var tcell=$("td:eq("+pos+")",ind);if(nData!==""||forceupd===true){v=$t.formatter(rowid,nData,pos,ind,"edit");title=$t.p.colModel[pos].title?{title:$.jgrid.stripHtml(v)}:{};if($t.p.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title)}else{$(tcell).html(v).attr(title)}if($t.p.datatype=="local"){var cm=$t.p.colModel[pos],index;nData=cm.formatter&&typeof(cm.formatter)==="string"&&cm.formatter=="date"?$.unformat.date(nData,cm):nData;index=$t.p._index[rowid];if(typeof index!="undefined"){$t.p.data[index][cm.name]=nData}}}if(typeof cssp==="string"){$(tcell).addClass(cssp)}else{if(cssp){$(tcell).css(cssp)}}if(typeof attrp==="object"){$(tcell).attr(attrp)}}}})},getCell:function(rowid,col){var ret=false;this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ind=$t.rows.namedItem(rowid);if(ind){try{ret=$.unformat($("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.p.colModel[pos]},pos)}catch(e){ret=$.jgrid.htmlDecode($("td:eq("+pos+")",ind).html())}}}});return ret},getCol:function(col,obj,mathopr){var ret=[],val,sum=0,min=0,max=0,v;obj=typeof(obj)!="boolean"?false:obj;if(typeof mathopr=="undefined"){mathopr=false}this.each(function(){var $t=this,pos=-1;if(!$t.grid){return}if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ln=$t.rows.length,i=0;if(ln&&ln>0){while(i<ln){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat($($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.p.colModel[pos]},pos)}catch(e){val=$.jgrid.htmlDecode($t.rows[i].cells[pos].innerHTML)}if(mathopr){v=parseFloat(val);sum+=v;min=Math.min(min,v);max=Math.max(min,v)}else{if(obj){ret.push({id:$t.rows[i].id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/ln;break;case"count":ret=ln;break;case"min":ret=min;break;case"max":ret=max;break}}}}});return ret},clearGridData:function(clearfooter){return this.each(function(){var $t=this;if(!$t.grid){return}if(typeof clearfooter!="boolean"){clearfooter=false}if($t.p.deepempty){$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").empty().append(trf)}if($t.p.footerrow&&clearfooter){$(".ui-jqgrid-ftable td",$t.grid.sDiv).html("&#160;")}$t.p.selrow=null;$t.p.selarrrow=[];$t.p.savedRow=[];$t.p.records=0;$t.p.page=1;$t.p.lastpage=0;$t.p.reccount=0;$t.p.data=[];$t.p_index={};$t.updatepager(true,false)})},getInd:function(rowid,rc){var ret=false,rw;this.each(function(){rw=this.rows.namedItem(rowid);if(rw){ret=rc===true?rw:rw.rowIndex}});return ret},bindKeys:function(settings){var o=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},settings||{});return this.each(function(){var $t=this;if(!$("body").is("[role]")){$("body").attr("role","application")}$t.p.scrollrows=o.scrollingRows;$($t).keydown(function(event){var target=$($t).find("tr[tabindex=0]")[0],id,r,mind,expanded=$t.p.treeReader.expanded_field;if(target){mind=$t.p._index[target.id];if(event.keyCode===37||event.keyCode===38||event.keyCode===39||event.keyCode===40){if(event.keyCode===38){r=target.previousSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.previousSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id)}if(event.keyCode===40){r=target.nextSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.nextSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id)}if(event.keyCode===37){if($t.p.treeGrid&&$t.p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}if($.isFunction(o.onLeftKey)){o.onLeftKey.call($t,$t.p.selrow)}}if(event.keyCode===39){if($t.p.treeGrid&&!$t.p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}if($.isFunction(o.onRightKey)){o.onRightKey.call($t,$t.p.selrow)}}return false}else{if(event.keyCode===13){if($.isFunction(o.onEnter)){o.onEnter.call($t,$t.p.selrow)}return false}else{if(event.keyCode===32){if($.isFunction(o.onSpace)){o.onSpace.call($t,$t.p.selrow)}return false}}}}})})},unbindKeys:function(){return this.each(function(){var $t=this;$($t).unbind("keydown")})},getLocalRow:function(rowid){var ret=false,ind;this.each(function(){if(typeof(rowid)!=="undefined"){ind=this.p._index[rowid];if(ind>=0){ret=this.p.data[ind]}}});return ret}})})(jQuery);(function(a){a.extend(a.jgrid,{showModal:function(b){b.w.show()},closeModal:function(b){b.w.hide().attr("aria-hidden","true");if(b.o){b.o.remove()}},hideModal:function(b,f){f=a.extend({jqm:true,gb:""},f||{});if(f.onClose){var c=f.onClose(b);if(typeof c=="boolean"&&!c){return}}if(a.fn.jqm&&f.jqm===true){a(b).attr("aria-hidden","true").jqmHide()}else{if(f.gb!==""){try{a(".jqgrid-overlay:first",f.gb).hide()}catch(d){}}a(b).hide().attr("aria-hidden","true")}},findPos:function(c){var d=0,b=0;if(c.offsetParent){do{d+=c.offsetLeft;b+=c.offsetTop}while(c=c.offsetParent)}return[d,b]},createModal:function(j,s,n,b,w,c,h){var l=document.createElement("div"),t,m=this;h=a.extend({},h||{});t=a(n.gbox).attr("dir")=="rtl"?true:false;l.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";l.id=j.themodal;var v=document.createElement("div");v.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";v.id=j.modalhead;a(v).append("<span class='ui-jqdialog-title'>"+n.caption+"</span>");var o=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(v).append(o);if(t){l.dir="rtl";a(".ui-jqdialog-title",v).css("float","right");a(".ui-jqdialog-titlebar-close",v).css("left",0.3+"em")}else{l.dir="ltr";a(".ui-jqdialog-title",v).css("float","left");a(".ui-jqdialog-titlebar-close",v).css("right",0.3+"em")}var x=document.createElement("div");a(x).addClass("ui-jqdialog-content ui-widget-content").attr("id",j.modalcontent);a(x).append(s);l.appendChild(x);a(l).prepend(v);if(c===true){a("body").append(l)}else{if(typeof c=="string"){a(c).append(l)}else{a(l).insertBefore(b)}}a(l).css(h);if(typeof n.jqModal==="undefined"){n.jqModal=true}var q={};if(a.fn.jqm&&n.jqModal===true){if(n.left===0&&n.top===0&&n.overlay){var d=[];d=this.findPos(w);n.left=d[0]+4;n.top=d[1]+4}q.top=n.top+"px";q.left=n.left}else{if(n.left!==0||n.top!==0){q.left=n.left;q.top=n.top+"px"}}a("a.ui-jqdialog-titlebar-close",v).click(function(r){var p=a("#"+j.themodal).data("onClose")||n.onClose;var y=a("#"+j.themodal).data("gbox")||n.gbox;m.hideModal("#"+j.themodal,{gb:y,jqm:n.jqModal,onClose:p});return false});if(n.width===0||!n.width){n.width=300}if(n.height===0||!n.height){n.height=200}if(!n.zIndex){var f=a(b).parents("*[role=dialog]").filter(":first").css("z-index");if(f){n.zIndex=parseInt(f,10)+1}else{n.zIndex=950}}var g=0;if(t&&q.left&&!c){g=a(n.gbox).width()-(!isNaN(n.width)?parseInt(n.width,10):0)-8;q.left=parseInt(q.left,10)+parseInt(g,10)}if(q.left){q.left+="px"}a(l).css(a.extend({width:isNaN(n.width)?"auto":n.width+"px",height:isNaN(n.height)?"auto":n.height+"px",zIndex:n.zIndex,overflow:"hidden"},q)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":j.modalhead,"aria-hidden":"true"});if(typeof n.drag=="undefined"){n.drag=true}if(typeof n.resize=="undefined"){n.resize=true}if(n.drag){a(v).css("cursor","move");if(a.fn.jqDrag){a(l).jqDrag(v)}else{try{a(l).draggable({handle:a("#"+v.id)})}catch(u){}}}if(n.resize){if(a.fn.jqResize){a(l).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");a("#"+j.themodal).jqResize(".jqResize",j.scrollelm?"#"+j.scrollelm:false)}else{try{a(l).resizable({handles:"se, sw",alsoResize:j.scrollelm?"#"+j.scrollelm:false})}catch(k){}}}if(n.closeOnEscape===true){a(l).keydown(function(r){if(r.which==27){var p=a("#"+j.themodal).data("onClose")||n.onClose;m.hideModal(this,{gb:n.gbox,jqm:n.jqModal,onClose:p})}})}},viewModal:function(b,d){d=a.extend({toTop:true,overlay:10,modal:false,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},d||{});if(a.fn.jqm&&d.jqm===true){if(d.jqM){a(b).attr("aria-hidden","false").jqm(d).jqmShow()}else{a(b).attr("aria-hidden","false").jqmShow()}}else{if(d.gbox!==""){a(".jqgrid-overlay:first",d.gbox).show();a(b).data("gbox",d.gbox)}a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(c){}}},info_dialog:function(q,k,c,p){var n={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+q+"</b>",left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};a.extend(n,p||{});var f=n.jqModal,r=this;if(a.fn.jqm&&!f){f=false}var h="";if(n.buttons.length>0){for(var g=0;g<n.buttons.length;g++){if(typeof n.buttons[g].id=="undefined"){n.buttons[g].id="info_button_"+g}h+="<a href='javascript:void(0)' id='"+n.buttons[g].id+"' class='fm-button ui-state-default ui-corner-all'>"+n.buttons[g].text+"</a>"}}var l=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px",o="text-align:"+n.align+";";var b="<div id='info_id'>";b+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+o+"'>"+k+"</div>";b+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+c+"</a>"+h+"</div>":h!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+h+"</div>":"";b+="</div>";try{if(a("#info_dialog").attr("aria-hidden")=="false"){this.hideModal("#info_dialog",{jqm:f})}a("#info_dialog").remove()}catch(j){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},b,n,"","",true);if(h){a.each(n.buttons,function(e){a("#"+this.id,"#info_id").bind("click",function(){n.buttons[e].onClick.call(a("#info_dialog"));return false})})}a("#closedialog","#info_id").click(function(m){r.hideModal("#info_dialog",{jqm:f});return false});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});if(a.isFunction(n.beforeOpen)){n.beforeOpen()}this.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove();if(e.o){e.o.remove()}},modal:n.modal,jqm:f});if(a.isFunction(n.afterOpen)){n.afterOpen()}try{a("#info_dialog").focus()}catch(d){}},createEl:function(g,h,y,m,w){var x="";function n(D,e){if(a.isFunction(e.dataInit)){e.dataInit(D)}if(e.dataEvents){a.each(e.dataEvents,function(){if(this.data!==undefined){a(D).bind(this.type,this.data,this.fn)}else{a(D).bind(this.type,this.fn)}})}return e}function t(F,E,D){var e=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];if(typeof(D)!="undefined"&&a.isArray(D)){e=a.extend(e,D)}a.each(E,function(G,H){if(a.inArray(G,e)===-1){a(F).attr(G,H)}});if(!E.hasOwnProperty("id")){a(F).attr("id",a.jgrid.randId())}}switch(g){case"textarea":x=document.createElement("textarea");if(m){if(!h.cols){a(x).css({width:"98%"})}}else{if(!h.cols){h.cols=20}}if(!h.rows){h.rows=2}if(y=="&nbsp;"||y=="&#160;"||(y.length==1&&y.charCodeAt(0)==160)){y=""}x.value=y;t(x,h);h=n(x,h);a(x).attr({role:"textbox",multiline:"true"});break;case"checkbox":x=document.createElement("input");x.type="checkbox";if(!h.value){var C=y.toLowerCase();if(C.search(/(false|0|no|off|undefined)/i)<0&&C!==""){x.checked=true;x.defaultChecked=true;x.value=y}else{x.value="on"}a(x).attr("offval","off")}else{var q=h.value.split(":");if(y===q[0]){x.checked=true;x.defaultChecked=true}x.value=q[0];a(x).attr("offval",q[1])}t(x,h,["value"]);h=n(x,h);a(x).attr("role","checkbox");break;case"select":x=document.createElement("select");x.setAttribute("role","select");var d,k=[];if(h.multiple===true){d=true;x.multiple="multiple";a(x).attr("aria-multiselectable","true")}else{d=false}if(typeof(h.dataUrl)!="undefined"){a.ajax(a.extend({url:h.dataUrl,type:"GET",dataType:"html",context:{elem:x,options:h,vl:y},success:function(G,F){var I,E=[],e=this.elem,D=this.vl,K=a.extend({},this.options),J=K.multiple===true;if(typeof(K.buildSelect)!="undefined"){var H=K.buildSelect(G);I=a(H).html()}else{I=a(G).html()}if(I){a(e).append(I);t(e,K);K=n(e,K);if(typeof K.size==="undefined"){K.size=J?3:1}if(J){E=D.split(",");E=a.map(E,function(L){return a.trim(L)})}else{E[0]=a.trim(D)}setTimeout(function(){a("option",e).each(function(L){a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),E)>-1||a.inArray(a.trim(a(this).val()),E)>-1){this.selected="selected"}})},0)}}},w||{}))}else{if(h.value){var r;if(d){k=y.split(",");k=a.map(k,function(e){return a.trim(e)});if(typeof h.size==="undefined"){h.size=3}}else{h.size=1}if(typeof h.value==="function"){h.value=h.value()}var s,p,l;if(typeof h.value==="string"){s=h.value.split(";");for(r=0;r<s.length;r++){p=s[r].split(":");if(p.length>2){p[1]=a.map(p,function(D,e){if(e>0){return D}}).join(":")}l=document.createElement("option");l.setAttribute("role","option");l.value=p[0];l.innerHTML=p[1];if(!d&&(a.trim(p[0])==a.trim(y)||a.trim(p[1])==a.trim(y))){l.selected="selected"}if(d&&(a.inArray(a.trim(p[1]),k)>-1||a.inArray(a.trim(p[0]),k)>-1)){l.selected="selected"}x.appendChild(l)}}else{if(typeof h.value==="object"){var f=h.value;for(var B in f){if(f.hasOwnProperty(B)){l=document.createElement("option");l.setAttribute("role","option");l.value=B;l.innerHTML=f[B];if(!d&&(a.trim(B)==a.trim(y)||a.trim(f[B])==a.trim(y))){l.selected="selected"}if(d&&(a.inArray(a.trim(f[B]),k)>-1||a.inArray(a.trim(B),k)>-1)){l.selected="selected"}x.appendChild(l)}}}}t(x,h,["value"]);h=n(x,h)}}break;case"text":case"password":case"button":var A;if(g=="button"){A="button"}else{A="textbox"}x=document.createElement("input");x.type=g;x.value=y;t(x,h);h=n(x,h);if(g!="button"){if(m){if(!h.size){a(x).css({width:"98%"})}}else{if(!h.size){h.size=20}}}a(x).attr("role",A);break;case"image":case"file":x=document.createElement("input");x.type=g;t(x,h);h=n(x,h);break;case"custom":x=document.createElement("span");try{if(a.isFunction(h.custom_element)){var b=h.custom_element.call(this,y,h);if(b){b=a(b).addClass("customelement").attr({id:h.id,name:h.name});a(x).empty().append(b)}else{throw"e2"}}else{throw"e1"}}catch(v){if(v=="e1"){this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose)}if(v=="e2"){this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose)}else{this.info_dialog(a.jgrid.errors.errcap,typeof(v)==="string"?v:v.message,a.jgrid.edit.bClose)}}break;case"fileupload":x=document.createElement("span");try{var b=null;var c=document.createElement("div");c.type="text";c.value=y;var o=h.id;var z=new WellFileUpload(o);var j=[];var u=[];if(WellFileUpload.files[o]&&WellFileUpload.files[o].length>0){j=WellFileUpload.files[o];u=j.slice(0)}else{if(WellFileUpload.files[o+"_tmp"]){j=WellFileUpload.files[o+"_tmp"];u=j.slice(0);WellFileUpload.files[o+"_tmp"].length=0}}z.init(false,a(c),false,true,u);b=c;if(b){b=a(b).addClass("customelement").attr({id:h.id,name:h.name});a(x).empty().append(b)}else{throw"e2"}}catch(v){if(v=="e1"){this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose)}if(v=="e2"){this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose)}else{this.info_dialog(a.jgrid.errors.errcap,typeof(v)==="string"?v:v.message,a.jgrid.edit.bClose)}}break}return x},checkDate:function(o,d){var m=function(j){return(((j%4===0)&&(j%100!==0||(j%400===0)))?29:28)},l=function(r){for(var j=1;j<=r;j++){this[j]=31;if(j==4||j==6||j==9||j==11){this[j]=30}if(j==2){this[j]=29}}return this};var f={},q;o=o.toLowerCase();if(o.indexOf("/")!=-1){q="/"}else{if(o.indexOf("-")!=-1){q="-"}else{if(o.indexOf(".")!=-1){q="."}else{q="/"}}}o=o.split(q);d=d.split(q);if(d.length!=3){return false}var h=-1,p,g=-1,e=-1;for(var k=0;k<o.length;k++){var c=isNaN(d[k])?0:parseInt(d[k],10);f[o[k]]=c;p=o[k];if(p.indexOf("y")!=-1){h=k}if(p.indexOf("m")!=-1){e=k}if(p.indexOf("d")!=-1){g=k}}if(o[h]=="y"||o[h]=="yyyy"){p=4}else{if(o[h]=="yy"){p=2}else{p=-1}}var b=l(12),n;if(h===-1){return false}else{n=f[o[h]].toString();if(p==2&&n.length==1){p=1}if(n.length!=p||(f[o[h]]===0&&d[h]!="00")){return false}}if(e===-1){return false}else{n=f[o[e]].toString();if(n.length<1||f[o[e]]<1||f[o[e]]>12){return false}}if(g===-1){return false}else{n=f[o[g]].toString();if(n.length<1||f[o[g]]<1||f[o[g]]>31||(f[o[e]]==2&&f[o[g]]>m(f[o[h]]))||f[o[g]]>b[f[o[e]]]){return false}}return true},isEmpty:function(b){if(b.match(/^\s+$/)||b===""){return true}else{return false}},checkTime:function(d){var c=/^(\d{1,2}):(\d{2})([ap]m)?$/,b;if(!this.isEmpty(d)){b=d.match(c);if(b){if(b[3]){if(b[1]<1||b[1]>12){return false}}else{if(b[1]>23){return false}}if(b[2]>59){return false}}else{return false}}return true},checkValues:function(d,p,l,q,j){var h,k,r,c,m;if(typeof(q)==="undefined"){if(typeof(p)=="string"){for(k=0,m=l.p.colModel.length;k<m;k++){if(l.p.colModel[k].name==p){h=l.p.colModel[k].editrules;p=k;try{r=l.p.colModel[k].formoptions.label}catch(o){}break}}}else{if(p>=0){h=l.p.colModel[p].editrules}}}else{h=q;r=j===undefined?"_":j}if(h){if(!r){r=l.p.colNames[p]}if(h.required===true){if(this.isEmpty(d)){return[false,r+": "+a.jgrid.edit.msg.required,""]}}var f=h.required===false?false:true;if(h.number===true){if(!(f===false&&this.isEmpty(d))){if(isNaN(d)){return[false,r+": "+a.jgrid.edit.msg.number,""]}}}if(typeof h.minValue!="undefined"&&!isNaN(h.minValue)){if(parseFloat(d)<parseFloat(h.minValue)){return[false,r+": "+a.jgrid.edit.msg.minValue+" "+h.minValue,""]}}if(typeof h.maxValue!="undefined"&&!isNaN(h.maxValue)){if(parseFloat(d)>parseFloat(h.maxValue)){return[false,r+": "+a.jgrid.edit.msg.maxValue+" "+h.maxValue,""]}}var b;if(h.email===true){if(!(f===false&&this.isEmpty(d))){b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!b.test(d)){return[false,r+": "+a.jgrid.edit.msg.email,""]}}}if(h.integer===true){if(!(f===false&&this.isEmpty(d))){if(isNaN(d)){return[false,r+": "+a.jgrid.edit.msg.integer,""]}if((d%1!==0)||(d.indexOf(".")!=-1)){return[false,r+": "+a.jgrid.edit.msg.integer,""]}}}if(h.date===true){if(!(f===false&&this.isEmpty(d))){if(l.p.colModel[p].formatoptions&&l.p.colModel[p].formatoptions.newformat){c=l.p.colModel[p].formatoptions.newformat}else{c=l.p.colModel[p].datefmt||"Y-m-d"}if(!this.checkDate(c,d)){return[false,r+": "+a.jgrid.edit.msg.date+" - "+c,""]}}}if(h.time===true){if(!(f===false&&this.isEmpty(d))){if(!this.checkTime(d)){return[false,r+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}}}if(h.url===true){if(!(f===false&&this.isEmpty(d))){b=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!b.test(d)){return[false,r+": "+a.jgrid.edit.msg.url,""]}}}if(h.custom===true){if(!(f===false&&this.isEmpty(d))){if(a.isFunction(h.custom_func)){var n=h.custom_func.call(l,d,r);if(a.isArray(n)){return n}else{return[false,a.jgrid.edit.msg.customarray,""]}}else{return[false,a.jgrid.edit.msg.customfcheck,""]}}}}return[true,"",""]}})})(jQuery);(function(a){a.jgrid.extend({searchGrid:function(b){b=a.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,multipleGroup:false,top:0,left:0,jqModal:true,modal:false,resize:false,width:450,height:"auto",dataheight:"auto",showQuery:false,errorcheck:true,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:true,overlay:10,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:false,layer:null},a.jgrid.search,b||{});return this.each(function(){var m=this;if(!m.grid){return}var g="fbox_"+m.p.id,h=true,d={themodal:"searchmod"+g,modalhead:"searchhd"+g,modalcontent:"searchcnt"+g,scrollelm:g},n=m.p.postData[b.sFilter];if(typeof(n)==="string"){n=a.jgrid.parse(n)}if(b.recreateFilter===true){a("#"+d.themodal).remove()}function e(){if(a.isFunction(b.beforeShowSearch)){h=b.beforeShowSearch(a("#"+g));if(typeof(h)==="undefined"){h=true}}if(h){a.jgrid.viewModal("#"+d.themodal,{gbox:"#gbox_"+g,jqm:b.jqModal,modal:b.modal,overlay:b.overlay,toTop:b.toTop});if(a.isFunction(b.afterShowSearch)){b.afterShowSearch(a("#"+g))}}}if(a("#"+d.themodal).html()!==null){e()}else{var r=a("<span><div id='"+g+"' class='searchFilter' style='overflow:auto'></div></span>").insertBefore("#gview_"+m.p.id);if(a.isFunction(b.onInitializeSearch)){b.onInitializeSearch(a("#"+g))}var j=a.extend([],m.p.colModel),f="<a href='javascript:void(0)' id='"+g+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+b.Find+"</a>",t="<a href='javascript:void(0)' id='"+g+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+b.Reset+"</a>",l="",o="",q,s=false,p,c=-1;if(b.showQuery){l="<a href='javascript:void(0)' id='"+g+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"}if(!b.columns.length){a.each(j,function(v,y){if(!y.label){y.label=m.p.colNames[v]}if(!s){var u=(typeof y.search==="undefined")?true:y.search,x=(y.hidden===true),w=(y.searchoptions&&y.searchoptions.searchhidden===true);if((w&&u)||(u&&!x)){s=true;q=y.index||y.name;c=v}}})}else{j=b.columns}if((!n&&q)||b.multipleSearch===false){var k="eq";if(c>=0&&j[c].searchoptions&&j[c].searchoptions.sopt){k=j[c].searchoptions.sopt[0]}else{if(b.sopt&&b.sopt.length){k=b.sopt[0]}}n={groupOp:"AND",rules:[{field:q,op:k,data:""}]}}s=false;if(b.tmplNames&&b.tmplNames.length){s=true;o=b.tmplLabel;o+="<select class='ui-template'>";o+="<option value='default'>Default</option>";a.each(b.tmplNames,function(u,v){o+="<option value='"+u+"'>"+v+"</option>"});o+="</select>"}p="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+g+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:left'>"+t+o+"</td><td class='EditButton'>"+l+f+"</td></tr></tbody></table>";a("#"+g).jqFilter({columns:j,filter:b.loadDefaults?n:null,showQuery:b.showQuery,errorcheck:b.errorcheck,sopt:b.sopt,groupButton:b.multipleGroup,ruleButtons:b.multipleSearch,afterRedraw:b.afterRedraw,_gridsopt:a.jgrid.search.odata,onChange:function(u){if(this.p.showQuery){a(".query",this).html(this.toUserFriendlyString())}}});r.append(p);if(s&&b.tmplFilters&&b.tmplFilters.length){a(".ui-template",r).bind("change",function(v){var u=a(this).val();if(u=="default"){a("#"+g).jqFilter("addFilter",n)}else{a("#"+g).jqFilter("addFilter",b.tmplFilters[parseInt(u,10)])}return false})}if(b.multipleGroup===true){b.multipleSearch=true}if(a.isFunction(b.onInitializeSearch)){b.onInitializeSearch(a("#"+g))}if(b.layer){a.jgrid.createModal(d,r,b,"#gview_"+m.p.id,a("#gbox_"+m.p.id)[0],"#"+b.layer,{position:"relative"})}else{a.jgrid.createModal(d,r,b,"#gview_"+m.p.id,a("#gbox_"+m.p.id)[0])}if(l){a("#"+g+"_query").bind("click",function(u){a(".queryresult",r).toggle();return false})}if(b.stringResult===undefined){b.stringResult=b.multipleSearch}a("#"+g+"_search").bind("click",function(){var x=a("#"+g),v={},u,w=x.jqFilter("filterData");if(b.errorcheck){x[0].hideError();if(!b.showQuery){x.jqFilter("toSQLString")}if(x[0].p.error){x[0].showError();return false}}if(b.stringResult){try{u=xmlJsonClass.toJson(w,"","",false)}catch(z){try{u=JSON.stringify(w)}catch(y){}}if(typeof(u)==="string"){v[b.sFilter]=u;a.each([b.sField,b.sValue,b.sOper],function(){v[this]=""})}}else{if(b.multipleSearch){v[b.sFilter]=w;a.each([b.sField,b.sValue,b.sOper],function(){v[this]=""})}else{v[b.sField]=w.rules[0].field;v[b.sValue]=w.rules[0].data;v[b.sOper]=w.rules[0].op;v[b.sFilter]=""}}m.p.search=true;a.extend(m.p.postData,v);if(a.isFunction(b.onSearch)){b.onSearch()}a(m).trigger("reloadGrid",[{page:1}]);if(b.closeAfterSearch){a.jgrid.hideModal("#"+d.themodal,{gb:"#gbox_"+m.p.id,jqm:b.jqModal,onClose:b.onClose})}return false});a("#"+g+"_reset").bind("click",function(){var u={},v=a("#"+g);m.p.search=false;if(b.multipleSearch===false){u[b.sField]=u[b.sValue]=u[b.sOper]=""}else{u[b.sFilter]=""}v[0].resetFilter();if(s){a(".ui-template",r).val("default")}a.extend(m.p.postData,u);if(a.isFunction(b.onReset)){b.onReset()}a(m).trigger("reloadGrid",[{page:1}]);return false});e();a(".fm-button:not(.ui-state-disabled)",r).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}})},editGridRow:function(c,d){d=a.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},a.jgrid.edit,d||{});var b=d;return this.each(function(){var e=this;if(!e.grid||!c){return}var B=e.p.id,y="FrmGrid_"+B,v="TblGrid_"+B,j={themodal:"editmod"+B,modalhead:"edithd"+B,modalcontent:"editcnt"+B,scrollelm:y},C=a.isFunction(b.beforeShowForm)?b.beforeShowForm:false,M=a.isFunction(b.afterShowForm)?b.afterShowForm:false,L=a.isFunction(b.beforeInitData)?b.beforeInitData:false,p=a.isFunction(b.onInitializeForm)?b.onInitializeForm:false,G=null,X=true,H=1,r=0,D,P,F,A;if(c==="new"){c="_empty";d.caption=b.addCaption}else{d.caption=b.editCaption}if(d.recreateForm===true&&a("#"+j.themodal).html()!==null){a("#"+j.themodal).remove()}var m=true;if(d.checkOnUpdate&&d.jqModal&&!d.modal){m=false}function W(){a("#"+v+" > tbody > tr > td > .FormElement").each(function(ab){var ae=a(".customelement",this);if(ae.length){var ac=ae[0],Z=a(ac).attr("name");a.each(e.p.colModel,function(af,ah){if(this.name===Z&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{D[Z]=this.editoptions.custom_value(a("#"+a.jgrid.jqID(Z),"#"+v),"get");if(D[Z]===undefined){throw"e1"}}catch(ag){if(ag==="e1"){a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,ag.message,jQuery.jgrid.edit.bClose)}}return true}})}else{switch(a(this).get(0).type){case"checkbox":if(a(this).attr("checked")){D[this.name]=a(this).val()}else{var aa=a(this).attr("offval");D[this.name]=aa}break;case"select-one":D[this.name]=a("option:selected",this).val();P[this.name]=a("option:selected",this).text();break;case"select-multiple":D[this.name]=a(this).val();if(D[this.name]){D[this.name]=D[this.name].join(",")}else{D[this.name]=""}var ad=[];a("option:selected",this).each(function(af,ag){ad[af]=a(ag).text()});P[this.name]=ad.join(",");break;case"password":case"text":case"textarea":case"button":D[this.name]=a(this).val();break}if(e.p.autoencode){D[this.name]=a.jgrid.htmlEncode(D[this.name])}}});return true}function t(ab,ai,af,ad){var ap,aj,aa,ae=0,ah,ao,Z,al=[],ac=false,ak="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",an="",ag;for(ag=1;ag<=ad;ag++){an+=ak}if(ab!="_empty"){ac=a(ai).jqGrid("getInd",ab)}a(ai.p.colModel).each(function(at){ap=this.name;if(this.editrules&&this.editrules.edithidden===true){aj=false}else{aj=this.hidden===true?true:false}ao=aj?"style='display:none'":"";if(ap!=="cb"&&ap!=="subgrid"&&this.editable===true&&ap!=="rn"){if(ac===false){ah=""}else{if(ap==ai.p.ExpandColumn&&ai.p.treeGrid===true){ah=a("td:eq("+at+")",ai.rows[ac]).text()}else{try{ah=a.unformat(a("td:eq("+at+")",ai.rows[ac]),{rowId:ab,colModel:this},at)}catch(aq){ah=(this.edittype&&this.edittype=="textarea")?a("td:eq("+at+")",ai.rows[ac]).text():a("td:eq("+at+")",ai.rows[ac]).html()}if(!ah||ah=="&nbsp;"||ah=="&#160;"||(ah.length==1&&ah.charCodeAt(0)==160)){ah=""}}}var ar=a.extend({},this.editoptions||{},{id:ap,name:ap}),ax=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),au=parseInt(ax.rowpos,10)||ae+1,aw=parseInt((parseInt(ax.colpos,10)||1)*2,10);if(ab=="_empty"&&ar.defaultValue){ah=a.isFunction(ar.defaultValue)?ar.defaultValue():ar.defaultValue}if(!this.edittype){this.edittype="text"}if(e.p.autoencode){ah=a.jgrid.htmlDecode(ah)}Z=a.jgrid.createEl(this.edittype,ar,ah,false,a.extend({},a.jgrid.ajaxOptions,ai.p.ajaxSelectOptions||{}));if(ah===""&&this.edittype=="checkbox"){ah=a(Z).attr("offval")}if(ah===""&&this.edittype=="select"){ah=a("option:eq(0)",Z).text()}if(b.checkOnSubmit||b.checkOnUpdate){b._savedData[ap]=ah}a(Z).addClass("FormElement");if(this.edittype=="text"||this.edittype=="textarea"){a(Z).addClass("ui-widget-content ui-corner-all")}aa=a(af).find("tr[rowpos="+au+"]");if(ax.rowabove){var av=a("<tr><td class='contentinfo' colspan='"+(ad*2)+"'>"+ax.rowcontent+"</td></tr>");a(af).append(av);av[0].rp=au}if(aa.length===0){aa=a("<tr "+ao+" rowpos='"+au+"'></tr>").addClass("FormData").attr("id","tr_"+ap);a(aa).append(an);a(af).append(aa);aa[0].rp=au}a("td:eq("+(aw-2)+")",aa[0]).html(typeof ax.label==="undefined"?ai.p.colNames[at]:ax.label);a("td:eq("+(aw-1)+")",aa[0]).append(ax.elmprefix).append(Z).append(ax.elmsuffix);al[ae]=at;ae++}});if(ae>0){var am=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(ad*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+ai.p.id+"_id' value='"+ab+"'/></td></tr>");am[0].rp=ae+999;a(af).append(am);if(b.checkOnSubmit||b.checkOnUpdate){b._savedData[ai.p.id+"_id"]=ab}}return al}function q(Z,ag,ac){var ak,ad=0,ah,af,aa,ae,ai;if(b.checkOnSubmit||b.checkOnUpdate){b._savedData={};b._savedData[ag.p.id+"_id"]=Z}var aj=ag.p.colModel;if(Z=="_empty"){a(aj).each(function(al){ak=this.name;aa=a.extend({},this.editoptions||{});af=a("#"+a.jgrid.jqID(ak),"#"+ac);if(af&&af.length&&af[0]!==null){ae="";if(aa.defaultValue){ae=a.isFunction(aa.defaultValue)?aa.defaultValue():aa.defaultValue;if(af[0].type=="checkbox"){ai=ae.toLowerCase();if(ai.search(/(false|0|no|off|undefined)/i)<0&&ai!==""){af[0].checked=true;af[0].defaultChecked=true;af[0].value=ae}else{af.attr({checked:"",defaultChecked:""})}}else{af.val(ae)}}else{if(af[0].type=="checkbox"){af[0].checked=false;af[0].defaultChecked=false;ae=a(af).attr("offval")}else{if(af[0].type&&af[0].type.substr(0,6)=="select"){af[0].selectedIndex=0}else{af.val(ae)}}}if(b.checkOnSubmit===true||b.checkOnUpdate){b._savedData[ak]=ae}}});a("#id_g","#"+ac).val(Z);return}var ab=a(ag).jqGrid("getInd",Z,true);if(!ab){return}a("td",ab).each(function(ao){ak=aj[ao].name;if(ak!=="cb"&&ak!=="subgrid"&&ak!=="rn"&&aj[ao].editable===true){if(ak==ag.p.ExpandColumn&&ag.p.treeGrid===true){ah=a(this).text()}else{try{ah=a.unformat(a(this),{rowId:Z,colModel:aj[ao]},ao)}catch(an){ah=aj[ao].edittype=="textarea"?a(this).text():a(this).html()}}if(e.p.autoencode){ah=a.jgrid.htmlDecode(ah)}if(b.checkOnSubmit===true||b.checkOnUpdate){b._savedData[ak]=ah}ak=a.jgrid.jqID(ak);switch(aj[ao].edittype){case"password":case"text":case"button":case"image":case"textarea":if(ah=="&nbsp;"||ah=="&#160;"||(ah.length==1&&ah.charCodeAt(0)==160)){ah=""}a("#"+ak,"#"+ac).val(ah);break;case"select":var am=ah.split(",");am=a.map(am,function(aq){return a.trim(aq)});a("#"+ak+" option","#"+ac).each(function(aq){if(!aj[ao].editoptions.multiple&&(am[0]==a.trim(a(this).text())||am[0]==a.trim(a(this).val()))){this.selected=true}else{if(aj[ao].editoptions.multiple){if(a.inArray(a.trim(a(this).text()),am)>-1||a.inArray(a.trim(a(this).val()),am)>-1){this.selected=true}else{this.selected=false}}else{this.selected=false}}});break;case"checkbox":ah=ah+"";if(aj[ao].editoptions&&aj[ao].editoptions.value){var al=aj[ao].editoptions.value.split(":");if(al[0]==ah){a("#"+ak,"#"+ac).attr("checked",true);a("#"+ak,"#"+ac).attr("defaultChecked",true)}else{a("#"+ak,"#"+ac).attr("checked",false);a("#"+ak,"#"+ac).attr("defaultChecked","")}}else{ah=ah.toLowerCase();if(ah.search(/(false|0|no|off|undefined)/i)<0&&ah!==""){a("#"+ak,"#"+ac).attr("checked",true);a("#"+ak,"#"+ac).attr("defaultChecked",true)}else{a("#"+ak,"#"+ac).attr("checked",false);a("#"+ak,"#"+ac).attr("defaultChecked","")}}break;case"custom":try{if(aj[ao].editoptions&&a.isFunction(aj[ao].editoptions.custom_value)){aj[ao].editoptions.custom_value(a("#"+ak,"#"+ac),"set",ah)}else{throw"e1"}}catch(ap){if(ap=="e1"){a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}else{a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,ap.message,jQuery.jgrid.edit.bClose)}}break}ad++}});if(ad>0){a("#id_g","#"+v).val(Z)}}function k(){var ai,ah=[true,"",""],Z={},ad=e.p.prmNames,ag,ac,ak,ae;if(a.isFunction(b.beforeCheckValues)){var af=b.beforeCheckValues(D,a("#"+y),D[e.p.id+"_id"]=="_empty"?ad.addoper:ad.editoper);if(af&&typeof(af)==="object"){D=af}}for(ak in D){if(D.hasOwnProperty(ak)){ah=a.jgrid.checkValues(D[ak],ak,e);if(ah[0]===false){break}}}if(ah[0]){if(a.isFunction(b.onclickSubmit)){Z=b.onclickSubmit(b,D)||{}}if(a.isFunction(b.beforeSubmit)){ah=b.beforeSubmit(D,a("#"+y))}}if(ah[0]&&!b.processing){b.processing=true;a("#sData","#"+v+"_2").addClass("ui-state-active");ac=ad.oper;ag=ad.id;D[ac]=(a.trim(D[e.p.id+"_id"])=="_empty")?ad.addoper:ad.editoper;if(D[ac]!=ad.addoper){D[ag]=D[e.p.id+"_id"]}else{if(D[ag]===undefined){D[ag]=D[e.p.id+"_id"]}}delete D[e.p.id+"_id"];D=a.extend(D,b.editData,Z);if(e.p.treeGrid===true){if(D[ac]==ad.addoper){ae=a(e).jqGrid("getGridParam","selrow");var aa=e.p.treeGridModel=="adjacency"?e.p.treeReader.parent_id_field:"parent_id";D[aa]=ae}for(i in e.p.treeReader){var aj=e.p.treeReader[i];if(D.hasOwnProperty(aj)){if(D[ac]==ad.addoper&&i==="parent_id_field"){continue}delete D[aj]}}}var ab=a.extend({url:b.url?b.url:a(e).jqGrid("getGridParam","editurl"),type:b.mtype,data:a.isFunction(b.serializeEditData)?b.serializeEditData(D):D,complete:function(an,al){if(al!="success"){ah[0]=false;if(a.isFunction(b.errorTextFormat)){ah[1]=b.errorTextFormat(an)}else{ah[1]=al+" Status: '"+an.statusText+"'. Error code: "+an.status}}else{if(a.isFunction(b.afterSubmit)){ah=b.afterSubmit(an,D)}}if(ah[0]===false){a("#FormError>td","#"+v).html(ah[1]);a("#FormError","#"+v).show()}else{a.each(e.p.colModel,function(ap,ar){if(P[this.name]&&this.formatter&&this.formatter=="select"){try{delete P[this.name]}catch(aq){}}});D=a.extend(D,P);if(e.p.autoencode){a.each(D,function(aq,ap){D[aq]=a.jgrid.htmlDecode(ap)})}b.reloadAfterSubmit=b.reloadAfterSubmit&&e.p.datatype!="local";if(D[ac]==ad.addoper){if(!ah[2]){ah[2]=a.jgrid.randId()}D[ag]=ah[2];if(b.closeAfterAdd){if(b.reloadAfterSubmit){a(e).trigger("reloadGrid")}else{if(e.p.treeGrid===true){a(e).jqGrid("addChildNode",ah[2],ae,D)}else{a(e).jqGrid("addRowData",ah[2],D,d.addedrow);a(e).jqGrid("setSelection",ah[2])}}a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose})}else{if(b.clearAfterAdd){if(b.reloadAfterSubmit){a(e).trigger("reloadGrid")}else{if(e.p.treeGrid===true){a(e).jqGrid("addChildNode",ah[2],ae,D)}else{a(e).jqGrid("addRowData",ah[2],D,d.addedrow)}}q("_empty",e,y)}else{if(b.reloadAfterSubmit){a(e).trigger("reloadGrid")}else{if(e.p.treeGrid===true){a(e).jqGrid("addChildNode",ah[2],ae,D)}else{a(e).jqGrid("addRowData",ah[2],D,d.addedrow)}}}}}else{if(b.reloadAfterSubmit){a(e).trigger("reloadGrid");if(!b.closeAfterEdit){setTimeout(function(){a(e).jqGrid("setSelection",D[ag])},1000)}}else{if(e.p.treeGrid===true){a(e).jqGrid("setTreeRow",D[ag],D)}else{a(e).jqGrid("setRowData",D[ag],D)}}if(b.closeAfterEdit){a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose})}}if(a.isFunction(b.afterComplete)){ai=an;setTimeout(function(){b.afterComplete(ai,D,a("#"+y));ai=null},500)}if(b.checkOnSubmit||b.checkOnUpdate){a("#"+y).data("disabled",false);if(b._savedData[e.p.id+"_id"]!="_empty"){for(var am in b._savedData){if(D[am]){b._savedData[am]=D[am]}}}}}b.processing=false;a("#sData","#"+v+"_2").removeClass("ui-state-active");try{a(":input:visible","#"+y)[0].focus()}catch(ao){}}},a.jgrid.ajaxOptions,b.ajaxEditOptions);if(!ab.url&&!b.useDataProxy){if(a.isFunction(e.p.dataProxy)){b.useDataProxy=true}else{ah[0]=false;ah[1]+=" "+a.jgrid.errors.nourl}}if(ah[0]){if(b.useDataProxy){e.p.dataProxy.call(e,ab,"set_"+e.p.id)}else{a.ajax(ab)}}}if(ah[0]===false){a("#FormError>td","#"+v).html(ah[1]);a("#FormError","#"+v).show()}}function J(ac,Z){var aa=false,ab;for(ab in ac){if(ac[ab]!=Z[ab]){aa=true;break}}return aa}function T(){a.each(e.p.colModel,function(Z,aa){if(aa.editoptions&&aa.editoptions.NullIfEmpty===true){if(D.hasOwnProperty(aa.name)&&D[aa.name]==""){D[aa.name]="null"}}})}function g(){var Z=true;a("#FormError","#"+v).hide();if(b.checkOnUpdate){D={};P={};W();F=a.extend({},D,P);A=J(F,b._savedData);if(A){a("#"+y).data("disabled",true);a(".confirm","#"+j.themodal).show();Z=false}else{T()}}return Z}function V(){if(c!=="_empty"&&typeof(e.p.savedRow)!=="undefined"&&e.p.savedRow.length>0&&a.isFunction(a.fn.jqGrid.restoreRow)){for(var Z=0;Z<e.p.savedRow.length;Z++){if(e.p.savedRow[Z].id==c){a(e).jqGrid("restoreRow",c);break}}}}function I(Z,aa){if(Z===0){a("#pData","#"+v+"_2").addClass("ui-state-disabled")}else{a("#pData","#"+v+"_2").removeClass("ui-state-disabled")}if(Z==aa){a("#nData","#"+v+"_2").addClass("ui-state-disabled")}else{a("#nData","#"+v+"_2").removeClass("ui-state-disabled")}}function Y(){var aa=a(e).jqGrid("getDataIDs"),Z=a("#id_g","#"+v).val(),ab=a.inArray(Z,aa);return[ab,aa]}if(a("#"+j.themodal).html()!==null){if(L){X=L(a("#"+y));if(typeof(X)=="undefined"){X=true}}if(X===false){return}V();a(".ui-jqdialog-title","#"+j.modalhead).html(d.caption);a("#FormError","#"+v).hide();if(b.topinfo){a(".topinfo","#"+v+"_2").html(b.topinfo);a(".tinfo","#"+v+"_2").show()}else{a(".tinfo","#"+v+"_2").hide()}if(b.bottominfo){a(".bottominfo","#"+v+"_2").html(b.bottominfo);a(".binfo","#"+v+"_2").show()}else{a(".binfo","#"+v+"_2").hide()}q(c,e,y);if(c=="_empty"||!b.viewPagerButtons){a("#pData, #nData","#"+v+"_2").hide()}else{a("#pData, #nData","#"+v+"_2").show()}if(b.processing===true){b.processing=false;a("#sData","#"+v+"_2").removeClass("ui-state-active")}if(a("#"+y).data("disabled")===true){a(".confirm","#"+j.themodal).hide();a("#"+y).data("disabled",false)}if(C){C(a("#"+y))}a("#"+j.themodal).data("onClose",b.onClose);a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+B,jqm:d.jqModal,jqM:false,overlay:d.overlay,modal:d.modal});if(!m){a(".jqmOverlay").click(function(){if(!g()){return false}a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose});return false})}if(M){M(a("#"+y))}}else{var s=isNaN(d.dataheight)?d.dataheight:d.dataheight+"px",S=a("<form name='FormPost' id='"+y+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+s+";'></form>").data("disabled",false),z=a("<table id='"+v+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(L){X=L(a("#"+y));if(typeof(X)=="undefined"){X=true}}if(X===false){return}V();a(e.p.colModel).each(function(Z){var aa=this.formoptions;H=Math.max(H,aa?aa.colpos||0:0);r=Math.max(r,aa?aa.rowpos||0:0)});a(S).append(z);var K=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+(H*2)+"'></td></tr>");K[0].rp=0;a(z).append(K);K=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+(H*2)+"'>"+b.topinfo+"</td></tr>");K[0].rp=0;a(z).append(K);var f=e.p.direction=="rtl"?true:false,R=f?"nData":"pData",U=f?"pData":"nData";t(c,e,z,H);var l="<a href='javascript:void(0)' id='"+R+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",n="<a href='javascript:void(0)' id='"+U+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",h="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",u="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>";var O="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+v+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(f?n+l:l+n)+"</td><td class='EditButton'>"+h+u+"</td></tr>";O+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+b.bottominfo+"</td></tr>";O+="</tbody></table>";if(r>0){var x=[];a.each(a(z)[0].rows,function(Z,aa){x[Z]=aa});x.sort(function(aa,Z){if(aa.rp>Z.rp){return 1}if(aa.rp<Z.rp){return -1}return 0});a.each(x,function(Z,aa){a("tbody",z).append(aa)})}d.gbox="#gbox_"+B;var o=false;if(d.closeOnEscape===true){d.closeOnEscape=false;o=true}var N=a("<span></span>").append(S).append(O);a.jgrid.createModal(j,N,d,"#gview_"+e.p.id,a("#gbox_"+e.p.id)[0]);if(f){a("#pData, #nData","#"+v+"_2").css("float","right");a(".EditButton","#"+v+"_2").css("text-align","left")}if(b.topinfo){a(".tinfo","#"+v+"_2").show()}if(b.bottominfo){a(".binfo","#"+v+"_2").show()}N=null;O=null;a("#"+j.themodal).keydown(function(Z){var aa=Z.target;if(a("#"+y).data("disabled")===true){return false}if(b.savekey[0]===true&&Z.which==b.savekey[1]){if(aa.tagName!="TEXTAREA"){a("#sData","#"+v+"_2").trigger("click");return false}}if(Z.which===27){if(!g()){return false}if(o){a.jgrid.hideModal(this,{gb:d.gbox,jqm:d.jqModal,onClose:b.onClose})}return false}if(b.navkeys[0]===true){if(a("#id_g","#"+v).val()=="_empty"){return true}if(Z.which==b.navkeys[1]){a("#pData","#"+v+"_2").trigger("click");return false}if(Z.which==b.navkeys[2]){a("#nData","#"+v+"_2").trigger("click");return false}}});if(d.checkOnUpdate){a("a.ui-jqdialog-titlebar-close span","#"+j.themodal).removeClass("jqmClose");a("a.ui-jqdialog-titlebar-close","#"+j.themodal).unbind("click").click(function(){if(!g()){return false}a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose});return false})}d.saveicon=a.extend([true,"left","ui-icon-disk"],d.saveicon);d.closeicon=a.extend([true,"left","ui-icon-close"],d.closeicon);if(d.saveicon[0]===true){a("#sData","#"+v+"_2").addClass(d.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.saveicon[2]+"'></span>")}if(d.closeicon[0]===true){a("#cData","#"+v+"_2").addClass(d.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>")}if(b.checkOnSubmit||b.checkOnUpdate){h="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bYes+"</a>";n="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bNo+"</a>";u="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bExit+"</a>";var E,w=d.zIndex||999;w++;if(a.browser.msie&&a.browser.version==6){E='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>'}else{E=""}a("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+w+";display:none;'>&#160;"+E+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(w+1)+"'>"+d.saveData+"<br/><br/>"+h+n+u+"</div>").insertAfter("#"+y);a("#sNew","#"+j.themodal).click(function(){k();a("#"+y).data("disabled",false);a(".confirm","#"+j.themodal).hide();return false});a("#nNew","#"+j.themodal).click(function(){a(".confirm","#"+j.themodal).hide();a("#"+y).data("disabled",false);setTimeout(function(){a(":input","#"+y)[0].focus()},0);return false});a("#cNew","#"+j.themodal).click(function(){a(".confirm","#"+j.themodal).hide();a("#"+y).data("disabled",false);a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose});return false})}if(p){p(a("#"+y))}if(c=="_empty"||!b.viewPagerButtons){a("#pData,#nData","#"+v+"_2").hide()}else{a("#pData,#nData","#"+v+"_2").show()}if(C){C(a("#"+y))}a("#"+j.themodal).data("onClose",b.onClose);a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+B,jqm:d.jqModal,overlay:d.overlay,modal:d.modal});if(!m){a(".jqmOverlay").click(function(){if(!g()){return false}a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose});return false})}if(M){M(a("#"+y))}a(".fm-button","#"+j.themodal).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a("#sData","#"+v+"_2").click(function(Z){D={};P={};a("#FormError","#"+v).hide();W();T();if(D[e.p.id+"_id"]=="_empty"){k()}else{if(d.checkOnSubmit===true){F=a.extend({},D,P);A=J(F,b._savedData);if(A){a("#"+y).data("disabled",true);a(".confirm","#"+j.themodal).show()}else{k()}}else{k()}}return false});a("#cData","#"+v+"_2").click(function(Z){if(!g()){return false}a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+B,jqm:d.jqModal,onClose:b.onClose});return false});a("#nData","#"+v+"_2").click(function(Z){if(!g()){return false}a("#FormError","#"+v).hide();var aa=Y();aa[0]=parseInt(aa[0],10);if(aa[0]!=-1&&aa[1][aa[0]+1]){if(a.isFunction(d.onclickPgButtons)){d.onclickPgButtons("next",a("#"+y),aa[1][aa[0]])}q(aa[1][aa[0]+1],e,y);a(e).jqGrid("setSelection",aa[1][aa[0]+1]);if(a.isFunction(d.afterclickPgButtons)){d.afterclickPgButtons("next",a("#"+y),aa[1][aa[0]+1])}I(aa[0]+1,aa[1].length-1)}return false});a("#pData","#"+v+"_2").click(function(aa){if(!g()){return false}a("#FormError","#"+v).hide();var Z=Y();if(Z[0]!=-1&&Z[1][Z[0]-1]){if(a.isFunction(d.onclickPgButtons)){d.onclickPgButtons("prev",a("#"+y),Z[1][Z[0]])}q(Z[1][Z[0]-1],e,y);a(e).jqGrid("setSelection",Z[1][Z[0]-1]);if(a.isFunction(d.afterclickPgButtons)){d.afterclickPgButtons("prev",a("#"+y),Z[1][Z[0]-1])}I(Z[0]-1,Z[1].length-1)}return false})}var Q=Y();I(Q[0],Q[1].length-1)})},viewGridRow:function(b,c){c=a.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true},a.jgrid.view,c||{});return this.each(function(){var w=this;if(!w.grid||!b){return}if(!c.imgpath){c.imgpath=w.p.imgpath}var s=w.p.id,A="ViewGrid_"+s,t="ViewTbl_"+s,j={themodal:"viewmod"+s,modalhead:"viewhd"+s,modalcontent:"viewcnt"+s,scrollelm:A},z=a.isFunction(c.beforeInitData)?c.beforeInitData:false,m=true,g=1,f=0;function k(){if(c.closeOnEscape===true||c.navkeys[0]===true){setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+j.modalhead).focus()},0)}}function o(K,Q,O,W){var G,J,R,U=0,Z,aa,Y=[],P=false,L="<td class='CaptionTD form-view-label ui-widget-content' width='"+c.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",N="",H="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",M=["integer","number","currency"],T=0,S=0,I,F,X;for(var V=1;V<=W;V++){N+=V==1?L:H}a(Q.p.colModel).each(function(ac){if(this.editrules&&this.editrules.edithidden===true){J=false}else{J=this.hidden===true?true:false}if(!J&&this.align==="right"){if(this.formatter&&a.inArray(this.formatter,M)!==-1){T=Math.max(T,parseInt(this.width,10))}else{S=Math.max(S,parseInt(this.width,10))}}});I=T!==0?T:S!==0?S:0;P=a(Q).jqGrid("getInd",K);a(Q.p.colModel).each(function(ad){G=this.name;F=false;if(this.editrules&&this.editrules.edithidden===true){J=false}else{J=this.hidden===true?true:false}aa=J?"style='display:none'":"";X=(typeof this.viewable!="boolean")?true:this.viewable;if(G!=="cb"&&G!=="subgrid"&&G!=="rn"&&X){if(P===false){Z=""}else{if(G==Q.p.ExpandColumn&&Q.p.treeGrid===true){Z=a("td:eq("+ad+")",Q.rows[P]).text()}else{Z=a("td:eq("+ad+")",Q.rows[P]).html()}}F=this.align==="right"&&I!==0?true:false;var ac=a.extend({},this.editoptions||{},{id:G,name:G}),ah=a.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),ae=parseInt(ah.rowpos,10)||U+1,ag=parseInt((parseInt(ah.colpos,10)||1)*2,10);if(ah.rowabove){var af=a("<tr><td class='contentinfo' colspan='"+(W*2)+"'>"+ah.rowcontent+"</td></tr>");a(O).append(af);af[0].rp=ae}R=a(O).find("tr[rowpos="+ae+"]");if(R.length===0){R=a("<tr "+aa+" rowpos='"+ae+"'></tr>").addClass("FormData").attr("id","trv_"+G);a(R).append(N);a(O).append(R);R[0].rp=ae}a("td:eq("+(ag-2)+")",R[0]).html("<b>"+(typeof ah.label==="undefined"?Q.p.colNames[ad]:ah.label)+"</b>");a("td:eq("+(ag-1)+")",R[0]).append("<span>"+Z+"</span>").attr("id","v_"+G);if(F){a("td:eq("+(ag-1)+") span",R[0]).css({"text-align":"right",width:I+"px"})}Y[U]=ad;U++}});if(U>0){var ab=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(W*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+K+"'/></td></tr>");ab[0].rp=U+99;a(O).append(ab)}return Y}function n(J,L){var F,M,I=0,H,G,K;K=a(L).jqGrid("getInd",J,true);if(!K){return}a("td",K).each(function(N){F=L.p.colModel[N].name;if(L.p.colModel[N].editrules&&L.p.colModel[N].editrules.edithidden===true){M=false}else{M=L.p.colModel[N].hidden===true?true:false}if(F!=="cb"&&F!=="subgrid"&&F!=="rn"){if(F==L.p.ExpandColumn&&L.p.treeGrid===true){H=a(this).text()}else{H=a(this).html()}G=a.extend({},L.p.colModel[N].editoptions||{});F=a.jgrid.jqID("v_"+F);a("#"+F+" span","#"+t).html(H);if(M){a("#"+F,"#"+t).parents("tr:first").hide()}I++}});if(I>0){a("#id_g","#"+t).val(J)}}function p(F,G){if(F===0){a("#pData","#"+t+"_2").addClass("ui-state-disabled")}else{a("#pData","#"+t+"_2").removeClass("ui-state-disabled")}if(F==G){a("#nData","#"+t+"_2").addClass("ui-state-disabled")}else{a("#nData","#"+t+"_2").removeClass("ui-state-disabled")}}function h(){var G=a(w).jqGrid("getDataIDs"),F=a("#id_g","#"+t).val(),H=a.inArray(F,G);return[H,G]}if(a("#"+j.themodal).html()!==null){if(z){m=z(a("#"+A));if(typeof(m)=="undefined"){m=true}}if(m===false){return}a(".ui-jqdialog-title","#"+j.modalhead).html(c.caption);a("#FormError","#"+t).hide();n(b,w);if(a.isFunction(c.beforeShowForm)){c.beforeShowForm(a("#"+A))}a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+s,jqm:c.jqModal,jqM:false,overlay:c.overlay,modal:c.modal});k()}else{var y=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px";var C=a("<form name='FormPost' id='"+A+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+y+";'></form>"),l=a("<table id='"+t+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(z){m=z(a("#"+A));if(typeof(m)=="undefined"){m=true}}if(m===false){return}a(w.p.colModel).each(function(F){var G=this.formoptions;g=Math.max(g,G?G.colpos||0:0);f=Math.max(f,G?G.rowpos||0:0)});a(C).append(l);o(b,w,l,g);var x=w.p.direction=="rtl"?true:false,E=x?"nData":"pData",e=x?"pData":"nData",u="<a href='javascript:void(0)' id='"+E+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",v="<a href='javascript:void(0)' id='"+e+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",D="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+c.bClose+"</a>";if(f>0){var d=[];a.each(a(l)[0].rows,function(F,G){d[F]=G});d.sort(function(G,F){if(G.rp>F.rp){return 1}if(G.rp<F.rp){return -1}return 0});a.each(d,function(F,G){a("tbody",l).append(G)})}c.gbox="#gbox_"+s;var r=false;if(c.closeOnEscape===true){c.closeOnEscape=false;r=true}var B=a("<span></span>").append(C).append("<table border='0' class='EditTable' id='"+t+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+c.labelswidth+"'>"+(x?v+u:u+v)+"</td><td class='EditButton'>"+D+"</td></tr></tbody></table>");a.jgrid.createModal(j,B,c,"#gview_"+w.p.id,a("#gview_"+w.p.id)[0]);if(x){a("#pData, #nData","#"+t+"_2").css("float","right");a(".EditButton","#"+t+"_2").css("text-align","left")}if(!c.viewPagerButtons){a("#pData, #nData","#"+t+"_2").hide()}B=null;a("#"+j.themodal).keydown(function(F){if(F.which===27){if(r){a.jgrid.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:c.onClose})}return false}if(c.navkeys[0]===true){if(F.which===c.navkeys[1]){a("#pData","#"+t+"_2").trigger("click");return false}if(F.which===c.navkeys[2]){a("#nData","#"+t+"_2").trigger("click");return false}}});c.closeicon=a.extend([true,"left","ui-icon-close"],c.closeicon);if(c.closeicon[0]===true){a("#cData","#"+t+"_2").addClass(c.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.closeicon[2]+"'></span>")}if(a.isFunction(c.beforeShowForm)){c.beforeShowForm(a("#"+A))}a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+s,jqm:c.jqModal,modal:c.modal});a(".fm-button:not(.ui-state-disabled)","#"+t+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});k();a("#cData","#"+t+"_2").click(function(F){a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+s,jqm:c.jqModal,onClose:c.onClose});return false});a("#nData","#"+t+"_2").click(function(F){a("#FormError","#"+t).hide();var G=h();G[0]=parseInt(G[0],10);if(G[0]!=-1&&G[1][G[0]+1]){if(a.isFunction(c.onclickPgButtons)){c.onclickPgButtons("next",a("#"+A),G[1][G[0]])}n(G[1][G[0]+1],w);a(w).jqGrid("setSelection",G[1][G[0]+1]);if(a.isFunction(c.afterclickPgButtons)){c.afterclickPgButtons("next",a("#"+A),G[1][G[0]+1])}p(G[0]+1,G[1].length-1)}k();return false});a("#pData","#"+t+"_2").click(function(G){a("#FormError","#"+t).hide();var F=h();if(F[0]!=-1&&F[1][F[0]-1]){if(a.isFunction(c.onclickPgButtons)){c.onclickPgButtons("prev",a("#"+A),F[1][F[0]])}n(F[1][F[0]-1],w);a(w).jqGrid("setSelection",F[1][F[0]-1]);if(a.isFunction(c.afterclickPgButtons)){c.afterclickPgButtons("prev",a("#"+A),F[1][F[0]-1])}p(F[0]-1,F[1].length-1)}k();return false})}var q=h();p(q[0],q[1].length-1)})},delGridRow:function(b,d){d=a.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},a.jgrid.del,d||{});var c=d;return this.each(function(){var p=this;if(!p.grid){return}if(!b){return}var q=a.isFunction(d.beforeShowForm),g=a.isFunction(d.afterShowForm),t=a.isFunction(d.beforeInitData)?d.beforeInitData:false,e=p.p.id,f={},l=true,m="DelTbl_"+e,s,r,o,k,h={themodal:"delmod"+e,modalhead:"delhd"+e,modalcontent:"delcnt"+e,scrollelm:m};if(jQuery.isArray(b)){b=b.join()}if(a("#"+h.themodal).html()!==null){if(t){l=t(a("#"+m));if(typeof(l)=="undefined"){l=true}}if(l===false){return}a("#DelData>td","#"+m).text(b);a("#DelError","#"+m).hide();if(c.processing===true){c.processing=false;a("#dData","#"+m).removeClass("ui-state-active")}if(q){d.beforeShowForm(a("#"+m))}a.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+e,jqm:d.jqModal,jqM:false,overlay:d.overlay,modal:d.modal});if(g){d.afterShowForm(a("#"+m))}}else{var u=isNaN(d.dataheight)?d.dataheight:d.dataheight+"px";var n="<div id='"+m+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+u+";'>";n+="<table class='DelTable'><tbody>";n+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";n+="<tr id='DelData' style='display:none'><td >"+b+"</td></tr>";n+='<tr><td class="delmsg" style="white-space:pre;">'+d.msg+"</td></tr><tr><td >&#160;</td></tr>";n+="</tbody></table></div>";var j="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",v="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>";n+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+m+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr></tr><tr><td class='DelButton EditButton'>"+j+"&#160;"+v+"</td></tr></tbody></table>";d.gbox="#gbox_"+e;a.jgrid.createModal(h,n,d,"#gview_"+p.p.id,a("#gview_"+p.p.id)[0]);if(t){l=t(a("#"+m));if(typeof(l)=="undefined"){l=true}}if(l===false){return}a(".fm-button","#"+m+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});d.delicon=a.extend([true,"left","ui-icon-scissors"],d.delicon);d.cancelicon=a.extend([true,"left","ui-icon-cancel"],d.cancelicon);if(d.delicon[0]===true){a("#dData","#"+m+"_2").addClass(d.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.delicon[2]+"'></span>")}if(d.cancelicon[0]===true){a("#eData","#"+m+"_2").addClass(d.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.cancelicon[2]+"'></span>")}a("#dData","#"+m+"_2").click(function(z){var x=[true,""];f={};var y=a("#DelData>td","#"+m).text();if(a.isFunction(d.onclickSubmit)){f=d.onclickSubmit(c,y)||{}}if(a.isFunction(d.beforeSubmit)){x=d.beforeSubmit(y)}if(x[0]&&!c.processing){c.processing=true;a(this).addClass("ui-state-active");o=p.p.prmNames;s=a.extend({},c.delData,f);k=o.oper;s[k]=o.deloper;r=o.id;s[r]=y;var w=a.extend({url:c.url?c.url:a(p).jqGrid("getGridParam","editurl"),type:d.mtype,data:a.isFunction(d.serializeDelData)?d.serializeDelData(s):s,complete:function(D,B){if(B!="success"){x[0]=false;if(a.isFunction(c.errorTextFormat)){x[1]=c.errorTextFormat(D)}else{x[1]=B+" Status: '"+D.statusText+"'. Error code: "+D.status}}else{if(a.isFunction(c.afterSubmit)){x=c.afterSubmit(D,s)}}if(x[0]===false){a("#DelError>td","#"+m).html(x[1]);a("#DelError","#"+m).show()}else{if(c.reloadAfterSubmit&&p.p.datatype!="local"){a(p).trigger("reloadGrid")}else{var A=[];A=y.split(",");if(p.p.treeGrid===true){try{a(p).jqGrid("delTreeNode",A[0])}catch(E){}}else{for(var C=0;C<A.length;C++){a(p).jqGrid("delRowData",A[C])}}p.p.selrow=null;p.p.selarrrow=[]}if(a.isFunction(c.afterComplete)){setTimeout(function(){c.afterComplete(D,y)},500)}}c.processing=false;a("#dData","#"+m+"_2").removeClass("ui-state-active");if(x[0]){a.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+e,jqm:d.jqModal,onClose:c.onClose})}}},a.jgrid.ajaxOptions,d.ajaxDelOptions);if(!w.url&&!c.useDataProxy){if(a.isFunction(p.p.dataProxy)){c.useDataProxy=true}else{x[0]=false;x[1]+=" "+a.jgrid.errors.nourl}}if(x[0]){if(c.useDataProxy){p.p.dataProxy.call(p,w,"del_"+p.p.id)}else{a.ajax(w)}}}if(x[0]===false){a("#DelError>td","#"+m).html(x[1]);a("#DelError","#"+m).show()}return false});a("#eData","#"+m+"_2").click(function(w){a.jgrid.hideModal("#"+h.themodal,{gb:"#gbox_"+e,jqm:d.jqModal,onClose:c.onClose});return false});if(q){d.beforeShowForm(a("#"+m))}a.jgrid.viewModal("#"+h.themodal,{gbox:"#gbox_"+e,jqm:d.jqModal,overlay:d.overlay,modal:d.modal});if(g){d.afterShowForm(a("#"+m))}}if(d.closeOnEscape===true){setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+h.modalhead).focus()},0)}})},navGrid:function(e,g,d,f,c,b,h){g=a.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},a.jgrid.nav,g||{});return this.each(function(){if(this.nav){return}var j={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},n=this,m,v,p,k;if(!n.grid||typeof e!="string"){return}if(a("#"+j.themodal).html()===null){if(typeof window.innerWidth!="undefined"){m=window.innerWidth;v=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){m=document.documentElement.clientWidth;v=document.documentElement.clientHeight}else{m=1024;v=768}}a.jgrid.createModal(j,"<div>"+g.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+n.p.id,jqModal:true,drag:true,resize:true,caption:g.alertcap,top:v/2-25,left:m/2-100,width:200,height:"auto",closeOnEscape:g.closeOnEscape},"","",true)}var q=1;if(g.cloneToTop&&n.p.toppager){q=2}for(var o=0;o<q;o++){var r,t=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),u="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",l,s;if(o===0){l=e;s=n.p.id;if(l==n.p.toppager){s+="_top";q=1}}else{l=n.p.toppager;s=n.p.id+"_top"}if(n.p.direction=="rtl"){a(t).attr("dir","rtl").css("float","right")}if(g.add){f=f||{};r=a("<td class='ui-pg-button ui-corner-all'></td>");a(r).append("<div class='ui-pg-div'><span class='ui-icon "+g.addicon+"'></span>"+g.addtext+"</div>");a("tr",t).append(r);a(r,t).attr({title:g.addtitle||"",id:f.id||"add_"+s}).click(function(){if(!a(this).hasClass("ui-state-disabled")){if(a.isFunction(g.addfunc)){g.addfunc()}else{a(n).jqGrid("editGridRow","new",f)}}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")});r=null}if(g.edit){r=a("<td class='ui-pg-button ui-corner-all'></td>");d=d||{};a(r).append("<div class='ui-pg-div'><span class='ui-icon "+g.editicon+"'></span>"+g.edittext+"</div>");a("tr",t).append(r);a(r,t).attr({title:g.edittitle||"",id:d.id||"edit_"+s}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var w=n.p.selrow;if(w){if(a.isFunction(g.editfunc)){g.editfunc(w)}else{a(n).jqGrid("editGridRow",w,d)}}else{a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+n.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")});r=null}if(g.view){r=a("<td class='ui-pg-button ui-corner-all'></td>");h=h||{};a(r).append("<div class='ui-pg-div'><span class='ui-icon "+g.viewicon+"'></span>"+g.viewtext+"</div>");a("tr",t).append(r);a(r,t).attr({title:g.viewtitle||"",id:h.id||"view_"+s}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var w=n.p.selrow;if(w){if(a.isFunction(g.viewfunc)){g.viewfunc(w)}else{a(n).jqGrid("viewGridRow",w,h)}}else{a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+n.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")});r=null}if(g.del){r=a("<td class='ui-pg-button ui-corner-all'></td>");c=c||{};a(r).append("<div class='ui-pg-div'><span class='ui-icon "+g.delicon+"'></span>"+g.deltext+"</div>");a("tr",t).append(r);a(r,t).attr({title:g.deltitle||"",id:c.id||"del_"+s}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var w;if(n.p.multiselect){w=n.p.selarrrow;if(w.length===0){w=null}}else{w=n.p.selrow}if(w){if("function"==typeof g.delfunc){g.delfunc(w)}else{a(n).jqGrid("delGridRow",w,c)}}else{a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+n.p.id,jqm:true});a("#jqg_alrt").focus()}}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")});r=null}if(g.add||g.edit||g.del||g.view){a("tr",t).append(u)}if(g.search){r=a("<td class='ui-pg-button ui-corner-all'></td>");b=b||{};a(r).append("<div class='ui-pg-div'><span class='ui-icon "+g.searchicon+"'></span>"+g.searchtext+"</div>");a("tr",t).append(r);a(r,t).attr({title:g.searchtitle||"",id:b.id||"search_"+s}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a(n).jqGrid("searchGrid",b)}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")});if(b.showOnLoad&&b.showOnLoad===true){a(r,t).click()}r=null}if(g.refresh){r=a("<td class='ui-pg-button ui-corner-all'></td>");a(r).append("<div class='ui-pg-div'><span class='ui-icon "+g.refreshicon+"'></span>"+g.refreshtext+"</div>");a("tr",t).append(r);a(r,t).attr({title:g.refreshtitle||"",id:"refresh_"+s}).click(function(){if(!a(this).hasClass("ui-state-disabled")){if(a.isFunction(g.beforeRefresh)){g.beforeRefresh()}n.p.search=false;try{var w=n.p.id;n.p.postData.filters="";a("#fbox_"+w).jqFilter("resetFilter");if(a.isFunction(n.clearToolbar)){n.clearToolbar(false)}}catch(x){}switch(g.refreshstate){case"firstpage":a(n).trigger("reloadGrid",[{page:1}]);break;case"current":a(n).trigger("reloadGrid",[{current:true}]);break}if(a.isFunction(g.afterRefresh)){g.afterRefresh()}}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")});r=null}k=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ></div>");p=a(t).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(l+"_"+g.position,l).append(t);if(n.p._nvtd){if(p>n.p._nvtd[0]){a(l+"_"+g.position,l).width(p);n.p._nvtd[0]=p}n.p._nvtd[1]=p}k=null;p=null;t=null;this.nav=true}})},navButtonAdd:function(b,c){c=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},c||{});return this.each(function(){if(!this.grid){return}if(b.indexOf("#")!==0){b="#"+b}var d=a(".navtable",b)[0],f=this;if(d){if(c.id&&a("#"+c.id,d).html()!==null){return}var e=a("<td></td>");if(c.buttonicon.toString().toUpperCase()=="NONE"){a(e).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+c.caption+"</div>")}else{a(e).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+c.buttonicon+"'></span>"+c.caption+"</div>")}if(c.id){a(e).attr("id",c.id)}if(c.position=="first"){if(d.rows[0].cells.length===0){a("tr",d).append(e)}else{a("tr td:eq(0)",d).before(e)}}else{a("tr",d).append(e)}a(e,d).attr("title",c.title||"").click(function(g){if(!a(this).hasClass("ui-state-disabled")){if(a.isFunction(c.onClickButton)){c.onClickButton.call(f,g)}}return false}).hover(function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")})}})},navSeparatorAdd:function(b,c){c=a.extend({sepclass:"ui-separator",sepcontent:""},c||{});return this.each(function(){if(!this.grid){return}if(b.indexOf("#")!==0){b="#"+b}var e=a(".navtable",b)[0];if(e){var d="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+c.sepclass+"'></span>"+c.sepcontent+"</td>";a("tr",e).append(d)}})},GridToForm:function(b,c){return this.each(function(){var f=this;if(!f.grid){return}var e=a(f).jqGrid("getRowData",b);if(e){for(var d in e){if(a("[name="+a.jgrid.jqID(d)+"]",c).is("input:radio")||a("[name="+a.jgrid.jqID(d)+"]",c).is("input:checkbox")){a("[name="+a.jgrid.jqID(d)+"]",c).each(function(){if(a(this).val()==e[d]){a(this).attr("checked","checked")}else{a(this).attr("checked","")}})}else{a("[name="+a.jgrid.jqID(d)+"]",c).val(e[d])}}}})},FormToGrid:function(c,d,e,b){return this.each(function(){var h=this;if(!h.grid){return}if(!e){e="set"}if(!b){b="first"}var f=a(d).serializeArray();var g={};a.each(f,function(j,k){g[k.name]=k.value});if(e=="add"){a(h).jqGrid("addRowData",c,g,b)}else{if(e=="set"){a(h).jqGrid("setRowData",c,g)}}})}})})(jQuery);(function(a){a.jgrid.extend({editRow:function(c,n,m,g,b,h,f,j,k){var e={keys:n||false,oneditfunc:m||null,successfunc:g||null,url:b||null,extraparam:h||{},aftersavefunc:f||null,errorfunc:j||null,afterrestorefunc:k||null,restoreAfterErorr:true},l=a.makeArray(arguments).slice(1),d;if(l[0]&&typeof(l[0])=="object"&&!a.isFunction(l[0])){d=a.extend(e,l[0])}else{d=e}return this.each(function(){var r=this,w,s,p,q=0,v=null,u={},o,t;if(!r.grid){return}o=a(r).jqGrid("getInd",c,true);if(o===false){return}p=a(o).attr("editable")||"0";if(p=="0"&&!a(o).hasClass("not-editable-row")){t=r.p.colModel;a("td",o).each(function(A){w=t[A].name;var z=r.p.treeGrid===true&&w==r.p.ExpandColumn;if(z){s=a("span:first",this).html()}else{try{s=a.unformat(this,{rowId:c,colModel:t[A]},A)}catch(x){s=(t[A].edittype&&t[A].edittype=="textarea")?a(this).text():a(this).html()}}if(w!="cb"&&w!="subgrid"&&w!="rn"){if(r.p.autoencode){s=a.jgrid.htmlDecode(s)}u[w]=s;if(t[A].editable===true){if(v===null){v=A}if(z){a("span:first",this).html("")}else{a(this).html("")}var y=a.extend({},t[A].editoptions||{},{id:c+"_"+w,name:w});if(!t[A].edittype){t[A].edittype="text"}if(s=="&nbsp;"||s=="&#160;"||(s.length==1&&s.charCodeAt(0)==160)){s=""}var B=a.jgrid.createEl(t[A].edittype,y,s,true,a.extend({},a.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));a(B).addClass("editable");if(z){a("span:first",this).append(B)}else{a(this).append(B)}if(t[A].edittype=="select"&&t[A].editoptions.multiple===true&&a.browser.msie){a(B).width(a(B).width())}q++}}});if(q>0){u.id=c;r.p.savedRow.push(u);a(o).attr("editable","1");a("td:eq("+v+") input",o).focus();if(d.keys===true){a(o).bind("keydown",function(y){if(y.keyCode===27){a(r).jqGrid("restoreRow",c,k)}if(y.keyCode===13){var x=y.target;if(x.tagName=="TEXTAREA"){return true}a(r).jqGrid("saveRow",c,d);return false}y.stopPropagation()})}if(a.isFunction(d.oneditfunc)){d.oneditfunc.call(r,c)}}}})},saveRow:function(m,j,g,h,r,p,b){var F={successfunc:j||null,url:g||null,extraparam:h||{},aftersavefunc:r||null,errorfunc:p||null,afterrestorefunc:b||null,restoreAfterErorr:true},d=a.makeArray(arguments).slice(1),A;if(d[0]&&typeof(d[0])=="object"&&!a.isFunction(d[0])){A=a.extend(F,d[0])}else{A=F}var n=false;var D=this[0],c,G={},z={},y={},B,l,f,u;if(!D.grid){return n}u=a(D).jqGrid("getInd",m,true);if(u===false){return n}B=a(u).attr("editable");A.url=A.url?A.url:D.p.editurl;if(B==="1"){var s;a("td",u).each(function(o){s=D.p.colModel[o];c=s.name;if(c!="cb"&&c!="subgrid"&&s.editable===true&&c!="rn"&&!a(this).hasClass("not-editable-cell")){switch(s.edittype){case"checkbox":var k=["Yes","No"];if(s.editoptions){k=s.editoptions.value.split(":")}G[c]=a("input",this).attr("checked")?k[0]:k[1];break;case"text":case"password":case"textarea":case"button":G[c]=a("input, textarea",this).val();break;case"select":if(!s.editoptions.multiple){G[c]=a("select>option:selected",this).val();z[c]=a("select>option:selected",this).text()}else{var H=a("select",this),J=[];G[c]=a(H).val();if(G[c]){G[c]=G[c].join(",")}else{G[c]=""}a("select > option:selected",this).each(function(e,K){J[e]=a(K).text()});z[c]=J.join(",")}if(s.formatter&&s.formatter=="select"){z={}}break;case"custom":try{if(s.editoptions&&a.isFunction(s.editoptions.custom_value)){G[c]=s.editoptions.custom_value.call(D,a(".customelement",this),"get");if(G[c]===undefined){throw"e2"}}else{throw"e1"}}catch(I){if(I=="e1"){a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}if(I=="e2"){a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,I.message,jQuery.jgrid.edit.bClose)}}break}f=a.jgrid.checkValues(G[c],o,D);if(f[0]===false){f[1]=G[c]+" "+f[1];return false}if(D.p.autoencode){G[c]=a.jgrid.htmlEncode(G[c])}if(A.url!=="clientArray"&&s.editoptions&&s.editoptions.NullIfEmpty===true){if(G[c]==""){y[c]="null"}}}});if(f[0]===false){try{var q=a.jgrid.findPos(a("#"+a.jgrid.jqID(m),D.grid.bDiv)[0]);a.jgrid.info_dialog(a.jgrid.errors.errcap,f[1],a.jgrid.edit.bClose,{left:q[0],top:q[1]})}catch(E){alert(f[1])}return n}if(G){var w,t,v;t=D.p.prmNames;v=t.oper;w=t.id;G[v]=t.editoper;G[w]=m;if(typeof(D.p.inlineData)=="undefined"){D.p.inlineData={}}G=a.extend({},G,D.p.inlineData,A.extraparam)}if(A.url=="clientArray"){G=a.extend({},G,z);if(D.p.autoencode){a.each(G,function(k,e){G[k]=a.jgrid.htmlDecode(e)})}var x=a(D).jqGrid("setRowData",m,G);a(u).attr("editable","0");for(var C=0;C<D.p.savedRow.length;C++){if(D.p.savedRow[C].id==m){l=C;break}}if(l>=0){D.p.savedRow.splice(l,1)}if(a.isFunction(A.aftersavefunc)){A.aftersavefunc.call(D,m,x)}n=true}else{a("#lui_"+D.p.id).show();y=a.extend({},G,y);a.ajax(a.extend({url:A.url,data:a.isFunction(D.p.serializeRowData)?D.p.serializeRowData.call(D,y):y,type:"POST",async:false,complete:function(H,I){a("#lui_"+D.p.id).hide();if(I==="success"){var o;if(a.isFunction(A.successfunc)){o=A.successfunc.call(D,H)}else{o=true}if(o===true){if(D.p.autoencode){a.each(G,function(J,k){G[J]=a.jgrid.htmlDecode(k)})}G=a.extend({},G,z);a(D).jqGrid("setRowData",m,G);a(u).attr("editable","0");for(var e=0;e<D.p.savedRow.length;e++){if(D.p.savedRow[e].id==m){l=e;break}}if(l>=0){D.p.savedRow.splice(l,1)}if(a.isFunction(A.aftersavefunc)){A.aftersavefunc.call(D,m,H)}n=true}else{if(a.isFunction(A.errorfunc)){A.errorfunc.call(D,m,H,I)}if(A.restoreAfterError===true){a(D).jqGrid("restoreRow",m,A.afterrestorefunc)}}}},error:function(k,o){a("#lui_"+D.p.id).hide();if(a.isFunction(A.errorfunc)){A.errorfunc.call(D,m,k,o)}else{try{jQuery.jgrid.info_dialog(jQuery.jgrid.errors.errcap,'<div class="ui-state-error">'+k.responseText+"</div>",jQuery.jgrid.edit.bClose,{buttonalign:"right"})}catch(H){alert(k.responseText)}}if(A.restoreAfterError===true){a(D).jqGrid("restoreRow",m,A.afterrestorefunc)}}},a.jgrid.ajaxOptions,D.p.ajaxRowOptions||{}))}a(u).unbind("keydown")}return n},restoreRow:function(c,b){var d=this;return this.each(function(){var m=this,f,h,l={};if(!m.grid){return}h=a(m).jqGrid("getInd",c,true);if(h===false){return}for(var g=0;g<m.p.savedRow.length;g++){if(m.p.savedRow[g].id==c){f=g;break}}if(f>=0){if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker","#"+a.jgrid.jqID(h.id)).datepicker("hide")}catch(j){}}a.each(m.p.colModel,function(e,k){if(this.edittype!="fileupload"&&this.editable===true&&this.name in m.p.savedRow[f]&&!a(this).hasClass("not-editable-cell")){l[this.name]=m.p.savedRow[f][this.name]}});a(m).jqGrid("setRowData",c,l);a(h).attr("editable","0").unbind("keydown");m.p.savedRow.splice(f,1)}if(a.isFunction(b)){b.call(m,c)}})}})})(jQuery);(function(a){a.jgrid.extend({editCell:function(d,c,b){return this.each(function(){var j=this,n,k,g,l;if(!j.grid||j.p.cellEdit!==true){return}c=parseInt(c,10);j.p.selrow=j.rows[d].id;if(!j.p.knv){a(j).jqGrid("GridNav")}if(j.p.savedRow.length>0){if(b===true){if(d==j.p.iRow&&c==j.p.iCol){return}}a(j).jqGrid("saveCell",j.p.savedRow[0].id,j.p.savedRow[0].ic)}else{window.setTimeout(function(){a("#"+j.p.knv).attr("tabindex","-1").focus()},0)}l=j.p.colModel[c];n=l.name;if(n=="subgrid"||n=="cb"||n=="rn"){return}g=a("td:eq("+c+")",j.rows[d]);if(l.editable===true&&b===true&&!g.hasClass("not-editable-cell")){if(parseInt(j.p.iCol,10)>=0&&parseInt(j.p.iRow,10)>=0){a("td:eq("+j.p.iCol+")",j.rows[j.p.iRow]).removeClass("edit-cell ui-state-highlight");a(j.rows[j.p.iRow]).removeClass("selected-row ui-state-hover")}a(g).addClass("edit-cell ui-state-highlight");a(j.rows[d]).addClass("selected-row ui-state-hover");try{k=a.unformat(g,{rowId:j.rows[d].id,colModel:l},c)}catch(m){k=(l.edittype&&l.edittype=="textarea")?a(g).text():a(g).html()}if(j.p.autoencode){k=a.jgrid.htmlDecode(k)}if(!l.edittype){l.edittype="text"}j.p.savedRow.push({id:d,ic:c,name:n,v:k});if(k=="&nbsp;"||k=="&#160;"||(k.length==1&&k.charCodeAt(0)==160)){k=""}if(a.isFunction(j.p.formatCell)){var h=j.p.formatCell.call(j,j.rows[d].id,n,k,d,c);if(h!==undefined){k=h}}var f=a.extend({},l.editoptions||{},{id:d+"_"+n,name:n});var e=a.jgrid.createEl(l.edittype,f,k,true,a.extend({},a.jgrid.ajaxOptions,j.p.ajaxSelectOptions||{}));if(a.isFunction(j.p.beforeEditCell)){j.p.beforeEditCell.call(j,j.rows[d].id,n,k,d,c)}a(g).html("").append(e).attr("tabindex","0");window.setTimeout(function(){a(e).focus()},0);a("input, select, textarea",g).bind("keydown",function(o){if(o.keyCode===27){if(a("input.hasDatepicker",g).length>0){if(a(".ui-datepicker").is(":hidden")){a(j).jqGrid("restoreCell",d,c)}else{a("input.hasDatepicker",g).datepicker("hide")}}else{a(j).jqGrid("restoreCell",d,c)}}if(o.keyCode===13){a(j).jqGrid("saveCell",d,c)}if(o.keyCode==9){if(!j.grid.hDiv.loading){if(o.shiftKey){a(j).jqGrid("prevCell",d,c)}else{a(j).jqGrid("nextCell",d,c)}}else{return false}}o.stopPropagation()});if(a.isFunction(j.p.afterEditCell)){j.p.afterEditCell.call(j,j.rows[d].id,n,k,d,c)}}else{if(parseInt(j.p.iCol,10)>=0&&parseInt(j.p.iRow,10)>=0){a("td:eq("+j.p.iCol+")",j.rows[j.p.iRow]).removeClass("edit-cell ui-state-highlight");a(j.rows[j.p.iRow]).removeClass("selected-row ui-state-hover")}g.addClass("edit-cell ui-state-highlight");a(j.rows[d]).addClass("selected-row ui-state-hover");if(a.isFunction(j.p.onSelectCell)){k=g.html().replace(/\&#160\;/ig,"");j.p.onSelectCell.call(j,j.rows[d].id,n,k,d,c)}}j.p.iCol=c;j.p.iRow=d})},saveCell:function(c,b){return this.each(function(){var w=this,h;if(!w.grid||w.p.cellEdit!==true){return}if(w.p.savedRow.length>=1){h=0}else{h=null}if(h!==null){var q=a("td:eq("+b+")",w.rows[c]),o,d,k=w.p.colModel[b],f=k.name,j=a.jgrid.jqID(f);switch(k.edittype){case"select":if(!k.editoptions.multiple){o=a("#"+c+"_"+j+">option:selected",w.rows[c]).val();d=a("#"+c+"_"+j+">option:selected",w.rows[c]).text()}else{var u=a("#"+c+"_"+j,w.rows[c]),t=[];o=a(u).val();if(o){o.join(",")}else{o=""}a("option:selected",u).each(function(e,v){t[e]=a(v).text()});d=t.join(",")}if(k.formatter){d=o}break;case"checkbox":var r=["Yes","No"];if(k.editoptions){r=k.editoptions.value.split(":")}o=a("#"+c+"_"+j,w.rows[c]).attr("checked")?r[0]:r[1];d=o;break;case"password":case"text":case"textarea":case"button":o=a("#"+c+"_"+j,w.rows[c]).val();d=o;break;case"custom":try{if(k.editoptions&&a.isFunction(k.editoptions.custom_value)){o=k.editoptions.custom_value.call(w,a(".customelement",q),"get");if(o===undefined){throw"e2"}else{d=o}}else{throw"e1"}}catch(x){if(x=="e1"){a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose)}if(x=="e2"){a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose)}else{a.jgrid.info_dialog(jQuery.jgrid.errors.errcap,x.message,jQuery.jgrid.edit.bClose)}}break}if(d!==w.p.savedRow[h].v){if(a.isFunction(w.p.beforeSaveCell)){var s=w.p.beforeSaveCell.call(w,w.rows[c].id,f,o,c,b);if(s){o=s;d=s}}var g=a.jgrid.checkValues(o,b,w);if(g[0]===true){var m={};if(a.isFunction(w.p.beforeSubmitCell)){m=w.p.beforeSubmitCell.call(w,w.rows[c].id,f,o,c,b);if(!m){m={}}}if(a("input.hasDatepicker",q).length>0){a("input.hasDatepicker",q).datepicker("hide")}if(w.p.cellsubmit=="remote"){if(w.p.cellurl){var y={};if(w.p.autoencode){o=a.jgrid.htmlEncode(o)}y[f]=o;var p,n,l;l=w.p.prmNames;p=l.id;n=l.oper;y[p]=w.rows[c].id;y[n]=l.editoper;y=a.extend(m,y);a("#lui_"+w.p.id).show();w.grid.hDiv.loading=true;a.ajax(a.extend({url:w.p.cellurl,data:a.isFunction(w.p.serializeCellData)?w.p.serializeCellData.call(w,y):y,type:"POST",complete:function(e,z){a("#lui_"+w.p.id).hide();w.grid.hDiv.loading=false;if(z=="success"){if(a.isFunction(w.p.afterSubmitCell)){var v=w.p.afterSubmitCell.call(w,e,y.id,f,o,c,b);if(v[0]===true){a(q).empty();a(w).jqGrid("setCell",w.rows[c].id,b,d,false,false,true);a(q).addClass("dirty-cell");a(w.rows[c]).addClass("edited");if(a.isFunction(w.p.afterSaveCell)){w.p.afterSaveCell.call(w,w.rows[c].id,f,o,c,b)}w.p.savedRow.splice(0,1)}else{a.jgrid.info_dialog(a.jgrid.errors.errcap,v[1],a.jgrid.edit.bClose);a(w).jqGrid("restoreCell",c,b)}}else{a(q).empty();a(w).jqGrid("setCell",w.rows[c].id,b,d,false,false,true);a(q).addClass("dirty-cell");a(w.rows[c]).addClass("edited");if(a.isFunction(w.p.afterSaveCell)){w.p.afterSaveCell.call(w,w.rows[c].id,f,o,c,b)}w.p.savedRow.splice(0,1)}}},error:function(e,v){a("#lui_"+w.p.id).hide();w.grid.hDiv.loading=false;if(a.isFunction(w.p.errorCell)){w.p.errorCell.call(w,e,v);a(w).jqGrid("restoreCell",c,b)}else{a.jgrid.info_dialog(a.jgrid.errors.errcap,e.status+" : "+e.statusText+"<br/>"+v,a.jgrid.edit.bClose);a(w).jqGrid("restoreCell",c,b)}}},a.jgrid.ajaxOptions,w.p.ajaxCellOptions||{}))}else{try{a.jgrid.info_dialog(a.jgrid.errors.errcap,a.jgrid.errors.nourl,a.jgrid.edit.bClose);a(w).jqGrid("restoreCell",c,b)}catch(x){}}}if(w.p.cellsubmit=="clientArray"){a(q).empty();a(w).jqGrid("setCell",w.rows[c].id,b,d,false,false,true);a(q).addClass("dirty-cell");a(w.rows[c]).addClass("edited");if(a.isFunction(w.p.afterSaveCell)){w.p.afterSaveCell.call(w,w.rows[c].id,f,o,c,b)}w.p.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,o+" "+g[1],a.jgrid.edit.bClose)},100);a(w).jqGrid("restoreCell",c,b)}catch(x){}}}else{a(w).jqGrid("restoreCell",c,b)}}if(a.browser.opera){a("#"+w.p.knv).attr("tabindex","-1").focus()}else{window.setTimeout(function(){a("#"+w.p.knv).attr("tabindex","-1").focus()},0)}})},restoreCell:function(c,b){return this.each(function(){var h=this,d;if(!h.grid||h.p.cellEdit!==true){return}if(h.p.savedRow.length>=1){d=0}else{d=null}if(d!==null){var g=a("td:eq("+b+")",h.rows[c]);if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker",g).datepicker("hide")}catch(f){}}a(g).empty().attr("tabindex","-1");a(h).jqGrid("setCell",h.rows[c].id,b,h.p.savedRow[d].v,false,false,true);if(a.isFunction(h.p.afterRestoreCell)){h.p.afterRestoreCell.call(h,h.rows[c].id,h.p.savedRow[d].v,c,b)}h.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+h.p.knv).attr("tabindex","-1").focus()},0)})},nextCell:function(c,b){return this.each(function(){var f=this,e=false;if(!f.grid||f.p.cellEdit!==true){return}for(var d=b+1;d<f.p.colModel.length;d++){if(f.p.colModel[d].editable===true){e=d;break}}if(e!==false){a(f).jqGrid("editCell",c,e,true)}else{if(f.p.savedRow.length>0){a(f).jqGrid("saveCell",c,b)}}})},prevCell:function(c,b){return this.each(function(){var f=this,e=false;if(!f.grid||f.p.cellEdit!==true){return}for(var d=b-1;d>=0;d--){if(f.p.colModel[d].editable===true){e=d;break}}if(e!==false){a(f).jqGrid("editCell",c,e,true)}else{if(f.p.savedRow.length>0){a(f).jqGrid("saveCell",c,b)}}})},GridNav:function(){return this.each(function(){var g=this;if(!g.grid||g.p.cellEdit!==true){return}g.p.knv=g.p.id+"_kn";var f=a("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+g.p.knv+"'></span></span>"),d,c;a(f).insertBefore(g.grid.cDiv);a("#"+g.p.knv).focus().keydown(function(h){c=h.keyCode;if(g.p.direction=="rtl"){if(c==37){c=39}else{if(c==39){c=37}}}switch(c){case 38:if(g.p.iRow-1>0){e(g.p.iRow-1,g.p.iCol,"vu");a(g).jqGrid("editCell",g.p.iRow-1,g.p.iCol,false)}break;case 40:if(g.p.iRow+1<=g.rows.length-1){e(g.p.iRow+1,g.p.iCol,"vd");a(g).jqGrid("editCell",g.p.iRow+1,g.p.iCol,false)}break;case 37:if(g.p.iCol-1>=0){d=b(g.p.iCol-1,"lft");e(g.p.iRow,d,"h");a(g).jqGrid("editCell",g.p.iRow,d,false)}break;case 39:if(g.p.iCol+1<=g.p.colModel.length-1){d=b(g.p.iCol+1,"rgt");e(g.p.iRow,d,"h");a(g).jqGrid("editCell",g.p.iRow,d,false)}break;case 13:if(parseInt(g.p.iCol,10)>=0&&parseInt(g.p.iRow,10)>=0){a(g).jqGrid("editCell",g.p.iRow,g.p.iCol,true)}break}return false});function e(q,o,p){if(p.substr(0,1)=="v"){var h=a(g.grid.bDiv)[0].clientHeight,r=a(g.grid.bDiv)[0].scrollTop,s=g.rows[q].offsetTop+g.rows[q].clientHeight,m=g.rows[q].offsetTop;if(p=="vd"){if(s>=h){a(g.grid.bDiv)[0].scrollTop=a(g.grid.bDiv)[0].scrollTop+g.rows[q].clientHeight}}if(p=="vu"){if(m<r){a(g.grid.bDiv)[0].scrollTop=a(g.grid.bDiv)[0].scrollTop-g.rows[q].clientHeight}}}if(p=="h"){var l=a(g.grid.bDiv)[0].clientWidth,k=a(g.grid.bDiv)[0].scrollLeft,j=g.rows[q].cells[o].offsetLeft+g.rows[q].cells[o].clientWidth,n=g.rows[q].cells[o].offsetLeft;if(j>=l+parseInt(k,10)){a(g.grid.bDiv)[0].scrollLeft=a(g.grid.bDiv)[0].scrollLeft+g.rows[q].cells[o].clientWidth}else{if(n<k){a(g.grid.bDiv)[0].scrollLeft=a(g.grid.bDiv)[0].scrollLeft-g.rows[q].cells[o].clientWidth}}}}function b(l,h){var k,j;if(h=="lft"){k=l+1;for(j=l;j>=0;j--){if(g.p.colModel[j].hidden!==true){k=j;break}}}if(h=="rgt"){k=l-1;for(j=l;j<g.p.colModel.length;j++){if(g.p.colModel[j].hidden!==true){k=j;break}}}return k}})},getChangedCells:function(c){var b=[];if(!c){c="all"}this.each(function(){var e=this,d;if(!e.grid||e.p.cellEdit!==true){return}a(e.rows).each(function(f){var g={};if(a(this).hasClass("edited")){a("td",this).each(function(h){d=e.p.colModel[h].name;if(d!=="cb"&&d!=="subgrid"){if(c=="dirty"){if(a(this).hasClass("dirty-cell")){try{g[d]=a.unformat(this,{rowId:e.rows[f].id,colModel:e.p.colModel[h]},h)}catch(j){g[d]=a.jgrid.htmlDecode(a(this).html())}}}else{try{g[d]=a.unformat(this,{rowId:e.rows[f].id,colModel:e.p.colModel[h]},h)}catch(j){g[d]=a.jgrid.htmlDecode(a(this).html())}}}});g.id=this.id;b.push(g)}})});return b}})})(jQuery);(function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var e=this,b,c={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:false,delayOnLoad:50,selectOnExpand:false,reloadOnExpand:true};e.p.subGridOptions=a.extend(c,e.p.subGridOptions||{});e.p.colNames.unshift("");e.p.colModel.unshift({name:"subgrid",width:a.browser.safari?e.p.subGridWidth+e.p.cellLayout:e.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});b=e.p.subGridModel;if(b[0]){b[0].align=a.extend([],b[0].align||[]);for(var d=0;d<b[0].name.length;d++){b[0].align[d]=b[0].align[d]||"left"}}})},addSubGridCell:function(f,e){var d="",b,c;this.each(function(){d=this.formatCol(f,e);c=this.p.id;b=this.p.subGridOptions.plusicon});return'<td role="grid" aria-describedby="'+c+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+d+"><a href='javascript:void(0);'><span class='ui-icon "+b+"'></span></a></td>"},addSubGrid:function(c,b){return this.each(function(){var n=this;if(!n.grid){return}var f=function(s,r,u){var t=a("<td align='"+n.p.subGridModel[0].align[u]+"'></td>").html(r);a(s).append(t)};var e=function(s,y){var x,v,u,w=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),r=a("<tr></tr>");for(v=0;v<n.p.subGridModel[0].name.length;v++){x=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+n.p.direction+"'></th>");a(x).html(n.p.subGridModel[0].name[v]);a(x).width(n.p.subGridModel[0].width[v]);a(r).append(x)}a(w).append(r);if(s){u=n.p.xmlReader.subgrid;a(u.root+" "+u.row,s).each(function(){r=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(u.repeatitems===true){a(u.cell,this).each(function(A){f(r,a(this).text()||"&#160;",A)})}else{var z=n.p.subGridModel[0].mapping||n.p.subGridModel[0].name;if(z){for(v=0;v<z.length;v++){f(r,a(z[v],this).text()||"&#160;",v)}}}a(w).append(r)})}var t=a("table:first",n.grid.bDiv).attr("id")+"_";a("#"+t+y).append(w);n.grid.hDiv.loading=false;a("#load_"+n.p.id).hide();return false};var g=function(y,v){var A,C,w,z,r,u,t=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),s=a("<tr></tr>");for(w=0;w<n.p.subGridModel[0].name.length;w++){A=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+n.p.direction+"'></th>");a(A).html(n.p.subGridModel[0].name[w]);a(A).width(n.p.subGridModel[0].width[w]);a(s).append(A)}a(t).append(s);if(y){r=n.p.jsonReader.subgrid;C=y[r.root];if(typeof C!=="undefined"){for(w=0;w<C.length;w++){z=C[w];s=a("<tr class='ui-widget-content ui-subtblcell'></tr>");if(r.repeatitems===true){if(r.cell){z=z[r.cell]}for(u=0;u<z.length;u++){f(s,z[u]||"&#160;",u)}}else{var x=n.p.subGridModel[0].mapping||n.p.subGridModel[0].name;if(x.length){for(u=0;u<x.length;u++){f(s,z[x[u]]||"&#160;",u)}}}a(t).append(s)}}}var B=a("table:first",n.grid.bDiv).attr("id")+"_";a("#"+B+v).append(t);n.grid.hDiv.loading=false;a("#load_"+n.p.id).hide();return false};var o=function(u){var r,v,t,s;r=a(u).attr("id");v={nd_:(new Date().getTime())};v[n.p.prmNames.subgridid]=r;if(!n.p.subGridModel[0]){return false}if(n.p.subGridModel[0].params){for(s=0;s<n.p.subGridModel[0].params.length;s++){for(t=0;t<n.p.colModel.length;t++){if(n.p.colModel[t].name==n.p.subGridModel[0].params[s]){v[n.p.colModel[t].name]=a("td:eq("+t+")",u).text().replace(/\&#160\;/ig,"")}}}}if(!n.grid.hDiv.loading){n.grid.hDiv.loading=true;a("#load_"+n.p.id).show();if(!n.p.subgridtype){n.p.subgridtype=n.p.datatype}if(a.isFunction(n.p.subgridtype)){n.p.subgridtype.call(n,v)}else{n.p.subgridtype=n.p.subgridtype.toLowerCase()}switch(n.p.subgridtype){case"xml":case"json":a.ajax(a.extend({type:n.p.mtype,url:n.p.subGridUrl,dataType:n.p.subgridtype,data:a.isFunction(n.p.serializeSubGridData)?n.p.serializeSubGridData.call(n,v):v,complete:function(w){if(n.p.subgridtype=="xml"){e(w.responseXML,r)}else{g(a.jgrid.parse(w.responseText),r)}w=null}},a.jgrid.ajaxOptions,n.p.ajaxSubgridOptions||{}));break}}return false};var p,q,j,l=0,h,d;a.each(n.p.colModel,function(s,r){if(this.hidden===true||this.name=="rn"||this.name=="cb"){l++}});var m=n.rows.length,k=1;if(b!==undefined&&b>0){k=b;m=b+1}while(k<m){if(a(n.rows[k]).hasClass("jqgrow")){a(n.rows[k].cells[c]).bind("click",function(s){var r=a(this).parent("tr")[0];d=r.nextSibling;if(a(this).hasClass("sgcollapsed")){q=n.p.id;p=r.id;if(n.p.subGridOptions.reloadOnExpand===true||(n.p.subGridOptions.reloadOnExpand===false&&!a(d).hasClass("ui-subgrid"))){j=c>=1?"<td colspan='"+c+"'>&#160;</td>":"";h=true;if(a.isFunction(n.p.subGridBeforeExpand)){h=n.p.subGridBeforeExpand.call(n,q+"_"+p,p)}if(h===false){return false}a(r).after("<tr role='row' class='ui-subgrid'>"+j+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+n.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(n.p.colNames.length-1-l,10)+"' class='ui-widget-content subgrid-data'><div id="+q+"_"+p+" class='tablediv'></div></td></tr>");if(a.isFunction(n.p.subGridRowExpanded)){n.p.subGridRowExpanded.call(n,q+"_"+p,p)}else{o(r)}}else{a(d).show()}a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+n.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");if(n.p.subGridOptions.selectOnExpand){a(n).jqGrid("setSelection",p)}}else{if(a(this).hasClass("sgexpanded")){h=true;if(a.isFunction(n.p.subGridRowColapsed)){p=r.id;h=n.p.subGridRowColapsed.call(n,q+"_"+p,p)}if(h===false){return false}if(n.p.subGridOptions.reloadOnExpand===true){a(d).remove(".ui-subgrid")}else{if(a(d).hasClass("ui-subgrid")){a(d).hide()}}a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+n.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}}return false})}if(n.p.subGridOptions.expandOnLoad===true){a(n.rows[k].cells[c]).trigger("click")}k++}n.subGridXml=function(s,r){e(s,r)};n.subGridJson=function(s,r){g(s,r)}})},expandSubGridRow:function(b){return this.each(function(){var e=this;if(!e.grid&&!b){return}if(e.p.subGrid===true){var c=a(this).jqGrid("getInd",b,true);if(c){var d=a("td.sgcollapsed",c)[0];if(d){a(d).trigger("click")}}}})},collapseSubGridRow:function(b){return this.each(function(){var e=this;if(!e.grid&&!b){return}if(e.p.subGrid===true){var c=a(this).jqGrid("getInd",b,true);if(c){var d=a("td.sgexpanded",c)[0];if(d){a(d).trigger("click")}}}})},toggleSubGridRow:function(b){return this.each(function(){var e=this;if(!e.grid&&!b){return}if(e.p.subGrid===true){var c=a(this).jqGrid("getInd",b,true);if(c){var d=a("td.sgcollapsed",c)[0];if(d){a(d).trigger("click")}else{d=a("td.sgexpanded",c)[0];if(d){a(d).trigger("click")}}}}})}})})(jQuery);(function(a){a.jgrid.extend({setTreeNode:function(c,b){return this.each(function(){var q=this;if(!q.grid||!q.p.treeGrid){return}var k=q.p.expColInd,m=q.p.treeReader.expanded_field,t=q.p.treeReader.leaf_field,d=q.p.treeReader.level_field,s=q.p.treeReader.icon_field,o=q.p.treeReader.loaded,v,l,e,h,n,w,u,j;while(c<b){var g=q.rows[c].id,f=q.p._index[g],r;u=q.p.data[f];if(q.p.treeGridModel=="nested"){if(!u[t]){v=parseInt(u[q.p.treeReader.left_field],10);l=parseInt(u[q.p.treeReader.right_field],10);u[t]=(l===v+1)?"true":"false";q.rows[c].cells[q.p._treeleafpos].innerHTML=u[t]}}e=parseInt(u[d],10);if(q.p.tree_root_level===0){h=e+1;n=e}else{h=e;n=e-1}w="<div class='tree-wrap tree-wrap-"+q.p.direction+"' style='width:"+(h*18)+"px;'>";w+="<div style='"+(q.p.direction=="rtl"?"right:":"left:")+(n*18)+"px;' class='ui-icon ";if(u[o]!==undefined){if(u[o]=="true"||u[o]===true){u[o]=true}else{u[o]=false}}if(u[t]=="true"||u[t]===true){w+=((u[s]!==undefined&&u[s]!=="")?u[s]:q.p.treeIcons.leaf)+" tree-leaf treeclick'";u[t]=true;j="leaf"}else{u[t]=false;j=""}u[m]=((u[m]=="true"||u[m]===true)?true:false)&&u[o];if(u[m]===true){w+=q.p.treeIcons.minus+" tree-minus treeclick'"}else{w+=q.p.treeIcons.plus+" tree-plus treeclick'"}w+="</div></div>";a(q.rows[c].cells[k]).wrapInner("<span class='cell-wrapper"+j+"'></span>").prepend(w);if(e!==parseInt(q.p.tree_root_level,10)){var p=a(q).jqGrid("getNodeParent",u);r=p&&p.hasOwnProperty(m)?p[m]:true;if(!r){a(q.rows[c]).css("display","none")}}a(q.rows[c].cells[k]).find("div.treeclick").bind("click",function(y){var x=y.target||y.srcElement,A=a(x,q.rows).closest("tr.jqgrow")[0].id,z=q.p._index[A];if(!q.p.data[z][t]){if(q.p.data[z][m]){a(q).jqGrid("collapseRow",q.p.data[z]);a(q).jqGrid("collapseNode",q.p.data[z])}else{a(q).jqGrid("expandRow",q.p.data[z]);a(q).jqGrid("expandNode",q.p.data[z])}}return false});if(q.p.ExpandColClick===true){a(q.rows[c].cells[k]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(y){var x=y.target||y.srcElement,A=a(x,q.rows).closest("tr.jqgrow")[0].id,z=q.p._index[A];if(!q.p.data[z][t]){if(q.p.data[z][m]){a(q).jqGrid("collapseRow",q.p.data[z]);a(q).jqGrid("collapseNode",q.p.data[z])}else{a(q).jqGrid("expandRow",q.p.data[z]);a(q).jqGrid("expandNode",q.p.data[z])}}a(q).jqGrid("setSelection",A);return false})}c++}})},setTreeGrid:function(){return this.each(function(){var j=this,f=0,d,h=false,c,e,b=[];if(!j.p.treeGrid){return}if(!j.p.treedatatype){a.extend(j.p,{treedatatype:j.p.datatype})}j.p.subGrid=false;j.p.altRows=false;j.p.pgbuttons=false;j.p.pginput=false;j.p.gridview=true;j.p.multiselect=false;j.p.rowList=[];j.p.expColInd=0;d="ui-icon-triangle-1-"+(j.p.direction=="rtl"?"w":"e");j.p.treeIcons=a.extend({plus:d,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},j.p.treeIcons||{});if(j.p.treeGridModel=="nested"){j.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},j.p.treeReader)}else{if(j.p.treeGridModel=="adjacency"){j.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},j.p.treeReader)}}for(e in j.p.colModel){if(j.p.colModel.hasOwnProperty(e)){c=j.p.colModel[e].name;if(c==j.p.ExpandColumn&&!h){h=true;j.p.expColInd=f}f++;for(var g in j.p.treeReader){if(j.p.treeReader[g]==c){b.push(c)}}}}a.each(j.p.treeReader,function(k,l){if(l&&a.inArray(l,b)===-1){if(k==="leaf_field"){j.p._treeleafpos=f}f++;j.p.colNames.push(l);j.p.colModel.push({name:l,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})})},expandRow:function(b){this.each(function(){var e=this;if(!e.grid||!e.p.treeGrid){return}var d=a(e).jqGrid("getNodeChildren",b),c=e.p.treeReader.expanded_field;a(d).each(function(f){var g=a.jgrid.getAccessor(this,e.p.localReader.id);a("#"+g,e.grid.bDiv).css("display","");if(this[c]){a(e).jqGrid("expandRow",this)}})})},collapseRow:function(b){this.each(function(){var e=this;if(!e.grid||!e.p.treeGrid){return}var d=a(e).jqGrid("getNodeChildren",b),c=e.p.treeReader.expanded_field;a(d).each(function(f){var g=a.jgrid.getAccessor(this,e.p.localReader.id);a("#"+g,e.grid.bDiv).css("display","none");if(this[c]){a(e).jqGrid("collapseRow",this)}})})},getRootNodes:function(){var b=[];this.each(function(){var e=this;if(!e.grid||!e.p.treeGrid){return}switch(e.p.treeGridModel){case"nested":var d=e.p.treeReader.level_field;a(e.p.data).each(function(f){if(parseInt(this[d],10)===parseInt(e.p.tree_root_level,10)){b.push(this)}});break;case"adjacency":var c=e.p.treeReader.parent_id_field;a(e.p.data).each(function(f){if(this[c]===null||String(this[c]).toLowerCase()=="null"){b.push(this)}});break}});return b},getNodeDepth:function(c){var b=null;this.each(function(){if(!this.grid||!this.p.treeGrid){return}var e=this;switch(e.p.treeGridModel){case"nested":var d=e.p.treeReader.level_field;b=parseInt(c[d],10)-parseInt(e.p.tree_root_level,10);break;case"adjacency":b=a(e).jqGrid("getNodeAncestors",c).length;break}});return b},getNodeParent:function(c){var b=null;this.each(function(){var g=this;if(!g.grid||!g.p.treeGrid){return}switch(g.p.treeGridModel){case"nested":var f=g.p.treeReader.left_field,m=g.p.treeReader.right_field,h=g.p.treeReader.level_field,l=parseInt(c[f],10),k=parseInt(c[m],10),d=parseInt(c[h],10);a(this.p.data).each(function(){if(parseInt(this[h],10)===d-1&&parseInt(this[f],10)<l&&parseInt(this[m],10)>k){b=this;return false}});break;case"adjacency":var j=g.p.treeReader.parent_id_field,e=g.p.localReader.id;a(this.p.data).each(function(n,o){if(this[e]==c[j]){b=this;return false}});break}});return b},getNodeChildren:function(c){var b=[];this.each(function(){var g=this;if(!g.grid||!g.p.treeGrid){return}switch(g.p.treeGridModel){case"nested":var f=g.p.treeReader.left_field,m=g.p.treeReader.right_field,h=g.p.treeReader.level_field,l=parseInt(c[f],10),k=parseInt(c[m],10),d=parseInt(c[h],10);a(this.p.data).each(function(n){if(parseInt(this[h],10)===d+1&&parseInt(this[f],10)>l&&parseInt(this[m],10)<k){b.push(this)}});break;case"adjacency":var j=g.p.treeReader.parent_id_field,e=g.p.localReader.id;a(this.p.data).each(function(n,o){if(this[j]==c[e]){b.push(this)}});break}});return b},getFullTreeNode:function(c){var b=[];this.each(function(){var g=this,h;if(!g.grid||!g.p.treeGrid){return}switch(g.p.treeGridModel){case"nested":var f=g.p.treeReader.left_field,n=g.p.treeReader.right_field,j=g.p.treeReader.level_field,m=parseInt(c[f],10),l=parseInt(c[n],10),d=parseInt(c[j],10);a(this.p.data).each(function(o){if(parseInt(this[j],10)>=d&&parseInt(this[f],10)>=m&&parseInt(this[f],10)<=l){b.push(this)}});break;case"adjacency":if(c){b.push(c);var k=g.p.treeReader.parent_id_field,e=g.p.localReader.id;a(this.p.data).each(function(o){h=b.length;for(o=0;o<h;o++){if(b[o][e]==this[k]){b.push(this);break}}})}break}});return b},getNodeAncestors:function(c){var b=[];this.each(function(){if(!this.grid||!this.p.treeGrid){return}var d=a(this).jqGrid("getNodeParent",c);while(d){b.push(d);d=a(this).jqGrid("getNodeParent",d)}});return b},isVisibleNode:function(c){var b=true;this.each(function(){var f=this;if(!f.grid||!f.p.treeGrid){return}var e=a(f).jqGrid("getNodeAncestors",c),d=f.p.treeReader.expanded_field;a(e).each(function(){b=b&&this[d];if(!b){return false}})});return b},isNodeLoaded:function(c){var b;this.each(function(){var e=this;if(!e.grid||!e.p.treeGrid){return}var d=e.p.treeReader.leaf_field;if(c!==undefined){if(c.loaded!==undefined){b=c.loaded}else{if(c[d]||a(e).jqGrid("getNodeChildren",c).length>0){b=true}else{b=false}}}else{b=false}});return b},expandNode:function(b){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var h=this.p.treeReader.expanded_field,j=this.p.treeReader.parent_id_field,f=this.p.treeReader.loaded,c=this.p.treeReader.level_field,l=this.p.treeReader.left_field,k=this.p.treeReader.right_field;if(!b[h]){var d=a.jgrid.getAccessor(b,this.p.localReader.id);var e=a("#"+d,this.grid.bDiv)[0];var g=this.p._index[d];if(a(this).jqGrid("isNodeLoaded",this.p.data[g])){b[h]=true;a("div.treeclick",e).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else{b[h]=true;a("div.treeclick",e).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=e.rowIndex;this.p.datatype=this.p.treedatatype;if(this.p.treeGridModel=="nested"){a(this).jqGrid("setGridParam",{postData:{nodeid:d,n_left:b[l],n_right:b[k],n_level:b[c]}})}else{a(this).jqGrid("setGridParam",{postData:{nodeid:d,parentid:b[j],n_level:b[c]}})}a(this).trigger("reloadGrid");b[f]=true;if(this.p.treeGridModel=="nested"){a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}})},collapseNode:function(b){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}if(b.expanded){b.expanded=false;var d=a.jgrid.getAccessor(b,this.p.localReader.id);var c=a("#"+d,this.grid.bDiv)[0];a("div.treeclick",c).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}})},SortTree:function(e,c,b,d){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var k,f,m,j=[],n=this,l,h,g=a(this).jqGrid("getRootNodes");l=a.jgrid.from(g);l.orderBy(e,c,b,d);h=l.select();for(k=0,f=h.length;k<f;k++){m=h[k];j.push(m);a(this).jqGrid("collectChildrenSortTree",j,m,e,c,b,d)}a.each(j,function(o,p){var q=a.jgrid.getAccessor(this,n.p.localReader.id);a("#"+n.p.id+" tbody tr:eq("+o+")").after(a("tr#"+q,n.grid.bDiv))});l=null;h=null;j=null})},collectChildrenSortTree:function(b,f,g,d,c,e){return this.each(function(){if(!this.grid||!this.p.treeGrid){return}var k,h,n,l,m,j;l=a(this).jqGrid("getNodeChildren",f);m=a.jgrid.from(l);m.orderBy(g,d,c,e);j=m.select();for(k=0,h=j.length;k<h;k++){n=j[k];b.push(n);a(this).jqGrid("collectChildrenSortTree",b,n,g,d,c,e)}})},setTreeRow:function(b,c){var d=false;this.each(function(){var e=this;if(!e.grid||!e.p.treeGrid){return}d=a(e).jqGrid("setRowData",b,c)});return d},delTreeNode:function(b){return this.each(function(){var j=this,n=j.p.localReader.id,g=j.p.treeReader.left_field,l=j.p.treeReader.right_field,d,e,k,m;if(!j.grid||!j.p.treeGrid){return}var c=j.p._index[b];if(c!==undefined){d=parseInt(j.p.data[c][l],10);e=d-parseInt(j.p.data[c][g],10)+1;var f=a(j).jqGrid("getFullTreeNode",j.p.data[c]);if(f.length>0){for(var h=0;h<f.length;h++){a(j).jqGrid("delRowData",f[h][n])}}if(j.p.treeGridModel==="nested"){k=a.jgrid.from(j.p.data).greater(g,d,{stype:"integer"}).select();if(k.length){for(m in k){k[m][g]=parseInt(k[m][g],10)-e}}k=a.jgrid.from(j.p.data).greater(l,d,{stype:"integer"}).select();if(k.length){for(m in k){k[m][l]=parseInt(k[m][l],10)-e}}}}})},addChildNode:function(g,m,z){var s=this[0];if(z){var n=s.p.treeReader.expanded_field,w=s.p.treeReader.leaf_field,b=s.p.treeReader.level_field,v=s.p.treeReader.icon_field,h=s.p.treeReader.parent_id_field,d=s.p.treeReader.left_field,x=s.p.treeReader.right_field,o=s.p.treeReader.loaded,c,y,j,l,q,r,p=0,k=m,u,t;if(!g){q=s.p.data.length-1;if(q>=0){while(q>=0){p=Math.max(p,parseInt(s.p.data[q][s.p.localReader.id],10));q--}}g=p+1}var C=a(s).jqGrid("getInd",m);u=false;if(m===undefined||m===null||m===""){m=null;k=null;c="last";l=s.p.tree_root_level;q=s.p.data.length+1}else{c="after";y=s.p._index[m];j=s.p.data[y];m=j[s.p.localReader.id];l=parseInt(j[b],10)+1;var e=a(s).jqGrid("getFullTreeNode",j);if(e.length){q=e[e.length-1][s.p.localReader.id];k=q;q=a(s).jqGrid("getInd",k)+1}else{q=a(s).jqGrid("getInd",m)+1}if(j[w]){u=true;j[n]=true;a(s.rows[C]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(s.p.treeIcons.leaf+" tree-leaf").addClass(s.p.treeIcons.minus+" tree-minus");s.p.data[y][w]=false;j[o]=true}}r=q+1;z[n]=false;z[o]=true;z[b]=l;z[w]=true;if(s.p.treeGridModel==="adjacency"){z[h]=m}if(s.p.treeGridModel==="nested"){var f,B,A;if(m!==null){t=parseInt(j[x],10);f=a.jgrid.from(s.p.data);f=f.greaterOrEquals(x,t,{stype:"integer"});B=f.select();if(B.length){for(A in B){B[A][d]=B[A][d]>t?parseInt(B[A][d],10)+2:B[A][d];B[A][x]=B[A][x]>=t?parseInt(B[A][x],10)+2:B[A][x]}}z[d]=t;z[x]=t+1}else{t=parseInt(a(s).jqGrid("getCol",x,false,"max"),10);B=a.jgrid.from(s.p.data).greater(d,t,{stype:"integer"}).select();if(B.length){for(A in B){B[A][d]=parseInt(B[A][d],10)+2}}B=a.jgrid.from(s.p.data).greater(x,t,{stype:"integer"}).select();if(B.length){for(A in B){B[A][x]=parseInt(B[A][x],10)+2}}z[d]=t+1;z[x]=t+2}}if(m===null||a(s).jqGrid("isNodeLoaded",j)||u){a(s).jqGrid("addRowData",g,z,c,k);a(s).jqGrid("setTreeNode",q,r)}if(j&&!j[n]){a(s.rows[C]).find("div.treeclick").click()}}}})})(jQuery);(function(a){a.jgrid.extend({getColProp:function(d){var b={},f=this[0];if(!f.grid){return false}var e=f.p.colModel;for(var c=0;c<e.length;c++){if(e[c].name==d){b=e[c];break}}return b},setColProp:function(c,b){return this.each(function(){if(this.grid){if(b){var e=this.p.colModel;for(var d=0;d<e.length;d++){if(e[d].name==c){a.extend(this.p.colModel[d],b);break}}}}})},sortGrid:function(c,b,d){return this.each(function(){var h=this,e=-1;if(!h.grid){return}if(!c){c=h.p.sortname}for(var g=0;g<h.p.colModel.length;g++){if(h.p.colModel[g].index==c||h.p.colModel[g].name==c){e=g;break}}if(e!=-1){var f=h.p.colModel[e].sortable;if(typeof f!=="boolean"){f=true}if(typeof b!=="boolean"){b=false}if(f){h.sortData("jqgh_"+h.p.id+"_"+c,e,b,d)}}})},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){a(this.p.pager).remove()}var c=this.id;try{a("#gbox_"+c).remove()}catch(b){}}})},GridUnload:function(){return this.each(function(){if(!this.grid){return}var d={id:a(this).attr("id"),cl:a(this).attr("class")};if(this.p.pager){a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom")}var b=document.createElement("table");a(b).attr({id:d.id});b.className=d.cl;var c=this.id;a(b).removeClass("ui-jqgrid-btable");if(a(this.p.pager).parents("#gbox_"+c).length===1){a(b).insertBefore("#gbox_"+c).show();a(this.p.pager).insertBefore("#gbox_"+c)}else{a(b).insertBefore("#gbox_"+c).show()}a("#gbox_"+c).remove()})},setGridState:function(b){return this.each(function(){if(!this.grid){return}var c=this;if(b=="hidden"){a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+c.p.id).slideUp("fast");if(c.p.pager){a(c.p.pager).slideUp("fast")}if(c.p.toppager){a(c.p.toppager).slideUp("fast")}if(c.p.toolbar[0]===true){if(c.p.toolbar[1]=="both"){a(c.grid.ubDiv).slideUp("fast")}a(c.grid.uDiv).slideUp("fast")}if(c.p.footerrow){a(".ui-jqgrid-sdiv","#gbox_"+c.p.id).slideUp("fast")}a(".ui-jqgrid-titlebar-close span",c.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");c.p.gridstate="hidden"}else{if(b=="visible"){a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+c.p.id).slideDown("fast");if(c.p.pager){a(c.p.pager).slideDown("fast")}if(c.p.toppager){a(c.p.toppager).slideDown("fast")}if(c.p.toolbar[0]===true){if(c.p.toolbar[1]=="both"){a(c.grid.ubDiv).slideDown("fast")}a(c.grid.uDiv).slideDown("fast")}if(c.p.footerrow){a(".ui-jqgrid-sdiv","#gbox_"+c.p.id).slideDown("fast")}a(".ui-jqgrid-titlebar-close span",c.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");c.p.gridstate="visible"}}})},filterToolbar:function(b){b=a.extend({autosearch:true,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw"},b||{});return this.each(function(){var j=this;if(this.ftoolbar){return}var c=function(){var o={},n=0,t,u,k={},l;a.each(j.p.colModel,function(v,y){u=this.index||this.name;switch(this.stype){case"select":l=(this.searchoptions&&this.searchoptions.sopt)?this.searchoptions.sopt[0]:"eq";t=a("#gs_"+a.jgrid.jqID(this.name),j.grid.hDiv).val();if(t){o[u]=t;k[u]=l;n++}else{try{delete j.p.postData[u]}catch(w){}}break;case"text":l=(this.searchoptions&&this.searchoptions.sopt)?this.searchoptions.sopt[0]:b.defaultSearch;t=a("#gs_"+a.jgrid.jqID(this.name),j.grid.hDiv).val();if(t){o[u]=t;k[u]=l;n++}else{try{delete j.p.postData[u]}catch(x){}}break}});var r=n>0?true:false;if(b.stringResult===true||j.p.datatype=="local"){var s='{"groupOp":"'+b.groupOp+'","rules":[';var q=0;a.each(o,function(v,w){if(q>0){s+=","}s+='{"field":"'+v+'",';s+='"op":"'+k[v]+'",';w+="";s+='"data":"'+w.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';q++});s+="]}";a.extend(j.p.postData,{filters:s});a.each(["searchField","searchString","searchOper"],function(v,w){if(j.p.postData.hasOwnProperty(w)){delete j.p.postData[w]}})}else{a.extend(j.p.postData,o)}var p;if(j.p.searchurl){p=j.p.url;a(j).jqGrid("setGridParam",{url:j.p.searchurl})}var m=false;if(a.isFunction(b.beforeSearch)){m=b.beforeSearch.call(j)}if(!m){a(j).jqGrid("setGridParam",{search:r}).trigger("reloadGrid",[{page:1}])}if(p){a(j).jqGrid("setGridParam",{url:p})}if(a.isFunction(b.afterSearch)){b.afterSearch()}};var g=function(k){var m={},s,l=0,t;k=(typeof k!="boolean")?true:k;a.each(j.p.colModel,function(u,z){s=(this.searchoptions&&this.searchoptions.defaultValue)?this.searchoptions.defaultValue:"";t=this.index||this.name;switch(this.stype){case"select":var x;a("#gs_"+a.jgrid.jqID(t)+" option",j.grid.hDiv).each(function(y){if(y===0){this.selected=true}if(a(this).text()==s){this.selected=true;x=a(this).val();return false}});if(x){m[t]=x;l++}else{try{delete j.p.postData[t]}catch(v){}}break;case"text":a("#gs_"+a.jgrid.jqID(t),j.grid.hDiv).val(s);if(s){m[t]=s;l++}else{try{delete j.p.postData[t]}catch(w){}}break}});var p=l>0?true:false;if(b.stringResult===true||j.p.datatype=="local"){var q='{"groupOp":"'+b.groupOp+'","rules":[';var o=0;a.each(m,function(u,v){if(o>0){q+=","}q+='{"field":"'+u+'",';q+='"op":"eq",';v+="";q+='"data":"'+v.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';o++});q+="]}";a.extend(j.p.postData,{filters:q});a.each(["searchField","searchString","searchOper"],function(u,v){if(j.p.postData.hasOwnProperty(v)){delete j.p.postData[v]}})}else{a.extend(j.p.postData,m)}var n;if(j.p.searchurl){n=j.p.url;a(j).jqGrid("setGridParam",{url:j.p.searchurl})}var r=false;if(a.isFunction(b.beforeClear)){r=b.beforeClear.call(j)}if(!r){if(k){a(j).jqGrid("setGridParam",{search:p}).trigger("reloadGrid",[{page:1}])}}if(n){a(j).jqGrid("setGridParam",{url:n})}if(a.isFunction(b.afterClear)){b.afterClear()}};var e=function(){var k=a("tr.ui-search-toolbar",j.grid.hDiv);if(k.css("display")=="none"){k.show()}else{k.hide()}};function h(k,m){var l=a(k);if(l[0]){jQuery.each(m,function(){if(this.data!==undefined){l.bind(this.type,this.data,this.fn)}else{l.bind(this.type,this.fn)}})}}var f=a("<tr class='ui-search-toolbar' role='rowheader'></tr>");var d;a.each(j.p.colModel,function(v,q){var y=this,w,o,t,l,B;o=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+j.p.direction+"'></th>");w=a("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>");if(this.hidden===true){a(o).css("display","none")}this.search=this.search===false?false:true;if(typeof this.stype=="undefined"){this.stype="text"}t=a.extend({},this.searchoptions||{});if(this.search){switch(this.stype){case"select":l=this.surl||t.dataUrl;if(l){B=w;a.ajax(a.extend({url:l,dataType:"html",complete:function(n,k){if(t.buildSelect!==undefined){var C=t.buildSelect(n);if(C){a(B).append(C)}}else{a(B).append(n.responseText)}if(t.defaultValue){a("select",B).val(t.defaultValue)}a("select",B).attr({name:y.index||y.name,id:"gs_"+y.name});if(t.attr){a("select",B).attr(t.attr)}a("select",B).css({width:"100%"});if(t.dataInit!==undefined){t.dataInit(a("select",B)[0])}if(t.dataEvents!==undefined){h(a("select",B)[0],t.dataEvents)}if(b.autosearch===true){a("select",B).change(function(D){c();return false})}n=null}},a.jgrid.ajaxOptions,j.p.ajaxSelectOptions||{}))}else{var m;if(y.searchoptions&&y.searchoptions.value){m=y.searchoptions.value}else{if(y.editoptions&&y.editoptions.value){m=y.editoptions.value}}if(m){var s=document.createElement("select");s.style.width="100%";a(s).attr({name:y.index||y.name,id:"gs_"+y.name});var p,A,r;if(typeof m==="string"){p=m.split(";");for(var u=0;u<p.length;u++){A=p[u].split(":");r=document.createElement("option");r.value=A[0];r.innerHTML=A[1];s.appendChild(r)}}else{if(typeof m==="object"){for(var z in m){if(m.hasOwnProperty(z)){r=document.createElement("option");r.value=z;r.innerHTML=m[z];s.appendChild(r)}}}}if(t.defaultValue){a(s).val(t.defaultValue)}if(t.attr){a(s).attr(t.attr)}if(t.dataInit!==undefined){t.dataInit(s)}if(t.dataEvents!==undefined){h(s,t.dataEvents)}a(w).append(s);if(b.autosearch===true){a(s).change(function(k){c();return false})}}}break;case"text":var x=t.defaultValue?t.defaultValue:"";a(w).append("<input type='text' style='width:95%;padding:0px;' name='"+(y.index||y.name)+"' id='gs_"+y.name+"' value='"+x+"'/>");if(t.attr){a("input",w).attr(t.attr)}if(t.dataInit!==undefined){t.dataInit(a("input",w)[0])}if(t.dataEvents!==undefined){h(a("input",w)[0],t.dataEvents)}if(b.autosearch===true){if(b.searchOnEnter){a("input",w).keypress(function(n){var k=n.charCode?n.charCode:n.keyCode?n.keyCode:0;if(k==13){c();return false}return this})}else{a("input",w).keydown(function(n){var k=n.which;switch(k){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(d){clearTimeout(d)}d=setTimeout(function(){c()},500)}})}}break}}a(o).append(w);a(f).append(o)});a("table thead",j.grid.hDiv).append(f);this.ftoolbar=true;this.triggerToolbar=c;this.clearToolbar=g;this.toggleToolbar=e})}})})(jQuery);(function(a){a.jgrid.extend({getPostData:function(){var b=this[0];if(!b.grid){return}return b.p.postData},setPostData:function(b){var c=this[0];if(!c.grid){return}if(typeof(b)==="object"){c.p.postData=b}else{alert("Error: cannot add a non-object postData value. postData unchanged.")}},appendPostData:function(b){var c=this[0];if(!c.grid){return}if(typeof(b)==="object"){a.extend(c.p.postData,b)}else{alert("Error: cannot append a non-object postData value. postData unchanged.")}},setPostDataItem:function(b,c){var d=this[0];if(!d.grid){return}d.p.postData[b]=c},getPostDataItem:function(b){var c=this[0];if(!c.grid){return}return c.p.postData[b]},removePostDataItem:function(b){var c=this[0];if(!c.grid){return}delete c.p.postData[b]},getUserData:function(){var b=this[0];if(!b.grid){return}return b.p.userData},getUserDataItem:function(b){var c=this[0];if(!c.grid){return}return c.p.userData[b]}})})(jQuery);function tableToGrid(a,b){jQuery(a).each(function(){if(this.grid){return}jQuery(this).width("99%");var n=jQuery(this).width();var p=jQuery("input[type=checkbox]:first",jQuery(this));var h=jQuery("input[type=radio]:first",jQuery(this));var d=p.length>0;var g=!d&&h.length>0;var j=d||g;var l=[];var o=[];jQuery("th",jQuery(this)).each(function(){if(l.length===0&&j){l.push({name:"__selection__",index:"__selection__",width:0,hidden:true});o.push("__selection__")}else{l.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150});o.push(jQuery(this).html())}});var f=[];var e=[];var m=[];jQuery("tbody > tr",jQuery(this)).each(function(){var r={};var q=0;jQuery("td",jQuery(this)).each(function(){if(q===0&&j){var s=jQuery("input",jQuery(this));var t=s.attr("value");e.push(t||f.length);if(s.attr("checked")){m.push(t)}r[l[q].name]=s.attr("value")}else{r[l[q].name]=jQuery(this).html()}q++});if(q>0){f.push(r)}});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:n,colNames:o,colModel:l,multiselect:d},b||{}));var k;for(k=0;k<f.length;k++){var c=null;if(e.length>0){c=e[k];if(c&&c.replace){c=encodeURIComponent(c).replace(/[.\-%]/g,"_")}}if(c===null){c=k+1}jQuery(this).jqGrid("addRowData",c,f[k])}for(k=0;k<m.length;k++){jQuery(this).jqGrid("setSelection",m[k])}})}(function(a){a.jgrid.extend({setColumns:function(b){b=a.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},a.jgrid.col,b||{});return this.each(function(){var j=this;if(!j.grid){return}var k=typeof b.beforeShowForm==="function"?true:false;var d=typeof b.afterShowForm==="function"?true:false;var e=typeof b.afterSubmitForm==="function"?true:false;var c=j.p.id,h="ColTbl_"+c,f={themodal:"colmod"+c,modalhead:"colhd"+c,modalcontent:"colcnt"+c,scrollelm:h};if(b.recreateForm===true&&a("#"+f.themodal).html()!=null){a("#"+f.themodal).remove()}if(a("#"+f.themodal).html()!=null){if(k){b.beforeShowForm(a("#"+h))}viewModal("#"+f.themodal,{gbox:"#gbox_"+c,jqm:b.jqModal,jqM:false,modal:b.modal});if(d){b.afterShowForm(a("#"+h))}}else{var l=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";var m="<div id='"+h+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+l+";'>";m+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>";for(i=0;i<this.p.colNames.length;i++){if(!j.p.colModel[i].hidedlg){m+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+((this.p.colModel[i].hidden===false)?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+((b.colnameview)?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>"}}m+="</tbody></table></div>";var g=!b.updateAfterCheck?"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>":"",n="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>";m+="<table border='0' class='EditTable' id='"+h+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+g+"&#160;"+n+"</td></tr></tbody></table>";b.gbox="#gbox_"+c;createModal(f,m,b,"#gview_"+j.p.id,a("#gview_"+j.p.id)[0]);if(b.saveicon[0]==true){a("#dData","#"+h+"_2").addClass(b.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>")}if(b.closeicon[0]==true){a("#eData","#"+h+"_2").addClass(b.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>")}if(!b.updateAfterCheck){a("#dData","#"+h+"_2").click(function(p){for(i=0;i<j.p.colModel.length;i++){if(!j.p.colModel[i].hidedlg){var o=j.p.colModel[i].name.replace(/\./g,"\\.");if(a("#col_"+o,"#"+h).attr("checked")){a(j).jqGrid("showCol",j.p.colModel[i].name);a("#col_"+o,"#"+h).attr("defaultChecked",true)}else{a(j).jqGrid("hideCol",j.p.colModel[i].name);a("#col_"+o,"#"+h).attr("defaultChecked","")}}}if(b.ShrinkToFit===true){a(j).jqGrid("setGridWidth",j.grid.width-0.001,true)}if(b.closeAfterSubmit){hideModal("#"+f.themodal,{gb:"#gbox_"+c,jqm:b.jqModal,onClose:b.onClose})}if(e){b.afterSubmitForm(a("#"+h))}return false})}else{a(":input","#"+h).click(function(o){var p=this.id.substr(4);if(p){if(this.checked){a(j).jqGrid("showCol",p)}else{a(j).jqGrid("hideCol",p)}if(b.ShrinkToFit===true){a(j).jqGrid("setGridWidth",j.grid.width-0.001,true)}}return this})}a("#eData","#"+h+"_2").click(function(o){hideModal("#"+f.themodal,{gb:"#gbox_"+c,jqm:b.jqModal,onClose:b.onClose});return false});a("#dData, #eData","#"+h+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});if(k){b.beforeShowForm(a("#"+h))}viewModal("#"+f.themodal,{gbox:"#gbox_"+c,jqm:b.jqModal,jqM:true,modal:b.modal});if(d){b.afterShowForm(a("#"+h))}}})}})})(jQuery);(function(a){a.jgrid.extend({jqGridImport:function(b){b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{});return this.each(function(){var f=this;var d=function(h,n){var g=a(n.xmlGrid.config,h)[0];var m=a(n.xmlGrid.data,h)[0],p,k;if(xmlJsonClass.xml2json&&a.jgrid.parse){p=xmlJsonClass.xml2json(g," ");p=a.jgrid.parse(p);for(var j in p){if(p.hasOwnProperty(j)){k=p[j]}}if(m){var l=p.grid.datatype;p.grid.datatype="xmlstring";p.grid.datastr=h;a(f).jqGrid(k).jqGrid("setGridParam",{datatype:l})}else{a(f).jqGrid(k)}p=null;k=null}else{alert("xml2json or parse are not present")}};var e=function(h,l){if(h&&typeof h=="string"){var g=a.jgrid.parse(h);var m=g[l.jsonGrid.config];var j=g[l.jsonGrid.data];if(j){var k=m.datatype;m.datatype="jsonstring";m.datastr=j;a(f).jqGrid(m).jqGrid("setGridParam",{datatype:k})}else{a(f).jqGrid(m)}}};switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(g,h){if(h=="success"){d(g.responseXML,b);if(a.isFunction(b.importComplete)){b.importComplete(g)}}g=null}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&typeof b.impstring=="string"){var c=a.jgrid.stringToDoc(b.impstring);if(c){d(c,b);if(a.isFunction(b.importComplete)){b.importComplete(c)}b.impstring=null}c=null}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(g,h){if(h=="success"){e(g.responseText,b);if(a.isFunction(b.importComplete)){b.importComplete(g)}}g=null}},b.ajaxOptions));break;case"jsonstring":if(b.impstring&&typeof b.impstring=="string"){e(b.impstring,b);if(a.isFunction(b.importComplete)){b.importComplete(b.impstring)}b.impstring=null}break}})},jqGridExport:function(c){c=a.extend({exptype:"xmlstring",root:"grid",ident:"\t"},c||{});var b=null;this.each(function(){if(!this.grid){return}var e=a.extend({},a(this).jqGrid("getGridParam"));if(e.rownumbers){e.colNames.splice(0,1);e.colModel.splice(0,1)}if(e.multiselect){e.colNames.splice(0,1);e.colModel.splice(0,1)}if(e.subGrid){e.colNames.splice(0,1);e.colModel.splice(0,1)}e.knv=null;if(e.treeGrid){for(var d in e.treeReader){if(e.treeReader.hasOwnProperty(d)){e.colNames.splice(e.colNames.length-1);e.colModel.splice(e.colModel.length-1)}}}switch(c.exptype){case"xmlstring":b="<"+c.root+">"+xmlJsonClass.json2xml(e,c.ident)+"</"+c.root+">";break;case"jsonstring":b="{"+xmlJsonClass.toJson(e,c.root,c.ident,false)+"}";if(e.postData.filters!==undefined){b=b.replace(/filters":"/,'filters":');b=b.replace(/}]}"/,"}]}")}break}});return b},excelExport:function(b){b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{});return this.each(function(){if(!this.grid){return}var c;if(b.exptype=="remote"){var d=a.extend({},this.p.postData);d[b.oper]=b.tag;var e=jQuery.param(d);if(b.url.indexOf("?")!=-1){c=b.url+"&"+e}else{c=b.url+"?"+e}window.location=c}})}})})(jQuery);(function(a){a.jgrid.extend({groupingSetup:function(){return this.each(function(){var g=this,c=g.p.groupingView;if(c!==null&&((typeof c==="object")||a.isFunction(c))){if(!c.groupField.length){g.p.grouping=false}else{if(typeof(c.visibiltyOnNextGrouping)=="undefined"){c.visibiltyOnNextGrouping=[]}for(var e=0;e<c.groupField.length;e++){if(!c.groupOrder[e]){c.groupOrder[e]="asc"}if(!c.groupText[e]){c.groupText[e]="{0}"}if(typeof(c.groupColumnShow[e])!="boolean"){c.groupColumnShow[e]=true}if(typeof(c.groupSummary[e])!="boolean"){c.groupSummary[e]=false}if(c.groupColumnShow[e]===true){c.visibiltyOnNextGrouping[e]=true;a(g).jqGrid("showCol",c.groupField[e])}else{c.visibiltyOnNextGrouping[e]=a("#"+g.p.id+"_"+c.groupField[e]).is(":visible");a(g).jqGrid("hideCol",c.groupField[e])}c.sortitems[e]=[];c.sortnames[e]=[];c.summaryval[e]=[];if(c.groupSummary[e]){c.summary[e]=[];var b=g.p.colModel;for(var d=0,f=b.length;d<f;d++){if(b[d].summaryType){c.summary[e].push({nm:b[d].name,st:b[d].summaryType,v:""})}}}}g.p.scroll=false;g.p.rownumbers=false;g.p.subGrid=false;g.p.treeGrid=false;g.p.gridview=true}}else{g.p.grouping=false}})},groupingPrepare:function(d,c,e,b){this.each(function(){c[0]+="";var h=c[0].toString().split(" ").join("");var f=this.p.groupingView,g=this;if(e.hasOwnProperty(h)){e[h].push(d)}else{e[h]=[];e[h].push(d);f.sortitems[0].push(h);f.sortnames[0].push(a.trim(c[0].toString()));f.summaryval[0][h]=a.extend(true,[],f.summary[0])}if(f.groupSummary[0]){a.each(f.summaryval[0][h],function(j,k){if(a.isFunction(this.st)){this.v=this.st.call(g,this.v,this.nm,b)}else{this.v=a(g).jqGrid("groupingCalculations."+this.st,this.v,this.nm,b)}})}});return e},groupingToggle:function(b){this.each(function(){var g=this,n=g.p.groupingView,d=b.lastIndexOf("_"),l=b.substring(0,d+1),h=parseInt(b.substring(d+1),10)+1,e=n.minusicon,k=n.plusicon,j=a("#"+b),c=j[0].nextSibling,m=a("#"+b+" span.tree-wrap-"+g.p.direction),f=false;if(m.hasClass(e)){if(n.showSummaryOnHide&&n.groupSummary[0]){if(c){while(c){if(a(c).hasClass("jqfoot")){break}a(c).hide();c=c.nextSibling}}}else{if(c){while(c){if(a(c).attr("id")==l+String(h)){break}a(c).hide();c=c.nextSibling}}}m.removeClass(e).addClass(k);f=true}else{if(c){while(c){if(a(c).attr("id")==l+String(h)){break}a(c).show();c=c.nextSibling}}m.removeClass(k).addClass(e);f=false}if(a.isFunction(g.p.onClickGroup)){g.p.onClickGroup.call(g,b,f)}});return false},groupingRender:function(b,c){return this.each(function(){var e=this,l=e.p.groupingView,g="",j="",k,f="",d,h,m;if(!l.groupDataSorted){l.sortitems[0].sort();l.sortnames[0].sort();if(l.groupOrder[0].toLowerCase()=="desc"){l.sortitems[0].reverse();l.sortnames[0].reverse()}}if(l.groupCollapse){f=l.plusicon}else{f=l.minusicon}f+=" tree-wrap-"+e.p.direction;m=0;while(m<c){if(e.p.colModel[m].name==l.groupField[0]){h=m;break}m++}a.each(l.sortitems[0],function(s,q){k=e.p.id+"ghead_"+s;j="<span style='cursor:pointer;' class='ui-icon "+f+"' onclick=\"jQuery('#"+e.p.id+"').jqGrid('groupingToggle','"+k+"');return false;\"></span>";try{d=e.formatter(k,l.sortnames[0][s],h,l.sortitems[0])}catch(z){d=l.sortnames[0][s]}g+='<tr id="'+k+'" role="row" class= "ui-widget-content jqgroup ui-row-'+e.p.direction+'"><td colspan="'+c+'">'+j+a.jgrid.format(l.groupText[0],d,b[q].length)+"</td></tr>";for(var p=0;p<b[q].length;p++){g+=b[q][p].join("")}if(l.groupSummary[0]){var u="";if(l.groupCollapse&&!l.showSummaryOnHide){u=' style="display:none;"'}g+="<tr"+u+' role="row" class="ui-widget-content jqfoot ui-row-'+e.p.direction+'">';var t=l.summaryval[0][q],w=e.p.colModel,v,x=b[q].length;for(var r=0;r<c;r++){var o="<td "+e.formatCol(r,1,"")+">&#160;</td>",y="{0}";a.each(t,function(){if(this.nm==w[r].name){if(w[r].summaryTpl){y=w[r].summaryTpl}if(this.st=="avg"){if(this.v&&x>0){this.v=(this.v/x)}}try{v=e.formatter("",this.v,r,this)}catch(n){v=this.v}o="<td "+e.formatCol(r,1,"")+">"+a.jgrid.format(y,v)+"</td>";return false}});g+=o}g+="</tr>"}});a("#"+e.p.id+" tbody:first").append(g);g=null})},groupingGroupBy:function(c,b,d){return this.each(function(){var g=this;if(typeof(c)=="string"){c=[c]}var e=g.p.groupingView;g.p.grouping=true;for(var f=0;f<e.groupField.length;f++){if(!e.groupColumnShow[f]&&e.visibiltyOnNextGrouping[f]){a(g).jqGrid("showCol",e.groupField[f])}}for(var f=0;f<c.length;f++){e.visibiltyOnNextGrouping[f]=a("#"+g.p.id+"_"+c[f]).is(":visible")}g.p.groupingView=a.extend(g.p.groupingView,b||{});e.groupField=c;a(g).trigger("reloadGrid")})},groupingRemove:function(b){return this.each(function(){var e=this;if(typeof(b)=="undefined"){b=true}e.p.grouping=false;if(b===true){var c=e.p.groupingView;for(var d=0;d<c.groupField.length;d++){if(!c.groupColumnShow[d]&&c.visibiltyOnNextGrouping[d]){a(e).jqGrid("showCol",c.groupField)}}a("tr.jqgroup, tr.jqfoot","#"+e.p.id+" tbody:first").remove();a("tr.jqgrow:hidden","#"+e.p.id+" tbody:first").show()}else{a(e).trigger("reloadGrid")}})},groupingCalculations:{sum:function(b,d,c){return parseFloat(b||0)+parseFloat((c[d]||0))},min:function(b,d,c){if(b===""){return parseFloat(c[d]||0)}return Math.min(parseFloat(b),parseFloat(c[d]||0))},max:function(b,d,c){if(b===""){return parseFloat(c[d]||0)}return Math.max(parseFloat(b),parseFloat(c[d]||0))},count:function(b,d,c){if(b===""){b=0}if(c.hasOwnProperty(d)){return b+1}else{return 0}},avg:function(b,d,c){return parseFloat(b||0)+parseFloat((c[d]||0))}}})})(jQuery);(function(a){a.fmatter={};a.extend(a.fmatter,{isBoolean:function(b){return typeof b==="boolean"},isObject:function(b){return(b&&(typeof b==="object"||a.isFunction(b)))||false},isString:function(b){return typeof b==="string"},isNumber:function(b){return typeof b==="number"&&isFinite(b)},isNull:function(b){return b===null},isUndefined:function(b){return typeof b==="undefined"},isValue:function(b){return(this.isObject(b)||this.isString(b)||this.isNumber(b)||this.isBoolean(b))},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b)){return false}else{if(!this.isValue(b)){return true}}b=a.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return b===""}});a.fn.fmatter=function(f,g,e,b,c){var d=g;e=a.extend({},a.jgrid.formatter,e);if(a.fn.fmatter[f]){d=a.fn.fmatter[f](g,e,b,c)}return d};a.fmatter.util={NumberFormat:function(d,b){if(!a.fmatter.isNumber(d)){d*=1}if(a.fmatter.isNumber(d)){var f=(d<0);var l=d+"";var h=(b.decimalSeparator)?b.decimalSeparator:".";var j;if(a.fmatter.isNumber(b.decimalPlaces)){var k=b.decimalPlaces;var e=Math.pow(10,k);l=Math.round(d*e)/e+"";j=l.lastIndexOf(".");if(k>0){if(j<0){l+=h;j=l.length-1}else{if(h!=="."){l=l.replace(".",h)}}while((l.length-1-j)<k){l+="0"}}}if(b.thousandsSeparator){var n=b.thousandsSeparator;j=l.lastIndexOf(h);j=(j>-1)?j:l.length;var m=l.substring(j);var c=-1;for(var g=j;g>0;g--){c++;if((c%3===0)&&(g!==j)&&(!f||(g>1))){m=n+m}m=l.charAt(g-1)+m}l=m}l=(b.prefix)?b.prefix+l:l;l=(b.suffix)?l+b.suffix:l;return l}else{return d}},DateFormat:function(J,M,P,y){var m=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,D=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,L=/[^-+\dA-Z]/g,p=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),f=((typeof M==="string")?M.match(p):null),K=function(k,j){k=String(k);j=parseInt(j,10)||2;while(k.length<j){k="0"+k}return k},b={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,r,F,d,E=["i18n"];E.i18n={dayNames:y.dayNames,monthNames:y.monthNames};if(J in y.masks){J=y.masks[J]}if(M.constructor===Number){if(String(J).toLowerCase()=="u"){M=M*1000}e=new Date(M)}else{if(M.constructor===Date){e=M}else{if(f!==null){e=new Date(parseInt(f[1],10));if(f[3]){var g=Number(f[5])*60+Number(f[6]);g*=((f[4]=="-")?1:-1);g-=e.getTimezoneOffset();e.setTime(Number(Number(e)+(g*60*1000)))}}else{M=String(M).split(/[\\\/:_;.,\t\T\s-]/);J=J.split(/[\\\/:_;.,\t\T\s-]/);for(F=0,d=J.length;F<d;F++){if(J[F]=="M"){r=a.inArray(M[F],E.i18n.monthNames);if(r!==-1&&r<12){M[F]=r+1}}if(J[F]=="F"){r=a.inArray(M[F],E.i18n.monthNames);if(r!==-1&&r>11){M[F]=r+1-12}}if(M[F]){b[J[F].toLowerCase()]=parseInt(M[F],10)}}if(b.f){b.m=b.f}if(b.m===0&&b.y===0&&b.d===0){return"&#160;"}b.m=parseInt(b.m,10)-1;var O=b.y;if(O>=70&&O<=99){b.y=1900+b.y}else{if(O>=0&&O<=69){b.y=2000+b.y}}e=new Date(b.y,b.m,b.d,b.h,b.i,b.s,b.u)}}}if(P in y.masks){P=y.masks[P]}else{if(!P){P="Y-m-d"}}var v=e.getHours(),I=e.getMinutes(),H=e.getDate(),C=e.getMonth()+1,B=e.getTimezoneOffset(),A=e.getSeconds(),x=e.getMilliseconds(),t=e.getDay(),c=e.getFullYear(),l=(t+6)%7+1,q=(new Date(c,C-1,H)-new Date(c,0,1))/86400000,h={d:K(H),D:E.i18n.dayNames[t],j:H,l:E.i18n.dayNames[t+7],N:l,S:y.S(H),w:t,z:q,W:l<5?Math.floor((q+l-1)/7)+1:Math.floor((q+l-1)/7)||((new Date(c-1,0,1).getDay()+6)%7<4?53:52),F:E.i18n.monthNames[C-1+12],m:K(C),M:E.i18n.monthNames[C-1],n:C,t:"?",L:"?",o:"?",Y:c,y:String(c).substring(2),a:v<12?y.AmPm[0]:y.AmPm[1],A:v<12?y.AmPm[2]:y.AmPm[3],B:"?",g:v%12||12,G:v,h:K(v%12||12),H:K(v),i:K(I),s:K(A),u:x,e:"?",I:"?",O:(B>0?"-":"+")+K(Math.floor(Math.abs(B)/60)*100+Math.abs(B)%60,4),P:"?",T:(String(e).match(D)||[""]).pop().replace(L,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1000)};return P.replace(m,function(j){return j in h?h[j]:j.substring(1)})}};a.fn.fmatter.defaultFormat=function(c,b){return(a.fmatter.isValue(c)&&c!=="")?c:b.defaultValue?b.defaultValue:"&#160;"};a.fn.fmatter.email=function(c,b){if(!a.fmatter.isEmpty(c)){return'<a href="mailto:'+c+'">'+c+"</a>"}else{return a.fn.fmatter.defaultFormat(c,b)}};a.fn.fmatter.checkbox=function(e,c){var f=a.extend({},c.checkbox),d;if(!a.fmatter.isUndefined(c.colModel.formatoptions)){f=a.extend({},f,c.colModel.formatoptions)}if(f.disabled===true){d='disabled="disabled"'}else{d=""}if(a.fmatter.isEmpty(e)||a.fmatter.isUndefined(e)){e=a.fn.fmatter.defaultFormat(e,f)}e=e+"";e=e.toLowerCase();var b=e.search(/(false|0|no|off)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+b+' value="'+e+'" offval="no" '+d+"/>"};a.fn.fmatter.link=function(d,b){var e={target:b.target};var c="";if(!a.fmatter.isUndefined(b.colModel.formatoptions)){e=a.extend({},e,b.colModel.formatoptions)}if(e.target){c="target="+e.target}if(!a.fmatter.isEmpty(d)){return"<a "+c+' href="'+d+'">'+d+"</a>"}else{return a.fn.fmatter.defaultFormat(d,b)}};a.fn.fmatter.showlink=function(d,b){var f={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},c="",e;if(!a.fmatter.isUndefined(b.colModel.formatoptions)){f=a.extend({},f,b.colModel.formatoptions)}if(f.target){c="target="+f.target}e=f.baseLinkUrl+f.showAction+"?"+f.idName+"="+b.rowId+f.addParam;if(a.fmatter.isString(d)||a.fmatter.isNumber(d)){return"<a "+c+' href="'+e+'">'+d+"</a>"}else{return a.fn.fmatter.defaultFormat(d,b)}};a.fn.fmatter.integer=function(c,b){var d=a.extend({},b.integer);if(!a.fmatter.isUndefined(b.colModel.formatoptions)){d=a.extend({},d,b.colModel.formatoptions)}if(a.fmatter.isEmpty(c)){return d.defaultValue}return a.fmatter.util.NumberFormat(c,d)};a.fn.fmatter.number=function(c,b){var d=a.extend({},b.number);if(!a.fmatter.isUndefined(b.colModel.formatoptions)){d=a.extend({},d,b.colModel.formatoptions)}if(a.fmatter.isEmpty(c)){return d.defaultValue}return a.fmatter.util.NumberFormat(c,d)};a.fn.fmatter.currency=function(c,b){var d=a.extend({},b.currency);if(!a.fmatter.isUndefined(b.colModel.formatoptions)){d=a.extend({},d,b.colModel.formatoptions)}if(a.fmatter.isEmpty(c)){return d.defaultValue}return a.fmatter.util.NumberFormat(c,d)};a.fn.fmatter.date=function(e,d,b,c){var f=a.extend({},d.date);if(!a.fmatter.isUndefined(d.colModel.formatoptions)){f=a.extend({},f,d.colModel.formatoptions)}if(!f.reformatAfterEdit&&c=="edit"){return a.fn.fmatter.defaultFormat(e,d)}else{if(!a.fmatter.isEmpty(e)){return a.fmatter.util.DateFormat(f.srcformat,e,f.newformat,f)}else{return a.fn.fmatter.defaultFormat(e,d)}}};a.fn.fmatter.select=function(g,b,c,l){g=g+"";var e=false,k=[];if(!a.fmatter.isUndefined(b.colModel.formatoptions)){e=b.colModel.formatoptions.value}else{if(!a.fmatter.isUndefined(b.colModel.editoptions)){e=b.colModel.editoptions.value}}if(e){var o=b.colModel.editoptions.multiple===true?true:false,n=[],m;if(o){n=g.split(",");n=a.map(n,function(j){return a.trim(j)})}if(a.fmatter.isString(e)){var d=e.split(";"),f=0;for(var h=0;h<d.length;h++){m=d[h].split(":");if(m.length>2){m[1]=jQuery.map(m,function(p,j){if(j>0){return p}}).join(":")}if(o){if(jQuery.inArray(m[0],n)>-1){k[f]=m[1];f++}}else{if(a.trim(m[0])==a.trim(g)){k[0]=m[1];break}}}}else{if(a.fmatter.isObject(e)){if(o){k=jQuery.map(n,function(p,j){return e[p]})}else{k[0]=e[g]||""}}}}g=k.join(", ");return g===""?a.fn.fmatter.defaultFormat(g,b):g};a.fn.fmatter.rowactions=function(f,e,c,j){var h={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{oper:"edit"},url:null,delOptions:{},editOptions:{}};f=a.jgrid.jqID(f);e=a.jgrid.jqID(e);var b=a("#"+e)[0].p.colModel[j];if(!a.fmatter.isUndefined(b.formatoptions)){h=a.extend(h,b.formatoptions)}if(!a.fmatter.isUndefined(a("#"+e)[0].p.editOptions)){h.editOptions=a("#"+e)[0].p.editOptions}if(!a.fmatter.isUndefined(a("#"+e)[0].p.delOptions)){h.delOptions=a("#"+e)[0].p.delOptions}var d=function(k){if(h.afterSave){h.afterSave(k)}a("tr#"+f+" div.ui-inline-edit, tr#"+f+" div.ui-inline-del","#"+e+".ui-jqgrid-btable:first").show();a("tr#"+f+" div.ui-inline-save, tr#"+f+" div.ui-inline-cancel","#"+e+".ui-jqgrid-btable:first").hide()},g=function(k){if(h.afterRestore){h.afterRestore(k)}a("tr#"+f+" div.ui-inline-edit, tr#"+f+" div.ui-inline-del","#"+e+".ui-jqgrid-btable:first").show();a("tr#"+f+" div.ui-inline-save, tr#"+f+" div.ui-inline-cancel","#"+e+".ui-jqgrid-btable:first").hide()};switch(c){case"edit":a("#"+e).jqGrid("editRow",f,h.keys,h.onEdit,h.onSuccess,h.url,h.extraparam,d,h.onError,g);a("tr#"+f+" div.ui-inline-edit, tr#"+f+" div.ui-inline-del","#"+e+".ui-jqgrid-btable:first").hide();a("tr#"+f+" div.ui-inline-save, tr#"+f+" div.ui-inline-cancel","#"+e+".ui-jqgrid-btable:first").show();break;case"save":if(a("#"+e).jqGrid("saveRow",f,h.onSuccess,h.url,h.extraparam,d,h.onError,g)){a("tr#"+f+" div.ui-inline-edit, tr#"+f+" div.ui-inline-del","#"+e+".ui-jqgrid-btable:first").show();a("tr#"+f+" div.ui-inline-save, tr#"+f+" div.ui-inline-cancel","#"+e+".ui-jqgrid-btable:first").hide()}break;case"cancel":a("#"+e).jqGrid("restoreRow",f,g);a("tr#"+f+" div.ui-inline-edit, tr#"+f+" div.ui-inline-del","#"+e+".ui-jqgrid-btable:first").show();a("tr#"+f+" div.ui-inline-save, tr#"+f+" div.ui-inline-cancel","#"+e+".ui-jqgrid-btable:first").hide();break;case"del":a("#"+e).jqGrid("delGridRow",f,h.delOptions);break;case"formedit":a("#"+e).jqGrid("setSelection",f);a("#"+e).jqGrid("editGridRow",f,h.editOptions);break}};a.fn.fmatter.actions=function(f,d,b){var h={keys:false,editbutton:true,delbutton:true,editformbutton:false};if(!a.fmatter.isUndefined(d.colModel.formatoptions)){h=a.extend(h,d.colModel.formatoptions)}var c=d.rowId,g="",e;if(typeof(c)=="undefined"||a.fmatter.isEmpty(c)){return""}if(h.editformbutton){e="onclick=$.fn.fmatter.rowactions('"+c+"','"+d.gid+"','formedit',"+d.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";g=g+"<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+e+"><span class='ui-icon ui-icon-pencil'></span></div>"}else{if(h.editbutton){e="onclick=$.fn.fmatter.rowactions('"+c+"','"+d.gid+"','edit',"+d.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ";g=g+"<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+e+"><span class='ui-icon ui-icon-pencil'></span></div>"}}if(h.delbutton){e="onclick=$.fn.fmatter.rowactions('"+c+"','"+d.gid+"','del',"+d.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";g=g+"<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+e+"><span class='ui-icon ui-icon-trash'></span></div>"}e="onclick=$.fn.fmatter.rowactions('"+c+"','"+d.gid+"','save',"+d.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";g=g+"<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+e+"><span class='ui-icon ui-icon-disk'></span></div>";e="onclick=$.fn.fmatter.rowactions('"+c+"','"+d.gid+"','cancel',"+d.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";g=g+"<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+e+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+g+"</div>"};a.unformat=function(e,n,k,c){var h,f=n.colModel.formatter,g=n.colModel.formatoptions||{},o,m=/([\.\*\_\'\(\)\{\}\+\?\\])/g,j=n.colModel.unformat||(a.fn.fmatter[f]&&a.fn.fmatter[f].unformat);if(typeof j!=="undefined"&&a.isFunction(j)){h=j(a(e).text(),n,e)}else{if(!a.fmatter.isUndefined(f)&&a.fmatter.isString(f)){var b=a.jgrid.formatter||{},l;switch(f){case"integer":g=a.extend({},b.integer,g);o=g.thousandsSeparator.replace(m,"\\$1");l=new RegExp(o,"g");h=a(e).text().replace(l,"");break;case"number":g=a.extend({},b.number,g);o=g.thousandsSeparator.replace(m,"\\$1");l=new RegExp(o,"g");h=a(e).text().replace(l,"").replace(g.decimalSeparator,".");break;case"currency":g=a.extend({},b.currency,g);o=g.thousandsSeparator.replace(m,"\\$1");l=new RegExp(o,"g");h=a(e).text().replace(l,"").replace(g.decimalSeparator,".").replace(g.prefix,"").replace(g.suffix,"");break;case"checkbox":var d=(n.colModel.editoptions)?n.colModel.editoptions.value.split(":"):["Yes","No"];h=a("input",e).attr("checked")?d[0]:d[1];break;case"select":h=a.unformat.select(e,n,k,c);break;case"actions":return"";default:h=a(e).text()}}}return h!==undefined?h:c===true?a(e).text():a.jgrid.htmlDecode(a(e).html())};a.unformat.select=function(f,q,l,c){var k=[];var o=a(f).text();if(c===true){return o}var h=a.extend({},q.colModel.editoptions);if(h.value){var d=h.value,p=h.multiple===true?true:false,n=[],m;if(p){n=o.split(",");n=a.map(n,function(j){return a.trim(j)})}if(a.fmatter.isString(d)){var b=d.split(";"),e=0;for(var g=0;g<b.length;g++){m=b[g].split(":");if(m.length>2){m[1]=jQuery.map(m,function(r,j){if(j>0){return r}}).join(":")}if(p){if(jQuery.inArray(m[1],n)>-1){k[e]=m[0];e++}}else{if(a.trim(m[1])==a.trim(o)){k[0]=m[0];break}}}}else{if(a.fmatter.isObject(d)||a.isArray(d)){if(!p){n[0]=o}k=jQuery.map(n,function(r){var j;a.each(d,function(s,t){if(t==r){j=s;return false}});if(typeof(j)!="undefined"){return j}})}}return k.join(", ")}else{return o||""}};a.unformat.date=function(c,b){var d=a.jgrid.formatter.date||{};if(!a.fmatter.isUndefined(b.formatoptions)){d=a.extend({},d,b.formatoptions)}if(!a.fmatter.isEmpty(c)){return a.fmatter.util.DateFormat(d.newformat,c,d.srcformat,d)}else{return a.fn.fmatter.defaultFormat(c,b)}}})(jQuery);var xmlJsonClass={xml2json:function(b,d){if(b.nodeType===9){b=b.documentElement}var a=this.removeWhite(b);var e=this.toObj(a);var c=this.toJson(e,b.nodeName,"\t");return"{\n"+d+(d?c.replace(/\t/g,d):c.replace(/\t|\n/g,""))+"\n}"},json2xml:function(d,c){var e=function(q,f,h){var o="";var l,g;if(q instanceof Array){if(q.length===0){o+=h+"<"+f+">__EMPTY_ARRAY_</"+f+">\n"}else{for(l=0,g=q.length;l<g;l+=1){var p=h+e(q[l],f,h+"\t")+"\n";o+=p}}}else{if(typeof(q)==="object"){var k=false;o+=h+"<"+f;var j;for(j in q){if(q.hasOwnProperty(j)){if(j.charAt(0)==="@"){o+=" "+j.substr(1)+'="'+q[j].toString()+'"'}else{k=true}}}o+=k?">":"/>";if(k){for(j in q){if(q.hasOwnProperty(j)){if(j==="#text"){o+=q[j]}else{if(j==="#cdata"){o+="<![CDATA["+q[j]+"]]>"}else{if(j.charAt(0)!=="@"){o+=e(q[j],j,h+"\t")}}}}}o+=(o.charAt(o.length-1)==="\n"?h:"")+"</"+f+">"}}else{if(typeof(q)==="function"){o+=h+"<"+f+"><![CDATA["+q+"]]></"+f+">"}else{if(q.toString()==='""'||q.toString().length===0){o+=h+"<"+f+">__EMPTY_STRING_</"+f+">"}else{o+=h+"<"+f+">"+q.toString()+"</"+f+">"}}}}return o};var b="";var a;for(a in d){if(d.hasOwnProperty(a)){b+=e(d[a],a,"")}}return c?b.replace(/\t/g,c):b.replace(/\t|\n/g,"")},toObj:function(b){var g={};var f=/function/i;if(b.nodeType===1){if(b.attributes.length){var e;for(e=0;e<b.attributes.length;e+=1){g["@"+b.attributes[e].nodeName]=(b.attributes[e].nodeValue||"").toString()}}if(b.firstChild){var a=0,d=0,c=false;var h;for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===1){c=true}else{if(h.nodeType===3&&h.nodeValue.match(/[^ \f\n\r\t\v]/)){a+=1}else{if(h.nodeType===4){d+=1}}}}if(c){if(a<2&&d<2){this.removeWhite(b);for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===3){g["#text"]=this.escape(h.nodeValue)}else{if(h.nodeType===4){if(f.test(h.nodeValue)){g[h.nodeName]=[g[h.nodeName],h.nodeValue]}else{g["#cdata"]=this.escape(h.nodeValue)}}else{if(g[h.nodeName]){if(g[h.nodeName] instanceof Array){g[h.nodeName][g[h.nodeName].length]=this.toObj(h)}else{g[h.nodeName]=[g[h.nodeName],this.toObj(h)]}}else{g[h.nodeName]=this.toObj(h)}}}}}else{if(!b.attributes.length){g=this.escape(this.innerXml(b))}else{g["#text"]=this.escape(this.innerXml(b))}}}else{if(a){if(!b.attributes.length){g=this.escape(this.innerXml(b));if(g==="__EMPTY_ARRAY_"){g="[]"}else{if(g==="__EMPTY_STRING_"){g=""}}}else{g["#text"]=this.escape(this.innerXml(b))}}else{if(d){if(d>1){g=this.escape(this.innerXml(b))}else{for(h=b.firstChild;h;h=h.nextSibling){if(f.test(b.firstChild.nodeValue)){g=b.firstChild.nodeValue;break}else{g["#cdata"]=this.escape(h.nodeValue)}}}}}}}if(!b.attributes.length&&!b.firstChild){g=null}}else{if(b.nodeType===9){g=this.toObj(b.documentElement)}else{alert("unhandled node type: "+b.nodeType)}}return g},toJson:function(b,a,d,e){if(e===undefined){e=true}var p=a?('"'+a+'"'):"",f="\t",g="\n";if(!e){f="";g=""}if(b==="[]"){p+=(a?":[]":"[]")}else{if(b instanceof Array){var c,k,j=[];for(k=0,c=b.length;k<c;k+=1){j[k]=this.toJson(b[k],"",d+f,e)}p+=(a?":[":"[")+(j.length>1?(g+d+f+j.join(","+g+d+f)+g+d):j.join(""))+"]"}else{if(b===null){p+=(a&&":")+"null"}else{if(typeof(b)==="object"){var l=[],h;for(h in b){if(b.hasOwnProperty(h)){l[l.length]=this.toJson(b[h],h,d+f,e)}}p+=(a?":{":"{")+(l.length>1?(g+d+f+l.join(","+g+d+f)+g+d):l.join(""))+"}"}else{if(typeof(b)==="string"){p+=(a&&":")+'"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'}else{p+=(a&&":")+'"'+b.toString()+'"'}}}}}return p},innerXml:function(d){var b="";if("innerHTML" in d){b=d.innerHTML}else{var a=function(j){var g="",f;if(j.nodeType===1){g+="<"+j.nodeName;for(f=0;f<j.attributes.length;f+=1){g+=" "+j.attributes[f].nodeName+'="'+(j.attributes[f].nodeValue||"").toString()+'"'}if(j.firstChild){g+=">";for(var h=j.firstChild;h;h=h.nextSibling){g+=a(h)}g+="</"+j.nodeName+">"}else{g+="/>"}}else{if(j.nodeType===3){g+=j.nodeValue}else{if(j.nodeType===4){g+="<![CDATA["+j.nodeValue+"]]>"}}}return g};for(var e=d.firstChild;e;e=e.nextSibling){b+=a(e)}}return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(b){b.normalize();var c;for(c=b.firstChild;c;){if(c.nodeType===3){if(!c.nodeValue.match(/[^ \f\n\r\t\v]/)){var a=c.nextSibling;b.removeChild(c);c=a}else{c=c.nextSibling}}else{if(c.nodeType===1){this.removeWhite(c);c=c.nextSibling}else{c=c.nextSibling}}}return b}};jQuery.fn.searchFilter=function(a,c){function b(k,q,g){this.$=k;this.add=function(A){if(A==null){k.find(".ui-add-last").click()}else{k.find(".sf:eq("+A+") .ui-add").click()}return this};this.del=function(A){if(A==null){k.find(".sf:last .ui-del").click()}else{k.find(".sf:eq("+A+") .ui-del").click()}return this};this.search=function(A){k.find(".ui-search").click();return this};this.reset=function(A){if(A===undefined){A=false}k.find(".ui-reset").trigger("click",[A]);return this};this.close=function(){k.find(".ui-closer").click();return this};if(q!=null){function w(){jQuery(this).toggleClass("ui-state-hover");return false}function j(A){jQuery(this).toggleClass("ui-state-active",(A.type=="mousedown"));return false}function e(A,B){return"<option value='"+A+"'>"+B+"</option>"}function t(C,A,B){return"<select class='"+C+"'"+(B?" style='display:none;'":"")+">"+A+"</select>"}function x(A,C){var B=k.find("tr.sf td.data "+A);if(B[0]!=null){C(B)}}function r(A,C){var B=k.find("tr.sf td.data "+A);if(B[0]!=null){jQuery.each(C,function(){if(this.data!=null){B.bind(this.type,this.data,this.fn)}else{B.bind(this.type,this.fn)}})}}var o=jQuery.extend({},jQuery.fn.searchFilter.defaults,g);var z=-1;var y="";jQuery.each(o.groupOps,function(){y+=e(this.op,this.text)});y="<select name='groupOp'>"+y+"</select>";k.html("").addClass("ui-searchFilter").append("<div class='ui-widget-overlay' style='z-index: -1'>&#160;</div><table class='ui-widget-content ui-corner-all'><thead><tr><td colspan='5' class='ui-widget-header ui-corner-all' style='line-height: 18px;'><div class='ui-closer ui-state-default ui-corner-all ui-helper-clearfix' style='float: right;'><span class='ui-icon ui-icon-close'></span></div>"+o.windowTitle+"</td></tr></thead><tbody><tr class='sf'><td class='fields'></td><td class='ops'></td><td class='data'></td><td><div class='ui-del ui-state-default ui-corner-all'><span class='ui-icon ui-icon-minus'></span></div></td><td><div class='ui-add ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plus'></span></div></td></tr><tr><td colspan='5' class='divider'><div>&#160;</div></td></tr></tbody><tfoot><tr><td colspan='3'><span class='ui-reset ui-state-default ui-corner-all' style='display: inline-block; float: left;'><span class='ui-icon ui-icon-arrowreturnthick-1-w' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+o.resetText+"</span></span><span class='ui-search ui-state-default ui-corner-all' style='display: inline-block; float: right;'><span class='ui-icon ui-icon-search' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+o.searchText+"</span></span><span class='matchText'>"+o.matchText+"</span> "+y+" <span class='rulesText'>"+o.rulesText+"</span></td><td>&#160;</td><td><div class='ui-add-last ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plusthick'></span></div></td></tr></tfoot></table>");var l=k.find("tr.sf");var h=l.find("td.fields");var f=l.find("td.ops");var p=l.find("td.data");var s="";jQuery.each(o.operators,function(){s+=e(this.op,this.text)});s=t("default",s,true);f.append(s);var m="<input type='text' class='default' style='display:none;' />";p.append(m);var v="";var u=false;var d=false;jQuery.each(q,function(D){var C=D;v+=e(this.itemval,this.text);if(this.ops!=null){u=true;var A="";jQuery.each(this.ops,function(){A+=e(this.op,this.text)});A=t("field"+C,A,true);f.append(A)}if(this.dataUrl!=null){if(D>z){z=D}d=true;var G=this.dataEvents;var E=this.dataInit;var B=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(I){var H;if(B!=null){H=jQuery("<div />").append(B(I))}else{H=jQuery("<div />").append(I.responseText)}H.find("select").addClass("field"+C).hide();p.append(H.html());if(E){x(".field"+D,E)}if(G){r(".field"+D,G)}if(D==z){k.find("tr.sf td.fields select[name='field']").change()}}},o.ajaxSelectOptions))}else{if(this.dataValues!=null){d=true;var F="";jQuery.each(this.dataValues,function(){F+=e(this.value,this.text)});F=t("field"+C,F,true);p.append(F)}else{if(this.dataEvents!=null||this.dataInit!=null){d=true;var F="<input type='text' class='field"+C+"' />";p.append(F)}}}if(this.dataInit!=null&&D!=z){x(".field"+D,this.dataInit)}if(this.dataEvents!=null&&D!=z){r(".field"+D,this.dataEvents)}});v="<select name='field'>"+v+"</select>";h.append(v);var n=h.find("select[name='field']");if(u){n.change(function(C){var B=C.target.selectedIndex;var D=jQuery(C.target).parents("tr.sf").find("td.ops");D.find("select").removeAttr("name").hide();var A=D.find(".field"+B);if(A[0]==null){A=D.find(".default")}A.attr("name","op").show();return false})}else{f.find(".default").attr("name","op").show()}if(d){n.change(function(C){var B=C.target.selectedIndex;var D=jQuery(C.target).parents("tr.sf").find("td.data");D.find("select,input").removeClass("vdata").hide();var A=D.find(".field"+B);if(A[0]==null){A=D.find(".default")}A.show().addClass("vdata");return false})}else{p.find(".default").show().addClass("vdata")}if(u||d){n.change()}k.find(".ui-state-default").hover(w,w).mousedown(j).mouseup(j);k.find(".ui-closer").click(function(A){o.onClose(jQuery(k.selector));return false});k.find(".ui-del").click(function(A){var B=jQuery(A.target).parents(".sf");if(B.siblings(".sf").length>0){if(o.datepickerFix===true&&jQuery.fn.datepicker!==undefined){B.find(".hasDatepicker").datepicker("destroy")}B.remove()}else{B.find("select[name='field']")[0].selectedIndex=0;B.find("select[name='op']")[0].selectedIndex=0;B.find(".data input").val("");B.find(".data select").each(function(){this.selectedIndex=0});B.find("select[name='field']").change(function(C){C.stopPropagation()})}return false});k.find(".ui-add").click(function(D){var E=jQuery(D.target).parents(".sf");var C=E.clone(true).insertAfter(E);C.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");if(o.clone){C.find("select[name='field']")[0].selectedIndex=E.find("select[name='field']")[0].selectedIndex;var B=(C.find("select[name='op']")[0]==null);if(!B){C.find("select[name='op']").focus()[0].selectedIndex=E.find("select[name='op']")[0].selectedIndex}var A=C.find("select.vdata");if(A[0]!=null){A[0].selectedIndex=E.find("select.vdata")[0].selectedIndex}}else{C.find(".data input").val("");C.find("select[name='field']").focus()}if(o.datepickerFix===true&&jQuery.fn.datepicker!==undefined){E.find(".hasDatepicker").each(function(){var F=jQuery.data(this,"datepicker").settings;C.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(F)})}C.find("select[name='field']").change(function(F){F.stopPropagation()});return false});k.find(".ui-search").click(function(D){var C=jQuery(k.selector);var A;var B=C.find("select[name='groupOp'] :selected").val();if(!o.stringResult){A={groupOp:B,rules:[]}}else{A='{"groupOp":"'+B+'","rules":['}C.find(".sf").each(function(E){var H=jQuery(this).find("select[name='field'] :selected").val();var G=jQuery(this).find("select[name='op'] :selected").val();var F=jQuery(this).find("input.vdata,select.vdata :selected").val();F+="";F=F.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');if(!o.stringResult){A.rules.push({field:H,op:G,data:F})}else{if(E>0){A+=","}A+='{"field":"'+H+'",';A+='"op":"'+G+'",';A+='"data":"'+F+'"}'}});if(o.stringResult){A+="]}"}o.onSearch(A);return false});k.find(".ui-reset").click(function(B,C){var A=jQuery(k.selector);A.find(".ui-del").click();A.find("select[name='groupOp']")[0].selectedIndex=0;o.onReset(C);return false});k.find(".ui-add-last").click(function(){var B=jQuery(k.selector+" .sf:last");var A=B.clone(true).insertAfter(B);A.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");A.find(".data input").val("");A.find("select[name='field']").focus();if(o.datepickerFix===true&&jQuery.fn.datepicker!==undefined){B.find(".hasDatepicker").each(function(){var C=jQuery.data(this,"datepicker").settings;A.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(C)})}A.find("select[name='field']").change(function(C){C.stopPropagation()});return false});this.setGroupOp=function(C){selDOMobj=k.find("select[name='groupOp']")[0];var D={},A=selDOMobj.options.length,B;for(B=0;B<A;B++){D[selDOMobj.options[B].value]=B}selDOMobj.selectedIndex=D[C];jQuery(selDOMobj).change(function(E){E.stopPropagation()})};this.setFilter=function(G){var E=G.sfref,C=G.filter;var L=[],K,J,H,M,N,A={};selDOMobj=E.find("select[name='field']")[0];for(K=0,H=selDOMobj.options.length;K<H;K++){A[selDOMobj.options[K].value]={index:K,ops:{}};L.push(selDOMobj.options[K].value)}for(K=0,N=L.length;K<N;K++){selDOMobj=E.find(".ops > select[class='field"+K+"']")[0];if(selDOMobj){for(J=0,M=selDOMobj.options.length;J<M;J++){A[L[K]]["ops"][selDOMobj.options[J].value]=J}}selDOMobj=E.find(".data > select[class='field"+K+"']")[0];if(selDOMobj){A[L[K]]["data"]={};for(J=0,M=selDOMobj.options.length;J<M;J++){A[L[K]]["data"][selDOMobj.options[J].value]=J}}}var I,B,D,F,O;I=C.field;if(A[I]){B=A[I]["index"]}if(B!=null){D=A[I]["ops"][C.op];if(D===undefined){for(K=0,N=g.operators.length;K<N;K++){if(g.operators[K].op==C.op){D=K;break}}}F=C.data;if(A[I]["data"]==null){O=-1}else{O=A[I]["data"][F]}}if(B!=null&&D!=null&&O!=null){E.find("select[name='field']")[0].selectedIndex=B;E.find("select[name='field']").change();E.find("select[name='op']")[0].selectedIndex=D;E.find("input.vdata").val(F);E=E.find("select.vdata")[0];if(E){E.selectedIndex=O}return true}else{return false}}}}return new b(this,a,c)};jQuery.fn.searchFilter.version="1.2.9";jQuery.fn.searchFilter.defaults={clone:true,datepickerFix:true,onReset:function(a){alert("Reset Clicked. Data Returned: "+a)},onSearch:function(a){alert("Search Clicked. Data Returned: "+a)},onClose:function(a){a.hide()},groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operators:[{op:"eq",text:"is equal to"},{op:"ne",text:"is not equal to"},{op:"lt",text:"is less than"},{op:"le",text:"is less or equal to"},{op:"gt",text:"is greater than"},{op:"ge",text:"is greater or equal to"},{op:"in",text:"is in"},{op:"ni",text:"is not in"},{op:"bw",text:"begins with"},{op:"bn",text:"does not begin with"},{op:"ew",text:"ends with"},{op:"en",text:"does not end with"},{op:"cn",text:"contains"},{op:"nc",text:"does not contain"}],matchText:"match",rulesText:"rules",resetText:"Reset",searchText:"Search",stringResult:true,windowTitle:"Search Rules",ajaxSelectOptions:{}};
;
jQuery.fn.extend({everyTime:function(h,f,g,e){return this.each(function(){jQuery.timer.add(this,h,f,g,e)})},oneTime:function(f,b,e){return this.each(function(){jQuery.timer.add(this,f,b,e,1)})},stopTime:function(d,b){return this.each(function(){jQuery.timer.remove(this,d,b)})}});jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1000,das:10000,hs:100000,ks:1000000},timeParse:function(d){if(d==undefined||d==null){return null}var b=this.regex.exec(jQuery.trim(d.toString()));return b[2]?parseFloat(b[1])*(this.powers[b[2]]||1):d},add:function(p,j,o,i,n){var l=0;if(jQuery.isFunction(o)){n||(n=i);i=o;o=j}j=jQuery.timer.timeParse(j);if(!(typeof j!="number"||isNaN(j)||j<0)){if(typeof n!="number"||isNaN(n)||n<0){n=0}n=n||0;var m=jQuery.data(p,this.dataKey)||jQuery.data(p,this.dataKey,{});m[o]||(m[o]={});i.timerID=i.timerID||this.guid++;var k=function(){if(++l>n&&n!==0||i.call(p,l)===false){jQuery.timer.remove(p,o,i)}};k.timerID=i.timerID;m[o][i.timerID]||(m[o][i.timerID]=window.setInterval(k,j));this.global.push(p)}},remove:function(j,g,i){var f=jQuery.data(j,this.dataKey),h;if(f){if(g){if(f[g]){if(i){if(i.timerID){window.clearInterval(f[g][i.timerID]);delete f[g][i.timerID]}}else{for(i in f[g]){window.clearInterval(f[g][i]);delete f[g][i]}}for(h in f[g]){break}if(!h){h=null;delete f[g]}}}else{for(g in f){this.remove(j,g,i)}}for(h in f){break}h||jQuery.removeData(j,this.dataKey)}}}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(d,b){jQuery.timer.remove(b)})});
;
/*! jQuery UI - v1.9.2 - 2013-01-16
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
(function(f,b){function a(j,m){var k,h,l,e=j.nodeName.toLowerCase();return"area"===e?(k=j.parentNode,h=k.name,!j.href||!h||k.nodeName.toLowerCase()!=="map"?!1:(l=f("img[usemap=#"+h+"]")[0],!!l&&c(l))):(/input|select|textarea|button|object/.test(e)?!j.disabled:"a"===e?j.href||m:m)&&c(j)}function c(e){return f.expr.filters.visible(e)&&!f(e).parents().andSelf().filter(function(){return f.css(this,"visibility")==="hidden"}).length}var g=0,d=/^ui-id-\d+$/;f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),f.fn.extend({_focus:f.fn.focus,focus:function(e,h){return typeof e=="number"?this.each(function(){var i=this;setTimeout(function(){f(i).focus(),h&&h.call(i)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return f.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?e=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.css(this,"position"))&&/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0):e=this.parents().filter(function(){return/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?f(document):e},zIndex:function(k){if(k!==b){return this.css("zIndex",k)}if(this.length){var j=f(this[0]),e,h;while(j.length&&j[0]!==document){e=j.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){h=parseInt(j.css("zIndex"),10);if(!isNaN(h)&&h!==0){return h}}j=j.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++g)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&f(this).removeAttr("id")})}}),f.extend(f.expr[":"],{data:f.expr.createPseudo?f.expr.createPseudo(function(e){return function(h){return !!f.data(h,e)}}):function(e,i,h){return !!f.data(e,h[3])},focusable:function(e){return a(e,!isNaN(f.attr(e,"tabindex")))},tabbable:function(e){var i=f.attr(e,"tabindex"),h=isNaN(i);return(h||i>=0)&&a(e,!h)}}),f(function(){var e=document.body,h=e.appendChild(h=document.createElement("div"));h.offsetHeight,f.extend(h.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=h.offsetHeight===100,f.support.selectstart="onselectstart" in h,e.removeChild(h).style.display="none"}),f("<a>").outerWidth(1).jquery||f.each(["Width","Height"],function(m,k){function e(i,q,p,o){return f.each(h,function(){q-=parseFloat(f.css(i,"padding"+this))||0,p&&(q-=parseFloat(f.css(i,"border"+this+"Width"))||0),o&&(q-=parseFloat(f.css(i,"margin"+this))||0)}),q}var h=k==="Width"?["Left","Right"]:["Top","Bottom"],j=k.toLowerCase(),l={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+k]=function(i){return i===b?l["inner"+k].call(this):this.each(function(){f(this).css(j,e(this,i)+"px")})},f.fn["outer"+k]=function(i,o){return typeof i!="number"?l["outer"+k].call(this,i):this.each(function(){f(this).css(j,e(this,i,!0,o)+"px")})}}),f("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(f.fn.removeData=function(e){return function(h){return arguments.length?e.call(this,f.camelCase(h)):e.call(this)}}(f.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];f.ui.ie=e.length?!0:!1,f.ui.ie6=parseFloat(e[1],10)===6}(),f.fn.extend({disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.extend(f.ui,{plugin:{add:function(h,l,k){var e,j=f.ui[h].prototype;for(e in k){j.plugins[e]=j.plugins[e]||[],j.plugins[e].push([l,k[e]])}},call:function(l,j,m){var k,h=l.plugins[j];if(!h||!l.element[0].parentNode||l.element[0].parentNode.nodeType===11){return}for(k=0;k<h.length;k++){l.options[h[k][0]]&&h[k][1].apply(l.element,m)}}},contains:f.contains,hasScroll:function(h,k){if(f(h).css("overflow")==="hidden"){return !1}var j=k&&k==="left"?"scrollLeft":"scrollTop",e=!1;return h[j]>0?!0:(h[j]=1,e=h[j]>0,h[j]=0,e)},isOverAxis:function(i,h,j){return i>h&&i<h+j},isOver:function(h,m,k,e,j,l){return f.ui.isOverAxis(h,k,j)&&f.ui.isOverAxis(m,e,l)}})})(jQuery);(function(d,b){var f=0,c=Array.prototype.slice,a=d.cleanData;d.cleanData=function(e){for(var i=0,h;(h=e[i])!=null;i++){try{d(h).triggerHandler("remove")}catch(g){}}a(e)},d.widget=function(j,p,l){var h,k,m,g,e=j.split(".")[0];j=j.split(".")[1],h=e+"-"+j,l||(l=p,p=d.Widget),d.expr[":"][h.toLowerCase()]=function(i){return !!d.data(i,h)},d[e]=d[e]||{},k=d[e][j],m=d[e][j]=function(n,i){if(!this._createWidget){return new m(n,i)}arguments.length&&this._createWidget(n,i)},d.extend(m,k,{version:l.version,_proto:d.extend({},l),_childConstructors:[]}),g=new p,g.options=d.widget.extend({},g.options),d.each(l,function(o,n){d.isFunction(n)&&(l[o]=function(){var q=function(){return p.prototype[o].apply(this,arguments)},i=function(r){return p.prototype[o].apply(this,r)};return function(){var r=this._super,v=this._superApply,u;return this._super=q,this._superApply=i,u=n.apply(this,arguments),this._super=r,this._superApply=v,u}}())}),m.prototype=d.widget.extend(g,{widgetEventPrefix:k?g.widgetEventPrefix:j},l,{constructor:m,namespace:e,widgetName:j,widgetBaseClass:h,widgetFullName:h}),k?(d.each(k._childConstructors,function(i,q){var o=q.prototype;d.widget(o.namespace+"."+o.widgetName,m,q._proto)}),delete k._childConstructors):p._childConstructors.push(m),d.widget.bridge(j,m)},d.widget.extend=function(l){var h=c.call(arguments,1),j=0,k=h.length,g,e;for(;j<k;j++){for(g in h[j]){e=h[j][g],h[j].hasOwnProperty(g)&&e!==b&&(d.isPlainObject(e)?l[g]=d.isPlainObject(l[g])?d.widget.extend({},l[g],e):d.widget.extend({},e):l[g]=e)}}return l},d.widget.bridge=function(h,e){var g=e.prototype.widgetFullName||h;d.fn[h]=function(l){var j=typeof l=="string",i=c.call(arguments,1),k=this;return l=!j&&i.length?d.widget.extend.apply(null,[l].concat(i)):l,j?this.each(function(){var n,m=d.data(this,g);if(!m){return d.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+l+"'")}if(!d.isFunction(m[l])||l.charAt(0)==="_"){return d.error("no such method '"+l+"' for "+h+" widget instance")}n=m[l].apply(m,i);if(n!==m&&n!==b){return k=n&&n.jquery?k.pushStack(n.get()):n,!1}}):this.each(function(){var m=d.data(this,g);m?m.option(l||{})._init():d.data(this,g,new e(l,this))}),k}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,g){g=d(g||this.defaultElement||this)[0],this.element=d(g),this.uuid=f++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=d.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=d(),this.hoverable=d(),this.focusable=d(),g!==this&&(d.data(g,this.widgetName,this),d.data(g,this.widgetFullName,this),this._on(!0,this.element,{remove:function(h){h.target===g&&this.destroy()}}),this.document=d(g.style?g.ownerDocument:g.document||g),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(l,j){var g=l,h,k,e;if(arguments.length===0){return d.widget.extend({},this.options)}if(typeof l=="string"){g={},h=l.split("."),l=h.shift();if(h.length){k=g[l]=d.widget.extend({},this.options[l]);for(e=0;e<h.length-1;e++){k[h[e]]=k[h[e]]||{},k=k[h[e]]}l=h.pop();if(j===b){return k[l]===b?null:k[l]}k[l]=j}else{if(j===b){return this.options[l]===b?null:this.options[l]}g[l]=j}}return this._setOptions(g),this},_setOptions:function(h){var g;for(g in h){this._setOption(g,h[g])}return this},_setOption:function(h,g){return this.options[h]=g,h==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(g,k,j){var e,h=this;typeof g!="boolean"&&(j=k,k=g,g=!1),j?(k=e=d(k),this.bindings=this.bindings.add(k)):(j=k,k=this.element,e=this.widget()),d.each(j,function(p,s){function n(){if(!g&&(h.options.disabled===!0||d(this).hasClass("ui-state-disabled"))){return}return(typeof s=="string"?h[s]:s).apply(h,arguments)}typeof s!="string"&&(n.guid=s.guid=s.guid||n.guid||d.guid++);var m=p.match(/^(\w+)\s*(.*)$/),q=m[1]+h.eventNamespace,i=m[2];i?e.delegate(i,q,n):k.bind(q,n)})},_off:function(h,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,h.unbind(g).undelegate(g)},_delay:function(i,g){function j(){return(typeof i=="string"?h[i]:i).apply(h,arguments)}var h=this;return setTimeout(j,g||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(g){d(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){d(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(g){d(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){d(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(g,l,j){var e,h,k=this.options[g];j=j||{},l=d.Event(l),l.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase(),l.target=this.element[0],h=l.originalEvent;if(h){for(e in h){e in l||(l[e]=h[e])}}return this.element.trigger(l,j),!(d.isFunction(k)&&k.apply(this.element[0],[l].concat(j))===!1||l.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(e,g){d.Widget.prototype["_"+e]=function(l,j,k){typeof j=="string"&&(j={effect:j});var m,h=j?j===!0||typeof j=="number"?g:j.effect||g:e;j=j||{},typeof j=="number"&&(j={duration:j}),m=!d.isEmptyObject(j),j.complete=k,j.delay&&l.delay(j.delay),m&&d.effects&&(d.effects.effect[h]||d.uiBackCompat!==!1&&d.effects[h])?l[e](j):h!==e&&l[h]?l[h](j.duration,j.easing,k):l.queue(function(i){d(this)[e](),k&&k.call(l[0]),i()})}}),d.uiBackCompat!==!1&&(d.Widget.prototype._getCreateOptions=function(){return d.metadata&&d.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(b,a){var c=!1;b(document).mouseup(function(d){c=!1}),b.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(e){if(!0===b.data(e.target,d.widgetName+".preventClickEvent")){return b.removeData(e.target,d.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(c){return}this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var g=this,d=e.which===1,f=typeof this.options.cancel=="string"&&e.target.nodeName?b(e.target).closest(this.options.cancel).length:!1;if(!d||f||!this._mouseCapture(e)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==!1;if(!this._mouseStarted){return e.preventDefault(),!0}}return !0===b.data(e.target,this.widgetName+".preventClickEvent")&&b.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(h){return g._mouseMove(h)},this._mouseUpDelegate=function(h){return g._mouseUp(h)},b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0},_mouseMove:function(d){return !b.ui.ie||document.documentMode>=9||!!d.button?this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==!1,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted):this._mouseUp(d)},_mouseUp:function(d){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&b.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),!1},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(d){return this.mouseDelayMet},_mouseStart:function(d){},_mouseDrag:function(d){},_mouseStop:function(d){},_mouseCapture:function(d){return !0}})})(jQuery);(function(w,A){function q(c,a,f){return[parseInt(c[0],10)*(k.test(c[0])?a/100:1),parseInt(c[1],10)*(k.test(c[1])?f/100:1)]}function d(a,c){return parseInt(w.css(a,c),10)||0}w.ui=w.ui||{};var j,b=Math.max,m=Math.abs,B=Math.round,g=/left|center|right/,z=/top|center|bottom/,y=/[\+\-]\d+%?/,v=/^\w+/,k=/%$/,x=w.fn.position;w.position={scrollbarWidth:function(){if(j!==A){return j}var e,a,c=w("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=c.children()[0];return w("body").append(c),e=f.offsetWidth,c.css("overflow","scroll"),a=f.offsetWidth,e===a&&(a=c[0].clientWidth),c.remove(),j=e-a},getScrollInfo:function(c){var h=c.isWindow?"":c.element.css("overflow-x"),f=c.isWindow?"":c.element.css("overflow-y"),a=h==="scroll"||h==="auto"&&c.width<c.element[0].scrollWidth,e=f==="scroll"||f==="auto"&&c.height<c.element[0].scrollHeight;return{width:a?w.position.scrollbarWidth():0,height:e?w.position.scrollbarWidth():0}},getWithinInfo:function(a){var e=w(a||window),c=w.isWindow(e[0]);return{element:e,isWindow:c,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:c?e.width():e.outerWidth(),height:c?e.height():e.outerHeight()}}},w.fn.position=function(u){if(!u||!u.of){return x.apply(this,arguments)}u=w.extend({},u);var a,e,i,s,c,h=w(u.of),p=w.position.getWithinInfo(u.within),o=w.position.getScrollInfo(p),r=h[0],C=(u.collision||"flip").split(" "),f={};return r.nodeType===9?(e=h.width(),i=h.height(),s={top:0,left:0}):w.isWindow(r)?(e=h.width(),i=h.height(),s={top:h.scrollTop(),left:h.scrollLeft()}):r.preventDefault?(u.at="left top",e=i=0,s={top:r.pageY,left:r.pageX}):(e=h.outerWidth(),i=h.outerHeight(),s=h.offset()),c=w.extend({},s),w.each(["my","at"],function(){var t=(u[this]||"").split(" "),D,l;t.length===1&&(t=g.test(t[0])?t.concat(["center"]):z.test(t[0])?["center"].concat(t):["center","center"]),t[0]=g.test(t[0])?t[0]:"center",t[1]=z.test(t[1])?t[1]:"center",D=y.exec(t[0]),l=y.exec(t[1]),f[this]=[D?D[0]:0,l?l[0]:0],u[this]=[v.exec(t[0])[0],v.exec(t[1])[0]]}),C.length===1&&(C[1]=C[0]),u.at[0]==="right"?c.left+=e:u.at[0]==="center"&&(c.left+=e/2),u.at[1]==="bottom"?c.top+=i:u.at[1]==="center"&&(c.top+=i/2),a=q(f.at,e,i),c.left+=a[0],c.top+=a[1],this.each(function(){var n,K,H=w(this),E=H.outerWidth(),G=H.outerHeight(),J=d(this,"marginLeft"),I=d(this,"marginTop"),D=E+J+d(this,"marginRight")+o.width,F=G+I+d(this,"marginBottom")+o.height,l=w.extend({},c),t=q(f.my,H.outerWidth(),H.outerHeight());u.my[0]==="right"?l.left-=E:u.my[0]==="center"&&(l.left-=E/2),u.my[1]==="bottom"?l.top-=G:u.my[1]==="center"&&(l.top-=G/2),l.left+=t[0],l.top+=t[1],w.support.offsetFractions||(l.left=B(l.left),l.top=B(l.top)),n={marginLeft:J,marginTop:I},w.each(["left","top"],function(M,L){w.ui.position[C[M]]&&w.ui.position[C[M]][L](l,{targetWidth:e,targetHeight:i,elemWidth:E,elemHeight:G,collisionPosition:n,collisionWidth:D,collisionHeight:F,offset:[a[0]+t[0],a[1]+t[1]],my:u.my,at:u.at,within:p,elem:H})}),w.fn.bgiframe&&H.bgiframe(),u.using&&(K=function(O){var Q=s.left-l.left,N=Q+e-E,P=s.top-l.top,L=P+i-G,M={target:{element:h,left:s.left,top:s.top,width:e,height:i},element:{element:H,left:l.left,top:l.top,width:E,height:G},horizontal:N<0?"left":Q>0?"right":"center",vertical:L<0?"top":P>0?"bottom":"middle"};e<E&&m(Q+N)<e&&(M.horizontal="center"),i<G&&m(P+L)<i&&(M.vertical="middle"),b(m(Q),m(N))>b(m(P),m(L))?M.important="horizontal":M.important="vertical",u.using.call(this,O,M)}),H.offset(w.extend(l,{using:K}))})},w.ui.position={fit:{left:function(r,E){var h=E.within,l=h.isWindow?h.scrollLeft:h.offset.left,F=h.width,c=r.left-E.collisionPosition.marginLeft,D=l-c,C=c+E.collisionWidth-F-l,p;E.collisionWidth>F?D>0&&C<=0?(p=r.left+D+E.collisionWidth-F-l,r.left+=D-p):C>0&&D<=0?r.left=l:D>C?r.left=l+F-E.collisionWidth:r.left=l:D>0?r.left+=D:C>0?r.left-=C:r.left=b(r.left-c,r.left)},top:function(r,E){var h=E.within,l=h.isWindow?h.scrollTop:h.offset.top,F=E.within.height,c=r.top-E.collisionPosition.marginTop,D=l-c,C=c+E.collisionHeight-F-l,p;E.collisionHeight>F?D>0&&C<=0?(p=r.top+D+E.collisionHeight-F-l,r.top+=D-p):C>0&&D<=0?r.top=l:D>C?r.top=l+F-E.collisionHeight:r.top=l:D>0?r.top+=D:C>0?r.top-=C:r.top=b(r.top-c,r.top)}},flip:{left:function(I,N){var E=N.within,i=E.offset.left+E.scrollLeft,O=E.width,D=E.isWindow?E.scrollLeft:E.offset.left,M=I.left-N.collisionPosition.marginLeft,L=M-D,H=M+N.collisionWidth-O-D,F=N.my[0]==="left"?-N.elemWidth:N.my[0]==="right"?N.elemWidth:0,K=N.at[0]==="left"?N.targetWidth:N.at[0]==="right"?-N.targetWidth:0,G=-2*N.offset[0],C,J;if(L<0){C=I.left+F+K+G+N.collisionWidth-O-i;if(C<0||C<m(L)){I.left+=F+K+G}}else{if(H>0){J=I.left-N.collisionPosition.marginLeft+F+K+G-D;if(J>0||m(J)<H){I.left+=F+K+G}}}},top:function(I,O){var E=O.within,i=E.offset.top+E.scrollTop,P=E.height,D=E.isWindow?E.scrollTop:E.offset.top,N=I.top-O.collisionPosition.marginTop,L=N-D,H=N+O.collisionHeight-P-D,F=O.my[1]==="top",K=F?-O.elemHeight:O.my[1]==="bottom"?O.elemHeight:0,G=O.at[1]==="top"?O.targetHeight:O.at[1]==="bottom"?-O.targetHeight:0,C=-2*O.offset[1],J,M;L<0?(M=I.top+K+G+C+O.collisionHeight-P-i,I.top+K+G+C>L&&(M<0||M<m(L))&&(I.top+=K+G+C)):H>0&&(J=I.top-O.collisionPosition.marginTop+K+G+C-D,I.top+K+G+C>H&&(J>0||m(J)<H)&&(I.top+=K+G+C))}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}},function(){var e,p,h,c,f,l=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(l?"div":"body"),h={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&w.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in h){e.style[f]=h[f]}e.appendChild(a),p=l||document.documentElement,p.insertBefore(e,p.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",c=w(a).offset().left,w.support.offsetFractions=c>10&&c<11,e.innerHTML="",p.removeChild(e)}(),w.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(h){if(!h||!h.offset){return c.call(this,h)}var e=h.offset.split(" "),f=h.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(h,{at:f[0]+e[0]+" "+f[1]+e[1],offset:A}))}}(jQuery)})(jQuery);(function(b,a){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(c){var d=this.options;return this.helper||d.disabled||b(c.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(c),this.handle?(b(d.iframeFix===!0?"iframe":d.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(b(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(c){var d=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),d.containment&&this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(c,e){this.position=this._generatePosition(c),this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",c,d)===!1){return this._mouseUp({}),!1}this.position=d.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return b.ui.ddmanager&&b.ui.ddmanager.drag(this,c),!1},_mouseStop:function(d){var g=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(g=b.ui.ddmanager.drop(this,d)),this.dropped&&(g=this.dropped,this.dropped=!1);var f=this.element[0],c=!1;while(f&&(f=f.parentNode)){f==document&&(c=!0)}if(!c&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!g||this.options.revert=="valid"&&g||this.options.revert===!0||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,g)){var e=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",d)!==!1&&e._clear()})}else{this._trigger("stop",d)!==!1&&this._clear()}return !1},_mouseUp:function(c){return b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,c),b.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(c){var d=!this.options.handle||!b(this.options.handle,this.element).length?!0:!1;return b(this.options.handle,this.element).find("*").andSelf().each(function(){this==c.target&&(d=!0)}),d},_createHelper:function(c){var e=this.options,d=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[c])):e.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(e.appendTo=="parent"?this.element[0].parentNode:e.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(c){typeof c=="string"&&(c=c.split(" ")),b.isArray(c)&&(c={left:+c[0],top:+c[1]||0}),"left" in c&&(this.offset.click.left=c.left+this.margins.left),"right" in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left),"top" in c&&(this.offset.click.top=c.top+this.margins.top),"bottom" in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.ui.ie){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;d.containment=="parent"&&(d.containment=this.helper[0].parentNode);if(d.containment=="document"||d.containment=="window"){this.containment=[d.containment=="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,d.containment=="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(d.containment=="document"?0:b(window).scrollLeft())+b(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d.containment=="document"?0:b(window).scrollTop())+(b(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(d.containment)&&d.containment.constructor!=Array){var g=b(d.containment),f=g[0];if(!f){return}var c=g.offset(),e=b(f).css("overflow")!="hidden";this.containment=[(parseInt(b(f).css("borderLeftWidth"),10)||0)+(parseInt(b(f).css("paddingLeft"),10)||0),(parseInt(b(f).css("borderTopWidth"),10)||0)+(parseInt(b(f).css("paddingTop"),10)||0),(e?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(b(f).css("borderLeftWidth"),10)||0)-(parseInt(b(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(b(f).css("borderTopWidth"),10)||0)-(parseInt(b(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=g}else{d.containment.constructor==Array&&(this.containment=d.containment)}},_convertPositionTo:function(d,h){h||(h=this.position);var f=d=="absolute"?1:-1,c=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(e[0].tagName);return{top:h.top+this.offset.relative.top*f+this.offset.parent.top*f-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:e.scrollTop())*f,left:h.left+this.offset.relative.left*f+this.offset.parent.left*f-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:e.scrollLeft())*f}},_generatePosition:function(p){var e=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(c[0].tagName),q=p.pageX,d=p.pageY;if(this.originalPosition){var m;if(this.containment){if(this.relative_container){var k=this.relative_container.offset();m=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]}else{m=this.containment}p.pageX-this.offset.click.left<m[0]&&(q=m[0]+this.offset.click.left),p.pageY-this.offset.click.top<m[1]&&(d=m[1]+this.offset.click.top),p.pageX-this.offset.click.left>m[2]&&(q=m[2]+this.offset.click.left),p.pageY-this.offset.click.top>m[3]&&(d=m[3]+this.offset.click.top)}if(e.grid){var j=e.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;d=m?j-this.offset.click.top<m[1]||j-this.offset.click.top>m[3]?j-this.offset.click.top<m[1]?j+e.grid[1]:j-e.grid[1]:j:j;var g=e.grid[0]?this.originalPageX+Math.round((q-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX;q=m?g-this.offset.click.left<m[0]||g-this.offset.click.left>m[2]?g-this.offset.click.left<m[0]?g+e.grid[0]:g-e.grid[0]:g:g}}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:c.scrollTop()),left:q-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(c,e,d){return d=d||this._uiHash(),b.ui.plugin.call(this,c,[e,d]),c=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),b.Widget.prototype._trigger.call(this,c,e,d)},plugins:{},_uiHash:function(c){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),b.ui.plugin.add("draggable","connectToSortable",{start:function(d,g){var f=b(this).data("draggable"),c=f.options,e=b.extend({},g,{item:f.element});f.sortables=[],b(c.connectToSortable).each(function(){var h=b.data(this,"sortable");h&&!h.options.disabled&&(f.sortables.push({instance:h,shouldRevert:h.options.revert}),h.refreshPositions(),h._trigger("activate",d,e))})},stop:function(d,f){var e=b(this).data("draggable"),c=b.extend({},f,{item:e.element});b.each(e.sortables,function(){this.instance.isOver?(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(d),this.instance.options.helper=this.instance.options._helper,e.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",d,c))})},drag:function(d,g){var f=b(this).data("draggable"),c=this,e=function(v){var k=this.offset.click.top,h=this.offset.click.left,l=this.positionAbs.top,w=this.positionAbs.left,j=v.height,q=v.width,p=v.top,m=v.left;return b.ui.isOver(l+k,w+h,p,m,j,q)};b.each(f.sortables,function(i){var j=!1,h=this;this.instance.positionAbs=f.positionAbs,this.instance.helperProportions=f.helperProportions,this.instance.offset.click=f.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(j=!0,b.each(f.sortables,function(){return this.instance.positionAbs=f.positionAbs,this.instance.helperProportions=f.helperProportions,this.instance.offset.click=f.offset.click,this!=h&&this.instance._intersectsWith(this.instance.containerCache)&&b.ui.contains(h.instance.element[0],this.instance.element[0])&&(j=!1),j})),j?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(c).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return g.helper[0]},d.target=this.instance.currentItem[0],this.instance._mouseCapture(d,!0),this.instance._mouseStart(d,!0,!0),this.instance.offset.click.top=f.offset.click.top,this.instance.offset.click.left=f.offset.click.left,this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top,f._trigger("toSortable",d),f.dropped=this.instance.element,f.currentItem=f.element,this.instance.fromOutside=f),this.instance.currentItem&&this.instance._mouseDrag(d)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",d,this.instance._uiHash(this.instance)),this.instance._mouseStop(d,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),f._trigger("fromSortable",d),f.dropped=!1)})}}),b.ui.plugin.add("draggable","cursor",{start:function(d,f){var e=b("body"),c=b(this).data("draggable").options;e.css("cursor")&&(c._cursor=e.css("cursor")),e.css("cursor",c.cursor)},stop:function(c,e){var d=b(this).data("draggable").options;d._cursor&&b("body").css("cursor",d._cursor)}}),b.ui.plugin.add("draggable","opacity",{start:function(d,f){var e=b(f.helper),c=b(this).data("draggable").options;e.css("opacity")&&(c._opacity=e.css("opacity")),e.css("opacity",c.opacity)},stop:function(c,e){var d=b(this).data("draggable").options;d._opacity&&b(e.helper).css("opacity",d._opacity)}}),b.ui.plugin.add("draggable","scroll",{start:function(c,e){var d=b(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(d,g){var f=b(this).data("draggable"),c=f.options,e=!1;if(f.scrollParent[0]!=document&&f.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!="x"){f.overflowOffset.top+f.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity?f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop+c.scrollSpeed:d.pageY-f.overflowOffset.top<c.scrollSensitivity&&(f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop-c.scrollSpeed)}if(!c.axis||c.axis!="y"){f.overflowOffset.left+f.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity?f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft+c.scrollSpeed:d.pageX-f.overflowOffset.left<c.scrollSensitivity&&(f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft-c.scrollSpeed)}}else{if(!c.axis||c.axis!="x"){d.pageY-b(document).scrollTop()<c.scrollSensitivity?e=b(document).scrollTop(b(document).scrollTop()-c.scrollSpeed):b(window).height()-(d.pageY-b(document).scrollTop())<c.scrollSensitivity&&(e=b(document).scrollTop(b(document).scrollTop()+c.scrollSpeed))}if(!c.axis||c.axis!="y"){d.pageX-b(document).scrollLeft()<c.scrollSensitivity?e=b(document).scrollLeft(b(document).scrollLeft()-c.scrollSpeed):b(window).width()-(d.pageX-b(document).scrollLeft())<c.scrollSensitivity&&(e=b(document).scrollLeft(b(document).scrollLeft()+c.scrollSpeed))}}e!==!1&&b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(f,d)}}),b.ui.plugin.add("draggable","snap",{start:function(d,f){var e=b(this).data("draggable"),c=e.options;e.snapElements=[],b(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var g=b(this),h=g.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:h.top,left:h.left})})},drag:function(q,B){var x=b(this).data("draggable"),E=x.options,w=E.snapTolerance,A=B.offset.left,k=A+x.helperProportions.width,L=B.offset.top,H=L+x.helperProportions.height;for(var D=x.snapElements.length-1;D>=0;D--){var J=x.snapElements[D].left,F=J+x.snapElements[D].width,z=x.snapElements[D].top,I=z+x.snapElements[D].height;if(!(J-w<A&&A<F+w&&z-w<L&&L<I+w||J-w<A&&A<F+w&&z-w<H&&H<I+w||J-w<k&&k<F+w&&z-w<L&&L<I+w||J-w<k&&k<F+w&&z-w<H&&H<I+w)){x.snapElements[D].snapping&&x.options.snap.release&&x.options.snap.release.call(x.element,q,b.extend(x._uiHash(),{snapItem:x.snapElements[D].item})),x.snapElements[D].snapping=!1;continue}if(E.snapMode!="inner"){var j=Math.abs(z-H)<=w,C=Math.abs(I-L)<=w,G=Math.abs(J-k)<=w,e=Math.abs(F-A)<=w;j&&(B.position.top=x._convertPositionTo("relative",{top:z-x.helperProportions.height,left:0}).top-x.margins.top),C&&(B.position.top=x._convertPositionTo("relative",{top:I,left:0}).top-x.margins.top),G&&(B.position.left=x._convertPositionTo("relative",{top:0,left:J-x.helperProportions.width}).left-x.margins.left),e&&(B.position.left=x._convertPositionTo("relative",{top:0,left:F}).left-x.margins.left)}var K=j||C||G||e;if(E.snapMode!="outer"){var j=Math.abs(z-L)<=w,C=Math.abs(I-H)<=w,G=Math.abs(J-A)<=w,e=Math.abs(F-k)<=w;j&&(B.position.top=x._convertPositionTo("relative",{top:z,left:0}).top-x.margins.top),C&&(B.position.top=x._convertPositionTo("relative",{top:I-x.helperProportions.height,left:0}).top-x.margins.top),G&&(B.position.left=x._convertPositionTo("relative",{top:0,left:J}).left-x.margins.left),e&&(B.position.left=x._convertPositionTo("relative",{top:0,left:F-x.helperProportions.width}).left-x.margins.left)}!x.snapElements[D].snapping&&(j||C||G||e||K)&&x.options.snap.snap&&x.options.snap.snap.call(x.element,q,b.extend(x._uiHash(),{snapItem:x.snapElements[D].item})),x.snapElements[D].snapping=j||C||G||e||K}}}),b.ui.plugin.add("draggable","stack",{start:function(d,g){var f=b(this).data("draggable").options,c=b.makeArray(b(f.stack)).sort(function(h,i){return(parseInt(b(h).css("zIndex"),10)||0)-(parseInt(b(i).css("zIndex"),10)||0)});if(!c.length){return}var e=parseInt(c[0].style.zIndex)||0;b(c).each(function(h){this.style.zIndex=e+h}),this[0].style.zIndex=e+c.length}}),b.ui.plugin.add("draggable","zIndex",{start:function(d,f){var e=b(f.helper),c=b(this).data("draggable").options;e.css("zIndex")&&(c._zIndex=e.css("zIndex")),e.css("zIndex",c.zIndex)},stop:function(c,e){var d=b(this).data("draggable").options;d._zIndex&&b(e.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(b,a){b.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var c=this.options,d=c.accept;this.isover=0,this.isout=1,this.accept=b.isFunction(d)?d:function(f){return f.is(d)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},b.ui.ddmanager.droppables[c.scope]=b.ui.ddmanager.droppables[c.scope]||[],b.ui.ddmanager.droppables[c.scope].push(this),c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var c=b.ui.ddmanager.droppables[this.options.scope];for(var d=0;d<c.length;d++){c[d]==this&&c.splice(d,1)}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,d){c=="accept"&&(this.accept=b.isFunction(d)?d:function(f){return f.is(d)}),b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(c){var d=b.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),d&&this._trigger("activate",c,this.ui(d))},_deactivate:function(c){var d=b.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),d&&this._trigger("deactivate",c,this.ui(d))},_over:function(c){var d=b.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0]){return}this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",c,this.ui(d)))},_out:function(c){var d=b.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0]){return}this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(d)))},_drop:function(d,f){var e=f||b.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return !1}var c=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var g=b.data(this,"droppable");if(g.options.greedy&&!g.options.disabled&&g.options.scope==e.options.scope&&g.accept.call(g.element[0],e.currentItem||e.element)&&b.ui.intersect(e,b.extend(g,{offset:g.element.offset()}),g.options.tolerance)){return c=!0,!1}}),c?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",d,this.ui(e)),this.element):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),b.ui.intersect=function(B,k,e){if(!k.offset){return !1}var q=(B.positionAbs||B.position.absolute).left,C=q+B.helperProportions.width,j=(B.positionAbs||B.position.absolute).top,A=j+B.helperProportions.height,z=k.offset.left,w=z+k.proportions.width,m=k.offset.top,y=m+k.proportions.height;switch(e){case"fit":return z<=q&&C<=w&&m<=j&&A<=y;case"intersect":return z<q+B.helperProportions.width/2&&C-B.helperProportions.width/2<w&&m<j+B.helperProportions.height/2&&A-B.helperProportions.height/2<y;case"pointer":var v=(B.positionAbs||B.position.absolute).left+(B.clickOffset||B.offset.click).left,g=(B.positionAbs||B.position.absolute).top+(B.clickOffset||B.offset.click).top,x=b.ui.isOver(g,v,m,z,k.proportions.height,k.proportions.width);return x;case"touch":return(j>=m&&j<=y||A>=m&&A<=y||j<m&&A>y)&&(q>=z&&q<=w||C>=z&&C<=w||q<z&&C>w);default:return !1}},b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,j){var g=b.ui.ddmanager.droppables[e.options.scope]||[],d=j?j.type:null,f=(e.currentItem||e.element).find(":data(droppable)").andSelf();b:for(var h=0;h<g.length;h++){if(g[h].options.disabled||e&&!g[h].accept.call(g[h].element[0],e.currentItem||e.element)){continue}for(var c=0;c<f.length;c++){if(f[c]==g[h].element[0]){g[h].proportions.height=0;continue b}}g[h].visible=g[h].element.css("display")!="none";if(!g[h].visible){continue}d=="mousedown"&&g[h]._activate.call(g[h],j),g[h].offset=g[h].element.offset(),g[h].proportions={width:g[h].element[0].offsetWidth,height:g[h].element[0].offsetHeight}}},drop:function(c,e){var d=!1;return b.each(b.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&b.ui.intersect(c,this,this.options.tolerance)&&(d=this._drop.call(this,e)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,e))}),d},dragStart:function(c,d){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||b.ui.ddmanager.prepareOffsets(c,d)})},drag:function(c,d){c.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(c,d),b.each(b.ui.ddmanager.droppables[c.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var h=b.ui.intersect(c,this,this.options.tolerance),f=!h&&this.isover==1?"isout":h&&this.isover==0?"isover":null;if(!f){return}var g;if(this.options.greedy){var j=this.options.scope,e=this.element.parents(":data(droppable)").filter(function(){return b.data(this,"droppable").options.scope===j});e.length&&(g=b.data(e[0],"droppable"),g.greedyChild=f=="isover"?1:0)}g&&f=="isover"&&(g.isover=0,g.isout=1,g._out.call(g,d)),this[f]=1,this[f=="isout"?"isover":"isout"]=0,this[f=="isover"?"_over":"_out"].call(this,d),g&&f=="isout"&&(g.isout=0,g.isover=1,g._over.call(g,d))})},dragStop:function(c,d){c.element.parentsUntil("body").unbind("scroll.droppable"),c.options.refreshPositions||b.ui.ddmanager.prepareOffsets(c,d)}}})(jQuery);(function(c,a){c.widget("ui.resizable",c.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var g=this,l=this.options;this.element.addClass("ui-resizable"),c.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=l.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var j=this.handles.split(",");this.handles={};for(var f=0;f<j.length;f++){var h=c.trim(j[f]),k="ui-resizable-"+h,e=c('<div class="ui-resizable-handle '+k+'"></div>');e.css({zIndex:l.zIndex}),"se"==h&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[h]=".ui-resizable-"+h,this.element.append(e)}}this._renderAxis=function(o){o=o||this.element;for(var u in this.handles){this.handles[u].constructor==String&&(this.handles[u]=c(this.handles[u],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var q=c(this.handles[u],this.element),m=0;m=/sw|ne|nw|se|n|s/.test(u)?q.outerHeight():q.outerWidth();var p=["padding",/ne|nw|n/.test(u)?"Top":/se|sw|s/.test(u)?"Bottom":/^e$/.test(u)?"Right":"Left"].join("");o.css(p,m),this._proportionallyResize()}if(!c(this.handles[u]).length){continue}}},this._renderAxis(this.element),this._handles=c(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!g.resizing){if(this.className){var i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}g.axis=i&&i[1]?i[1]:"se"}}),l.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(l.disabled){return}c(this).removeClass("ui-resizable-autohide"),g._handles.show()}).mouseleave(function(){if(l.disabled){return}g.resizing||(c(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(g){c(g).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var f=this.element;this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}).insertAfter(f),f.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var g=!1;for(var f in this.handles){c(this.handles[f])[0]==e.target&&(g=!0)}return !this.options.disabled&&g},_mouseStart:function(h){var k=this.options,g=this.element.position(),j=this.element;this.resizing=!0,this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()},(j.is(".ui-draggable")||/absolute/.test(j.css("position")))&&j.css({position:"absolute",top:g.top,left:g.left}),this._renderProxy();var l=d(this.helper.css("left")),f=d(this.helper.css("top"));k.containment&&(l+=c(k.containment).scrollLeft()||0,f+=c(k.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:f},this.size=this._helper?{width:j.outerWidth(),height:j.outerHeight()}:{width:j.width(),height:j.height()},this.originalSize=this._helper?{width:j.outerWidth(),height:j.outerHeight()}:{width:j.width(),height:j.height()},this.originalPosition={left:l,top:f},this.sizeDiff={width:j.outerWidth()-j.width(),height:j.outerHeight()-j.height()},this.originalMousePosition={left:h.pageX,top:h.pageY},this.aspectRatio=typeof k.aspectRatio=="number"?k.aspectRatio:this.originalSize.width/this.originalSize.height||1;var e=c(".ui-resizable-"+this.axis).css("cursor");return c("body").css("cursor",e=="auto"?this.axis+"-resize":e),j.addClass("ui-resizable-resizing"),this._propagate("start",h),!0},_mouseDrag:function(q){var x=this.helper,j=this.options,g={},m=this,y=this.originalMousePosition,h=this.axis,w=q.pageX-y.left||0,v=q.pageY-y.top||0,p=this._change[h];if(!p){return !1}var k=p.apply(this,[q,w,v]);this._updateVirtualBoundaries(q.shiftKey);if(this._aspectRatio||q.shiftKey){k=this._updateRatio(k,q)}return k=this._respectSize(k,q),this._propagate("resize",q),x.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(k),this._trigger("resize",q,this.ui()),!1},_mouseStop:function(v){this.resizing=!1;var h=this.options,e=this;if(this._helper){var k=this._proportionallyResizeElements,w=k.length&&/textarea/i.test(k[0].nodeName),g=w&&c.ui.hasScroll(k[0],"left")?0:e.sizeDiff.height,q=w?0:e.sizeDiff.width,p={width:e.helper.width()-q,height:e.helper.height()-g},m=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,j=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;h.animate||this.element.css(c.extend(p,{top:j,left:m})),e.helper.height(e.size.height),e.helper.width(e.size.width),this._helper&&!h.animate&&this._proportionallyResize()}return c("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",v),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(k){var h=this.options,m,g,j,l,f;f={minWidth:b(h.minWidth)?h.minWidth:0,maxWidth:b(h.maxWidth)?h.maxWidth:Infinity,minHeight:b(h.minHeight)?h.minHeight:0,maxHeight:b(h.maxHeight)?h.maxHeight:Infinity};if(this._aspectRatio||k){m=f.minHeight*this.aspectRatio,j=f.minWidth/this.aspectRatio,g=f.maxHeight*this.aspectRatio,l=f.maxWidth/this.aspectRatio,m>f.minWidth&&(f.minWidth=m),j>f.minHeight&&(f.minHeight=j),g<f.maxWidth&&(f.maxWidth=g),l<f.maxHeight&&(f.maxHeight=l)}this._vBoundaries=f},_updateCache:function(g){var f=this.options;this.offset=this.helper.offset(),b(g.left)&&(this.position.left=g.left),b(g.top)&&(this.position.top=g.top),b(g.height)&&(this.size.height=g.height),b(g.width)&&(this.size.width=g.width)},_updateRatio:function(j,g){var l=this.options,f=this.position,h=this.size,k=this.axis;return b(j.height)?j.width=j.height*this.aspectRatio:b(j.width)&&(j.height=j.width/this.aspectRatio),k=="sw"&&(j.left=f.left+(h.width-j.width),j.top=null),k=="nw"&&(j.top=f.top+(h.height-j.height),j.left=f.left+(h.width-j.width)),j},_respectSize:function(x,D){var k=this.helper,q=this._vBoundaries,E=this._aspectRatio||D.shiftKey,j=this.axis,C=b(x.width)&&q.maxWidth&&q.maxWidth<x.width,A=b(x.height)&&q.maxHeight&&q.maxHeight<x.height,w=b(x.width)&&q.minWidth&&q.minWidth>x.width,m=b(x.height)&&q.minHeight&&q.minHeight>x.height;w&&(x.width=q.minWidth),m&&(x.height=q.minHeight),C&&(x.width=q.maxWidth),A&&(x.height=q.maxHeight);var z=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,g=/sw|nw|w/.test(j),y=/nw|ne|n/.test(j);w&&g&&(x.left=z-q.minWidth),C&&g&&(x.left=z-q.maxWidth),m&&y&&(x.top=r-q.minHeight),A&&y&&(x.top=r-q.maxHeight);var B=!x.width&&!x.height;return B&&!x.left&&x.top?x.top=null:B&&!x.top&&x.left&&(x.left=null),x},_proportionallyResize:function(){var f=this.options;if(!this._proportionallyResizeElements.length){return}var k=this.helper||this.element;for(var h=0;h<this._proportionallyResizeElements.length;h++){var e=this._proportionallyResizeElements[h];if(!this.borderDif){var g=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],j=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=c.map(g,function(m,i){var o=parseInt(m,10)||0,l=parseInt(j[i],10)||0;return o+l})}e.css({height:k.height()-this.borderDif[0]-this.borderDif[2]||0,width:k.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.element,h=this.options;this.elementOffset=f.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var g=c.ui.ie6?1:0,e=c.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-g+"px",top:this.elementOffset.top-g+"px",zIndex:++h.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(g,f,h){return{width:this.originalSize.width+f}},w:function(k,g,l){var j=this.options,f=this.originalSize,h=this.originalPosition;return{left:h.left+g,width:f.width-g}},n:function(k,g,l){var j=this.options,f=this.originalSize,h=this.originalPosition;return{top:h.top+l,height:f.height-l}},s:function(g,f,h){return{height:this.originalSize.height+h}},se:function(e,g,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,g,f]))},sw:function(e,g,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,g,f]))},ne:function(e,g,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,g,f]))},nw:function(e,g,f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,g,f]))}},_propagate:function(e,f){c.ui.plugin.call(this,e,[f,this.ui()]),e!="resize"&&this._trigger(e,f,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),c.ui.plugin.add("resizable","alsoResize",{start:function(f,j){var h=c(this).data("resizable"),e=h.options,g=function(i){c(i).each(function(){var k=c(this);k.data("resizable-alsoresize",{width:parseInt(k.width(),10),height:parseInt(k.height(),10),left:parseInt(k.css("left"),10),top:parseInt(k.css("top"),10)})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],g(e.alsoResize)):c.each(e.alsoResize,function(i){g(i)}):g(e.alsoResize)},resize:function(h,m){var k=c(this).data("resizable"),g=k.options,j=k.originalSize,l=k.originalPosition,f={height:k.size.height-j.height||0,width:k.size.width-j.width||0,top:k.position.top-l.top||0,left:k.position.left-l.left||0},e=function(i,n){c(i).each(function(){var q=c(this),p=c(this).data("resizable-alsoresize"),r={},u=n&&n.length?n:q.parents(m.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(u,function(s,o){var v=(p[o]||0)+(f[o]||0);v&&v>=0&&(r[o]=v||null)}),q.css(r)})};typeof g.alsoResize=="object"&&!g.alsoResize.nodeType?c.each(g.alsoResize,function(n,i){e(n,i)}):e(g.alsoResize)},stop:function(e,f){c(this).removeData("resizable-alsoresize")}}),c.ui.plugin.add("resizable","animate",{stop:function(w,h){var e=c(this).data("resizable"),k=e.options,x=e._proportionallyResizeElements,g=x.length&&/textarea/i.test(x[0].nodeName),v=g&&c.ui.hasScroll(x[0],"left")?0:e.sizeDiff.height,q=g?0:e.sizeDiff.width,m={width:e.size.width-q,height:e.size.height-v},j=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,p=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(c.extend(m,p&&j?{top:p,left:j}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var f={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};x&&x.length&&c(x[0]).css({width:f.width,height:f.height}),e._updateCache(f),e._propagate("resize",w)}})}}),c.ui.plugin.add("resizable","containment",{start:function(B,e){var m=c(this).data("resizable"),C=m.options,j=m.element,A=C.containment,y=A instanceof c?A.get(0):/parent/.test(A)?j.parent().get(0):A;if(!y){return}m.containerElement=c(y);if(/document/.test(A)||A==document){m.containerOffset={left:0,top:0},m.containerPosition={left:0,top:0},m.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var q=c(y),k=[];c(["Top","Right","Left","Bottom"]).each(function(h,f){k[h]=d(q.css("padding"+f))}),m.containerOffset=q.offset(),m.containerPosition=q.position(),m.containerSize={height:q.innerHeight()-k[3],width:q.innerWidth()-k[1]};var x=m.containerOffset,n=m.containerSize.height,g=m.containerSize.width,w=c.ui.hasScroll(y,"left")?y.scrollWidth:g,z=c.ui.hasScroll(y)?y.scrollHeight:n;m.parentData={element:y,left:x.left,top:x.top,width:w,height:z}}},resize:function(D,k){var e=c(this).data("resizable"),q=e.options,E=e.containerSize,j=e.containerOffset,C=e.size,A=e.position,x=e._aspectRatio||D.shiftKey,m={top:0,left:0},z=e.containerElement;z[0]!=document&&/static/.test(z.css("position"))&&(m=j),A.left<(e._helper?j.left:0)&&(e.size.width=e.size.width+(e._helper?e.position.left-j.left:e.position.left-m.left),x&&(e.size.height=e.size.width/e.aspectRatio),e.position.left=q.helper?j.left:0),A.top<(e._helper?j.top:0)&&(e.size.height=e.size.height+(e._helper?e.position.top-j.top:e.position.top),x&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?j.top:0),e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top;var w=Math.abs((e._helper?e.offset.left-m.left:e.offset.left-m.left)+e.sizeDiff.width),g=Math.abs((e._helper?e.offset.top-m.top:e.offset.top-j.top)+e.sizeDiff.height),y=e.containerElement.get(0)==e.element.parent().get(0),B=/relative|absolute/.test(e.containerElement.css("position"));y&&B&&(w-=e.parentData.left),w+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-w,x&&(e.size.height=e.size.width/e.aspectRatio)),g+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-g,x&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(y,j){var e=c(this).data("resizable"),m=e.options,z=e.position,g=e.containerOffset,x=e.containerPosition,w=e.containerElement,q=c(e.helper),k=q.offset(),v=q.outerWidth()-e.sizeDiff.width,p=q.outerHeight()-e.sizeDiff.height;e._helper&&!m.animate&&/relative/.test(w.css("position"))&&c(this).css({left:k.left-x.left-g.left,width:v,height:p}),e._helper&&!m.animate&&/static/.test(w.css("position"))&&c(this).css({left:k.left-x.left-g.left,width:v,height:p})}}),c.ui.plugin.add("resizable","ghost",{start:function(f,j){var h=c(this).data("resizable"),e=h.options,g=h.size;h.ghost=h.originalElement.clone(),h.ghost.css({opacity:0.25,display:"block",position:"relative",height:g.height,width:g.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),h.ghost.appendTo(h.helper)},resize:function(f,h){var g=c(this).data("resizable"),e=g.options;g.ghost&&g.ghost.css({position:"relative",height:g.size.height,width:g.size.width})},stop:function(f,h){var g=c(this).data("resizable"),e=g.options;g.ghost&&g.helper&&g.helper.get(0).removeChild(g.ghost.get(0))}}),c.ui.plugin.add("resizable","grid",{resize:function(w,h){var e=c(this).data("resizable"),k=e.options,x=e.size,g=e.originalSize,v=e.originalPosition,q=e.axis,m=k._aspectRatio||w.shiftKey;k.grid=typeof k.grid=="number"?[k.grid,k.grid]:k.grid;var j=Math.round((x.width-g.width)/(k.grid[0]||1))*(k.grid[0]||1),p=Math.round((x.height-g.height)/(k.grid[1]||1))*(k.grid[1]||1);/^(se|s|e)$/.test(q)?(e.size.width=g.width+j,e.size.height=g.height+p):/^(ne)$/.test(q)?(e.size.width=g.width+j,e.size.height=g.height+p,e.position.top=v.top-p):/^(sw)$/.test(q)?(e.size.width=g.width+j,e.size.height=g.height+p,e.position.left=v.left-j):(e.size.width=g.width+j,e.size.height=g.height+p,e.position.top=v.top-p,e.position.left=v.left-j)}});var d=function(f){return parseInt(f,10)||0},b=function(f){return !isNaN(parseInt(f,10))}})(jQuery);(function(b,a){b.widget("ui.selectable",b.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var c=this;this.element.addClass("ui-selectable"),this.dragged=!1;var d;this.refresh=function(){d=b(c.options.filter,c.element[0]),d.addClass("ui-selectee"),d.each(function(){var e=b(this),f=e.offset();b.data(this,"selectable-item",{element:this,$element:e,left:f.left,top:f.top,right:f.left+e.outerWidth(),bottom:f.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=d.addClass("ui-selectee"),this._mouseInit(),this.helper=b("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(c){var e=this;this.opos=[c.pageX,c.pageY];if(this.options.disabled){return}var d=this.options;this.selectees=b(d.filter,this.element[0]),this._trigger("start",c),b(d.appendTo).append(this.helper),this.helper.css({left:c.clientX,top:c.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var f=b.data(this,"selectable-item");f.startselected=!0,!c.metaKey&&!c.ctrlKey&&(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,e._trigger("unselecting",c,{unselecting:f.element}))}),b(c.target).parents().andSelf().each(function(){var g=b.data(this,"selectable-item");if(g){var f=!c.metaKey&&!c.ctrlKey||!g.$element.hasClass("ui-selected");return g.$element.removeClass(f?"ui-unselecting":"ui-selected").addClass(f?"ui-selecting":"ui-unselecting"),g.unselecting=!f,g.selecting=f,g.selected=f,f?e._trigger("selecting",c,{selecting:g.element}):e._trigger("unselecting",c,{unselecting:g.element}),!1}})},_mouseDrag:function(f){var k=this;this.dragged=!0;if(this.options.disabled){return}var h=this.options,e=this.opos[0],g=this.opos[1],j=f.pageX,d=f.pageY;if(e>j){var c=j;j=e,e=c}if(g>d){var c=d;d=g,g=c}return this.helper.css({left:e,top:g,width:j-e,height:d-g}),this.selectees.each(function(){var i=b.data(this,"selectable-item");if(!i||i.element==k.element[0]){return}var l=!1;h.tolerance=="touch"?l=!(i.left>j||i.right<e||i.top>d||i.bottom<g):h.tolerance=="fit"&&(l=i.left>e&&i.right<j&&i.top>g&&i.bottom<d),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,k._trigger("selecting",f,{selecting:i.element}))):(i.selecting&&((f.metaKey||f.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),k._trigger("unselecting",f,{unselecting:i.element}))),i.selected&&!f.metaKey&&!f.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,k._trigger("unselecting",f,{unselecting:i.element})))}),!1},_mouseStop:function(c){var e=this;this.dragged=!1;var d=this.options;return b(".ui-unselecting",this.element[0]).each(function(){var f=b.data(this,"selectable-item");f.$element.removeClass("ui-unselecting"),f.unselecting=!1,f.startselected=!1,e._trigger("unselected",c,{unselected:f.element})}),b(".ui-selecting",this.element[0]).each(function(){var f=b.data(this,"selectable-item");f.$element.removeClass("ui-selecting").addClass("ui-selected"),f.selecting=!1,f.selected=!0,f.startselected=!0,e._trigger("selected",c,{selected:f.element})}),this._trigger("stop",c),this.helper.remove(),!1}})})(jQuery);(function(b,a){b.widget("ui.sortable",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var c=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?c.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var c=this.items.length-1;c>=0;c--){this.items[c].item.removeData(this.widgetName+"-item")}return this},_setOption:function(c,d){c==="disabled"?(this.options[c]=d,this.widget().toggleClass("ui-sortable-disabled",!!d)):b.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,h){var f=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(d);var c=null,e=b(d.target).parents().each(function(){if(b.data(this,f.widgetName+"-item")==f){return c=b(this),!1}});b.data(d.target,f.widgetName+"-item")==f&&(c=b(d.target));if(!c){return !1}if(this.options.handle&&!h){var g=!1;b(this.options.handle,c).find("*").andSelf().each(function(){this==d.target&&(g=!0)});if(!g){return !1}}return this.currentItem=c,this._removeCurrentsFromItems(),!0},_mouseStart:function(d,g,f){var c=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(d),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(d),this.originalPageX=d.pageX,this.originalPageY=d.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&(b("body").css("cursor")&&(this._storedCursor=b("body").css("cursor")),b("body").css("cursor",c.cursor)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",d,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!f){for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("activate",d,this._uiHash(this))}}return b.ui.ddmanager&&(b.ui.ddmanager.current=this),b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,d),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(d),!0},_mouseDrag:function(e){this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var j=this.options,g=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<j.scrollSensitivity?this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+j.scrollSpeed:e.pageY-this.overflowOffset.top<j.scrollSensitivity&&(this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-j.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<j.scrollSensitivity?this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+j.scrollSpeed:e.pageX-this.overflowOffset.left<j.scrollSensitivity&&(this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-j.scrollSpeed)):(e.pageY-b(document).scrollTop()<j.scrollSensitivity?g=b(document).scrollTop(b(document).scrollTop()-j.scrollSpeed):b(window).height()-(e.pageY-b(document).scrollTop())<j.scrollSensitivity&&(g=b(document).scrollTop(b(document).scrollTop()+j.scrollSpeed)),e.pageX-b(document).scrollLeft()<j.scrollSensitivity?g=b(document).scrollLeft(b(document).scrollLeft()-j.scrollSpeed):b(window).width()-(e.pageX-b(document).scrollLeft())<j.scrollSensitivity&&(g=b(document).scrollLeft(b(document).scrollLeft()+j.scrollSpeed))),g!==!1&&b.ui.ddmanager&&!j.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var d=this.items.length-1;d>=0;d--){var f=this.items[d],h=f.item[0],c=this._intersectsWithPointer(f);if(!c){continue}if(f.instance!==this.currentContainer){continue}if(h!=this.currentItem[0]&&this.placeholder[c==1?"next":"prev"]()[0]!=h&&!b.contains(this.placeholder[0],h)&&(this.options.type=="semi-dynamic"?!b.contains(this.element[0],h):!0)){this.direction=c==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(f)){break}this._rearrange(e,f),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),b.ui.ddmanager&&b.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(d,f){if(!d){return}b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,d);if(this.options.revert){var e=this,c=this.placeholder.offset();this.reverting=!0,b(this.helper).animate({left:c.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){e._clear(d)})}else{this._clear(d,f)}return !1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,this._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,this._uiHash(this)),this.containers[c].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(c){var e=this._getItemsAsjQuery(c&&c.connected),d=[];return c=c||{},b(e).each(function(){var f=(b(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[-=_](.+)/);f&&d.push((c.key||f[1]+"[]")+"="+(c.key&&c.expression?f[1]:f[2]))}),!d.length&&c.key&&d.push(c.key+"="),d.join("&")},toArray:function(c){var e=this._getItemsAsjQuery(c&&c.connected),d=[];return c=c||{},e.each(function(){d.push(b(c.item||this).attr(c.attribute||"id")||"")}),d},_intersectsWith:function(p){var x=this.positionAbs.left,h=x+this.helperProportions.width,d=this.positionAbs.top,k=d+this.helperProportions.height,y=p.left,g=y+p.width,w=p.top,v=w+p.height,m=this.offset.click.top,j=this.offset.click.left,q=d+m>w&&d+m<v&&x+j>y&&x+j<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>p[this.floating?"width":"height"]?q:y<x+this.helperProportions.width/2&&h-this.helperProportions.width/2<g&&w<d+this.helperProportions.height/2&&k-this.helperProportions.height/2<v},_intersectsWithPointer:function(d){var h=this.options.axis==="x"||b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),f=this.options.axis==="y"||b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),c=h&&f,e=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return c?this.floating?g&&g=="right"||e=="down"?2:1:e&&(e=="down"?2:1):!1},_intersectsWithSides:function(d){var g=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),f=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&f||e=="left"&&!f:c&&(c=="down"&&g||c=="up"&&!g)},_getDragVerticalDirection:function(){var c=this.positionAbs.top-this.lastPositionAbs.top;return c!=0&&(c>0?"down":"up")},_getDragHorizontalDirection:function(){var c=this.positionAbs.left-this.lastPositionAbs.left;return c!=0&&(c>0?"right":"left")},refresh:function(c){return this._refreshItems(c),this.refreshPositions(),this},_connectWith:function(){var c=this.options;return c.connectWith.constructor==String?[c.connectWith]:c.connectWith},_getItemsAsjQuery:function(f){var k=[],h=[],e=this._connectWith();if(e&&f){for(var g=e.length-1;g>=0;g--){var j=b(e[g]);for(var d=j.length-1;d>=0;d--){var c=b.data(j[d],this.widgetName);c&&c!=this&&!c.options.disabled&&h.push([b.isFunction(c.options.items)?c.options.items.call(c.element):b(c.options.items,c.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),c])}}}h.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=h.length-1;g>=0;g--){h[g][0].each(function(){k.push(this)})}return b(k)},_removeCurrentsFromItems:function(){var c=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,function(d){for(var f=0;f<c.length;f++){if(c[f]==d.item[0]){return !1}}return !0})},_refreshItems:function(x){this.items=[],this.containers=[this];var g=this.items,d=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],x,{item:this.currentItem}):b(this.options.items,this.element),this]],k=this._connectWith();if(k&&this.ready){for(var y=k.length-1;y>=0;y--){var e=b(k[y]);for(var w=e.length-1;w>=0;w--){var v=b.data(e[w],this.widgetName);v&&v!=this&&!v.options.disabled&&(d.push([b.isFunction(v.options.items)?v.options.items.call(v.element[0],x,{item:this.currentItem}):b(v.options.items,v.element),v]),this.containers.push(v))}}}for(var y=d.length-1;y>=0;y--){var p=d[y][1],j=d[y][0];for(var w=0,q=j.length;w<q;w++){var m=b(j[w]);m.data(this.widgetName+"-item",p),g.push({item:m,instance:p,width:0,height:0,left:0,top:0})}}},refreshPositions:function(d){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var g=this.items.length-1;g>=0;g--){var f=this.items[g];if(f.instance!=this.currentContainer&&this.currentContainer&&f.item[0]!=this.currentItem[0]){continue}var c=this.options.toleranceElement?b(this.options.toleranceElement,f.item):f.item;d||(f.width=c.outerWidth(),f.height=c.outerHeight());var e=c.offset();f.left=e.left,f.top=e.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var g=this.containers.length-1;g>=0;g--){var e=this.containers[g].element.offset();this.containers[g].containerCache.left=e.left,this.containers[g].containerCache.top=e.top,this.containers[g].containerCache.width=this.containers[g].element.outerWidth(),this.containers[g].containerCache.height=this.containers[g].element.outerHeight()}}return this},_createPlaceholder:function(c){c=c||this;var e=c.options;if(!e.placeholder||e.placeholder.constructor==String){var d=e.placeholder;e.placeholder={element:function(){var f=b(document.createElement(c.currentItem[0].nodeName)).addClass(d||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return d||(f.style.visibility="hidden"),f},update:function(g,f){if(d&&!e.forcePlaceholderSize){return}f.height()||f.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=b(e.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),e.placeholder.update(c,c.placeholder)},_contactContainers:function(x){var g=null,d=null;for(var k=this.containers.length-1;k>=0;k--){if(b.contains(this.currentItem[0],this.containers[k].element[0])){continue}if(this._intersectsWith(this.containers[k].containerCache)){if(g&&b.contains(this.containers[k].element[0],g.element[0])){continue}g=this.containers[k],d=k}else{this.containers[k].containerCache.over&&(this.containers[k]._trigger("out",x,this._uiHash(this)),this.containers[k].containerCache.over=0)}}if(!g){return}if(this.containers.length===1){this.containers[d]._trigger("over",x,this._uiHash(this)),this.containers[d].containerCache.over=1}else{var y=10000,e=null,w=this.containers[d].floating?"left":"top",v=this.containers[d].floating?"width":"height",p=this.positionAbs[w]+this.offset.click[w];for(var j=this.items.length-1;j>=0;j--){if(!b.contains(this.containers[d].element[0],this.items[j].item[0])){continue}if(this.items[j].item[0]==this.currentItem[0]){continue}var q=this.items[j].item.offset()[w],m=!1;Math.abs(q-p)>Math.abs(q+this.items[j][v]-p)&&(m=!0,q+=this.items[j][v]),Math.abs(q-p)<y&&(y=Math.abs(q-p),e=this.items[j],this.direction=m?"up":"down")}if(!e&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[d],e?this._rearrange(x,e,null,!0):this._rearrange(x,null,this.containers[d].element,!0),this._trigger("change",x,this._uiHash()),this.containers[d]._trigger("change",x,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",x,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(c){var e=this.options,d=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[c,this.currentItem])):e.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||b(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||e.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||e.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(c){typeof c=="string"&&(c=c.split(" ")),b.isArray(c)&&(c={left:+c[0],top:+c[1]||0}),"left" in c&&(this.offset.click.left=c.left+this.margins.left),"right" in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left),"top" in c&&(this.offset.click.top=c.top+this.margins.top),"bottom" in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.ui.ie){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.currentItem.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;d.containment=="parent"&&(d.containment=this.helper[0].parentNode);if(d.containment=="document"||d.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(d.containment)){var f=b(d.containment)[0],e=b(d.containment).offset(),c=b(f).css("overflow")!="hidden";this.containment=[e.left+(parseInt(b(f).css("borderLeftWidth"),10)||0)+(parseInt(b(f).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(b(f).css("borderTopWidth"),10)||0)+(parseInt(b(f).css("paddingTop"),10)||0)-this.margins.top,e.left+(c?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(b(f).css("borderLeftWidth"),10)||0)-(parseInt(b(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(c?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(b(f).css("borderTopWidth"),10)||0)-(parseInt(b(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,h){h||(h=this.position);var f=d=="absolute"?1:-1,c=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(e[0].tagName);return{top:h.top+this.offset.relative.top*f+this.offset.parent.top*f-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:e.scrollTop())*f,left:h.left+this.offset.relative.left*f+this.offset.parent.left*f-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:e.scrollLeft())*f}},_generatePosition:function(f){var k=this.options,h=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(h[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var g=f.pageX,j=f.pageY;if(this.originalPosition){this.containment&&(f.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),f.pageY-this.offset.click.top<this.containment[1]&&(j=this.containment[1]+this.offset.click.top),f.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),f.pageY-this.offset.click.top>this.containment[3]&&(j=this.containment[3]+this.offset.click.top));if(k.grid){var d=this.originalPageY+Math.round((j-this.originalPageY)/k.grid[1])*k.grid[1];j=this.containment?d-this.offset.click.top<this.containment[1]||d-this.offset.click.top>this.containment[3]?d-this.offset.click.top<this.containment[1]?d+k.grid[1]:d-k.grid[1]:d:d;var c=this.originalPageX+Math.round((g-this.originalPageX)/k.grid[0])*k.grid[0];g=this.containment?c-this.offset.click.left<this.containment[0]||c-this.offset.click.left>this.containment[2]?c-this.offset.click.left<this.containment[0]?c+k.grid[0]:c-k.grid[0]:c:c}}return{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:h.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:h.scrollLeft())}},_rearrange:function(g,d,h,f){h?h[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?d.item[0]:d.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var c=this.counter;this._delay(function(){c==this.counter&&this.refreshPositions(!f)})},_clear:function(d,f){this.reverting=!1;var e=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS){if(this._storedCSS[c]=="auto"||this._storedCSS[c]=="static"){this._storedCSS[c]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!f&&e.push(function(g){this._trigger("receive",g,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!f&&e.push(function(g){this._trigger("update",g,this._uiHash())}),this!==this.currentContainer&&(f||(e.push(function(g){this._trigger("remove",g,this._uiHash())}),e.push(function(g){return function(h){g._trigger("receive",h,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(g){return function(h){g._trigger("update",h,this._uiHash(this))}}.call(this,this.currentContainer))));for(var c=this.containers.length-1;c>=0;c--){f||e.push(function(g){return function(h){g._trigger("deactivate",h,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(e.push(function(g){return function(h){g._trigger("out",h,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0)}this._storedCursor&&b("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",d,this._uiHash());for(var c=0;c<e.length;c++){e[c].call(this,d)}this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!1}f||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!f){for(var c=0;c<e.length;c++){e[c].call(this,d)}this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){b.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(c){var d=c||this;return{helper:d.helper,placeholder:d.placeholder||b([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:c?c.element:null}}})})(jQuery);(function(d,b){var f=0,c={},a={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide",a.height=a.paddingTop=a.paddingBottom=a.borderTopWidth=a.borderBottomWidth="show",d.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.accordionId="ui-accordion-"+(this.element.attr("id")||++f),g=this.options;this.prevShow=this.prevHide=d(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(g.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!g.collapsible&&(g.active===!1||g.active==null)&&(g.active=0),g.active<0&&(g.active+=this.headers.length),this.active=this._findActive(g.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(m){var k=d(this),h=k.attr("id"),j=k.next(),l=j.attr("id");h||(h=e+"-header-"+m,k.attr("id",h)),l||(l=e+"-panel-"+m,j.attr("id",l)),k.attr("aria-controls",l),j.attr("aria-labelledby",h)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(g.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():d()}},_createIcons:function(){var e=this.options.icons;e&&(d("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var g;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),g=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&g.css("height","")},_setOption:function(h,g){if(h==="active"){this._activate(g);return}h==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(g)),this._super(h,g),h==="collapsible"&&!g&&this.options.active===!1&&this._activate(0),h==="icons"&&(this._destroyIcons(),g&&this._createIcons()),h==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!g)},_keydown:function(g){if(g.altKey||g.ctrlKey){return}var k=d.ui.keyCode,j=this.headers.length,e=this.headers.index(g.target),h=!1;switch(g.keyCode){case k.RIGHT:case k.DOWN:h=this.headers[(e+1)%j];break;case k.LEFT:case k.UP:h=this.headers[(e-1+j)%j];break;case k.SPACE:case k.ENTER:this._eventHandler(g);break;case k.HOME:h=this.headers[0];break;case k.END:h=this.headers[j-1]}h&&(d(g.target).attr("tabIndex",-1),d(h).attr("tabIndex",0),h.focus(),g.preventDefault())},_panelKeyDown:function(e){e.keyCode===d.ui.keyCode.UP&&e.ctrlKey&&d(e.currentTarget).prev().focus()},refresh:function(){var g,j,h=this.options.heightStyle,e=this.element.parent();h==="fill"?(d.support.minHeight||(j=e.css("overflow"),e.css("overflow","hidden")),g=e.height(),this.element.siblings(":visible").each(function(){var k=d(this),i=k.css("position");if(i==="absolute"||i==="fixed"){return}g-=k.outerHeight(!0)}),j&&e.css("overflow",j),this.headers.each(function(){g-=d(this).outerHeight(!0)}),this.headers.next().each(function(){d(this).height(Math.max(0,g-d(this).innerHeight()+d(this).height()))}).css("overflow","auto")):h==="auto"&&(g=0,this.headers.next().each(function(){g=Math.max(g,d(this).css("height","").height())}).height(g))},_activate:function(e){var g=this._findActive(e)[0];if(g===this.active[0]){return}g=g||this.active[0],this._eventHandler({target:g,currentTarget:g,preventDefault:d.noop})},_findActive:function(e){return typeof e=="number"?this.headers.eq(e):d()},_setupEvents:function(e){var g={};if(!e){return}d.each(e.split(" "),function(i,h){g[h]="_eventHandler"}),this._on(this.headers,g)},_eventHandler:function(p){var h=this.options,e=this.active,j=d(p.currentTarget),q=j[0]===e[0],g=q&&h.collapsible,m=g?d():j.next(),l=e.next(),k={oldHeader:e,oldPanel:l,newHeader:g?d():j,newPanel:m};p.preventDefault();if(q&&!h.collapsible||this._trigger("beforeActivate",p,k)===!1){return}h.active=g?!1:this.headers.index(j),this.active=q?d():j,this._toggle(k),e.removeClass("ui-accordion-header-active ui-state-active"),h.icons&&e.children(".ui-accordion-header-icon").removeClass(h.icons.activeHeader).addClass(h.icons.header),q||(j.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),h.icons&&j.children(".ui-accordion-header-icon").removeClass(h.icons.header).addClass(h.icons.activeHeader),j.next().addClass("ui-accordion-content-active"))},_toggle:function(e){var h=e.newPanel,g=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=h,this.prevHide=g,this.options.animate?this._animate(h,g,e):(g.hide(),h.show(),this._toggleComplete(e)),g.attr({"aria-expanded":"false","aria-hidden":"true"}),g.prev().attr("aria-selected","false"),h.length&&g.length?g.prev().attr("tabIndex",-1):h.length&&this.headers.filter(function(){return d(this).attr("tabIndex")===0}).attr("tabIndex",-1),h.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(r,y,j){var z,i,x,w=this,q=0,k=r.length&&(!y.length||r.index()<y.index()),v=this.options.animate||{},m=k&&v.down||v,g=function(){w._toggleComplete(j)};typeof m=="number"&&(x=m),typeof m=="string"&&(i=m),i=i||m.easing||v.easing,x=x||m.duration||v.duration;if(!y.length){return r.animate(a,x,i,g)}if(!r.length){return y.animate(c,x,i,g)}z=r.show().outerHeight(),y.animate(c,{duration:x,easing:i,step:function(l,h){h.now=Math.round(l)}}),r.hide().animate(a,{duration:x,easing:i,complete:g,step:function(h,l){l.now=Math.round(h),l.prop!=="height"?q+=l.now:w.options.heightStyle!=="content"&&(l.now=Math.round(z-y.outerHeight()-q),q=0)}})},_toggleComplete:function(h){var g=h.oldPanel;g.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),g.length&&(g.parent()[0].className=g.parent()[0].className),this._trigger("activate",null,h)}}),d.uiBackCompat!==!1&&(function(h,g){h.extend(g.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=g._create;g._create=function(){if(this.options.navigation){var j=this,l=this.element.find(this.options.header),e=l.next(),k=l.add(e).find("a").filter(this.options.navigationFilter)[0];k&&l.add(e).each(function(m){if(h.contains(this,k)){return j.options.active=Math.floor(m/2),!1}})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(i,g){i.extend(g.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var j=g._create,h=g._setOption;i.extend(g,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),j.call(this)},_setOption:function(k){if(k==="autoHeight"||k==="clearStyle"||k==="fillSpace"){this.options.heightStyle=this._mergeHeightStyle()}h.apply(this,arguments)},_mergeHeightStyle:function(){var k=this.options;if(k.fillSpace){return"fill"}if(k.clearStyle){return"content"}if(k.autoHeight){return"auto"}}})}(jQuery,jQuery.ui.accordion.prototype),function(h,g){h.extend(g.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=g._createIcons;g._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(h,g){g.activate=g._activate;var i=g._findActive;g._findActive=function(j){return j===-1&&(j=!1),j&&typeof j!="number"&&(j=this.headers.index(this.headers.filter(j)),j===-1&&(j=!1)),i.call(this,j)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(h,g){h.extend(g.options,{change:null,changestart:null});var i=g._trigger;g._trigger=function(m,k,l){var j=i.apply(this,arguments);return j?(m==="beforeActivate"?j=i.call(this,"changestart",k,{oldHeader:l.oldHeader,oldContent:l.oldPanel,newHeader:l.newHeader,newContent:l.newPanel}):m==="activate"&&(j=i.call(this,"change",k,{oldHeader:l.oldHeader,oldContent:l.oldPanel,newHeader:l.newHeader,newContent:l.newPanel})),j):!1}}(jQuery,jQuery.ui.accordion.prototype),function(h,g){h.extend(g.options,{animate:null,animated:"slide"});var i=g._create;g._create=function(){var j=this.options;j.animate===null&&(j.animated?j.animated==="slide"?j.animate=300:j.animated==="bounceslide"?j.animate={duration:200,down:{easing:"easeOutBounce",duration:1000}}:j.animate=j.animated:j.animate=!1),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);(function(b,a){var c=0;b.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var d,f,e;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(g){if(this.element.prop("readOnly")){d=!0,e=!0,f=!0;return}d=!1,e=!1,f=!1;var h=b.ui.keyCode;switch(g.keyCode){case h.PAGE_UP:d=!0,this._move("previousPage",g);break;case h.PAGE_DOWN:d=!0,this._move("nextPage",g);break;case h.UP:d=!0,this._keyEvent("previous",g);break;case h.DOWN:d=!0,this._keyEvent("next",g);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(d=!0,g.preventDefault(),this.menu.select(g));break;case h.TAB:this.menu.active&&this.menu.select(g);break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(g),g.preventDefault());break;default:f=!0,this._searchTimeout(g)}},keypress:function(h){if(d){d=!1,h.preventDefault();return}if(f){return}var g=b.ui.keyCode;switch(h.keyCode){case g.PAGE_UP:this._move("previousPage",h);break;case g.PAGE_DOWN:this._move("nextPage",h);break;case g.UP:this._keyEvent("previous",h);break;case g.DOWN:this._keyEvent("next",h)}},input:function(g){if(e){e=!1,g.preventDefault();return}this._searchTimeout(g)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(g){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(g),this._change(g)}}),this._initSource(),this.menu=b("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:b(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(g){g.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var h=this.menu.element[0];b(g.target).closest(".ui-menu-item").length||this._delay(function(){var i=this;this.document.one("mousedown",function(j){j.target!==i.element[0]&&j.target!==h&&!b.contains(h,j.target)&&i.close()})})},menufocus:function(g,i){if(this.isNewMenu){this.isNewMenu=!1;if(g.originalEvent&&/^mouse/.test(g.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){b(g.target).trigger(g.originalEvent)});return}}var h=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",g,{item:h})?g.originalEvent&&/^key/.test(g.originalEvent.type)&&this._value(h.value):this.liveRegion.text(h.value)},menuselect:function(i,g){var j=g.item.data("ui-autocomplete-item")||g.item.data("item.autocomplete"),h=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=h,this._delay(function(){this.previous=h,this.selectedItem=j})),!1!==this._trigger("select",i,{item:j})&&this._value(j.value),this.term=this._value(),this.close(i),this.selectedItem=j}}),this.liveRegion=b("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),b.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(f,d){this._super(f,d),f==="source"&&this._initSource(),f==="appendTo"&&this.menu.element.appendTo(this.document.find(d||"body")[0]),f==="disabled"&&d&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var d,f,e=this;b.isArray(this.options.source)?(d=this.options.source,this.source=function(h,g){g(b.ui.autocomplete.filter(d,h.term))}):typeof this.options.source=="string"?(f=this.options.source,this.source=function(h,g){e.xhr&&e.xhr.abort(),e.xhr=b.ajax({url:f,data:h,dataType:"json",success:function(i){g(i)},error:function(){g([])}})}):this.source=this.options.source},_searchTimeout:function(d){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,d))},this.options.delay)},search:function(f,d){f=f!=null?f:this._value(),this.term=this._value();if(f.length<this.options.minLength){return this.close(d)}if(this._trigger("search",d)===!1){return}return this._search(f)},_search:function(d){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:d},this._response())},_response:function(){var f=this,d=++c;return function(e){d===c&&f.__response(e),f.pending--,f.pending||f.element.removeClass("ui-autocomplete-loading")}},__response:function(d){d&&(d=this._normalize(d)),this._trigger("response",null,{content:d}),!this.options.disabled&&d&&d.length&&!this.cancelSearch?(this._suggest(d),this._trigger("open")):this._close()},close:function(d){this.cancelSearch=!0,this._close(d)},_close:function(d){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",d))},_change:function(d){this.previous!==this._value()&&this._trigger("change",d,{item:this.selectedItem})},_normalize:function(d){return d.length&&d[0].label&&d[0].value?d:b.map(d,function(e){return typeof e=="string"?{label:e,value:e}:b.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(d){var e=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(e,d),this.menu.refresh(),e.show(),this._resizeMenu(),e.position(b.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(d,f){var e=this;b.each(f,function(g,h){e._renderItemData(d,h)})},_renderItemData:function(f,d){return this._renderItem(f,d).data("ui-autocomplete-item",d)},_renderItem:function(d,e){return b("<li>").append(b("<a>").text(e.label)).appendTo(d)},_move:function(f,d){if(!this.menu.element.is(":visible")){this.search(null,d);return}if(this.menu.isFirstItem()&&/^previous/.test(f)||this.menu.isLastItem()&&/^next/.test(f)){this._value(this.term),this.menu.blur();return}this.menu[f](d)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(f,d){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(f,d),d.preventDefault()}}}),b.extend(b.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(d,f){var e=new RegExp(b.ui.autocomplete.escapeRegex(f),"i");return b.grep(d,function(g){return e.test(g.label||g.value||g)})}}),b.widget("ui.autocomplete",b.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(f){var d;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}f&&f.length?d=this.options.messages.results(f.length):d=this.options.messages.noResults,this.liveRegion.text(d)}})})(jQuery);(function(k,q){var d,b,h,v,c="ui-button ui-widget ui-state-default ui-corner-all",p="ui-state-hover ui-state-active ",m="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var a=k(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},g=function(e){var l=e.name,f=e.form,a=k([]);return l&&(f?a=k(f).find("[name='"+l+"']"):a=k("[name='"+l+"']",e.ownerDocument).filter(function(){return !this.form})),a};k.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,j),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var i=this,f=this.options,e=this.type==="checkbox"||this.type==="radio",n=e?"":"ui-state-active",l="ui-state-focus";f.label===null&&(f.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(f.disabled){return}this===d&&k(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(f.disabled){return}k(this).removeClass(n)}).bind("click"+this.eventNamespace,function(a){f.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){i.buttonElement.addClass(l)}).bind("blur"+this.eventNamespace,function(){i.buttonElement.removeClass(l)}),e&&(this.element.bind("change"+this.eventNamespace,function(){if(v){return}i.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){if(f.disabled){return}v=!1,b=a.pageX,h=a.pageY}).bind("mouseup"+this.eventNamespace,function(a){if(f.disabled){return}if(b!==a.pageX||h!==a.pageY){v=!0}})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled||v){return !1}k(this).toggleClass("ui-state-active"),i.buttonElement.attr("aria-pressed",i.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled||v){return !1}k(this).addClass("ui-state-active"),i.buttonElement.attr("aria-pressed","true");var a=i.element[0];g(a).not(a).map(function(){return k(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(f.disabled){return !1}k(this).addClass("ui-state-active"),d=this,i.document.one("mouseup",function(){d=null})}).bind("mouseup"+this.eventNamespace,function(){if(f.disabled){return !1}k(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(f.disabled){return !1}(a.keyCode===k.ui.keyCode.SPACE||a.keyCode===k.ui.keyCode.ENTER)&&k(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){k(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===k.ui.keyCode.SPACE&&k(this).click()})),this._setOption("disabled",f.disabled),this._resetButton()},_determineButtonType:function(){var f,a,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(f=this.element.parents().last(),a="label[for='"+this.element.attr("id")+"']",this.buttonElement=f.find(a),this.buttonElement.length||(f=f.length?f.siblings():this.element.siblings(),this.buttonElement=f.filter(a),this.buttonElement.length||(this.buttonElement=f.find(a))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(c+" "+p+" "+m).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(f,a){this._super(f,a);if(f==="disabled"){a?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOption("disabled",a),this.type==="radio"?g(this.element[0]).each(function(){k(this).is(":checked")?k(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):k(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var e=this.buttonElement.removeClass(m),o=k("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),l=this.options.icons,a=l.primary&&l.secondary,f=[];l.primary||l.secondary?(this.options.text&&f.push("ui-button-text-icon"+(a?"s":l.primary?"-primary":"-secondary")),l.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+l.primary+"'></span>"),l.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+l.secondary+"'></span>"),this.options.text||(f.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",k.trim(o)))):f.push("ui-button-text-only"),e.addClass(f.join(" "))}}),k.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(f,a){f==="disabled"&&this.buttons.button("option",f,a),this._super(f,a)},refresh:function(){var a=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return k(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return k(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t){if(t[n]==null||t[n]==undefined){e[n]=t[n]}}return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++){e[r].length>t&&(t=e[r].length,n=r)}return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e){return !1}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]==e){return !0}}return !1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string"){return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null}var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing){switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}}else{e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1}n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal){try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}}return !0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e){return}var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1){return}extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e))){e=e[n?"previousSibling":"nextSibling"]}var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME)){return}if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst){return}var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear}else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0])){return}var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/86400000)/7)+1},parseDate:function(e,t,n){if(e==null||t==null){throw"Invalid arguments"}t=typeof t=="object"?t.toString():t+"";if(t==""){return null}var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s){throw"Missing number at position "+g}return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return -(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase()){return s=n[0],g+=r.length,!1}});if(s!=-1){return s+1}throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y)){throw"Unexpected literal at position "+g}g++},g=0;for(var y=0;y<e.length;y++){if(h){e.charAt(y)=="'"&&!p("'")?h=!1:m()}else{switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/10000);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}}}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w)){throw"Extra/unparsed characters found in date: "+w}}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E){break}f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l){throw"Invalid date"}return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(e,t,n){if(!t){return""}var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e)){while(r.length<n){r="0"+r}}return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t){for(var h=0;h<e.length;h++){if(c){e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h)}else{switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*10000+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}}}}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++){if(n){e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i)}else{switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}}}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal){return}var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v){p--,p<0&&(p=11,d--)}}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1){switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a){h+='<span class="ui-datepicker-month">'+o[t]+"</span>"}else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++){(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>")}h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f){c+='<span class="ui-datepicker-year">'+n+"</span>"}else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++){e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>"}e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(d,b){var f="ui-dialog ui-widget ui-widget-content ui-corner-all ",c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};d.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var g=d(this).css(e).offset().top;g<0&&d(this).css("top",e.top-g)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var j=this,l=this.options,h=l.title||"&#160;",k,n,g,e,m;k=(this.uiDialog=d("<div>")).addClass(f+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(i){l.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===d.ui.keyCode.ESCAPE&&(j.close(i),i.preventDefault())}).mousedown(function(i){j.moveToTop(!1,i)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(k),n=(this.uiDialogTitlebar=d("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){k.focus()}).prependTo(k),g=d("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(i){i.preventDefault(),j.close(i)}).appendTo(n),(this.uiDialogTitlebarCloseText=d("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(g),e=d("<span>").uniqueId().addClass("ui-dialog-title").html(h).prependTo(n),m=(this.uiDialogButtonPane=d("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=d("<div>")).addClass("ui-dialog-buttonset").appendTo(m),k.attr({role:"dialog","aria-labelledby":e.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(g),this._focusable(g),l.draggable&&d.fn.draggable&&this._makeDraggable(),l.resizable&&d.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,d.fn.bgiframe&&k.bgiframe(),this._on(k,{keydown:function(q){if(!l.modal||q.keyCode!==d.ui.keyCode.TAB){return}var s=d(":tabbable",k),p=s.filter(":first"),r=s.filter(":last");if(q.target===r[0]&&!q.shiftKey){return p.focus(1),!1}if(q.target===p[0]&&q.shiftKey){return r.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var h,g=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),h=g.parent.children().eq(g.index),h.length&&h[0]!==this.element[0]?h.before(this.element):g.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(g){var j=this,h,e;if(!this._isOpen){return}if(!1===this._trigger("beforeClose",g)){return}return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){j._trigger("close",g)}):(this.uiDialog.hide(),this._trigger("close",g)),d.ui.dialog.overlay.resize(),this.options.modal&&(h=0,d(".ui-dialog").each(function(){this!==j.uiDialog[0]&&(e=d(this).css("z-index"),isNaN(e)||(h=Math.max(h,e)))}),d.ui.dialog.maxZ=h),this},isOpen:function(){return this._isOpen},moveToTop:function(g,j){var h=this.options,e;return h.modal&&!g||!h.stack&&!h.modal?this._trigger("focus",j):(h.zIndex>d.ui.dialog.maxZ&&(d.ui.dialog.maxZ=h.zIndex),this.overlay&&(d.ui.dialog.maxZ+=1,d.ui.dialog.overlay.maxZ=d.ui.dialog.maxZ,this.overlay.$el.css("z-index",d.ui.dialog.overlay.maxZ)),e={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},d.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",d.ui.dialog.maxZ),this.element.attr(e),this._trigger("focus",j),this)},open:function(){if(this._isOpen){return}var e,h=this.options,g=this.uiDialog;return this._size(),this._position(h.position),g.show(h.show),this.overlay=h.modal?new d.ui.dialog.overlay(this):null,this.moveToTop(!0),e=this.element.find(":tabbable"),e.length||(e=this.uiDialogButtonPane.find(":tabbable"),e.length||(e=g)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(e){var h=this,g=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof e=="object"&&e!==null&&d.each(e,function(){return !(g=!0)}),g?(d.each(e,function(k,m){var j,l;m=d.isFunction(m)?{click:m,text:k}:m,m=d.extend({type:"button"},m),l=m.click,m.click=function(){l.apply(h.element[0],arguments)},j=d("<button></button>",m).appendTo(h.uiButtonSet),d.fn.button&&j.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function g(i){return{position:i.position,offset:i.offset}}var e=this,h=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,j){d(this).addClass("ui-dialog-dragging"),e._trigger("dragStart",k,g(j))},drag:function(i,j){e._trigger("drag",i,g(j))},stop:function(j,k){h.position=[k.position.left-e.document.scrollLeft(),k.position.top-e.document.scrollTop()],d(this).removeClass("ui-dialog-dragging"),e._trigger("dragStop",j,g(k)),d.ui.dialog.overlay.resize()}})},_makeResizable:function(l){function e(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}l=l===b?this.options.resizable:l;var j=this,g=this.options,h=this.uiDialog.css("position"),k=typeof l=="string"?l:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:this._minHeight(),handles:k,start:function(i,m){d(this).addClass("ui-dialog-resizing"),j._trigger("resizeStart",i,e(m))},resize:function(m,i){j._trigger("resize",m,e(i))},stop:function(i,m){d(this).removeClass("ui-dialog-resizing"),g.height=d(this).height(),g.width=d(this).width(),j._trigger("resizeStop",i,e(m)),d.ui.dialog.overlay.resize()}}).css("position",h).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var g=this.options;return g.height==="auto"?g.minHeight:Math.min(g.minHeight,g.height)},_position:function(g){var j=[],h=[0,0],e;if(g){if(typeof g=="string"||typeof g=="object"&&"0" in g){j=g.split?g.split(" "):[g[0],g[1]],j.length===1&&(j[1]=j[0]),d.each(["left","top"],function(k,i){+j[k]===j[k]&&(h[k]=j[k],j[k]=i)}),g={my:j[0]+(h[0]<0?h[0]:"+"+h[0])+" "+j[1]+(h[1]<0?h[1]:"+"+h[1]),at:j.join(" ")}}g=d.extend({},d.ui.dialog.prototype.options.position,g)}else{g=d.ui.dialog.prototype.options.position}e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(g),e||this.uiDialog.hide()},_setOptions:function(e){var i=this,g={},h=!1;d.each(e,function(k,j){i._setOption(k,j),k in c&&(h=!0),k in a&&(g[k]=j)}),h&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(g,j){var e,h,k=this.uiDialog;switch(g){case"buttons":this._createButtons(j);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+j);break;case"dialogClass":k.removeClass(this.options.dialogClass).addClass(f+j);break;case"disabled":j?k.addClass("ui-dialog-disabled"):k.removeClass("ui-dialog-disabled");break;case"draggable":e=k.is(":data(draggable)"),e&&!j&&k.draggable("destroy"),!e&&j&&this._makeDraggable();break;case"position":this._position(j);break;case"resizable":h=k.is(":data(resizable)"),h&&!j&&k.resizable("destroy"),h&&typeof j=="string"&&k.resizable("option","handles",j),!h&&j!==!1&&this._makeResizable(j);break;case"title":d(".ui-dialog-title",this.uiDialogTitlebar).html(""+(j||"&#160;"))}this._super(g,j)},_size:function(){var g,k,j,e=this.options,h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),e.minWidth>e.width&&(e.width=e.minWidth),g=this.uiDialog.css({height:"auto",width:e.width}).outerHeight(),k=Math.max(0,e.minHeight-g),e.height==="auto"?d.support.minHeight?this.element.css({minHeight:k,height:"auto"}):(this.uiDialog.show(),j=this.element.css("height","auto").height(),h||this.uiDialog.hide(),this.element.height(Math.max(j,k))):this.element.height(Math.max(e.height-g,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),d.extend(d.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(h){var g=h.attr("id");return g||(this.uuid+=1,g=this.uuid),"ui-dialog-title-"+g},overlay:function(e){this.$el=d.ui.dialog.overlay.create(e)}}),d.extend(d.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:d.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(g){return g+".dialog-overlay"}).join(" "),create:function(e){this.instances.length===0&&(setTimeout(function(){d.ui.dialog.overlay.instances.length&&d(document).bind(d.ui.dialog.overlay.events,function(h){if(d(h.target).zIndex()<d.ui.dialog.overlay.maxZ){return !1}})},1),d(window).bind("resize.dialog-overlay",d.ui.dialog.overlay.resize));var g=this.oldInstances.pop()||d("<div>").addClass("ui-widget-overlay");return d(document).bind("keydown.dialog-overlay",function(j){var h=d.ui.dialog.overlay.instances;h.length!==0&&h[h.length-1]===g&&e.options.closeOnEscape&&!j.isDefaultPrevented()&&j.keyCode&&j.keyCode===d.ui.keyCode.ESCAPE&&(e.close(j),j.preventDefault())}),g.appendTo(document.body).css({width:this.width(),height:this.height()}),d.fn.bgiframe&&g.bgiframe(),this.instances.push(g),g},destroy:function(e){var h=d.inArray(e,this.instances),g=0;h!==-1&&this.oldInstances.push(this.instances.splice(h,1)[0]),this.instances.length===0&&d([document,window]).unbind(".dialog-overlay"),e.height(0).width(0).remove(),d.each(this.instances,function(){g=Math.max(g,this.css("z-index"))}),this.maxZ=g},height:function(){var e,g;return d.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),g=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<g?d(window).height()+"px":e+"px"):d(document).height()+"px"},width:function(){var e,g;return d.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),g=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<g?d(window).width()+"px":e+"px"):d(document).width()+"px"},resize:function(){var e=d([]);d.each(d.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:d.ui.dialog.overlay.width(),height:d.ui.dialog.overlay.height()})}}),d.extend(d.ui.dialog.overlay.prototype,{destroy:function(){d.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(b,a){var c=!1;b.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,b.proxy(function(d){this.options.disabled&&d.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(d){d.preventDefault()},"click .ui-state-disabled > a":function(d){d.preventDefault()},"click .ui-menu-item:has(a)":function(d){var e=b(d.target).closest(".ui-menu-item");!c&&e.not(".ui-state-disabled").length&&(c=!0,this.select(d),e.has(".ui-menu").length?this.expand(d):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(d){var e=b(d.currentTarget);e.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(d,e)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(f,d){var g=this.active||this.element.children(".ui-menu-item").eq(0);d||this.focus(f,g)},blur:function(d){this._delay(function(){b.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(d)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(d){b(d.target).closest(".ui-menu").length||this.collapseAll(d),c=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var d=b(this);d.data("ui-menu-submenu-carat")&&d.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(g){function d(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var l,j,f,h,k,e=!0;switch(g.keyCode){case b.ui.keyCode.PAGE_UP:this.previousPage(g);break;case b.ui.keyCode.PAGE_DOWN:this.nextPage(g);break;case b.ui.keyCode.HOME:this._move("first","first",g);break;case b.ui.keyCode.END:this._move("last","last",g);break;case b.ui.keyCode.UP:this.previous(g);break;case b.ui.keyCode.DOWN:this.next(g);break;case b.ui.keyCode.LEFT:this.collapse(g);break;case b.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(g);break;case b.ui.keyCode.ENTER:case b.ui.keyCode.SPACE:this._activate(g);break;case b.ui.keyCode.ESCAPE:this.collapse(g);break;default:e=!1,j=this.previousFilter||"",f=String.fromCharCode(g.keyCode),h=!1,clearTimeout(this.filterTimer),f===j?h=!0:f=j+f,k=new RegExp("^"+d(f),"i"),l=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(b(this).children("a").text())}),l=h&&l.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):l,l.length||(f=String.fromCharCode(g.keyCode),k=new RegExp("^"+d(f),"i"),l=this.activeMenu.children(".ui-menu-item").filter(function(){return k.test(b(this).children("a").text())})),l.length?(this.focus(g,l),l.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter):delete this.previousFilter}e&&g.preventDefault()},_activate:function(d){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(d):this.select(d))},refresh:function(){var d,f=this.options.icons.submenu,e=this.element.find(this.options.menus);e.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var h=b(this),j=h.prev("a"),g=b("<span>").addClass("ui-menu-icon ui-icon "+f).data("ui-menu-submenu-carat",!0);j.attr("aria-haspopup","true").prepend(g),h.attr("aria-labelledby",j.attr("id"))}),d=e.add(this.element),d.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),d.children(":not(.ui-menu-item)").each(function(){var g=b(this);/[^\-\s]/.test(g.text())||g.addClass("ui-widget-content ui-menu-divider")}),d.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!b.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(g,d){var h,f;this.blur(g,g&&g.type==="focus"),this._scrollIntoView(d),this.active=d.first(),f=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",f.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),g&&g.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),h=d.children(".ui-menu"),h.length&&/^mouse/.test(g.type)&&this._startOpening(h),this.activeMenu=d.parent(),this._trigger("focus",g,{item:d})},_scrollIntoView:function(f){var k,h,e,g,j,d;this._hasScroll()&&(k=parseFloat(b.css(this.activeMenu[0],"borderTopWidth"))||0,h=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0,e=f.offset().top-this.activeMenu.offset().top-k-h,g=this.activeMenu.scrollTop(),j=this.activeMenu.height(),d=f.height(),e<0?this.activeMenu.scrollTop(g+e):e+d>j&&this.activeMenu.scrollTop(g+e-j+d))},blur:function(f,d){d||clearTimeout(this.timer);if(!this.active){return}this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",f,{item:this.active})},_startOpening:function(d){clearTimeout(this.timer);if(d.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close(),this._open(d)},this.delay)},_open:function(d){var e=b.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(d,e){clearTimeout(this.timer),this.timer=this._delay(function(){var f=e?this.element:b(d&&d.target).closest(this.element.find(".ui-menu"));f.length||(f=this.element),this._close(f),this.blur(d),this.activeMenu=f},this.delay)},_close:function(d){d||(d=this.active?this.active.parent():this.element),d.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(f){var d=this.active&&this.active.parent().closest(".ui-menu-item",this.element);d&&d.length&&(this._close(),this.focus(f,d))},expand:function(f){var d=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();d&&d.length&&(this._open(d.parent()),this._delay(function(){this.focus(f,d)}))},next:function(d){this._move("next","first",d)},previous:function(d){this._move("prev","last",d)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(g,d,h){var f;this.active&&(g==="first"||g==="last"?f=this.active[g==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):f=this.active[g+"All"](".ui-menu-item").eq(0));if(!f||!f.length||!this.active){f=this.activeMenu.children(".ui-menu-item")[d]()}this.focus(h,f)},nextPage:function(e){var g,f,d;if(!this.active){this.next(e);return}if(this.isLastItem()){return}this._hasScroll()?(f=this.active.offset().top,d=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return g=b(this),g.offset().top-f-d<0}),this.focus(e,g)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(e){var g,f,d;if(!this.active){this.next(e);return}if(this.isFirstItem()){return}this._hasScroll()?(f=this.active.offset().top,d=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return g=b(this),g.offset().top-f+d>0}),this.focus(e,g)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||b(d.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,e)}})})(jQuery);(function(b,a){b.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(c){return c===a?this._value():(this._setOption("value",c),this)},_setOption:function(d,c){d==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(d,c)},_value:function(){var c=this.options.value;return typeof c!="number"&&(c=0),Math.min(this.options.max,Math.max(this.min,c))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var d=this.value(),c=this._percentage();this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),this.valueDiv.toggle(d>this.min).toggleClass("ui-corner-right",d===this.options.max).width(c.toFixed(0)+"%"),this.element.attr("aria-valuenow",d)}})})(jQuery);(function(b,a){var c=5;b.widget("ui.slider",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var f,h,e=this.options,g=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),j="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",d=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":"")),this.range=b([]),e.range&&(e.range===!0&&(e.values||(e.values=[this._valueMin(),this._valueMin()]),e.values.length&&e.values.length!==2&&(e.values=[e.values[0],e.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(e.range==="min"||e.range==="max"?" ui-slider-range-"+e.range:""))),h=e.values&&e.values.length||1;for(f=g.length;f<h;f++){d.push(j)}this.handles=g.add(b(d.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(i){i.preventDefault()}).mouseenter(function(){e.disabled||b(this).addClass("ui-state-hover")}).mouseleave(function(){b(this).removeClass("ui-state-hover")}).focus(function(){e.disabled?b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")}),this.handles.each(function(i){b(this).data("ui-slider-handle-index",i)}),this._on(this.handles,{keydown:function(m){var p,l,n,q,k=b(m.target).data("ui-slider-handle-index");switch(m.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:m.preventDefault();if(!this._keySliding){this._keySliding=!0,b(m.target).addClass("ui-state-active"),p=this._start(m,k);if(p===!1){return}}}q=this.options.step,this.options.values&&this.options.values.length?l=n=this.values(k):l=n=this.value();switch(m.keyCode){case b.ui.keyCode.HOME:n=this._valueMin();break;case b.ui.keyCode.END:n=this._valueMax();break;case b.ui.keyCode.PAGE_UP:n=this._trimAlignValue(l+(this._valueMax()-this._valueMin())/c);break;case b.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(l-(this._valueMax()-this._valueMin())/c);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(l===this._valueMax()){return}n=this._trimAlignValue(l+q);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(l===this._valueMin()){return}n=this._trimAlignValue(l-q)}this._slide(m,k,n)},keyup:function(i){var k=b(i.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(i,k),this._change(i,k),b(i.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(v){var g,d,j,w,e,q,p,k,h=this,m=this.options;return m.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),g={x:v.pageX,y:v.pageY},d=this._normValueFromMouse(g),j=this._valueMax()-this._valueMin()+1,this.handles.each(function(f){var i=Math.abs(d-h.values(f));j>i&&(j=i,w=b(this),e=f)}),m.range===!0&&this.values(1)===m.min&&(e+=1,w=b(this.handles[e])),q=this._start(v,e),q===!1?!1:(this._mouseSliding=!0,this._handleIndex=e,w.addClass("ui-state-active").focus(),p=w.offset(),k=!b(v.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:v.pageX-p.left-w.width()/2,top:v.pageY-p.top-w.height()/2-(parseInt(w.css("borderTopWidth"),10)||0)-(parseInt(w.css("borderBottomWidth"),10)||0)+(parseInt(w.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(v,e,d),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(f){var d={x:f.pageX,y:f.pageY},g=this._normValueFromMouse(d);return this._slide(f,this._handleIndex,g),!1},_mouseStop:function(d){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(d,this._handleIndex),this._change(d,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(j){var f,k,h,d,g;return this.orientation==="horizontal"?(f=this.elementSize.width,k=j.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(f=this.elementSize.height,k=j.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),h=k/f,h>1&&(h=1),h<0&&(h=0),this.orientation==="vertical"&&(h=1-h),d=this._valueMax()-this._valueMin(),g=this._valueMin()+h*d,this._trimAlignValue(g)},_start:function(f,d){var g={handle:this.handles[d],value:this.value()};return this.options.values&&this.options.values.length&&(g.value=this.values(d),g.values=this.values()),this._trigger("start",f,g)},_slide:function(j,f,k){var h,d,g;this.options.values&&this.options.values.length?(h=this.values(f?0:1),this.options.values.length===2&&this.options.range===!0&&(f===0&&k>h||f===1&&k<h)&&(k=h),k!==this.values(f)&&(d=this.values(),d[f]=k,g=this._trigger("slide",j,{handle:this.handles[f],value:k,values:d}),h=this.values(f?0:1),g!==!1&&this.values(f,k,!0))):k!==this.value()&&(g=this._trigger("slide",j,{handle:this.handles[f],value:k}),g!==!1&&this.value(k))},_stop:function(f,d){var g={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(g.value=this.values(d),g.values=this.values()),this._trigger("stop",f,g)},_change:function(f,d){if(!this._keySliding&&!this._mouseSliding){var g={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(g.value=this.values(d),g.values=this.values()),this._trigger("change",f,g)}},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(e,h){var g,d,f;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(h),this._refreshValue(),this._change(null,e);return}if(!arguments.length){return this._values()}if(!b.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(e):this.value()}g=this.options.values,d=arguments[0];for(f=0;f<g.length;f+=1){g[f]=this._trimAlignValue(d[f]),this._change(null,f)}this._refreshValue()},_setOption:function(e,g){var f,d=0;b.isArray(this.options.values)&&(d=this.options.values.length),b.Widget.prototype._setOption.apply(this,arguments);switch(e){case"disabled":g?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(f=0;f<d;f+=1){this._change(null,f)}this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d),d},_values:function(g){var d,h,f;if(arguments.length){return d=this.options.values[g],d=this._trimAlignValue(d),d}h=this.options.values.slice();for(f=0;f<h.length;f+=1){h[f]=this._trimAlignValue(h[f])}return h},_trimAlignValue:function(g){if(g<=this._valueMin()){return this._valueMin()}if(g>=this._valueMax()){return this._valueMax()}var d=this.options.step>0?this.options.step:1,h=(g-this._valueMin())%d,f=g-h;return Math.abs(h)*2>=d&&(f+=h>0?d:-d),parseFloat(f.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var q,g,d,j,v,e=this.options.range,p=this.options,m=this,k=this._animateOff?!1:p.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(f){g=(m.values(f)-m._valueMin())/(m._valueMax()-m._valueMin())*100,h[m.orientation==="horizontal"?"left":"bottom"]=g+"%",b(this).stop(1,1)[k?"animate":"css"](h,p.animate),m.options.range===!0&&(m.orientation==="horizontal"?(f===0&&m.range.stop(1,1)[k?"animate":"css"]({left:g+"%"},p.animate),f===1&&m.range[k?"animate":"css"]({width:g-q+"%"},{queue:!1,duration:p.animate})):(f===0&&m.range.stop(1,1)[k?"animate":"css"]({bottom:g+"%"},p.animate),f===1&&m.range[k?"animate":"css"]({height:g-q+"%"},{queue:!1,duration:p.animate}))),q=g}):(d=this.value(),j=this._valueMin(),v=this._valueMax(),g=v!==j?(d-j)/(v-j)*100:0,h[this.orientation==="horizontal"?"left":"bottom"]=g+"%",this.handle.stop(1,1)[k?"animate":"css"](h,p.animate),e==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[k?"animate":"css"]({width:g+"%"},p.animate),e==="max"&&this.orientation==="horizontal"&&this.range[k?"animate":"css"]({width:100-g+"%"},{queue:!1,duration:p.animate}),e==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[k?"animate":"css"]({height:g+"%"},p.animate),e==="max"&&this.orientation==="vertical"&&this.range[k?"animate":"css"]({height:100-g+"%"},{queue:!1,duration:p.animate}))}})})(jQuery);(function(b){function a(c){return function(){var d=this.element.val();c.apply(this,arguments),this._refresh(),d!==this.element.val()&&this._trigger("change")}}b.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var c={},d=this.element;return b.each(["min","max","step"],function(h,g){var f=d.attr(g);f!==undefined&&f.length&&(c[g]=f)}),c},_events:{keydown:function(c){this._start(c)&&this._keydown(c)&&c.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(c){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",c)},mousewheel:function(d,c){if(!c){return}if(!this.spinning&&!this._start(d)){return !1}this._spin((c>0?1:-1)*this.options.step,d),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(d)},100),d.preventDefault()},"mousedown .ui-spinner-button":function(c){function d(){var f=this.element[0]===this.document[0].activeElement;f||(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e}))}var e;e=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),c.preventDefault(),d.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,d.call(this)});if(this._start(c)===!1){return}this._repeat(null,b(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(c){if(!b(c.currentTarget).hasClass("ui-state-active")){return}if(this._start(c)===!1){return !1}this._repeat(null,b(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var c=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=c.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(c.height()*0.5)&&c.height()>0&&c.height(c.height()),this.options.disabled&&this.disable()},_keydown:function(c){var e=this.options,d=b.ui.keyCode;switch(c.keyCode){case d.UP:return this._repeat(null,1,c),!0;case d.DOWN:return this._repeat(null,-1,c),!0;case d.PAGE_UP:return this._repeat(null,e.page,c),!0;case d.PAGE_DOWN:return this._repeat(null,-e.page,c),!0}return !1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(c){return !this.spinning&&this._trigger("start",c)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(d,c,f){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,c,f)},d),this._spin(c*this.options.step,f)},_spin:function(d,c){var f=this.value()||0;this.counter||(this.counter=1),f=this._adjustValue(f+d*this._increment(this.counter));if(!this.spinning||this._trigger("spin",c,{value:f})!==!1){this._value(f),this.counter++}},_increment:function(c){var d=this.options.incremental;return d?b.isFunction(d)?d(c):Math.floor(c*c*c/50000-c*c/500+17*c/200+1):1},_precision:function(){var c=this._precisionOf(this.options.step);return this.options.min!==null&&(c=Math.max(c,this._precisionOf(this.options.min))),c},_precisionOf:function(d){var c=d.toString(),f=c.indexOf(".");return f===-1?0:c.length-f-1},_adjustValue:function(f){var c,g,d=this.options;return c=d.min!==null?d.min:0,g=f-c,g=Math.round(g/d.step)*d.step,f=c+g,f=parseFloat(f.toFixed(this._precision())),d.max!==null&&f>d.max?d.max:d.min!==null&&f<d.min?d.min:f},_stop:function(c){if(!this.spinning){return}clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",c)},_setOption:function(d,c){if(d==="culture"||d==="numberFormat"){var f=this._parse(this.element.val());this.options[d]=c,this.element.val(this._format(f));return}(d==="max"||d==="min"||d==="step")&&typeof c=="string"&&(c=this._parse(c)),this._super(d,c),d==="disabled"&&(c?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:a(function(c){this._super(c),this._value(this.element.val())}),_parse:function(c){return typeof c=="string"&&c!==""&&(c=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(c,10,this.options.culture):+c),c===""||isNaN(c)?null:c},_format:function(c){return c===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(c,this.options.numberFormat,this.options.culture):c},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(d,c){var f;d!==""&&(f=this._parse(d),f!==null&&(c||(f=this._adjustValue(f)),d=this._format(f))),this.element.val(d),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:a(function(c){this._stepUp(c)}),_stepUp:function(c){this._spin((c||1)*this.options.step)},stepDown:a(function(c){this._stepDown(c)}),_stepDown:function(c){this._spin((c||1)*-this.options.step)},pageUp:a(function(c){this._stepUp((c||1)*this.options.page)}),pageDown:a(function(c){this._stepDown((c||1)*this.options.page)}),value:function(c){if(!arguments.length){return this._parse(this.element.val())}a(this._value).call(this,c)},widget:function(){return this.uiSpinner}})})(jQuery);(function(f,b){function a(){return ++g}function c(h){return h.hash.length>1&&h.href.replace(d,"")===location.href.replace(d,"").replace(/\s/g,"%20")}var g=0,d=/#.*$/;f.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var h=this,k=this.options,j=k.active,e=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",k.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(i){f(this).is(".ui-state-disabled")&&i.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){f(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(j===null){e&&this.tabs.each(function(i,l){if(f(l).attr("aria-controls")===e){return j=i,!1}}),j===null&&(j=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(j===null||j===-1){j=this.tabs.length?0:!1}}j!==!1&&(j=this.tabs.index(this.tabs.eq(j)),j===-1&&(j=k.collapsible?!1:0)),k.active=j,!k.collapsible&&k.active===!1&&this.anchors.length&&(k.active=0),f.isArray(k.disabled)&&(k.disabled=f.unique(k.disabled.concat(f.map(this.tabs.filter(".ui-state-disabled"),function(i){return h.tabs.index(i)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=f(),this._refresh(),this.active.length&&this.load(k.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):f()}},_tabKeydown:function(h){var k=f(this.document[0].activeElement).closest("li"),j=this.tabs.index(k),e=!0;if(this._handlePageNav(h)){return}switch(h.keyCode){case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:j++;break;case f.ui.keyCode.UP:case f.ui.keyCode.LEFT:e=!1,j--;break;case f.ui.keyCode.END:j=this.anchors.length-1;break;case f.ui.keyCode.HOME:j=0;break;case f.ui.keyCode.SPACE:h.preventDefault(),clearTimeout(this.activating),this._activate(j);return;case f.ui.keyCode.ENTER:h.preventDefault(),clearTimeout(this.activating),this._activate(j===this.options.active?!1:j);return;default:return}h.preventDefault(),clearTimeout(this.activating),j=this._focusNextTab(j,e),h.ctrlKey||(k.attr("aria-selected","false"),this.tabs.eq(j).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",j)},this.delay))},_panelKeydown:function(e){if(this._handlePageNav(e)){return}e.ctrlKey&&e.keyCode===f.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){if(e.altKey&&e.keyCode===f.ui.keyCode.PAGE_UP){return this._activate(this._focusNextTab(this.options.active-1,!1)),!0}if(e.altKey&&e.keyCode===f.ui.keyCode.PAGE_DOWN){return this._activate(this._focusNextTab(this.options.active+1,!0)),!0}},_findNextTab:function(h,k){function e(){return h>j&&(h=0),h<0&&(h=j),h}var j=this.tabs.length-1;while(f.inArray(e(),this.options.disabled)!==-1){h=k?h+1:h-1}return h},_focusNextTab:function(i,h){return i=this._findNextTab(i,h),this.tabs.eq(i).focus(),i},_setOption:function(i,h){if(i==="active"){this._activate(h);return}if(i==="disabled"){this._setupDisabled(h);return}this._super(i,h),i==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",h),!h&&this.options.active===!1&&this._activate(0)),i==="event"&&this._setupEvents(h),i==="heightStyle"&&this._setupHeightStyle(h)},_tabId:function(h){return h.attr("aria-controls")||"ui-tabs-"+a()},_sanitizeSelector:function(h){return h?h.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,h=this.tablist.children(":has(a[href])");e.disabled=f.map(h.filter(".ui-state-disabled"),function(i){return h.index(i)}),this._processTabs(),e.active===!1||!this.anchors.length?(e.active=!1,this.active=f()):this.active.length&&!f.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=f()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return f("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=f(),this.anchors.each(function(t,p){var m,s,k,j=f(p).uniqueId().attr("id"),q=f(p).closest("li"),h=q.attr("aria-controls");c(p)?(m=p.hash,s=e.element.find(e._sanitizeSelector(m))):(k=e._tabId(q),m="#"+k,s=e.element.find(m),s.length||(s=e._createPanel(k),s.insertAfter(e.panels[t-1]||e.tablist)),s.attr("aria-live","polite")),s.length&&(e.panels=e.panels.add(s)),h&&q.data("ui-tabs-aria-controls",h),q.attr({"aria-controls":m.substring(1),"aria-labelledby":j}),s.attr("aria-labelledby",j)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return f("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){f.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i=0,h;h=this.tabs[i];i++){e===!0||f.inArray(i,e)!==-1?f(h).addClass("ui-state-disabled").attr("aria-disabled","true"):f(h).removeClass("ui-state-disabled").removeAttr("aria-disabled")}this.options.disabled=e},_setupEvents:function(e){var h={click:function(i){i.preventDefault()}};e&&f.each(e.split(" "),function(j,i){h[i]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,h),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(h){var k,j,e=this.element.parent();h==="fill"?(f.support.minHeight||(j=e.css("overflow"),e.css("overflow","hidden")),k=e.height(),this.element.siblings(":visible").each(function(){var i=f(this),l=i.css("position");if(l==="absolute"||l==="fixed"){return}k-=i.outerHeight(!0)}),j&&e.css("overflow",j),this.element.children().not(this.panels).each(function(){k-=f(this).outerHeight(!0)}),this.panels.each(function(){f(this).height(Math.max(0,k-f(this).innerHeight()+f(this).height()))}).css("overflow","auto")):h==="auto"&&(k=0,this.panels.each(function(){k=Math.max(k,f(this).height("").height())}).height(k))},_eventHandler:function(w){var j=this.options,e=this.active,m=f(w.currentTarget),x=m.closest("li"),h=x[0]===e[0],v=h&&j.collapsible,q=v?f():this._getPanelForTab(x),p=e.length?this._getPanelForTab(e):f(),k={oldTab:e,oldPanel:p,newTab:v?f():x,newPanel:q};w.preventDefault();if(x.hasClass("ui-state-disabled")||x.hasClass("ui-tabs-loading")||this.running||h&&!j.collapsible||this._trigger("beforeActivate",w,k)===!1){return}j.active=v?!1:this.tabs.index(x),this.active=h?f():x,this.xhr&&this.xhr.abort(),!p.length&&!q.length&&f.error("jQuery UI Tabs: Mismatching fragment identifier."),q.length&&this.load(this.tabs.index(x),w),this._toggle(w,k)},_toggle:function(j,p){function m(){l.running=!1,l._trigger("activate",j,p)}function e(){p.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),h.length&&l.options.show?l._show(h,l.options.show,m):(h.show(),m())}var l=this,h=p.newPanel,k=p.oldPanel;this.running=!0,k.length&&this.options.hide?this._hide(k,this.options.hide,function(){p.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(p.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),k.hide(),e()),k.attr({"aria-expanded":"false","aria-hidden":"true"}),p.oldTab.attr("aria-selected","false"),h.length&&k.length?p.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return f(this).attr("tabIndex")===0}).attr("tabIndex",-1),h.attr({"aria-expanded":"true","aria-hidden":"false"}),p.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,h=this._findActive(e);if(h[0]===this.active[0]){return}h.length||(h=this.active),i=h.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:f.noop})},_findActive:function(e){return e===!1?f():this.tabs.eq(e)},_getIndex:function(h){return typeof h=="string"&&(h=this.anchors.index(this.anchors.filter("[href$='"+h+"']"))),h},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){f.data(this,"ui-tabs-destroy")?f(this).remove():f(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=f(this),h=e.data("ui-tabs-aria-controls");h?e.attr("aria-controls",h):e.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(h){var e=this.options.disabled;if(e===!1){return}h===b?e=!1:(h=this._getIndex(h),f.isArray(e)?e=f.map(e,function(i){return i!==h?i:null}):e=f.map(this.tabs,function(j,i){return i!==h?i:null})),this._setupDisabled(e)},disable:function(h){var e=this.options.disabled;if(e===!0){return}if(h===b){e=!0}else{h=this._getIndex(h);if(f.inArray(h,e)!==-1){return}f.isArray(e)?e=f.merge([h],e).sort():e=[h]}this._setupDisabled(e)},load:function(k,p){k=this._getIndex(k);var l=this,j=this.tabs.eq(k),m=j.find(".ui-tabs-anchor"),h=this._getPanelForTab(j),e={tab:j,panel:h};if(c(m[0])){return}this.xhr=f.ajax(this._ajaxSettings(m,p,e)),this.xhr&&this.xhr.statusText!=="canceled"&&(j.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(i){setTimeout(function(){h.html(i),l._trigger("load",p,e)},1)}).complete(function(n,i){setTimeout(function(){i==="abort"&&l.panels.stop(!1,!0),j.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),n===l.xhr&&delete l.xhr},1)}))},_ajaxSettings:function(h,k,j){var e=this;return{url:h.attr("href"),beforeSend:function(i,l){return e._trigger("beforeLoad",k,f.extend({jqXHR:i,ajaxSettings:l},j))}}},_getPanelForTab:function(e){var h=f(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+h))}}),f.uiBackCompat!==!1&&(f.ui.tabs.prototype._ui=function(i,h){return{tab:i,panel:h,index:this.anchors.index(i)}},f.widget("ui.tabs",f.ui.tabs,{url:function(i,h){this.anchors.eq(i).attr("href",h)}}),f.widget("ui.tabs",f.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var e=this;this._on({tabsbeforeload:function(i,h){if(f.data(h.tab[0],"cache.tabs")){i.preventDefault();return}h.jqXHR.success(function(){e.options.cache&&f.data(h.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(h,k,j){var e=this.options.ajaxOptions;return f.extend({},e,{error:function(l,i){try{e.error(l,i,j.tab.closest("li").index(),j.tab[0])}catch(m){}}},this._superApply(arguments))},_setOption:function(i,h){i==="cache"&&h===!1&&this.anchors.removeData("cache.tabs"),this._super(i,h)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(h){this.anchors.eq(h).removeData("cache.tabs"),this._superApply(arguments)}}),f.widget("ui.tabs",f.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),f.widget("ui.tabs",f.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(j,h){if(j.target!==this.element[0]||!this.options.spinner){return}var k=h.tab.find("span"),i=k.html();k.html(this.options.spinner),h.jqXHR.complete(function(){k.html(i)})}})}}),f.widget("ui.tabs",f.ui.tabs,{options:{enable:null,disable:null},enable:function(e){var i=this.options,h;if(e&&i.disabled===!0||f.isArray(i.disabled)&&f.inArray(e,i.disabled)!==-1){h=!0}this._superApply(arguments),h&&this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e]))},disable:function(e){var i=this.options,h;if(e&&i.disabled===!1||f.isArray(i.disabled)&&f.inArray(e,i.disabled)===-1){h=!0}this._superApply(arguments),h&&this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}}),f.widget("ui.tabs",f.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(q,l,j){j===b&&(j=this.anchors.length);var k,p,h=this.options,e=f(h.tabTemplate.replace(/#\{href\}/g,q).replace(/#\{label\}/g,l)),m=q.indexOf("#")?this._tabId(e):q.replace("#","");return e.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),e.attr("aria-controls",m),k=j>=this.tabs.length,p=this.element.find("#"+m),p.length||(p=this._createPanel(m),k?j>0?p.insertAfter(this.panels.eq(-1)):p.appendTo(this.element):p.insertBefore(this.panels[j])),p.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),k?e.appendTo(this.tablist):e.insertBefore(this.tabs[j]),h.disabled=f.map(h.disabled,function(i){return i>=j?++i:i}),this.refresh(),this.tabs.length===1&&h.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[j],this.panels[j])),this},remove:function(h){h=this._getIndex(h);var k=this.options,j=this.tabs.eq(h).remove(),e=this._getPanelForTab(j).remove();return j.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(h+(h+1<this.anchors.length?1:-1)),k.disabled=f.map(f.grep(k.disabled,function(i){return i!==h}),function(i){return i>=h?--i:i}),this.refresh(),this._trigger("remove",null,this._ui(j.find("a")[0],e[0])),this}}),f.widget("ui.tabs",f.ui.tabs,{length:function(){return this.anchors.length}}),f.widget("ui.tabs",f.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(e){var h=e.is("li")?e.find("a[href]"):e;return h=h[0],f(h).closest("li").attr("aria-controls")||h.title&&h.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+a()}}),f.widget("ui.tabs",f.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(e){return f(this.options.panelTemplate).attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),f.widget("ui.tabs",f.ui.tabs,{_create:function(){var h=this.options;h.active===null&&h.selected!==b&&(h.active=h.selected===-1?!1:h.selected),this._super(),h.selected=h.active,h.selected===!1&&(h.selected=-1)},_setOption:function(i,h){if(i!=="selected"){return this._super(i,h)}var j=this.options;this._super("active",h===-1?!1:h),j.selected=j.active,j.selected===!1&&(j.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),f.widget("ui.tabs",f.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(m,j,o){var l,h,k=this._superApply(arguments);return k?(m==="beforeActivate"?(l=o.newTab.length?o.newTab:o.oldTab,h=o.newPanel.length?o.newPanel:o.oldPanel,k=this._super("select",j,{tab:l.find(".ui-tabs-anchor")[0],panel:h[0],index:l.closest("li").index()})):m==="activate"&&o.newTab.length&&(k=this._super("show",j,{tab:o.newTab.find(".ui-tabs-anchor")[0],panel:o.newPanel[0],index:o.newTab.closest("li").index()})),k):!1}}),f.widget("ui.tabs",f.ui.tabs,{select:function(h){h=this._getIndex(h);if(h===-1){if(!this.options.collapsible||this.options.selected===-1){return}h=this.options.selected}this.anchors.eq(h).trigger(this.options.event+this.eventNamespace)}}),function(){var e=0;f.widget("ui.tabs",f.ui.tabs,{options:{cookie:null},_create:function(){var i=this.options,h;i.active==null&&i.cookie&&(h=parseInt(this._cookie(),10),h===-1&&(h=!1),i.active=h),this._super()},_cookie:function(i){var h=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++e)];return arguments.length&&(h.push(i===!1?-1:i),h.push(this.options.cookie)),f.cookie.apply(null,h)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),f.widget("ui.tabs",f.ui.tabs,{_trigger:function(h,k,j){var e=f.extend({},j);return h==="load"&&(e.panel=e.panel[0],e.tab=e.tab.find(".ui-tabs-anchor")[0]),this._super(h,k,e)}}),f.widget("ui.tabs",f.ui.tabs,{options:{fx:null},_getFx:function(){var e,i,h=this.options.fx;return h&&(f.isArray(h)?(e=h[0],i=h[1]):e=i=h),h?{show:i,hide:e}:null},_toggle:function(p,k){function q(){v.running=!1,v._trigger("activate",p,k)}function h(){k.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),m.length&&l.show?m.animate(l.show,l.show.duration,function(){q()}):(m.show(),q())}var v=this,m=k.newPanel,j=k.oldPanel,l=this._getFx();if(!l){return this._super(p,k)}v.running=!0,j.length&&l.hide?j.animate(l.hide,l.hide.duration,function(){k.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h()}):(k.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),j.hide(),h())}}))})(jQuery);(function(c){function d(e,g){var f=(e.attr("aria-describedby")||"").split(/\s+/);f.push(g),e.data("ui-tooltip-id",g).attr("aria-describedby",c.trim(f.join(" ")))}function b(f){var h=f.data("ui-tooltip-id"),g=(f.attr("aria-describedby")||"").split(/\s+/),e=c.inArray(h,g);e!==-1&&g.splice(e,1),f.removeData("ui-tooltip-id"),g=c.trim(g.join(" ")),g?f.attr("aria-describedby",g):f.removeAttr("aria-describedby")}var a=0;c.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return c(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,g){var f=this;if(e==="disabled"){this[g?"_disable":"_enable"](),this.options[e]=g;return}this._super(e,g),e==="content"&&c.each(this.tooltips,function(i,h){f._updateContent(h)})},_disable:function(){var e=this;c.each(this.tooltips,function(h,g){var f=c.Event("blur");f.target=f.currentTarget=g[0],e.close(f,!0)}),this.element.find(this.options.items).andSelf().each(function(){var f=c(this);f.is("[title]")&&f.data("ui-tooltip-title",f.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var e=c(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var g=this,f=c(e?e.target:this.element).closest(this.options.items);if(!f.length||f.data("ui-tooltip-id")){return}f.attr("title")&&f.data("ui-tooltip-title",f.attr("title")),f.data("ui-tooltip-open",!0),e&&e.type==="mouseover"&&f.parents().each(function(){var h=c(this),i;h.data("ui-tooltip-open")&&(i=c.Event("blur"),i.target=i.currentTarget=this,g.close(i,!0)),h.attr("title")&&(h.uniqueId(),g.parents[this.id]={element:this,title:h.attr("title")},h.attr("title",""))}),this._updateContent(f,e)},_updateContent:function(k,g){var l,j=this.options.content,f=this,h=g?g.type:null;if(typeof j=="string"){return this._open(g,k,j)}l=j.call(k[0],function(e){if(!k.data("ui-tooltip-open")){return}f._delay(function(){g&&(g.type=h),this._open(g,k,e)})}),l&&this._open(g,k,l)},_open:function(j,l,h){function m(f){e.of=f;if(k.is(":hidden")){return}k.position(e)}var k,n,g,e=c.extend({},this.options.position);if(!h){return}k=this._find(l);if(k.length){k.find(".ui-tooltip-content").html(h);return}l.is("[title]")&&(j&&j.type==="mouseover"?l.attr("title",""):l.removeAttr("title")),k=this._tooltip(l),d(l,k.attr("id")),k.find(".ui-tooltip-content").html(h),this.options.track&&j&&/^mouse/.test(j.type)?(this._on(this.document,{mousemove:m}),m(j)):k.position(c.extend({of:l},this.options.position)),k.hide(),this._show(k,this.options.show),this.options.show&&this.options.show.delay&&(g=setInterval(function(){k.is(":visible")&&(m(e.of),clearInterval(g))},c.fx.interval)),this._trigger("open",j,{tooltip:k}),n={keyup:function(f){if(f.keyCode===c.ui.keyCode.ESCAPE){var i=c.Event(f);i.currentTarget=l[0],this.close(i,!0)}},remove:function(){this._removeTooltip(k)}};if(!j||j.type==="mouseover"){n.mouseleave="close"}if(!j||j.type==="focusin"){n.focusout="close"}this._on(!0,l,n)},close:function(f){var h=this,e=c(f?f.currentTarget:this.element),g=this._find(e);if(this.closing){return}e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),b(e),g.stop(!0),this._hide(g,this.options.hide,function(){h._removeTooltip(c(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),f&&f.type==="mouseleave"&&c.each(this.parents,function(i,j){c(j.element).attr("title",j.title),delete h.parents[i]}),this.closing=!0,this._trigger("close",f,{tooltip:g}),this.closing=!1},_tooltip:function(g){var f="ui-tooltip-"+a++,e=c("<div>").attr({id:f,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return c("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),c.fn.bgiframe&&e.bgiframe(),this.tooltips[f]=g,e},_find:function(e){var f=e.data("ui-tooltip-id");return f?c("#"+f):c()},_removeTooltip:function(f){f.remove(),delete this.tooltips[f.attr("id")]},_destroy:function(){var e=this;c.each(this.tooltips,function(h,g){var f=c.Event("blur");f.target=f.currentTarget=g[0],e.close(f,!0),c("#"+h).remove(),g.data("ui-tooltip-title")&&(g.attr("title",g.data("ui-tooltip-title")),g.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(c,a){var d=c.uiBackCompat!==!1,b="ui-effects-";c.effects={effect:{}},function(D,k){function g(i,f,l){var h=A[f.type]||{};return i==null?l||!f.def?null:f.def:(i=h.floor?~~i:parseFloat(i),isNaN(i)?f.def:h.mod?(i+h.mod)%h.mod:0>i?0:h.max<i?h.max:i)}function y(h){var i=j(),f=i._rgba=[];return h=h.toLowerCase(),w(E,function(p,n){var r,v=n.re.exec(h),l=v&&n.parse(v),u=n.space||"rgba";if(l){return r=i[u](l),i[C[u].cache]=r[C[u].cache],f=i._rgba=r._rgba,!1}}),f.length?(f.join()==="0,0,0,0"&&D.extend(f,z.transparent),i):z[h]}function B(h,f,i){return i=(i+1)%1,i*6<1?h+(f-h)*i*6:i*2<1?f:i*3<2?h+(f-h)*(2/3-i)*6:h}var e="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),q=/^([\-+])=\s*(\d+\.?\d*)/,E=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return[f[1],f[2],f[3],f[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return[f[1]*2.55,f[2]*2.55,f[3]*2.55,f[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(f){return[f[1],f[2]/100,f[3]/100,f[4]]}}],j=D.Color=function(l,o,h,f){return new D.Color.fn.parse(l,o,h,f)},C={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},A={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},x=j.support={},m=D("<p>")[0],z,w=D.each;m.style.cssText="background-color:rgba(1,1,1,.5)",x.rgba=m.style.backgroundColor.indexOf("rgba")>-1,w(C,function(h,f){f.cache="_"+h,f.props.alpha={idx:3,type:"percent",def:1}}),j.fn=D.extend(j.prototype,{parse:function(u,p,t,n){if(u===k){return this._rgba=[null,null,null,null],this}if(u.jquery||u.nodeType){u=D(u).css(p),p=k}var F=this,h=D.type(u),o=this._rgba=[];p!==k&&(u=[u,p,t,n],h="array");if(h==="string"){return this.parse(y(u)||z._default)}if(h==="array"){return w(C.rgba.props,function(i,f){o[f.idx]=g(u[f.idx],f)}),this}if(h==="object"){return u instanceof j?w(C,function(i,f){u[f.cache]&&(F[f.cache]=u[f.cache].slice())}):w(C,function(l,r){var f=r.cache;w(r.props,function(s,i){if(!F[f]&&r.to){if(s==="alpha"||u[s]==null){return}F[f]=r.to(F._rgba)}F[f][i.idx]=g(u[s],i,!0)}),F[f]&&c.inArray(null,F[f].slice(0,3))<0&&(F[f][3]=1,r.from&&(F._rgba=r.from(F[f])))}),this}},is:function(i){var f=j(i),l=!0,h=this;return w(C,function(r,n){var p,t=f[n.cache];return t&&(p=h[n.cache]||n.to&&n.to(h._rgba)||[],w(n.props,function(s,o){if(t[o.idx]!=null){return l=t[o.idx]===p[o.idx],l}})),l}),l},_space:function(){var h=[],f=this;return w(C,function(l,i){f[i.cache]&&h.push(l)}),h.pop()},transition:function(G,p){var H=j(G),v=H._space(),o=C[v],u=this.alpha()===0?j("transparent"):this,F=u[o.cache]||o.to(u._rgba),h=F.slice();return H=H[o.cache],w(o.props,function(I,t){var l=t.idx,n=F[l],J=H[l],f=A[t.type]||{};if(J===null){return}n===null?h[l]=J:(f.mod&&(J-n>f.mod/2?n+=f.mod:n-J>f.mod/2&&(n-=f.mod)),h[l]=g((J-n)*p+n,t))}),this[v](h)},blend:function(l){if(this._rgba[3]===1){return this}var o=this._rgba.slice(),h=o.pop(),f=j(l)._rgba;return j(D.map(o,function(n,i){return(1-h)*f[i]+h*n}))},toRgbaString:function(){var f="rgba(",h=D.map(this._rgba,function(l,i){return l==null?i>2?1:0:l});return h[3]===1&&(h.pop(),f="rgb("),f+h.join()+")"},toHslaString:function(){var f="hsla(",h=D.map(this.hsla(),function(l,i){return l==null&&(l=i>2?1:0),i&&i<3&&(l=Math.round(l*100)+"%"),l});return h[3]===1&&(h.pop(),f="hsl("),f+h.join()+")"},toHexString:function(h){var i=this._rgba.slice(),f=i.pop();return h&&i.push(~~(f*255)),"#"+D.map(i,function(l){return l=(l||0).toString(16),l.length===1?"0"+l:l}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,C.hsla.to=function(I){if(I[0]==null||I[1]==null||I[2]==null){return[null,null,null,I[3]]}var M=I[0]/255,v=I[1]/255,h=I[2]/255,G=I[3],N=Math.max(M,v,h),p=Math.min(M,v,h),L=N-p,K=N+p,H=K*0.5,F,J;return p===N?F=0:M===N?F=60*(v-h)/L+360:v===N?F=60*(h-M)/L+120:F=60*(M-v)/L+240,H===0||H===1?J=H:H<=0.5?J=L/K:J=L/(2-K),[Math.round(F)%360,J,H,G==null?1:G]},C.hsla.from=function(u){if(u[0]==null||u[1]==null||u[2]==null){return[null,null,null,u[3]]}var h=u[0]/360,F=u[1],p=u[2],f=u[3],l=p<=0.5?p*(1+F):p+F-p*F,v=2*p-l;return[Math.round(B(v,l,h+1/3)*255),Math.round(B(v,l,h)*255),Math.round(B(v,l,h-1/3)*255),f]},w(C,function(p,n){var l=n.props,i=n.cache,h=n.to,o=n.from;j.fn[p]=function(u){h&&!this[i]&&(this[i]=h(this._rgba));if(u===k){return this[i].slice()}var t,s=D.type(u),f=s==="array"||s==="object"?u:arguments,v=this[i].slice();return w(l,function(F,r){var G=f[s==="object"?F:r.idx];G==null&&(G=v[r.idx]),v[r.idx]=g(G,r)}),o?(t=j(o(v)),t[i]=v,t):j(v)},w(l,function(s,f){if(j.fn[s]){return}j.fn[s]=function(F){var H=D.type(F),v=s==="alpha"?this._hsla?"hsla":"rgba":p,t=this[v](),G=t[f.idx],r;return H==="undefined"?G:(H==="function"&&(F=F.call(this,G),H=D.type(F)),F==null&&f.empty?this:(H==="string"&&(r=q.exec(F),r&&(F=G+parseFloat(r[2])*(r[1]==="+"?1:-1))),t[f.idx]=F,this[v](t)))}})}),w(e,function(f,h){D.cssHooks[h]={set:function(G,F){var t,v,p="";if(D.type(F)!=="string"||(t=y(F))){F=j(t||F);if(!x.rgba&&F._rgba[3]!==1){v=h==="backgroundColor"?G.parentNode:G;while((p===""||p==="transparent")&&v&&v.style){try{p=D.css(v,"backgroundColor"),v=v.parentNode}catch(o){}}F=F.blend(p&&p!=="transparent"?p:"_default")}F=F.toRgbaString()}try{G.style[h]=F}catch(n){}}},D.fx.step[h]=function(i){i.colorInit||(i.start=j(i.elem,h),i.end=j(i.end),i.colorInit=!0),D.cssHooks[h].set(i.elem,i.start.transition(i.end,i.pos))}}),D.cssHooks.borderColor={expand:function(h){var f={};return w(["Top","Right","Bottom","Left"],function(l,i){f["border"+i+"Color"]=h}),f}},z=D.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function e(){var k=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,m={},l,j;if(k&&k.length&&k[0]&&k[k[0]]){j=k.length;while(j--){l=k[j],typeof k[l]=="string"&&(m[c.camelCase(l)]=k[l])}}else{for(l in k){typeof k[l]=="string"&&(m[l]=k[l])}}return m}function f(k,p){var j={},l,m;for(l in p){m=p[l],k[l]!==m&&!g[l]&&(c.fx.step[l]||!isNaN(parseFloat(m)))&&(j[l]=m)}return j}var h=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};c.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(i,j){c.fx.step[j]=function(k){if(k.end!=="none"&&!k.setAttr||k.pos===1&&!k.setAttr){jQuery.style(k.elem,j,k.end),k.setAttr=!0}}}),c.effects.animateClass=function(k,l,m,j){var i=c.speed(l,m,j);return this.queue(function(){var p=c(this),s=p.attr("class")||"",n,q=i.children?p.find("*").andSelf():p;q=q.map(function(){var o=c(this);return{el:o,start:e.call(this)}}),n=function(){c.each(h,function(o,r){k[r]&&p[r+"Class"](k[r])})},n(),q=q.map(function(){return this.end=e.call(this.el[0]),this.diff=f(this.start,this.end),this}),p.attr("class",s),q=q.map(function(){var o=this,v=c.Deferred(),u=jQuery.extend({},i,{queue:!1,complete:function(){v.resolve(o)}});return this.el.animate(this.diff,u),v.promise()}),c.when.apply(c,q.get()).done(function(){n(),c.each(arguments,function(){var o=this.el;c.each(this.diff,function(r){o.css(r,"")})}),i.complete.call(p[0])})})},c.fn.extend({_addClass:c.fn.addClass,addClass:function(k,m,l,j){return m?c.effects.animateClass.call(this,{add:k},m,l,j):this._addClass(k)},_removeClass:c.fn.removeClass,removeClass:function(k,m,l,j){return m?c.effects.animateClass.call(this,{remove:k},m,l,j):this._removeClass(k)},_toggleClass:c.fn.toggleClass,toggleClass:function(p,l,j,k,m){return typeof l=="boolean"||l===a?j?c.effects.animateClass.call(this,l?{add:p}:{remove:p},j,k,m):this._toggleClass(p,l):c.effects.animateClass.call(this,{toggle:p},l,j,k)},switchClass:function(k,o,m,j,l){return c.effects.animateClass.call(this,{add:o,remove:k},m,j,l)}})}(),function(){function e(h,k,j,g){c.isPlainObject(h)&&(k=h,h=h.effect),h={effect:h},k==null&&(k={}),c.isFunction(k)&&(g=k,j=null,k={});if(typeof k=="number"||c.fx.speeds[k]){g=j,j=k,k={}}return c.isFunction(j)&&(g=j,j=null),k&&c.extend(h,k),j=j||k.duration,h.duration=c.fx.off?0:typeof j=="number"?j:j in c.fx.speeds?c.fx.speeds[j]:c.fx.speeds._default,h.complete=g||k.complete,h}function f(g){return !g||typeof g=="number"||c.fx.speeds[g]?!0:typeof g=="string"&&!c.effects.effect[g]?d&&c.effects[g]?!1:!0:!1}c.extend(c.effects,{version:"1.9.2",save:function(h,g){for(var i=0;i<g.length;i++){g[i]!==null&&h.data(b+g[i],h[0].style[g[i]])}},restore:function(j,k){var g,h;for(h=0;h<k.length;h++){k[h]!==null&&(g=j.data(b+k[h]),g===a&&(g=""),j.css(k[h],g))}},setMode:function(h,g){return g==="toggle"&&(g=h.is(":hidden")?"show":"hide"),g},getBaseline:function(i,g){var j,h;switch(i[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=i[0]/g.height}switch(i[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=i[1]/g.width}return{x:h,y:j}},createWrapper:function(h){if(h.parent().is(".ui-effects-wrapper")){return h.parent()}var m={width:h.outerWidth(!0),height:h.outerHeight(!0),"float":h.css("float")},k=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),g={width:h.width(),height:h.height()},j=document.activeElement;try{j.id}catch(l){j=document.body}return h.wrap(k),(h[0]===j||c.contains(h[0],j))&&c(j).focus(),k=h.parent(),h.css("position")==="static"?(k.css({position:"relative"}),h.css({position:"relative"})):(c.extend(m,{position:h.css("position"),zIndex:h.css("z-index")}),c.each(["top","left","bottom","right"],function(n,i){m[i]=h.css(i),isNaN(parseInt(m[i],10))&&(m[i]="auto")}),h.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),h.css(g),k.css(m).show()},removeWrapper:function(g){var h=document.activeElement;return g.parent().is(".ui-effects-wrapper")&&(g.parent().replaceWith(g),(g[0]===h||c.contains(g[0],h))&&c(h).focus()),g},setTransition:function(h,k,j,g){return g=g||{},c.each(k,function(l,m){var i=h.cssUnit(m);i[0]>0&&(g[m]=i[0]*j+i[1])}),g}}),c.fn.extend({effect:function(){function g(t){function m(){c.isFunction(o)&&o.call(q[0]),c.isFunction(t)&&t()}var q=c(this),o=i.complete,p=i.mode;(q.is(":hidden")?p==="hide":p==="show")?m():l.call(q[0],i,m)}var i=e.apply(this,arguments),k=i.mode,j=i.queue,l=c.effects.effect[i.effect],h=!l&&d&&c.effects[i.effect];return c.fx.off||!l&&!h?k?this[k](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):l?j===!1?this.each(g):this.queue(j||"fx",g):h.call(this,{options:i,duration:i.duration,callback:i.complete,mode:i.mode})},_show:c.fn.show,show:function(h){if(f(h)){return this._show.apply(this,arguments)}var g=e.apply(this,arguments);return g.mode="show",this.effect.call(this,g)},_hide:c.fn.hide,hide:function(h){if(f(h)){return this._hide.apply(this,arguments)}var g=e.apply(this,arguments);return g.mode="hide",this.effect.call(this,g)},__toggle:c.fn.toggle,toggle:function(g){if(f(g)||typeof g=="boolean"||c.isFunction(g)){return this.__toggle.apply(this,arguments)}var h=e.apply(this,arguments);return h.mode="toggle",this.effect.call(this,h)},cssUnit:function(g){var i=this.css(g),h=[];return c.each(["em","px","%","pt"],function(k,j){i.indexOf(j)>0&&(h=[parseFloat(i),j])}),h}})}(),function(){var e={};c.each(["Quad","Cubic","Quart","Quint","Expo"],function(f,g){e[g]=function(h){return Math.pow(h,f+2)}}),c.extend(e,{Sine:function(f){return 1-Math.cos(f*Math.PI/2)},Circ:function(f){return 1-Math.sqrt(1-f*f)},Elastic:function(f){return f===0||f===1?f:-Math.pow(2,8*(f-1))*Math.sin(((f-1)*80-7.5)*Math.PI/15)},Back:function(f){return f*f*(3*f-2)},Bounce:function(g){var f,h=4;while(g<((f=Math.pow(2,--h))-1)/11){}return 1/Math.pow(4,3-h)-7.5625*Math.pow((f*3-2)/22-g,2)}}),c.each(e,function(f,g){c.easing["easeIn"+f]=g,c.easing["easeOut"+f]=function(h){return 1-g(1-h)},c.easing["easeInOut"+f]=function(h){return h<0.5?g(h*2)/2:1-g(h*-2+2)/2}})}()}(jQuery);(function(c,a){var d=/up|down|vertical/,b=/up|left|vertical|horizontal/;c.effects.effect.blind=function(D,q){var E=c(this),j=["position","top","bottom","left","right","height","width"],C=c.effects.setMode(E,D.mode||"hide"),A=D.direction||"up",x=d.test(A),n=x?"height":"width",z=x?"top":"left",r=b.test(A),e={},y=C==="show",B,k,w;E.parent().is(".ui-effects-wrapper")?c.effects.save(E.parent(),j):c.effects.save(E,j),E.show(),B=c.effects.createWrapper(E).css({overflow:"hidden"}),k=B[n](),w=parseFloat(B.css(z))||0,e[n]=y?k:0,r||(E.css(x?"bottom":"right",0).css(x?"top":"left","auto").css({position:"absolute"}),e[z]=y?w:k+w),y&&(B.css(n,0),r||B.css(z,w+k)),B.animate(e,{duration:D.duration,easing:D.easing,queue:!1,complete:function(){C==="hide"&&E.hide(),c.effects.restore(E,j),c.effects.removeWrapper(E),q()}})}})(jQuery);(function(b,a){b.effects.effect.bounce=function(x,D){var A=b(this),G=["position","top","bottom","left","right","height","width"],z=b.effects.setMode(A,x.mode||"effect"),C=z==="hide",q=z==="show",N=x.direction||"up",J=x.distance,F=x.times||5,L=F*2+(q||C?1:0),H=x.duration/L,B=x.easing,K=N==="up"||N==="down"?"top":"left",k=N==="up"||N==="left",E,I,e,M=A.queue(),j=M.length;(q||C)&&G.push("opacity"),b.effects.save(A,G),A.show(),b.effects.createWrapper(A),J||(J=A[K==="top"?"outerHeight":"outerWidth"]()/3),q&&(e={opacity:1},e[K]=0,A.css("opacity",0).css(K,k?-J*2:J*2).animate(e,H,B)),C&&(J/=Math.pow(2,F-1)),e={},e[K]=0;for(E=0;E<F;E++){I={},I[K]=(k?"-=":"+=")+J,A.animate(I,H,B).animate(e,H,B),J=C?J*2:J/2}C&&(I={opacity:0},I[K]=(k?"-=":"+=")+J,A.animate(I,H,B)),A.queue(function(){C&&A.hide(),b.effects.restore(A,G),b.effects.removeWrapper(A),D()}),j>1&&M.splice.apply(M,[1,0].concat(M.splice(j,L+1))),A.dequeue()}})(jQuery);(function(b,a){b.effects.effect.clip=function(B,k){var e=b(this),q=["position","top","bottom","left","right","height","width"],C=b.effects.setMode(e,B.mode||"hide"),j=C==="show",A=B.direction||"vertical",z=A==="vertical",w=z?"height":"width",m=z?"top":"left",y={},v,g,x;b.effects.save(e,q),e.show(),v=b.effects.createWrapper(e).css({overflow:"hidden"}),g=e[0].tagName==="IMG"?v:e,x=g[w](),j&&(g.css(w,0),g.css(m,x/2)),y[w]=j?x:0,y[m]=j?0:x/2,g.animate(y,{queue:!1,duration:B.duration,easing:B.easing,complete:function(){j||e.hide(),b.effects.restore(e,q),b.effects.removeWrapper(e),k()}})}})(jQuery);(function(b,a){b.effects.effect.drop=function(v,g){var d=b(this),j=["position","top","bottom","left","right","opacity","height","width"],w=b.effects.setMode(d,v.mode||"hide"),e=w==="show",q=v.direction||"left",p=q==="up"||q==="down"?"top":"left",k=q==="up"||q==="left"?"pos":"neg",h={opacity:e?1:0},m;b.effects.save(d,j),d.show(),b.effects.createWrapper(d),m=v.distance||d[p==="top"?"outerHeight":"outerWidth"](!0)/2,e&&d.css("opacity",0).css(p,k==="pos"?-m:m),h[p]=(e?k==="pos"?"+=":"-=":k==="pos"?"-=":"+=")+m,d.animate(h,{queue:!1,duration:v.duration,easing:v.easing,complete:function(){w==="hide"&&d.hide(),b.effects.restore(d,j),b.effects.removeWrapper(d),g()}})}})(jQuery);(function(b,a){b.effects.effect.explode=function(q,B){function e(){J.push(this),J.length===x*E&&K()}function K(){w.css({visibility:"visible"}),b(J).remove(),k||w.hide(),B()}var x=q.pieces?Math.round(Math.sqrt(q.pieces)):3,E=x,w=b(this),A=b.effects.setMode(w,q.mode||"hide"),k=A==="show",L=w.show().css("visibility","hidden").offset(),H=Math.ceil(w.outerWidth()/E),D=Math.ceil(w.outerHeight()/x),J=[],F,z,I,j,C,G;for(F=0;F<x;F++){j=L.top+F*D,G=F-(x-1)/2;for(z=0;z<E;z++){I=L.left+z*H,C=z-(E-1)/2,w.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-z*H,top:-F*D}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:H,height:D,left:I+(k?C*H:0),top:j+(k?G*D:0),opacity:k?0:1}).animate({left:I+(k?0:C*H),top:j+(k?0:G*D),opacity:k?1:0},q.duration||500,q.easing,e)}}}})(jQuery);(function(b,a){b.effects.effect.fade=function(d,f){var e=b(this),c=b.effects.setMode(e,d.mode||"toggle");e.animate({opacity:c},{queue:!1,duration:d.duration,easing:d.easing,complete:f})}})(jQuery);(function(b,a){b.effects.effect.fold=function(H,q){var e=b(this),y=["position","top","bottom","left","right","height","width"],I=b.effects.setMode(e,H.mode||"hide"),k=I==="show",G=I==="hide",E=H.size||15,B=/([0-9]+)%/.exec(E),x=!!H.horizFirst,D=k!==x,z=D?["width","height"]:["height","width"],j=H.duration/2,C,F,w={},A={};b.effects.save(e,y),e.show(),C=b.effects.createWrapper(e).css({overflow:"hidden"}),F=D?[C.width(),C.height()]:[C.height(),C.width()],B&&(E=parseInt(B[1],10)/100*F[G?0:1]),k&&C.css(x?{height:0,width:E}:{height:E,width:0}),w[z[0]]=k?F[0]:E,A[z[1]]=k?F[1]:0,C.animate(w,j,H.easing).animate(A,j,H.easing,function(){G&&e.hide(),b.effects.restore(e,y),b.effects.removeWrapper(e),q()})}})(jQuery);(function(b,a){b.effects.effect.highlight=function(d,h){var f=b(this),c=["backgroundImage","backgroundColor","opacity"],e=b.effects.setMode(f,d.mode||"show"),g={backgroundColor:f.css("backgroundColor")};e==="hide"&&(g.opacity=0),b.effects.save(f,c),f.show().css({backgroundImage:"none",backgroundColor:d.color||"#ffff99"}).animate(g,{queue:!1,duration:d.duration,easing:d.easing,complete:function(){e==="hide"&&f.hide(),b.effects.restore(f,c),h()}})}})(jQuery);(function(b,a){b.effects.effect.pulsate=function(z,j){var d=b(this),m=b.effects.setMode(d,z.mode||"show"),A=m==="show",g=m==="hide",y=A||m==="hide",x=(z.times||5)*2+(y?1:0),v=z.duration/x,k=0,w=d.queue(),q=w.length,e;if(A||!d.is(":visible")){d.css("opacity",0).show(),k=1}for(e=1;e<x;e++){d.animate({opacity:k},v,z.easing),k=1-k}d.animate({opacity:k},v,z.easing),d.queue(function(){g&&d.hide(),j()}),q>1&&w.splice.apply(w,[1,0].concat(w.splice(q,x+1))),d.dequeue()}})(jQuery);(function(b,a){b.effects.effect.puff=function(f,k){var h=b(this),e=b.effects.setMode(h,f.mode||"hide"),g=e==="hide",j=parseInt(f.percent,10)||150,d=j/100,c={height:h.height(),width:h.width(),outerHeight:h.outerHeight(),outerWidth:h.outerWidth()};b.extend(f,{effect:"scale",queue:!1,fade:!0,mode:e,complete:k,percent:g?j:100,from:g?c:{height:c.height*d,width:c.width*d,outerHeight:c.outerHeight*d,outerWidth:c.outerWidth*d}}),h.effect(f)},b.effects.effect.scale=function(p,e){var c=b(this),h=b.extend(!0,{},p),q=b.effects.setMode(c,p.mode||"effect"),d=parseInt(p.percent,10)||(parseInt(p.percent,10)===0?0:q==="hide"?0:100),m=p.direction||"both",k=p.origin,j={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()},g={y:m!=="horizontal"?d/100:1,x:m!=="vertical"?d/100:1};h.effect="size",h.queue=!1,h.complete=e,q!=="effect"&&(h.origin=k||["middle","center"],h.restore=!0),h.from=p.from||(q==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:j),h.to={height:j.height*g.y,width:j.width*g.x,outerHeight:j.outerHeight*g.y,outerWidth:j.outerWidth*g.x},h.fade&&(q==="show"&&(h.from.opacity=0,h.to.opacity=1),q==="hide"&&(h.from.opacity=1,h.to.opacity=0)),c.effect(h)},b.effects.effect.size=function(q,B){var x,E,w,A=b(this),k=["position","top","bottom","left","right","width","height","overflow","opacity"],L=["position","top","bottom","left","right","overflow","opacity"],H=["width","height","overflow"],D=["fontSize"],J=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],F=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],z=b.effects.setMode(A,q.mode||"effect"),I=q.restore||z!=="effect",j=q.scale||"both",C=q.origin||["middle","center"],G=A.css("position"),e=I?k:L,K={height:0,width:0,outerHeight:0,outerWidth:0};z==="show"&&A.show(),x={height:A.height(),width:A.width(),outerHeight:A.outerHeight(),outerWidth:A.outerWidth()},q.mode==="toggle"&&z==="show"?(A.from=q.to||K,A.to=q.from||x):(A.from=q.from||(z==="show"?K:x),A.to=q.to||(z==="hide"?K:x)),w={from:{y:A.from.height/x.height,x:A.from.width/x.width},to:{y:A.to.height/x.height,x:A.to.width/x.width}};if(j==="box"||j==="both"){w.from.y!==w.to.y&&(e=e.concat(J),A.from=b.effects.setTransition(A,J,w.from.y,A.from),A.to=b.effects.setTransition(A,J,w.to.y,A.to)),w.from.x!==w.to.x&&(e=e.concat(F),A.from=b.effects.setTransition(A,F,w.from.x,A.from),A.to=b.effects.setTransition(A,F,w.to.x,A.to))}(j==="content"||j==="both")&&w.from.y!==w.to.y&&(e=e.concat(D).concat(H),A.from=b.effects.setTransition(A,D,w.from.y,A.from),A.to=b.effects.setTransition(A,D,w.to.y,A.to)),b.effects.save(A,e),A.show(),b.effects.createWrapper(A),A.css("overflow","hidden").css(A.from),C&&(E=b.effects.getBaseline(C,x),A.from.top=(x.outerHeight-A.outerHeight())*E.y,A.from.left=(x.outerWidth-A.outerWidth())*E.x,A.to.top=(x.outerHeight-A.to.outerHeight)*E.y,A.to.left=(x.outerWidth-A.to.outerWidth)*E.x),A.css(A.from);if(j==="content"||j==="both"){J=J.concat(["marginTop","marginBottom"]).concat(D),F=F.concat(["marginLeft","marginRight"]),H=k.concat(J).concat(F),A.find("*[width]").each(function(){var d=b(this),c={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};I&&b.effects.save(d,H),d.from={height:c.height*w.from.y,width:c.width*w.from.x,outerHeight:c.outerHeight*w.from.y,outerWidth:c.outerWidth*w.from.x},d.to={height:c.height*w.to.y,width:c.width*w.to.x,outerHeight:c.height*w.to.y,outerWidth:c.width*w.to.x},w.from.y!==w.to.y&&(d.from=b.effects.setTransition(d,J,w.from.y,d.from),d.to=b.effects.setTransition(d,J,w.to.y,d.to)),w.from.x!==w.to.x&&(d.from=b.effects.setTransition(d,F,w.from.x,d.from),d.to=b.effects.setTransition(d,F,w.to.x,d.to)),d.css(d.from),d.animate(d.to,q.duration,q.easing,function(){I&&b.effects.restore(d,H)})})}A.animate(A.to,{queue:!1,duration:q.duration,easing:q.easing,complete:function(){A.to.opacity===0&&A.css("opacity",A.from.opacity),z==="hide"&&A.hide(),b.effects.restore(A,e),I||(G==="static"?A.css({position:"relative",top:A.to.top,left:A.to.left}):b.each(["top","left"],function(d,c){A.css(c,function(g,l){var h=parseInt(l,10),f=d?A.to.left:A.to.top;return l==="auto"?f+"px":h+f+"px"})})),b.effects.removeWrapper(A),B()}})}})(jQuery);(function(b,a){b.effects.effect.shake=function(q,B){var x=b(this),E=["position","top","bottom","left","right","height","width"],w=b.effects.setMode(x,q.mode||"effect"),A=q.direction||"left",k=q.distance||20,K=q.times||3,H=K*2+1,D=Math.round(q.duration/H),J=A==="up"||A==="down"?"top":"left",F=A==="up"||A==="left",z={},I={},j={},C,G=x.queue(),e=G.length;b.effects.save(x,E),x.show(),b.effects.createWrapper(x),z[J]=(F?"-=":"+=")+k,I[J]=(F?"+=":"-=")+k*2,j[J]=(F?"-=":"+=")+k*2,x.animate(z,D,q.easing);for(C=1;C<K;C++){x.animate(I,D,q.easing).animate(j,D,q.easing)}x.animate(I,D,q.easing).animate(z,D/2,q.easing).queue(function(){w==="hide"&&x.hide(),b.effects.restore(x,E),b.effects.removeWrapper(x),B()}),e>1&&G.splice.apply(G,[1,0].concat(G.splice(e,H+1))),x.dequeue()}})(jQuery);(function(b,a){b.effects.effect.slide=function(v,g){var d=b(this),j=["position","top","bottom","left","right","width","height"],w=b.effects.setMode(d,v.mode||"show"),e=w==="show",q=v.direction||"left",p=q==="up"||q==="down"?"top":"left",k=q==="up"||q==="left",h,m={};b.effects.save(d,j),d.show(),h=v.distance||d[p==="top"?"outerHeight":"outerWidth"](!0),b.effects.createWrapper(d).css({overflow:"hidden"}),e&&d.css(p,k?isNaN(h)?"-"+h:-h:h),m[p]=(e?k?"+=":"-=":k?"-=":"+=")+h,d.animate(m,{queue:!1,duration:v.duration,easing:v.easing,complete:function(){w==="hide"&&d.hide(),b.effects.restore(d,j),b.effects.removeWrapper(d),g()}})}})(jQuery);(function(b,a){b.effects.effect.transfer=function(x,g){var d=b(this),k=b(x.to),y=k.css("position")==="fixed",e=b("body"),w=y?e.scrollTop():0,v=y?e.scrollLeft():0,p=k.offset(),j={top:p.top-w,left:p.left-v,height:k.innerHeight(),width:k.innerWidth()},q=d.offset(),m=b('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(x.className).css({top:q.top-w,left:q.left-v,height:d.innerHeight(),width:d.innerWidth(),position:y?"fixed":"absolute"}).animate(j,x.duration,x.easing,function(){m.remove(),g()})}})(jQuery);
;
/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jrn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){if(b&&b.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(d){if(c.settings.submitHandler){c.submitButton=d.target}if(a(d.target).hasClass("cancel")){c.cancelSubmit=true}if(a(d.target).attr("formnovalidate")!==undefined){c.cancelSubmit=true}});this.submit(function(d){if(c.settings.debug){d.preventDefault()}function e(){var f;if(c.settings.submitHandler){if(c.submitButton){f=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm,d);if(c.submitButton){f.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return e()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return e()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c=c&&b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var i=d.rules;var j=a.validator.staticRules(g);switch(e){case"add":a.extend(j,a.validator.normalizeRule(b));delete j.messages;i[g.name]=j;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete i[g.name];return j}var h={};a.each(b.split(/\s/),function(k,l){h[l]=j[l];delete j[l]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.classRules(g),a.validator.attributeRules(g),a.validator.dataRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length===1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!==Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!==Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(c.which===9&&this.elementValue(b)===""){return}else{if(b.name in this.submitted||b===this.lastElement){this.element(b)}}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){if(typeof f==="string"){f=f.split(/\s/)}a.each(f,function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");if(f.settings[e]){f.settings[e].call(f,this[0],g)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c)!==false;if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name===b.name}).length===1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&c.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();if(c==="radio"||c==="checkbox"){return a("input[name='"+a(b).attr("name")+"']:checked").val()}if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(c){c=this.validationTargetFor(this.clean(c));var i=a(c).rules();var d=false;var h=this.elementValue(c);var b;for(var j in i){var g={method:j,parameters:i[j]};try{b=a.validator.methods[j].call(this,h,c,g.parameters);if(b==="dependency-mismatch"){d=true;continue}d=false;if(b==="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+c.id+", check the '"+g.method+"' method.",f)}throw f}}if(d){return}if(this.objectLength(i)){this.successList.push(c)}return true},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||(b.attributes&&a(b).attr("data-msg-"+c.toLowerCase()))},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor===String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d==="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=a.validator.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){var c,d;for(c=0;this.errorList[c];c++){var b=this.errorList[c];if(this.settings.highlight){this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.html(d)}else{b=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){if(this.settings.errorPlacement){this.settings.errorPlacement(b,a(c))}else{b.insertAfter(c)}}}if(!d&&this.settings.success){b.text("");if(typeof this.settings.success==="string"){b.addClass(this.settings.success)}else{this.settings.success(b,c)}}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")===b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return(/radio|checkbox/i).test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){if(b.constructor===String){this.classRuleSettings[b]=c}else{a.extend(this.classRuleSettings,b)}},classRules:function(c){var d={};var b=a(c).attr("class");if(b){a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}})}return d},attributeRules:function(c){var f={};var b=a(c);var d=b[0].getAttribute("type");for(var g in a.validator.methods){var e;if(g==="required"){e=b.get(0).getAttribute(g);if(e===""){e=true}e=!!e}else{e=b.attr(g)}if(/min|max/.test(g)&&(d===null||/number|range|text/.test(d))){e=Number(e)}if(e){f[g]=e}else{if(d===g&&d!=="range"){f[g]=true}}}if(f.maxlength&&/-1|2147483647|524288/.test(f.maxlength)){delete f.maxlength}return f},dataRules:function(c){var f,d,e={},b=a(c);for(f in a.validator.methods){d=b.data("rule-"+f.toLowerCase());if(d!==undefined){e[f]=d}}return e},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){var d;if(c[this]){if(a.isArray(c[this])){c[this]=[Number(c[this][0]),Number(c[this][1])]}else{if(typeof c[this]==="string"){d=c[this].split(/[\s,]+/);c[this]=[Number(d[0]),Number(d[1])]}}}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}return c},normalizeRule:function(c){if(typeof c==="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!==undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}if(b.nodeName.toLowerCase()==="select"){var d=a(b).val();return d&&d.length>0}if(this.checkable(b)){return this.getLength(c,b)>0}return a.trim(c).length>0},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c).toString())},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)===0},minlength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c>=e},maxlength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||c<=e},rangelength:function(d,b,e){var c=a.isArray(d)?d.length:this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},equalTo:function(c,b,e){var d=a(e);if(this.settings.onfocusout){d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()})}return c===d.val()},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g==="string"&&{url:g}||g;if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(i){b.settings.messages[c.name].remote=d.originalMessage;var k=i===true||i==="true";if(k){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);delete b.invalid[c.name];b.showErrors()}else{var l={};var j=i||b.defaultMessage(c,"remote");l[c.name]=d.message=a.isFunction(j)?j(f):j;b.invalid[c.name]=true;b.showErrors(l)}d.valid=k;b.stopRequest(c,k)}},g));return"pending"}}});a.format=a.validator.format}(jQuery));(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode==="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f==="abort"){if(a[d]){a[d].abort()}a[d]=b.apply(this,arguments);return a[d]}return b.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})}(jQuery));
;
I18nLoader.load("/resources/pt/js/global");I18nLoader.load("/resources/validate/js/messages");$(function(){jQuery.validator.addMethod("isIntEqZero",function(c,b){c=parseInt(c);return this.optional(b)||c==0},"0");jQuery.validator.addMethod("isIntGtZero",function(c,b){c=parseInt(c);return this.optional(b)||c>0},"0");jQuery.validator.addMethod("isIntGteZero",function(c,b){c=parseInt(c);return this.optional(b)||c>=0},"0");jQuery.validator.addMethod("isIntNEqZero",function(c,b){c=parseInt(c);return this.optional(b)||c!=0},"0");jQuery.validator.addMethod("isIntLtZero",function(c,b){c=parseInt(c);return this.optional(b)||c<0},"0");jQuery.validator.addMethod("isIntLteZero",function(c,b){c=parseInt(c);return this.optional(b)||c<=0},"0");jQuery.validator.addMethod("isFloatEqZero",function(c,b){c=parseFloat(c);return this.optional(b)||c==0},"0");jQuery.validator.addMethod("isFloatGtZero",function(c,b){c=parseFloat(c);return this.optional(b)||c>0},"0");jQuery.validator.addMethod("isFloatGteZero",function(c,b){c=parseFloat(c);return this.optional(b)||c>=0},"0");jQuery.validator.addMethod("isFloatNEqZero",function(c,b){c=parseFloat(c);return this.optional(b)||c!=0},"0");jQuery.validator.addMethod("isFloatLtZero",function(c,b){c=parseFloat(c);return this.optional(b)||c<0},"0");jQuery.validator.addMethod("isFloatLteZero",function(c,b){c=parseFloat(c);return this.optional(b)||c<=0},"0");jQuery.validator.addMethod("isFloat",function(c,b){return this.optional(b)||/^[-\+]?\d+(\.\d+)?$/.test(c)},"");jQuery.validator.addMethod("isInteger",function(c,b){console.log(c);return this.optional(b)||(/^[-\+]?\d+$/.test(c))},"integer");jQuery.validator.addMethod("isNegative",function(c,b){console.log(c);return this.optional(b)||(/^[-\+]?\d+$/.test(c)&&parseInt(c)<0)},"integer");jQuery.validator.addMethod("isPositive",function(c,b){console.log(c);return this.optional(b)||(/^[-\+]?\d+$/.test(c)&&parseInt(c)>=0)},"integer");jQuery.validator.addMethod("isURL",function(d,c){var b="[a-zA-z]+://[^s]*";return this.optional(c)||(b.test(d))},"url");jQuery.validator.addMethod("isNumber",function(c,b){return this.optional(b)||/^[-\+]?\d+$/.test(c)||/^[-\+]?\d+(\.\d+)?$/.test(c)},"");jQuery.validator.addMethod("isDigits",function(c,b){return this.optional(b)||/^\d+$/.test(c)},"0-9");jQuery.validator.addMethod("isChinese",function(c,b){return this.optional(b)||/^[\u0391-\uFFE5]+$/.test(c)},"");jQuery.validator.addMethod("isEnglish",function(c,b){return this.optional(b)||/^[A-Za-z]+$/.test(c)},"");jQuery.validator.addMethod("isMobile",function(d,b){var c=d.length;return this.optional(b)||(c==11&&/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(d))},"");jQuery.validator.addMethod("isPhone",function(d,c){var b=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(c)||(b.test(d))},"");jQuery.validator.addMethod("isTel",function(f,d){var e=f.length;var c=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;var b=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(d)||b.test(f)||(e==11&&c.test(f))},"");jQuery.validator.addMethod("isQq",function(c,b){return this.optional(b)||/^[1-9]\d{4,12}$/},"QQ");jQuery.validator.addMethod("isZipCode",function(d,b){var c=/^[0-9]{6}$/;return this.optional(b)||(c.test(d))},"");jQuery.validator.addMethod("isPwd",function(c,b){return this.optional(b)||/^[a-zA-Z]\\w{6,12}$/.test(c)},"6-12");jQuery.validator.addMethod("isIdCardNo",function(c,b){return this.optional(b)||a(c)},"");jQuery.validator.addMethod("ip",function(c,b){return this.optional(b)||/^(([1-9]|([1-9]\d)|(1\d\d)|(2([0-4]\d|5[0-5])))\.)(([1-9]|([1-9]\d)|(1\d\d)|(2([0-4]\d|5[0-5])))\.){2}([1-9]|([1-9]\d)|(1\d\d)|(2([0-4]\d|5[0-5])))$/.test(c)},"IP");jQuery.validator.addMethod("stringCheck",function(c,b){return this.optional(b)||/^[a-zA-Z0-9\u4e00-\u9fa5-_]+$/.test(c)},"");jQuery.validator.addMethod("isEnglish",function(c,b){return this.optional(b)||/^[A-Za-z]+$/.test(c)},"english");jQuery.validator.addMethod("isChinese",function(c,b){return this.optional(b)||/^[\u4e00-\u9fa5]+$/.test(c)},"");jQuery.validator.addMethod("isChineseChar",function(c,b){return this.optional(b)||/^[\u0391-\uFFE5]+$/.test(c)},"() ");jQuery.validator.addMethod("isRightfulString",function(c,b){return this.optional(b)||/^[A-Za-z0-9_-]+$/.test(c)},"(a-zA-Z0-9-_)");jQuery.validator.addMethod("isContainsSpecialChar",function(d,b){var c=RegExp(/[(\ )(\`)(\~)(\!)(\@)(\#)(\$)(\%)(\^)(\&)(\*)(\()(\))(\+)(\=)(\|)(\{)(\})(\')(\:)(\;)(\')(',)(\[)(\])(\.)(\<)(\>)(\/)(\?)(\~)(\)(\@)(\#)(\)(\%)(\)(\&)(\*)(\)(\)(\)(\+)(\|)(\{)(\})(\)(\)(\)(\)(\)(\)(\)(\)(\)(\)(\)(\)]+/);return this.optional(b)||!c.test(d)},"");function a(d){var b=d.length,e;if(b==15){e=new RegExp(/^(\d{6})()?(\d{2})(\d{2})(\d{2})(\d{2})(\w)$/)}else{if(b==18){e=new RegExp(/^(\d{6})()?(\d{4})(\d{2})(\d{2})(\d{3})(\w)$/)}else{return false}}var c=d.match(e);if(c!=null){if(b==15){var f=new Date("19"+c[3]+"/"+c[4]+"/"+c[5]);var g=f.getYear()==c[3]&&(f.getMonth()+1)==c[4]&&f.getDate()==c[5]}else{var f=new Date(c[3]+"/"+c[4]+"/"+c[5]);var g=f.getFullYear()==c[3]&&(f.getMonth()+1)==c[4]&&f.getDate()==c[5]}if(!g){return false}}if(!e.test(d)){return false}return true}});
;
function UUID(){this.id=this.createUUID()}UUID.prototype.valueOf=function(){return this.id};UUID.prototype.toString=function(){return this.id};UUID.prototype.createUUID=function(){var c=new Date(1582,10,15,0,0,0,0);var f=new Date();var h=f.getTime()-c.getTime();var i=UUID.getIntegerBits(h,0,31);var g=UUID.getIntegerBits(h,32,47);var e=UUID.getIntegerBits(h,48,59)+"1";var b=UUID.getIntegerBits(UUID.rand(4095),0,7);var d=UUID.getIntegerBits(UUID.rand(4095),0,7);var a=UUID.getIntegerBits(UUID.rand(8191),0,7)+UUID.getIntegerBits(UUID.rand(8191),8,15)+UUID.getIntegerBits(UUID.rand(8191),0,7)+UUID.getIntegerBits(UUID.rand(8191),8,15)+UUID.getIntegerBits(UUID.rand(8191),0,15);return i+g+e+b+d+a};UUID.getIntegerBits=function(f,g,b){var a=UUID.returnBase(f,16);var d=new Array();var e="";var c=0;for(c=0;c<a.length;c++){d.push(a.substring(c,c+1))}for(c=Math.floor(g/4);c<=Math.floor(b/4);c++){if(!d[c]||d[c]==""){e+="0"}else{e+=d[c]}}return e};UUID.returnBase=function(a,b){return(a).toString(b).toUpperCase()};UUID.rand=function(a){return Math.floor(Math.random()*(a+1))};
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a)}else{a(window.jQuery)}}(function(a){a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled"));a.support.xhrFileUpload=!!(window.XMLHttpRequestUpload&&window.FileReader);a.support.xhrFormDataFileUpload=!!window.FormData;a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(c,b){c=this.messages[c]||c.toString();if(b){a.each(b,function(d,e){c=c.replace("{"+d+"}",e)})}return c},formData:function(b){return b.serializeArray()},add:function(c,b){if(b.autoUpload||(b.autoUpload!==false&&a(this).fileupload("option","autoUpload"))){b.process().done(function(){b.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var b=this.slice||this.webkitSlice||this.mozSlice;return b.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(d,c,b){var e=d-this.timestamp;if(!this.bitrate||!b||e>b){this.bitrate=(c-this.loaded)*(1000/e)*8;this.loaded=c;this.timestamp=d}return this.bitrate}},_isXHRUpload:function(b){return !b.forceIframeTransport&&((!b.multipart&&a.support.xhrFileUpload)||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;if(typeof b.formData==="function"){return b.formData(b.form)}if(a.isArray(b.formData)){return b.formData}if(a.type(b.formData)==="object"){c=[];a.each(b.formData,function(d,e){c.push({name:d,value:e})});return c}return[]},_getTotal:function(c){var b=0;a.each(c,function(d,e){b+=e.size||1});return b},_initProgressObject:function(c){var b={loaded:0,total:0,bitrate:0};if(c._progress){a.extend(c._progress,b)}else{c._progress=b}},_initResponseObject:function(b){var c;if(b._response){for(c in b._response){if(b._response.hasOwnProperty(c)){delete b._response[c]}}}else{b._response={}}},_onProgress:function(f,d){if(f.lengthComputable){var c=((Date.now)?Date.now():(new Date()).getTime()),b;if(d._time&&d.progressInterval&&(c-d._time<d.progressInterval)&&f.loaded!==f.total){return}d._time=c;b=Math.floor(f.loaded/f.total*(d.chunkSize||d._progress.total))+(d.uploadedBytes||0);this._progress.loaded+=(b-d._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,d.bitrateInterval);d._progress.loaded=d.loaded=b;d._progress.bitrate=d.bitrate=d._bitrateTimer.getBitrate(c,b,d.bitrateInterval);this._trigger("progress",f,d);this._trigger("progressall",f,this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload){a(d.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;c._onProgress(f,b)});b.xhr=function(){return d}}},_isInstanceOf:function(b,c){return Object.prototype.toString.call(c)==="[object "+b+"]"},_initXHRData:function(c){var e=this,g,d=c.files[0],b=c.multipart||!a.support.xhrFileUpload,f=c.paramName[0];c.headers=c.headers||{};if(c.contentRange){c.headers["Content-Range"]=c.contentRange}if(!b||c.blob||!this._isInstanceOf("File",d)){c.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"'}if(!b){c.contentType=d.type;c.data=c.blob||d}else{if(a.support.xhrFormDataFileUpload){if(c.postMessage){g=this._getFormData(c);if(c.blob){g.push({name:f,value:c.blob})}else{a.each(c.files,function(h,i){g.push({name:c.paramName[h]||f,value:i})})}}else{if(e._isInstanceOf("FormData",c.formData)){g=c.formData}else{g=new FormData();a.each(this._getFormData(c),function(h,i){g.append(i.name,i.value)})}if(c.blob){g.append(f,c.blob,d.name)}else{a.each(c.files,function(h,i){if(e._isInstanceOf("File",i)||e._isInstanceOf("Blob",i)){g.append(c.paramName[h]||f,i,i.name)}})}}c.data=g}}c.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||"");b.formData=this._getFormData(b);if(b.redirect&&c&&c!==location.host){b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})}},_initDataSettings:function(b){if(this._isXHRUpload(b)){if(!this._chunkedUpload(b,true)){if(!b.data){this._initXHRData(b)}this._initProgressListener(b)}if(b.postMessage){b.dataType="postmessage "+(b.dataType||"")}}else{this._initIframeSettings(b)}},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;if(!d){d=[];c.each(function(){var e=a(this),f=e.prop("name")||"files[]",g=(e.prop("files")||[1]).length;while(g){d.push(f);g-=1}});if(!d.length){d=[c.prop("name")||"files[]"]}}else{if(!a.isArray(d)){d=[d]}}return d},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop("form"));if(!b.form.length){b.form=a(this.options.fileInput.prop("form"))}}b.paramName=this._getParamName(b);if(!b.url){b.url=b.form.prop("action")||location.href}b.type=(b.type||b.form.prop("method")||"").toUpperCase();if(b.type!=="POST"&&b.type!=="PUT"&&b.type!=="PATCH"){b.type="POST"}if(!b.formAcceptCharset){b.formAcceptCharset=b.form.attr("accept-charset")}},_getAJAXSettings:function(c){var b=a.extend({},this.options,c);this._initFormSettings(b);this._initDataSettings(b);return b},_getDeferredState:function(b){if(b.state){return b.state()}if(b.isResolved()){return"resolved"}if(b.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(e,d,c){var b=a.Deferred(),f=b.promise();d=d||this.options.context||f;if(e===true){b.resolveWith(d,c)}else{if(e===false){b.rejectWith(d,c)}}f.abort=b.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(f,d){var c=this,b=function(e){return a.Deferred().resolveWith(c,[e]).promise()};d.process=function(g,e){if(g||e){d._processQueue=this._processQueue=(this._processQueue||b(this)).pipe(g,e)}return this._processQueue||b(this)};d.submit=function(){if(this.state()!=="pending"){d.jqXHR=this.jqXHR=(c._trigger("submit",f,this)!==false)&&c._onSend(f,this)}return this.jqXHR||c._getXHRPromise()};d.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}return c._getXHRPromise()};d.state=function(){if(this.jqXHR){return c._getDeferredState(this.jqXHR)}if(this._processQueue){return c._getDeferredState(this._processQueue)}};d.progress=function(){return this._progress};d.response=function(){return this._response}},_getUploadedBytes:function(d){var b=d.getResponseHeader("Range"),e=b&&b.split("-"),c=e&&e.length>1&&parseInt(e[1],10);return c&&c+1},_chunkedUpload:function(m,g){m.uploadedBytes=m.uploadedBytes||0;var f=this,d=m.files[0],e=d.size,b=m.uploadedBytes,c=m.maxChunkSize||e,i=this._blobSlice,j=a.Deferred(),l=j.promise(),h,k;if(!(this._isXHRUpload(m)&&i&&(b||c<e))||m.data){return false}if(g){return true}if(b>=e){d.error=m.i18n("uploadedBytes");return this._getXHRPromise(false,m.context,[null,"error",d.error])}k=function(){var p=a.extend({},m),n=p._progress.loaded;p.blob=i.call(d,b,b+c,d.type);p.chunkSize=p.blob.size;p.contentRange="bytes "+b+"-"+(b+p.chunkSize-1)+"/"+e;f._initXHRData(p);f._initProgressListener(p);h=((f._trigger("chunksend",null,p)!==false&&a.ajax(p))||f._getXHRPromise(false,p.context)).done(function(o,r,q){b=f._getUploadedBytes(q)||(b+p.chunkSize);if(n+p.chunkSize-p._progress.loaded){f._onProgress(a.Event("progress",{lengthComputable:true,loaded:b-p.uploadedBytes,total:b-p.uploadedBytes}),p)}m.uploadedBytes=p.uploadedBytes=b;p.result=o;p.textStatus=r;p.jqXHR=q;f._trigger("chunkdone",null,p);f._trigger("chunkalways",null,p);if(b<e){k()}else{j.resolveWith(p.context,[o,r,q])}}).fail(function(o,r,q){p.jqXHR=o;p.textStatus=r;p.errorThrown=q;f._trigger("chunkfail",null,p);f._trigger("chunkalways",null,p);j.rejectWith(p.context,[o,r,q])})};this._enhancePromise(l);l.abort=function(){return h.abort()};k();return l},_beforeSend:function(c,b){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(b,g,f,d){var e=d._progress.total,c=d._response;if(d._progress.loaded<e){this._onProgress(a.Event("progress",{lengthComputable:true,loaded:e,total:e}),d)}c.result=d.result=b;c.textStatus=d.textStatus=g;c.jqXHR=d.jqXHR=f;this._trigger("done",null,d)},_onFail:function(d,f,e,c){var b=c._response;if(c.recalculateProgress){this._progress.loaded-=c._progress.loaded;this._progress.total-=c._progress.total}b.jqXHR=c.jqXHR=d;b.textStatus=c.textStatus=f;b.errorThrown=c.errorThrown=e;this._trigger("fail",null,c)},_onAlways:function(d,e,c,b){this._trigger("always",null,b)},_onSend:function(h,f){if(!f.submit){this._addConvenienceMethods(h,f)}var g=this,j,b,i,c,k=g._getAJAXSettings(f),d=function(){g._sending+=1;k._bitrateTimer=new g._BitrateTimer();j=j||(((b||g._trigger("send",h,k)===false)&&g._getXHRPromise(false,k.context,b))||g._chunkedUpload(k)||a.ajax(k)).done(function(e,m,l){g._onDone(e,m,l,k)}).fail(function(e,m,l){g._onFail(e,m,l,k)}).always(function(m,n,l){g._onAlways(m,n,l,k);g._sending-=1;g._active-=1;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>g._sending){var e=g._slots.shift();while(e){if(g._getDeferredState(e)==="pending"){e.resolve();break}e=g._slots.shift()}}if(g._active===0){g._trigger("stop")}});return j};this._beforeSend(h,k);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){i=a.Deferred();this._slots.push(i);c=i.pipe(d)}else{this._sequence=this._sequence.pipe(d,d);c=this._sequence}c.abort=function(){b=[undefined,"abort","abort"];if(!j){if(i){i.rejectWith(k.context,b)}return d()}return j.abort()};return this._enhancePromise(c)}return d()},_onAdd:function(k,g){var j=this,n=true,m=a.extend({},this.options,g),d=m.limitMultiFileUploads,h=this._getParamName(m),c,b,l,f;if(!(m.singleFileUploads||d)||!this._isXHRUpload(m)){l=[g.files];c=[h]}else{if(!m.singleFileUploads&&d){l=[];c=[];for(f=0;f<g.files.length;f+=d){l.push(g.files.slice(f,f+d));b=h.slice(f,f+d);if(!b.length){b=h}c.push(b)}}else{c=h}}g.originalFiles=g.files;a.each(l||g.files,function(e,i){var o=a.extend({},g);o.files=l?i:[i];o.paramName=c[e];j._initResponseObject(o);j._initProgressObject(o);j._addConvenienceMethods(k,o);n=j._trigger("add",k,o);return n});return n},_replaceFileInput:function(b){var c=b.clone(true);a("<form></form>").append(c)[0].reset();b.after(c).detach();a.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(d,e){if(e===b[0]){return c[0]}return e});if(b[0]===this.element[0]){this.element=c}},_handleFileTreeEntry:function(f,g){var e=this,b=a.Deferred(),c=function(h){if(h&&!h.entry){h.entry=f}b.resolve([h])},d;g=g||"";if(f.isFile){if(f._file){f._file.relativePath=g;b.resolve(f._file)}else{f.file(function(h){h.relativePath=g;b.resolve(h)},c)}}else{if(f.isDirectory){d=f.createReader();d.readEntries(function(h){e._handleFileTreeEntries(h,g+f.name+"/").done(function(i){b.resolve(i)}).fail(c)},c)}else{b.resolve([])}}return b.promise()},_handleFileTreeEntries:function(b,d){var c=this;return a.when.apply(a,a.map(b,function(e){return c._handleFileTreeEntry(e,d)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(c){c=c||{};var b=c.items;if(b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)){return this._handleFileTreeEntries(a.map(b,function(e){var d;if(e.webkitGetAsEntry){d=e.webkitGetAsEntry();if(d){d._file=e.getAsFile()}return d}return e.getAsEntry()}))}return a.Deferred().resolve(a.makeArray(c.files)).promise()},_getSingleFileInputFiles:function(d){d=a(d);var b=d.prop("webkitEntries")||d.prop("entries"),c,e;if(b&&b.length){return this._handleFileTreeEntries(b)}c=a.makeArray(d.prop("files"));if(!c.length){e=d.prop("value");if(!e){return a.Deferred().resolve([]).promise()}c=[{name:e.replace(/^.*\\/,"")}]}else{if(c[0].name===undefined&&c[0].fileName){a.each(c,function(f,g){g.name=g.fileName;g.size=g.fileSize})}}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){if(!(b instanceof a)||b.length===1){return this._getSingleFileInputFiles(b)}return a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(d){var b=this,c={fileInput:a(d.target),form:a(d.target.form)};this._getFileInputFiles(c.fileInput).always(function(e){c.files=e;if(b.options.replaceFileInput){b._replaceFileInput(c.fileInput)}if(b._trigger("change",d,c)!==false){b._onAdd(d,c)}})},_onPaste:function(d){var b=d.originalEvent&&d.originalEvent.clipboardData&&d.originalEvent.clipboardData.items,c={files:[]};if(b&&b.length){a.each(b,function(e,g){var f=g.getAsFile&&g.getAsFile();if(f){c.files.push(f)}});if(this._trigger("paste",d,c)===false||this._onAdd(d,c)===false){return false}}},_onDrop:function(f){f.dataTransfer=f.originalEvent&&f.originalEvent.dataTransfer;var b=this,d=f.dataTransfer,c={};if(d&&d.files&&d.files.length){f.preventDefault();this._getDroppedFiles(d).always(function(e){c.files=e;if(b._trigger("drop",f,c)!==false){b._onAdd(f,c)}})}},_onDragOver:function(c){c.dataTransfer=c.originalEvent&&c.originalEvent.dataTransfer;var b=c.dataTransfer;if(b){if(this._trigger("dragover",c)===false){return false}if(a.inArray("Files",b.types)!==-1){b.dropEffect="copy";c.preventDefault()}}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(a.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=a.inArray(b,this._specialOptions)!==-1;if(d){this._destroyEventHandlers()}this._super(b,c);if(d){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(b.fileInput instanceof a)){b.fileInput=a(b.fileInput)}}if(!(b.dropZone instanceof a)){b.dropZone=a(b.dropZone)}if(!(b.pasteZone instanceof a)){b.pasteZone=a(b.pasteZone)}},_getRegExp:function(d){var c=d.split("/"),b=c.pop();c.shift();return new RegExp(c.join("/"),b)},_isRegExpOption:function(b,c){return b!=="url"&&a.type(c)==="string"&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var c=this,b=this.options;a.each(a(this.element[0].cloneNode(false)).data(),function(d,e){if(c._isRegExpOption(d,e)){e=c._getRegExp(e)}b[d]=e})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(c){var b=this;if(!c||this.options.disabled){return}if(c.fileInput&&!c.files){this._getFileInputFiles(c.fileInput).always(function(d){c.files=d;b._onAdd(null,c)})}else{c.files=a.makeArray(c.files);this._onAdd(null,c)}},send:function(f){if(f&&!this.options.disabled){if(f.fileInput&&!f.files){var d=this,b=a.Deferred(),g=b.promise(),c,e;g.abort=function(){e=true;if(c){return c.abort()}b.reject(null,"abort","abort");return g};this._getFileInputFiles(f.fileInput).always(function(h){if(e){return}f.files=h;c=d._onSend(null,f).then(function(i,k,j){b.resolve(i,k,j)},function(i,k,j){b.reject(i,k,j)})});return this._enhancePromise(g)}f.files=a.makeArray(f.files);if(f.files.length){return this._onSend(null,f)}}return this._getXHRPromise(false,f&&f.context)}})}));
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(b){var a=0;b.ajaxTransport("iframe",function(c){if(c.async){var e,d,f;return{send:function(g,h){e=b('<form style="display:none;"></form>');e.attr("accept-charset",c.formAcceptCharset);f=/\?/.test(c.url)?"&":"?";if(c.type==="DELETE"){c.url=c.url+f+"_method=DELETE";c.type="POST"}else{if(c.type==="PUT"){c.url=c.url+f+"_method=PUT";c.type="POST"}else{if(c.type==="PATCH"){c.url=c.url+f+"_method=PATCH";c.type="POST"}}}a+=1;d=b('<iframe src="javascript:false;" name="iframe-transport-'+a+'"></iframe>').bind("load",function(){var i,j=b.isArray(c.paramName)?c.paramName:[c.paramName];d.unbind("load").bind("load",function(){var k;try{k=d.contents();if(!k.length||!k[0].firstChild){throw new Error()}}catch(l){k=undefined}h(200,"success",{iframe:k});b('<iframe src="javascript:false;"></iframe>').appendTo(e);window.setTimeout(function(){e.remove()},0)});e.prop("target",d.prop("name")).prop("action",c.url).prop("method",c.type);if(c.formData){b.each(c.formData,function(k,l){b('<input type="hidden"/>').prop("name",l.name).val(l.value).appendTo(e)})}if(c.fileInput&&c.fileInput.length&&c.type==="POST"){i=c.fileInput.clone();c.fileInput.after(function(k){return i[k]});if(c.paramName){c.fileInput.each(function(k){b(this).prop("name",j[k]||c.paramName)})}e.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")}e.submit();if(i&&i.length){c.fileInput.each(function(l,k){var m=b(i[l]);b(k).prop("name",m.prop("name"));m.replaceWith(k)})}});e.append(d).appendTo(document.body)},abort:function(){if(d){d.unbind("load").prop("src","javascript".concat(":false;"))}if(e){e.remove()}}}}});b.ajaxSetup({converters:{"iframe text":function(c){return c&&b(c[0].body).text()},"iframe json":function(c){return c&&b.parseJSON(b(c[0].body).text())},"iframe html":function(c){return c&&b(c[0].body).html()},"iframe xml":function(c){var d=c&&c[0];return d&&b.isXMLDoc(d)?d:b.parseXML((d.XMLDocument&&d.XMLDocument.xml)||b(d.body).html())},"iframe script":function(c){return c&&b.globalEval(b(c[0].body).text())}}})}));
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],a)}else{a(window.jQuery)}}(function(a){var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(f,c){var d=a(this);c.process(function(){return d.fileupload("process",c)});b.call(this,f,c)}},processActions:{},_processFile:function(f){var e=this,c=a.Deferred().resolveWith(e,[f]),d=c.promise();this._trigger("process",null,f);a.each(f.processQueue,function(g,h){var j=function(i){return e.processActions[h.action].call(e,i,h)};d=d.pipe(j,h.always&&j)});d.done(function(){e._trigger("processdone",null,f);e._trigger("processalways",null,f)}).fail(function(){e._trigger("processfail",null,f);e._trigger("processalways",null,f)});return d},_transformProcessQueue:function(c){var d=[];a.each(c.processQueue,function(){var e={},g=this.action,f=this.prefix===true?g:this.prefix;a.each(this,function(h,i){if(a.type(i)==="string"&&i.charAt(0)==="@"){e[h]=c[i.slice(1)||(f?f+h.charAt(0).toUpperCase()+h.slice(1):h)]}else{e[h]=i}});d.push(e)});c.processQueue=d},processing:function(){return this._processing},process:function(e){var d=this,c=a.extend({},this.options,e);if(c.processQueue&&c.processQueue.length){this._transformProcessQueue(c);if(this._processing===0){this._trigger("processstart")}a.each(e.files,function(f){var h=f?a.extend({},c):c,g=function(){return d._processFile(h)};h.index=f;d._processing+=1;d._processingQueue=d._processingQueue.pipe(g,g).always(function(){d._processing-=1;if(d._processing===0){d._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=a.Deferred().resolveWith(this).promise()}})}));
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],a)}else{a(window.jQuery,window.loadImage)}}(function(a,b){a.widget("blueimpFP.fileupload",a.blueimp.fileupload,{options:{process:[],add:function(d,c){a(this).fileupload("process",c).done(function(){c.submit()})}},processActions:{load:function(g,d){var f=this,e=g.files[g.index],c=a.Deferred();if(window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&(a.type(d.maxFileSize)!=="number"||e.size<d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(e.type))){b(e,function(h){g.canvas=h;c.resolveWith(f,[g])},{canvas:true})}else{c.rejectWith(f,[g])}return c.promise()},resize:function(e,d){if(e.canvas){var c=b.scale(e.canvas,d);if(c.width!==e.canvas.width||c.height!==e.canvas.height){e.canvas=c;e.processed=true}}return e},save:function(h,e){if(!h.canvas||!h.processed){return h}var g=this,f=h.files[h.index],d=f.name,c=a.Deferred(),i=function(j){if(!j.name){if(f.type===j.type){j.name=f.name}else{if(f.name){j.name=f.name.replace(/\..+$/,"."+j.type.substr(6))}}}h.files[h.index]=j;c.resolveWith(g,[h])};if(h.canvas.mozGetAsFile){i(h.canvas.mozGetAsFile((/^image\/(jpeg|png)$/.test(f.type)&&d)||((d&&d.replace(/\..+$/,""))||"blob")+".png",f.type))}else{h.canvas.toBlob(i,f.type)}return c.promise()}},_processFile:function(h,e,d){var g=this,c=a.Deferred().resolveWith(g,[{files:h,index:e}]),f=c.promise();g._processing+=1;a.each(d.process,function(j,k){f=f.pipe(function(i){return g.processActions[k.action].call(this,i,k)})});f.always(function(){g._processing-=1;if(g._processing===0){g.element.removeClass("fileupload-processing")}});if(g._processing===1){g.element.addClass("fileupload-processing")}return f},process:function(e){var d=this,c=a.extend({},this.options,e);if(c.process&&c.process.length&&this._isXHRUpload(c)){a.each(e.files,function(f,g){d._processingQueue=d._processingQueue.pipe(function(){var h=a.Deferred();d._processFile(e.files,f,c).always(function(){h.resolveWith(d)});return h.promise()})})}return this._processingQueue},_create:function(){a.blueimp.fileupload.prototype._create.call(this);this._processing=0;this._processingQueue=a.Deferred().resolveWith(this).promise()}})}));
;
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],a)}else{a(window.jQuery,window.tmpl)}}(function(b,a,c){b.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().length},getFilesFromResponse:function(d){if(d.result&&b.isArray(d.result.files)){return d.result.files}return[]},add:function(j,h){var i=b(this),g=i.data("blueimp-fileupload")||i.data("fileupload"),d=g.options,f=h.files;h.process(function(){return i.fileupload("process",h)}).always(function(){h.context=g._renderUpload(f).data("data",h);g._renderPreviews(h);d.filesContainer[d.prependFiles?"prepend":"append"](h.context);g._forceReflow(h.context);g._transition(h.context).done(function(){if((g._trigger("added",j,h)!==false)&&(d.autoUpload||h.autoUpload)&&h.autoUpload!==false&&!h.files.error){h.submit()}})})},send:function(g,f){var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload");if(f.context&&f.dataType&&f.dataType.substr(0,6)==="iframe"){f.context.find(".progress").addClass(!b.support.transition&&"progress-animated").attr("aria-valuenow",100).find(".bar").css("width","100%")}return d._trigger("sent",g,f)},done:function(k,j){var i=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),f=j.getFilesFromResponse||i.options.getFilesFromResponse,h=f(j),g,d;if(j.context){j.context.each(function(l){var m=h[l]||{error:"Empty file upload result"},e=i._addFinishedDeferreds();i._transition(b(this)).done(function(){var n=b(this);g=i._renderDownload([m]).replaceAll(n);i._forceReflow(g);i._transition(g).done(function(){j.context=b(this);i._trigger("completed",k,j);i._trigger("finished",k,j);e.resolve()})})})}else{g=i._renderDownload(h).appendTo(i.options.filesContainer);i._forceReflow(g);d=i._addFinishedDeferreds();i._transition(g).done(function(){j.context=b(this);i._trigger("completed",k,j);i._trigger("finished",k,j);d.resolve()})}},fail:function(i,h){var g=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),f,d;if(h.context){h.context.each(function(e){if(h.errorThrown!=="abort"){var j=h.files[e];j.error=j.error||h.errorThrown||true;d=g._addFinishedDeferreds();g._transition(b(this)).done(function(){var k=b(this);f=g._renderDownload([j]).replaceAll(k);g._forceReflow(f);g._transition(f).done(function(){h.context=b(this);g._trigger("failed",i,h);g._trigger("finished",i,h);d.resolve()})})}else{d=g._addFinishedDeferreds();g._transition(b(this)).done(function(){b(this).remove();g._trigger("failed",i,h);g._trigger("finished",i,h);d.resolve()})}})}else{if(h.errorThrown!=="abort"){h.context=g._renderUpload(h.files).appendTo(g.options.filesContainer).data("data",h);g._forceReflow(h.context);d=g._addFinishedDeferreds();g._transition(h.context).done(function(){h.context=b(this);g._trigger("failed",i,h);g._trigger("finished",i,h);d.resolve()})}else{g._trigger("failed",i,h);g._trigger("finished",i,h);g._addFinishedDeferreds().resolve()}}},progress:function(g,f){if(f.context){var d=Math.floor(f.loaded/f.total*100);f.context.find(".progress").attr("aria-valuenow",d).find(".bar").css("width",d+"%")}},progressall:function(i,g){var h=b(this),f=Math.floor(g.loaded/g.total*100),d=h.find(".fileupload-progress"),j=d.find(".progress-extended");if(j.length){j.html((h.data("blueimp-fileupload")||h.data("fileupload"))._renderExtendedProgress(g))}d.find(".progress").attr("aria-valuenow",f).find(".bar").css("width",f+"%")},start:function(f){var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload");d._resetFinishedDeferreds();d._transition(b(this).find(".fileupload-progress")).done(function(){d._trigger("started",f)})},stop:function(g){var f=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d=f._addFinishedDeferreds();b.when.apply(b,f._getFinishedDeferreds()).done(function(){f._trigger("stopped",g)});f._transition(b(this).find(".fileupload-progress")).done(function(){b(this).find(".progress").attr("aria-valuenow","0").find(".bar").css("width","0%");b(this).find(".progress-extended").html("&nbsp;");d.resolve()})},processstart:function(){b(this).addClass("fileupload-processing")},processstop:function(){b(this).removeClass("fileupload-processing")},destroy:function(g,f){var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),h=function(){d._transition(f.context).done(function(){b(this).remove();d._trigger("destroyed",g,f)})};if(f.url){b.ajax(f).done(h)}else{h()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(d){if(!d){d=b.Deferred()}this._finishedUploads.push(d);return d},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var g=b(this),e=g.prop("href"),d=g.prop("download"),f="application/octet-stream";g.bind("dragstart",function(h){try{h.originalEvent.dataTransfer.setData("DownloadURL",[f,d,e].join(":"))}catch(i){}})},_formatFileSize:function(d){if(typeof d!=="number"){return""}if(d>=1000000000){return(d/1000000000).toFixed(2)+" GB"}if(d>=1000000){return(d/1000000).toFixed(2)+" MB"}return(d/1000).toFixed(2)+" KB"},_formatBitrate:function(d){if(typeof d!=="number"){return""}if(d>=1000000000){return(d/1000000000).toFixed(2)+" Gbit/s"}if(d>=1000000){return(d/1000000).toFixed(2)+" Mbit/s"}if(d>=1000){return(d/1000).toFixed(2)+" kbit/s"}return d.toFixed(2)+" bit/s"},_formatTime:function(e){var d=new Date(e*1000),f=Math.floor(e/86400);f=f?f+"d ":"";return f+("0"+d.getUTCHours()).slice(-2)+":"+("0"+d.getUTCMinutes()).slice(-2)+":"+("0"+d.getUTCSeconds()).slice(-2)},_formatPercentage:function(d){return(d*100).toFixed(2)+" %"},_renderExtendedProgress:function(d){return this._formatBitrate(d.bitrate)+" | "+this._formatTime((d.total-d.loaded)*8/d.bitrate)+" | "+this._formatPercentage(d.loaded/d.total)+" | "+this._formatFileSize(d.loaded)+" / "+this._formatFileSize(d.total)},_renderTemplate:function(f,e){if(!f){return b()}var d=f({files:e,formatFileSize:this._formatFileSize,options:this.options});if(d instanceof b){return d}return b(this.options.templatesContainer).html(d).children()},_renderPreviews:function(d){d.context.find(".preview").each(function(e,f){b(f).append(d.files[e].preview)})},_renderUpload:function(d){return this._renderTemplate(this.options.uploadTemplate,d)},_renderDownload:function(d){return this._renderTemplate(this.options.downloadTemplate,d).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(h){h.preventDefault();var d=b(h.currentTarget),f=d.closest(".template-upload"),g=f.data("data");if(g&&g.submit&&!g.jqXHR&&g.submit()){d.prop("disabled",true)}},_cancelHandler:function(g){g.preventDefault();var d=b(g.currentTarget).closest(".template-upload"),f=d.data("data")||{};if(!f.jqXHR){f.errorThrown="abort";this._trigger("fail",g,f)}else{f.jqXHR.abort()}},_deleteHandler:function(f){f.preventDefault();var d=b(f.currentTarget);this._trigger("destroy",f,b.extend({context:d.closest(".template-download"),type:"DELETE"},d.data()))},_forceReflow:function(d){return b.support.transition&&d.length&&d[0].offsetWidth},_transition:function(e){var d=b.Deferred();if(b.support.transition&&e.hasClass("fade")&&e.is(":visible")){e.bind(b.support.transition.end,function(f){if(f.target===e[0]){e.unbind(b.support.transition.end);d.resolveWith(e)}}).toggleClass("in")}else{e.toggleClass("in");d.resolveWith(e)}return d},_initButtonBarEventHandlers:function(){var d=this.element.find(".fileupload-buttonbar"),e=this.options.filesContainer;this._on(d.find(".start"),{click:function(f){f.preventDefault();e.find(".start").click()}});this._on(d.find(".cancel"),{click:function(f){f.preventDefault();e.find(".cancel").click()}});this._on(d.find(".delete"),{click:function(f){f.preventDefault();e.find(".toggle:checked").closest(".template-download").find(".delete").click();d.find(".toggle").prop("checked",false)}});this._on(d.find(".toggle"),{change:function(f){e.find(".toggle").prop("checked",b(f.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var d=this.options;d.templatesContainer=this.document[0].createElement(d.filesContainer.prop("nodeName"));if(a){if(d.uploadTemplateId){d.uploadTemplate=a(d.uploadTemplateId)}if(d.downloadTemplateId){d.downloadTemplate=a(d.downloadTemplateId)}}},_initFilesContainer:function(){var d=this.options;if(d.filesContainer===undefined){d.filesContainer=this.element.find(".files")}else{if(!(d.filesContainer instanceof b)){d.filesContainer=b(d.filesContainer)}}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!b.support.fileInput){this._disableFileInputButton()}},enable:function(){var d=false;if(this.options.disabled){d=true}this._super();if(d){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})}));
;
(function($){var settings={},roots={},caches={},_consts={event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:true,dblClickExpand:true,expandSpeed:"fast",fontCss:{},nameIsHTML:false,selectedMulti:true,showIcon:true,showLine:true,showTitle:true},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:false,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:false,leaf:false}},async:{enable:false,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(setting){var r=data.getRoot(setting);if(!r){r={};data.setRoot(setting,r)}r[setting.data.key.children]=[];r.expandTriggerFlag=false;r.curSelectedList=[];r.noSelection=true;r.createdNodes=[];r.zId=0;r._ver=(new Date()).getTime()},_initCache=function(setting){var c=data.getCache(setting);if(!c){c={};data.setCache(setting,c)}c.nodes=[];c.doms=[]},_bindEvent=function(setting){var o=setting.treeObj,c=consts.event;o.bind(c.NODECREATED,function(event,treeId,node){tools.apply(setting.callback.onNodeCreated,[event,treeId,node])});o.bind(c.CLICK,function(event,srcEvent,treeId,node,clickFlag){tools.apply(setting.callback.onClick,[srcEvent,treeId,node,clickFlag])});o.bind(c.EXPAND,function(event,treeId,node){tools.apply(setting.callback.onExpand,[event,treeId,node])});o.bind(c.COLLAPSE,function(event,treeId,node){tools.apply(setting.callback.onCollapse,[event,treeId,node])});o.bind(c.ASYNC_SUCCESS,function(event,treeId,node,msg){tools.apply(setting.callback.onAsyncSuccess,[event,treeId,node,msg])});o.bind(c.ASYNC_ERROR,function(event,treeId,node,XMLHttpRequest,textStatus,errorThrown){tools.apply(setting.callback.onAsyncError,[event,treeId,node,XMLHttpRequest,textStatus,errorThrown])})},_unbindEvent=function(setting){var o=setting.treeObj,c=consts.event;o.unbind(c.NODECREATED).unbind(c.CLICK).unbind(c.EXPAND).unbind(c.COLLAPSE).unbind(c.ASYNC_SUCCESS).unbind(c.ASYNC_ERROR)},_eventProxy=function(event){var target=event.target,setting=data.getSetting(event.data.treeId),tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if(tools.eqs(event.type,"mousedown")){treeEventType="mousedown"}else{if(tools.eqs(event.type,"mouseup")){treeEventType="mouseup"}else{if(tools.eqs(event.type,"contextmenu")){treeEventType="contextmenu"}else{if(tools.eqs(event.type,"click")){if(tools.eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.SWITCH)!==null){tId=($(target).parent("li").get(0)||$(target).parentsUntil("li").parent().get(0)).id;nodeEventType="switchNode"}else{tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=($(tmp).parent("li").get(0)||$(tmp).parentsUntil("li").parent().get(0)).id;nodeEventType="clickNode"}}}else{if(tools.eqs(event.type,"dblclick")){treeEventType="dblclick";tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=($(tmp).parent("li").get(0)||$(tmp).parentsUntil("li").parent().get(0)).id;nodeEventType="switchNode"}}}}}}if(treeEventType.length>0&&tId.length==0){tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=($(tmp).parent("li").get(0)||$(tmp).parentsUntil("li").parent().get(0)).id}}if(tId.length>0){node=data.getNodeCache(setting,tId);switch(nodeEventType){case"switchNode":if(!node.isParent){nodeEventType=""}else{if(tools.eqs(event.type,"click")||(tools.eqs(event.type,"dblclick")&&tools.apply(setting.view.dblClickExpand,[setting.treeId,node],setting.view.dblClickExpand))){nodeEventCallback=handler.onSwitchNode}else{nodeEventType=""}}break;case"clickNode":nodeEventCallback=handler.onClickNode;break}}switch(treeEventType){case"mousedown":treeEventCallback=handler.onZTreeMousedown;break;case"mouseup":treeEventCallback=handler.onZTreeMouseup;break;case"dblclick":treeEventCallback=handler.onZTreeDblclick;break;case"contextmenu":treeEventCallback=handler.onZTreeContextmenu;break}var proxyResult={stop:false,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_initNode=function(setting,level,n,parentNode,isFirstNode,isLastNode,openFlag){if(!n){return}var r=data.getRoot(setting),childKey=setting.data.key.children;n.level=level;n.tId=setting.treeId+"_"+(++r.zId);n.parentTId=parentNode?parentNode.tId:null;if(n[childKey]&&n[childKey].length>0){if(typeof n.open=="string"){n.open=tools.eqs(n.open,"true")}n.open=!!n.open;n.isParent=true;n.zAsync=true}else{n.open=false;if(typeof n.isParent=="string"){n.isParent=tools.eqs(n.isParent,"true")}n.isParent=!!n.isParent;n.zAsync=!n.isParent}n.isFirstNode=isFirstNode;n.isLastNode=isLastNode;n.getParentNode=function(){return data.getNodeCache(setting,n.parentTId)};n.getPreNode=function(){return data.getPreNode(setting,n)};n.getNextNode=function(){return data.getNextNode(setting,n)};n.isAjaxing=false;data.fixPIdKeyValue(setting,n)},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(setting,node){data.getCache(setting).nodes[data.getNodeCacheId(node.tId)]=node},getNodeCacheId:function(tId){return tId.substring(tId.lastIndexOf("_")+1)},addAfterA:function(afterA){_init.afterA.push(afterA)},addBeforeA:function(beforeA){_init.beforeA.push(beforeA)},addInnerAfterA:function(innerAfterA){_init.innerAfterA.push(innerAfterA)},addInnerBeforeA:function(innerBeforeA){_init.innerBeforeA.push(innerBeforeA)},addInitBind:function(bindEvent){_init.bind.push(bindEvent)},addInitUnBind:function(unbindEvent){_init.unbind.push(unbindEvent)},addInitCache:function(initCache){_init.caches.push(initCache)},addInitNode:function(initNode){_init.nodes.push(initNode)},addInitProxy:function(initProxy){_init.proxys.push(initProxy)},addInitRoot:function(initRoot){_init.roots.push(initRoot)},addNodesData:function(setting,parentNode,nodes){var childKey=setting.data.key.children;if(!parentNode[childKey]){parentNode[childKey]=[]}if(parentNode[childKey].length>0){parentNode[childKey][parentNode[childKey].length-1].isLastNode=false;view.setNodeLineIcos(setting,parentNode[childKey][parentNode[childKey].length-1])}parentNode.isParent=true;parentNode[childKey]=parentNode[childKey].concat(nodes)},addSelectedNode:function(setting,node){var root=data.getRoot(setting);if(!data.isSelectedNode(setting,node)){root.curSelectedList.push(node)}},addCreatedNode:function(setting,node){if(!!setting.callback.onNodeCreated||!!setting.view.addDiyDom){var root=data.getRoot(setting);root.createdNodes.push(node)}},addZTreeTools:function(zTreeTools){_init.zTreeTools.push(zTreeTools)},exSetting:function(s){$.extend(true,_setting,s)},fixPIdKeyValue:function(setting,node){if(setting.data.simpleData.enable){node[setting.data.simpleData.pIdKey]=node.parentTId?node.getParentNode()[setting.data.simpleData.idKey]:setting.data.simpleData.rootPId}},getAfterA:function(setting,node,array){for(var i=0,j=_init.afterA.length;i<j;i++){_init.afterA[i].apply(this,arguments)}},getBeforeA:function(setting,node,array){for(var i=0,j=_init.beforeA.length;i<j;i++){_init.beforeA[i].apply(this,arguments)}},getInnerAfterA:function(setting,node,array){for(var i=0,j=_init.innerAfterA.length;i<j;i++){_init.innerAfterA[i].apply(this,arguments)}},getInnerBeforeA:function(setting,node,array){for(var i=0,j=_init.innerBeforeA.length;i<j;i++){_init.innerBeforeA[i].apply(this,arguments)}},getCache:function(setting){return caches[setting.treeId]},getNextNode:function(setting,node){if(!node){return null}var childKey=setting.data.key.children,p=node.parentTId?node.getParentNode():data.getRoot(setting);for(var i=0,l=p[childKey].length-1;i<=l;i++){if(p[childKey][i]===node){return(i==l?null:p[childKey][i+1])}}return null},getNodeByParam:function(setting,nodes,key,value){if(!nodes||!key){return null}var childKey=setting.data.key.children;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){return nodes[i]}var tmp=data.getNodeByParam(setting,nodes[i][childKey],key,value);if(tmp){return tmp}}return null},getNodeCache:function(setting,tId){if(!tId){return null}var n=caches[setting.treeId].nodes[data.getNodeCacheId(tId)];return n?n:null},getNodeName:function(setting,node){var nameKey=setting.data.key.name;return""+node[nameKey]},getNodeTitle:function(setting,node){var t=setting.data.key.title===""?setting.data.key.name:setting.data.key.title;return""+node[t]},getNodes:function(setting){return data.getRoot(setting)[setting.data.key.children]},getNodesByParam:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.data.key.children,result=[];for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){result.push(nodes[i])}result=result.concat(data.getNodesByParam(setting,nodes[i][childKey],key,value))}return result},getNodesByParamFuzzy:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.data.key.children,result=[];for(var i=0,l=nodes.length;i<l;i++){if(typeof nodes[i][key]=="string"&&nodes[i][key].indexOf(value)>-1){result.push(nodes[i])}result=result.concat(data.getNodesByParamFuzzy(setting,nodes[i][childKey],key,value))}return result},getNodesByFilter:function(setting,nodes,filter,isSingle,invokeParam){if(!nodes){return(isSingle?null:[])}var childKey=setting.data.key.children,result=isSingle?null:[];for(var i=0,l=nodes.length;i<l;i++){if(tools.apply(filter,[nodes[i],invokeParam],false)){if(isSingle){return nodes[i]}result.push(nodes[i])}var tmpResult=data.getNodesByFilter(setting,nodes[i][childKey],filter,isSingle,invokeParam);if(isSingle&&!!tmpResult){return tmpResult}result=isSingle?tmpResult:result.concat(tmpResult)}return result},getPreNode:function(setting,node){if(!node){return null}var childKey=setting.data.key.children,p=node.parentTId?node.getParentNode():data.getRoot(setting);for(var i=0,l=p[childKey].length;i<l;i++){if(p[childKey][i]===node){return(i==0?null:p[childKey][i-1])}}return null},getRoot:function(setting){return setting?roots[setting.treeId]:null},getSetting:function(treeId){return settings[treeId]},getSettings:function(){return settings},getZTreeTools:function(treeId){var r=this.getRoot(this.getSetting(treeId));return r?r.treeTools:null},initCache:function(setting){for(var i=0,j=_init.caches.length;i<j;i++){_init.caches[i].apply(this,arguments)}},initNode:function(setting,level,node,parentNode,preNode,nextNode){for(var i=0,j=_init.nodes.length;i<j;i++){_init.nodes[i].apply(this,arguments)}},initRoot:function(setting){for(var i=0,j=_init.roots.length;i<j;i++){_init.roots[i].apply(this,arguments)}},isSelectedNode:function(setting,node){var root=data.getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]){return true}}return false},removeNodeCache:function(setting,node){var childKey=setting.data.key.children;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l;i++){arguments.callee(setting,node[childKey][i])}}data.getCache(setting).nodes[data.getNodeCacheId(node.tId)]=null},removeSelectedNode:function(setting,node){var root=data.getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]||!data.getNodeCache(setting,root.curSelectedList[i].tId)){root.curSelectedList.splice(i,1);i--;j--}}},setCache:function(setting,cache){caches[setting.treeId]=cache},setRoot:function(setting,root){roots[setting.treeId]=root},setZTreeTools:function(setting,zTreeTools){for(var i=0,j=_init.zTreeTools.length;i<j;i++){_init.zTreeTools[i].apply(this,arguments)}},transformToArrayFormat:function(setting,nodes){if(!nodes){return[]}var childKey=setting.data.key.children,r=[];if(tools.isArray(nodes)){for(var i=0,l=nodes.length;i<l;i++){r.push(nodes[i]);if(nodes[i][childKey]){r=r.concat(data.transformToArrayFormat(setting,nodes[i][childKey]))}}}else{r.push(nodes);if(nodes[childKey]){r=r.concat(data.transformToArrayFormat(setting,nodes[childKey]))}}return r},transformTozTreeFormat:function(setting,sNodes){var i,l,key=setting.data.simpleData.idKey,parentKey=setting.data.simpleData.pIdKey,childKey=setting.data.key.children;if(!key||key==""||!sNodes){return[]}if(tools.isArray(sNodes)){var r=[];var tmpMap=[];for(i=0,l=sNodes.length;i<l;i++){tmpMap[sNodes[i][key]]=sNodes[i]}for(i=0,l=sNodes.length;i<l;i++){if(tmpMap[sNodes[i][parentKey]]&&sNodes[i][key]!=sNodes[i][parentKey]){if(!tmpMap[sNodes[i][parentKey]][childKey]){tmpMap[sNodes[i][parentKey]][childKey]=[]}tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i])}else{r.push(sNodes[i])}}return r}else{return[sNodes]}}},event={bindEvent:function(setting){for(var i=0,j=_init.bind.length;i<j;i++){_init.bind[i].apply(this,arguments)}},unbindEvent:function(setting){for(var i=0,j=_init.unbind.length;i<j;i++){_init.unbind[i].apply(this,arguments)}},bindTree:function(setting){var eventParam={treeId:setting.treeId},o=setting.treeObj;o.bind("click",eventParam,event.proxy);o.bind("dblclick",eventParam,event.proxy);o.bind("mouseover",eventParam,event.proxy);o.bind("mouseout",eventParam,event.proxy);o.bind("mousedown",eventParam,event.proxy);o.bind("mouseup",eventParam,event.proxy);o.bind("contextmenu",eventParam,event.proxy)},unbindTree:function(setting){var o=setting.treeObj;o.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){var results=[];for(var i=0,j=_init.proxys.length;i<j;i++){var proxyResult=_init.proxys[i].apply(this,arguments);results.push(proxyResult);if(proxyResult.stop){break}}return results},proxy:function(e){var setting=data.getSetting(e.data.treeId);if(!tools.uCanDo(setting,e)){return true}var results=event.doProxy(e),r=true,x=false;for(var i=0,l=results.length;i<l;i++){var proxyResult=results[i];if(proxyResult.nodeEventCallback){x=true;r=proxyResult.nodeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}if(proxyResult.treeEventCallback){x=true;r=proxyResult.treeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}}try{if(x&&$("input:focus").length==0){tools.noSel(setting)}}catch(e){}return r}},handler={onSwitchNode:function(event,node){var setting=data.getSetting(event.data.treeId);if(node.open){if(tools.apply(setting.callback.beforeCollapse,[setting.treeId,node],true)==false){return true}data.getRoot(setting).expandTriggerFlag=true;view.switchNode(setting,node)}else{if(tools.apply(setting.callback.beforeExpand,[setting.treeId,node],true)==false){return true}data.getRoot(setting).expandTriggerFlag=true;view.switchNode(setting,node)}return true},onClickNode:function(event,node){var setting=data.getSetting(event.data.treeId),clickFlag=((setting.view.autoCancelSelected&&event.ctrlKey)&&data.isSelectedNode(setting,node))?0:(setting.view.autoCancelSelected&&event.ctrlKey&&setting.view.selectedMulti)?2:1;if(tools.apply(setting.callback.beforeClick,[setting.treeId,node,clickFlag],true)==false){return true}if(clickFlag===0){view.cancelPreSelectedNode(setting,node)}else{view.selectNode(setting,node,clickFlag===2)}setting.treeObj.trigger(consts.event.CLICK,[event,setting.treeId,node,clickFlag]);return true},onZTreeMousedown:function(event,node){var setting=data.getSetting(event.data.treeId);if(tools.apply(setting.callback.beforeMouseDown,[setting.treeId,node],true)){tools.apply(setting.callback.onMouseDown,[event,setting.treeId,node])}return true},onZTreeMouseup:function(event,node){var setting=data.getSetting(event.data.treeId);if(tools.apply(setting.callback.beforeMouseUp,[setting.treeId,node],true)){tools.apply(setting.callback.onMouseUp,[event,setting.treeId,node])}return true},onZTreeDblclick:function(event,node){var setting=data.getSetting(event.data.treeId);if(tools.apply(setting.callback.beforeDblClick,[setting.treeId,node],true)){tools.apply(setting.callback.onDblClick,[event,setting.treeId,node])}return true},onZTreeContextmenu:function(event,node){var setting=data.getSetting(event.data.treeId);if(tools.apply(setting.callback.beforeRightClick,[setting.treeId,node],true)){tools.apply(setting.callback.onRightClick,[event,setting.treeId,node])}return(typeof setting.callback.onRightClick)!="function"}},tools={apply:function(fun,param,defaultValue){if((typeof fun)=="function"){return fun.apply(zt,param?param:[])}return defaultValue},canAsync:function(setting,node){var childKey=setting.data.key.children;return(setting.async.enable&&node&&node.isParent&&!(node.zAsync||(node[childKey]&&node[childKey].length>0)))},clone:function(obj){if(obj===null){return null}var o=obj.constructor===Array?[]:{};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=typeof obj[i]==="object"?arguments.callee(obj[i]):obj[i]}}return o},eqs:function(str1,str2){return str1.toLowerCase()===str2.toLowerCase()},isArray:function(arr){return Object.prototype.toString.apply(arr)==="[object Array]"},getMDom:function(setting,curDom,targetExpr){if(!curDom){return null}while(curDom&&curDom.id!==setting.treeId){for(var i=0,l=targetExpr.length;curDom.tagName&&i<l;i++){if(tools.eqs(curDom.tagName,targetExpr[i].tagName)&&curDom.getAttribute(targetExpr[i].attrName)!==null){return curDom}}curDom=curDom.parentNode}return null},noSel:function(setting){var r=data.getRoot(setting);if(r.noSelection){try{window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}catch(e){}}},uCanDo:function(setting,e){return true}},view={addNodes:function(setting,parentNode,newNodes,isSilent){if(setting.data.keep.leaf&&parentNode&&!parentNode.isParent){return}if(!tools.isArray(newNodes)){newNodes=[newNodes]}if(setting.data.simpleData.enable){newNodes=data.transformTozTreeFormat(setting,newNodes)}if(parentNode){var target_switchObj=$("#"+parentNode.tId+consts.id.SWITCH),target_icoObj=$("#"+parentNode.tId+consts.id.ICON),target_ulObj=$("#"+parentNode.tId+consts.id.UL);if(!parentNode.open){view.replaceSwitchClass(parentNode,target_switchObj,consts.folder.CLOSE);view.replaceIcoClass(parentNode,target_icoObj,consts.folder.CLOSE);parentNode.open=false;target_ulObj.css({display:"none"})}data.addNodesData(setting,parentNode,newNodes);view.createNodes(setting,parentNode.level+1,newNodes,parentNode);if(!isSilent){view.expandCollapseParentNode(setting,parentNode,true)}}else{data.addNodesData(setting,data.getRoot(setting),newNodes);view.createNodes(setting,0,newNodes,null)}},appendNodes:function(setting,level,nodes,parentNode,initFlag,openFlag){if(!nodes){return[]}var html=[],childKey=setting.data.key.children;for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(initFlag){var tmpPNode=(parentNode)?parentNode:data.getRoot(setting),tmpPChild=tmpPNode[childKey],isFirstNode=((tmpPChild.length==nodes.length)&&(i==0)),isLastNode=(i==(nodes.length-1));data.initNode(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag);data.addNodeCache(setting,node)}var childHtml=[];if(node[childKey]&&node[childKey].length>0){childHtml=view.appendNodes(setting,level+1,node[childKey],node,initFlag,openFlag&&node.open)}if(openFlag){view.makeDOMNodeMainBefore(html,setting,node);view.makeDOMNodeLine(html,setting,node);data.getBeforeA(setting,node,html);view.makeDOMNodeNameBefore(html,setting,node);data.getInnerBeforeA(setting,node,html);view.makeDOMNodeIcon(html,setting,node);data.getInnerAfterA(setting,node,html);view.makeDOMNodeNameAfter(html,setting,node);data.getAfterA(setting,node,html);if(node.isParent&&node.open){view.makeUlHtml(setting,node,html,childHtml.join(""))}view.makeDOMNodeMainAfter(html,setting,node);data.addCreatedNode(setting,node)}}return html},appendParentULDom:function(setting,node){var html=[],nObj=$("#"+node.tId),ulObj=$("#"+node.tId+consts.id.UL),childKey=setting.data.key.children,childHtml=view.appendNodes(setting,node.level+1,node[childKey],node,false,true);view.makeUlHtml(setting,node,html,childHtml.join(""));if(!nObj.get(0)&&!!node.parentTId){view.appendParentULDom(setting,node.getParentNode());nObj=$("#"+node.tId)}if(ulObj.get(0)){ulObj.remove()}nObj.append(html.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent){tools.apply(callback);return false}else{if(node&&node.isAjaxing){return false}else{if(tools.apply(setting.callback.beforeAsync,[setting.treeId,node],true)==false){tools.apply(callback);return false}}}if(node){node.isAjaxing=true;var icoObj=$("#"+node.tId+consts.id.ICON);icoObj.attr({style:"","class":"button ico_loading"})}var isJson=(setting.async.contentType=="application/json"),tmpParam=isJson?"{":"",jTemp="";for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;if(pKey.length>1){spKey=pKey[1];pKey=pKey[0]}if(isJson){jTemp=(typeof node[pKey]=="string")?'"':"";tmpParam+='"'+spKey+('":'+jTemp+node[pKey]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=spKey+("="+node[pKey]).replace(/&/g,"%26")+"&"}}if(tools.isArray(setting.async.otherParam)){for(i=0,l=setting.async.otherParam.length;i<l;i+=2){if(isJson){jTemp=(typeof setting.async.otherParam[i+1]=="string")?'"':"";tmpParam+='"'+setting.async.otherParam[i]+('":'+jTemp+setting.async.otherParam[i+1]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=setting.async.otherParam[i]+("="+setting.async.otherParam[i+1]).replace(/&/g,"%26")+"&"}}}else{for(var p in setting.async.otherParam){if(isJson){if(p==="data"){continue}jTemp=(typeof setting.async.otherParam[p]=="string")?'"':"";tmpParam+='"'+p+('":'+jTemp+setting.async.otherParam[p]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=p+("="+setting.async.otherParam[p]).replace(/&/g,"%26")+"&"}}}if(tmpParam.length>1){tmpParam=tmpParam.substring(0,tmpParam.length-1)}if(isJson){var argsString="[]";var args=[(node==null)?-1:node.id];if(setting.async.otherParam&&setting.async.otherParam.data){var dataArgs=setting.async.otherParam.data;if($.isArray(dataArgs)===true){argsString=JSON.stringify(args.concat(dataArgs))}else{argsString=JSON.stringify(args.concat([dataArgs]))}}else{argsString=JSON.stringify(args)}tmpParam+="}";var tmpParamObject=JSON.parse(tmpParam);tmpParamObject.args=argsString;tmpParam=JSON.stringify(tmpParamObject)}var _tmpV=data.getRoot(setting)._ver;$.ajax({contentType:setting.async.contentType,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV!=data.getRoot(setting)._ver){return}var newNodes=[];try{if(!msg||msg.length==0){newNodes=[]}else{if(typeof msg=="string"){msg=eval("("+msg+")");if(msg.data){msg=msg.data}newNodes=msg}else{if(msg.data){msg=msg.data}newNodes=msg}}}catch(err){newNodes=msg}if(node){node.isAjaxing=null;node.zAsync=true}view.setNodeLineIcos(setting,node);if(newNodes&&newNodes!==""){newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes);view.addNodes(setting,node,!!newNodes?tools.clone(newNodes):[],!!isSilent)}else{view.addNodes(setting,node,[],!!isSilent)}setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]);tools.apply(callback)},error:function(XMLHttpRequest,textStatus,errorThrown){if(_tmpV!=data.getRoot(setting)._ver){return}if(node){node.isAjaxing=null}view.setNodeLineIcos(setting,node);setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,XMLHttpRequest,textStatus,errorThrown])}});return true},cancelPreSelectedNode:function(setting,node){var list=data.getRoot(setting).curSelectedList;for(var i=0,j=list.length-1;j>=i;j--){if(!node||node===list[j]){$("#"+list[j].tId+consts.id.A).removeClass(consts.node.CURSELECTED);if(node){data.removeSelectedNode(setting,node);break}}}if(!node){data.getRoot(setting).curSelectedList=[]}},createNodeCallback:function(setting){if(!!setting.callback.onNodeCreated||!!setting.view.addDiyDom){var root=data.getRoot(setting);while(root.createdNodes.length>0){var node=root.createdNodes.shift();tools.apply(setting.view.addDiyDom,[setting.treeId,node]);if(!!setting.callback.onNodeCreated){setting.treeObj.trigger(consts.event.NODECREATED,[setting.treeId,node])}}}},createNodes:function(setting,level,nodes,parentNode){if(!nodes||nodes.length==0){return}var root=data.getRoot(setting),childKey=setting.data.key.children,openFlag=!parentNode||parentNode.open||!!$("#"+parentNode[childKey][0].tId).get(0);root.createdNodes=[];var zTreeHtml=view.appendNodes(setting,level,nodes,parentNode,true,openFlag);if(!parentNode){setting.treeObj.append(zTreeHtml.join(""))}else{var ulObj=$("#"+parentNode.tId+consts.id.UL);if(ulObj.get(0)){ulObj.append(zTreeHtml.join(""))}}view.createNodeCallback(setting)},destroy:function(setting){if(!setting){return}data.initCache(setting);data.initRoot(setting);event.unbindTree(setting);event.unbindEvent(setting);setting.treeObj.empty()},expandCollapseNode:function(setting,node,expandFlag,animateFlag,callback){var root=data.getRoot(setting),childKey=setting.data.key.children;if(!node){tools.apply(callback,[]);return}if(root.expandTriggerFlag){var _callback=callback;callback=function(){if(_callback){_callback()}if(node.open){setting.treeObj.trigger(consts.event.EXPAND,[setting.treeId,node])}else{setting.treeObj.trigger(consts.event.COLLAPSE,[setting.treeId,node])}};root.expandTriggerFlag=false}if(!node.open&&node.isParent&&((!$("#"+node.tId+consts.id.UL).get(0))||(node[childKey]&&node[childKey].length>0&&!$("#"+node[childKey][0].tId).get(0)))){view.appendParentULDom(setting,node);view.createNodeCallback(setting)}if(node.open==expandFlag){tools.apply(callback,[]);return}var ulObj=$("#"+node.tId+consts.id.UL),switchObj=$("#"+node.tId+consts.id.SWITCH),icoObj=$("#"+node.tId+consts.id.ICON);if(node.isParent){node.open=!node.open;if(node.iconOpen&&node.iconClose){icoObj.attr("style",view.makeNodeIcoStyle(setting,node))}if(node.open){view.replaceSwitchClass(node,switchObj,consts.folder.OPEN);view.replaceIcoClass(node,icoObj,consts.folder.OPEN);if(animateFlag==false||setting.view.expandSpeed==""){ulObj.show();tools.apply(callback,[])}else{if(node[childKey]&&node[childKey].length>0){ulObj.slideDown(setting.view.expandSpeed,callback)}else{ulObj.show();tools.apply(callback,[])}}}else{view.replaceSwitchClass(node,switchObj,consts.folder.CLOSE);view.replaceIcoClass(node,icoObj,consts.folder.CLOSE);if(animateFlag==false||setting.view.expandSpeed==""||!(node[childKey]&&node[childKey].length>0)){ulObj.hide();tools.apply(callback,[])}else{ulObj.slideUp(setting.view.expandSpeed,callback)}}}else{tools.apply(callback,[])}},expandCollapseParentNode:function(setting,node,expandFlag,animateFlag,callback){if(!node){return}if(!node.parentTId){view.expandCollapseNode(setting,node,expandFlag,animateFlag,callback);return}else{view.expandCollapseNode(setting,node,expandFlag,animateFlag)}if(node.parentTId){view.expandCollapseParentNode(setting,node.getParentNode(),expandFlag,animateFlag,callback)}},expandCollapseSonNode:function(setting,node,expandFlag,animateFlag,callback){var root=data.getRoot(setting),childKey=setting.data.key.children,treeNodes=(node)?node[childKey]:root[childKey],selfAnimateSign=(node)?false:animateFlag,expandTriggerFlag=data.getRoot(setting).expandTriggerFlag;data.getRoot(setting).expandTriggerFlag=false;if(treeNodes){for(var i=0,l=treeNodes.length;i<l;i++){if(treeNodes[i]){view.expandCollapseSonNode(setting,treeNodes[i],expandFlag,selfAnimateSign)}}}data.getRoot(setting).expandTriggerFlag=expandTriggerFlag;view.expandCollapseNode(setting,node,expandFlag,animateFlag,callback)},makeDOMNodeIcon:function(html,setting,node){var nameStr=data.getNodeName(setting,node),name=setting.view.nameIsHTML?nameStr:nameStr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");html.push("<span id='",node.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(setting,node),"' style='",view.makeNodeIcoStyle(setting,node),"'></span><span id='",node.tId,consts.id.SPAN,"'>",name,"</span>")},makeDOMNodeLine:function(html,setting,node){html.push("<span id='",node.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(setting,node),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(html,setting,node){html.push("</li>")},makeDOMNodeMainBefore:function(html,setting,node){html.push("<li id='",node.tId,"' class='level",node.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(html,setting,node){html.push("</a>")},makeDOMNodeNameBefore:function(html,setting,node){var title=data.getNodeTitle(setting,node),url=view.makeNodeUrl(setting,node),fontcss=view.makeNodeFontCss(setting,node),fontStyle=[];for(var f in fontcss){fontStyle.push(f,":",fontcss[f],";")}html.push("<a id='",node.tId,consts.id.A,"' class='level",node.level,"' treeNode",consts.id.A,' onclick="',(node.click||""),'" ',((url!=null&&url.length>0)?"href='"+url+"'":"")," target='",view.makeNodeTarget(node),"' style='",fontStyle.join(""),"'");if(tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)&&title){html.push("title='",title.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'")}html.push(">")},makeNodeFontCss:function(setting,node){var fontCss=tools.apply(setting.view.fontCss,[setting.treeId,node],setting.view.fontCss);return(fontCss&&((typeof fontCss)!="function"))?fontCss:{}},makeNodeIcoClass:function(setting,node){var icoCss=["ico"];if(!node.isAjaxing){icoCss[0]=(node.iconSkin?node.iconSkin+"_":"")+icoCss[0];if(node.isParent){icoCss.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{icoCss.push(consts.folder.DOCU)}}return"button "+icoCss.join("_")},makeNodeIcoStyle:function(setting,node){var icoStyle=[];if(!node.isAjaxing){var icon=(node.isParent&&node.iconOpen&&node.iconClose)?(node.open?node.iconOpen:node.iconClose):node.icon;if(icon){icoStyle.push("background:url(",icon,") 0 0 no-repeat;")}if(setting.view.showIcon==false||!tools.apply(setting.view.showIcon,[setting.treeId,node],true)){icoStyle.push("width:0px;height:0px;")}}return icoStyle.join("")},makeNodeLineClass:function(setting,node){var lineClass=[];if(setting.view.showLine){if(node.level==0&&node.isFirstNode&&node.isLastNode){lineClass.push(consts.line.ROOT)}else{if(node.level==0&&node.isFirstNode){lineClass.push(consts.line.ROOTS)}else{if(node.isLastNode){lineClass.push(consts.line.BOTTOM)}else{lineClass.push(consts.line.CENTER)}}}}else{lineClass.push(consts.line.NOLINE)}if(node.isParent){lineClass.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{lineClass.push(consts.folder.DOCU)}return view.makeNodeLineClassEx(node)+lineClass.join("_")},makeNodeLineClassEx:function(node){return"button level"+node.level+" switch "},makeNodeTarget:function(node){return(node.target||"_blank")},makeNodeUrl:function(setting,node){var urlKey=setting.data.key.url;return node[urlKey]?node[urlKey]:null},makeUlHtml:function(setting,node,html,content){html.push("<ul id='",node.tId,consts.id.UL,"' class='level",node.level," ",view.makeUlLineClass(setting,node),"' style='display:",(node.open?"block":"none"),"'>");html.push(content);html.push("</ul>")},makeUlLineClass:function(setting,node){return((setting.view.showLine&&!node.isLastNode)?consts.line.LINE:"")},removeChildNodes:function(setting,node){if(!node){return}var childKey=setting.data.key.children,nodes=node[childKey];if(!nodes){return}for(var i=0,l=nodes.length;i<l;i++){data.removeNodeCache(setting,nodes[i])}data.removeSelectedNode(setting);delete node[childKey];if(!setting.data.keep.parent){node.isParent=false;node.open=false;var tmp_switchObj=$("#"+node.tId+consts.id.SWITCH),tmp_icoObj=$("#"+node.tId+consts.id.ICON);view.replaceSwitchClass(node,tmp_switchObj,consts.folder.DOCU);view.replaceIcoClass(node,tmp_icoObj,consts.folder.DOCU);$("#"+node.tId+consts.id.UL).remove()}else{$("#"+node.tId+consts.id.UL).empty()}},setFirstNode:function(setting,parentNode){var childKey=setting.data.key.children,childLength=parentNode[childKey].length;if(childLength>0){parentNode[childKey][0].isFirstNode=true}},setLastNode:function(setting,parentNode){var childKey=setting.data.key.children,childLength=parentNode[childKey].length;if(childLength>0){parentNode[childKey][childLength-1].isLastNode=true}},removeNode:function(setting,node){var root=data.getRoot(setting),childKey=setting.data.key.children,parentNode=(node.parentTId)?node.getParentNode():root;node.isFirstNode=false;node.isLastNode=false;node.getPreNode=function(){return null};node.getNextNode=function(){return null};if(!data.getNodeCache(setting,node.tId)){return}$("#"+node.tId).remove();data.removeNodeCache(setting,node);data.removeSelectedNode(setting,node);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i].tId==node.tId){parentNode[childKey].splice(i,1);break}}view.setFirstNode(setting,parentNode);view.setLastNode(setting,parentNode);var tmp_ulObj,tmp_switchObj,tmp_icoObj,childLength=parentNode[childKey].length;if(!setting.data.keep.parent&&childLength==0){parentNode.isParent=false;parentNode.open=false;tmp_ulObj=$("#"+parentNode.tId+consts.id.UL);tmp_switchObj=$("#"+parentNode.tId+consts.id.SWITCH);tmp_icoObj=$("#"+parentNode.tId+consts.id.ICON);view.replaceSwitchClass(parentNode,tmp_switchObj,consts.folder.DOCU);view.replaceIcoClass(parentNode,tmp_icoObj,consts.folder.DOCU);tmp_ulObj.css("display","none")}else{if(setting.view.showLine&&childLength>0){var newLast=parentNode[childKey][childLength-1];tmp_ulObj=$("#"+newLast.tId+consts.id.UL);tmp_switchObj=$("#"+newLast.tId+consts.id.SWITCH);tmp_icoObj=$("#"+newLast.tId+consts.id.ICON);if(parentNode==root){if(parentNode[childKey].length==1){view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.ROOT)}else{var tmp_first_switchObj=$("#"+parentNode[childKey][0].tId+consts.id.SWITCH);view.replaceSwitchClass(parentNode[childKey][0],tmp_first_switchObj,consts.line.ROOTS);view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}}else{view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}tmp_ulObj.removeClass(consts.line.LINE)}}},replaceIcoClass:function(node,obj,newName){if(!obj||node.isAjaxing){return}var tmpName=obj.attr("class");if(tmpName==undefined){return}var tmpList=tmpName.split("_");switch(newName){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[tmpList.length-1]=newName;break}obj.attr("class",tmpList.join("_"))},replaceSwitchClass:function(node,obj,newName){if(!obj){return}var tmpName=obj.attr("class");if(tmpName==undefined){return}var tmpList=tmpName.split("_");switch(newName){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:tmpList[0]=view.makeNodeLineClassEx(node)+newName;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[1]=newName;break}obj.attr("class",tmpList.join("_"));if(newName!==consts.folder.DOCU){obj.removeAttr("disabled")}else{obj.attr("disabled","disabled")}},selectNode:function(setting,node,addFlag){if(!addFlag){view.cancelPreSelectedNode(setting)}$("#"+node.tId+consts.id.A).addClass(consts.node.CURSELECTED);data.addSelectedNode(setting,node)},setNodeFontCss:function(setting,treeNode){var aObj=$("#"+treeNode.tId+consts.id.A),fontCss=view.makeNodeFontCss(setting,treeNode);if(fontCss){aObj.css(fontCss)}},setNodeLineIcos:function(setting,node){if(!node){return}var switchObj=$("#"+node.tId+consts.id.SWITCH),ulObj=$("#"+node.tId+consts.id.UL),icoObj=$("#"+node.tId+consts.id.ICON),ulLine=view.makeUlLineClass(setting,node);if(ulLine.length==0){ulObj.removeClass(consts.line.LINE)}else{ulObj.addClass(ulLine)}switchObj.attr("class",view.makeNodeLineClass(setting,node));if(node.isParent){switchObj.removeAttr("disabled")}else{switchObj.attr("disabled","disabled")}icoObj.removeAttr("style");icoObj.attr("style",view.makeNodeIcoStyle(setting,node));icoObj.attr("class",view.makeNodeIcoClass(setting,node))},setNodeName:function(setting,node){var title=data.getNodeTitle(setting,node),nObj=$("#"+node.tId+consts.id.SPAN);nObj.empty();if(setting.view.nameIsHTML){nObj.html(data.getNodeName(setting,node))}else{nObj.text(data.getNodeName(setting,node))}if(tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)){var aObj=$("#"+node.tId+consts.id.A);aObj.attr("title",!title?"":title)}},setNodeTarget:function(node){var aObj=$("#"+node.tId+consts.id.A);aObj.attr("target",view.makeNodeTarget(node))},setNodeUrl:function(setting,node){var aObj=$("#"+node.tId+consts.id.A),url=view.makeNodeUrl(setting,node);if(url==null||url.length==0){aObj.removeAttr("href")}else{aObj.attr("href",url)}},switchNode:function(setting,node){if(node.open||!tools.canAsync(setting,node)){view.expandCollapseNode(setting,node,!node.open)}else{if(setting.async.enable){if(!view.asyncNode(setting,node)){view.expandCollapseNode(setting,node,!node.open);return}}else{if(node){view.expandCollapseNode(setting,node,!node.open)}}}}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(treeId){var o=data.getZTreeTools(treeId);return o?o:null},destroy:function(treeId){if(!!treeId&&treeId.length>0){view.destroy(data.getSetting(treeId))}else{for(var s in settings){view.destroy(settings[s])}}},init:function(obj,zSetting,zNodes){var setting=tools.clone(_setting);$.extend(true,setting,zSetting);setting.treeId=obj.attr("id");setting.treeObj=obj;setting.treeObj.empty();settings[setting.treeId]=setting;if($.browser.msie&&parseInt($.browser.version)<7){setting.view.expandSpeed=""}data.initRoot(setting);var root=data.getRoot(setting),childKey=setting.data.key.children;zNodes=zNodes?tools.clone(tools.isArray(zNodes)?zNodes:[zNodes]):[];if(setting.data.simpleData.enable){root[childKey]=data.transformTozTreeFormat(setting,zNodes)}else{root[childKey]=zNodes}data.initCache(setting);event.unbindTree(setting);event.bindTree(setting);event.unbindEvent(setting);event.bindEvent(setting);var zTreeTools={setting:setting,addNodes:function(parentNode,newNodes,isSilent){if(!newNodes){return null}if(!parentNode){parentNode=null}if(parentNode&&!parentNode.isParent&&setting.data.keep.leaf){return null}var xNewNodes=tools.clone(tools.isArray(newNodes)?newNodes:[newNodes]);function addCallback(){view.addNodes(setting,parentNode,xNewNodes,(isSilent==true))}if(tools.canAsync(setting,parentNode)){view.asyncNode(setting,parentNode,isSilent,addCallback)}else{addCallback()}return xNewNodes},cancelSelectedNode:function(node){view.cancelPreSelectedNode(this.setting,node)},destroy:function(){view.destroy(this.setting)},expandAll:function(expandFlag){expandFlag=!!expandFlag;view.expandCollapseSonNode(this.setting,null,expandFlag,true);return expandFlag},expandNode:function(node,expandFlag,sonSign,focus,callbackFlag){if(!node||!node.isParent){return null}if(expandFlag!==true&&expandFlag!==false){expandFlag=!node.open}callbackFlag=!!callbackFlag;if(callbackFlag&&expandFlag&&(tools.apply(setting.callback.beforeExpand,[setting.treeId,node],true)==false)){return null}else{if(callbackFlag&&!expandFlag&&(tools.apply(setting.callback.beforeCollapse,[setting.treeId,node],true)==false)){return null}}if(expandFlag&&node.parentTId){view.expandCollapseParentNode(this.setting,node.getParentNode(),expandFlag,false)}if(expandFlag===node.open&&!sonSign){return null}data.getRoot(setting).expandTriggerFlag=callbackFlag;if(sonSign){view.expandCollapseSonNode(this.setting,node,expandFlag,true,function(){if(focus!==false){try{$("#"+node.tId).focus().blur()}catch(e){}}})}else{node.open=!expandFlag;view.switchNode(this.setting,node);if(focus!==false){try{$("#"+node.tId).focus().blur()}catch(e){}}}return expandFlag},getNodes:function(){return data.getNodes(this.setting)},getNodeByParam:function(key,value,parentNode){if(!key){return null}return data.getNodeByParam(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),key,value)},getNodeByTId:function(tId){return data.getNodeCache(this.setting,tId)},getNodesByParam:function(key,value,parentNode){if(!key){return null}return data.getNodesByParam(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),key,value)},getNodesByParamFuzzy:function(key,value,parentNode){if(!key){return null}return data.getNodesByParamFuzzy(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),key,value)},getNodesByFilter:function(filter,isSingle,parentNode,invokeParam){isSingle=!!isSingle;if(!filter||(typeof filter!="function")){return(isSingle?null:[])}return data.getNodesByFilter(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),filter,isSingle,invokeParam)},getNodeIndex:function(node){if(!node){return null}var childKey=setting.data.key.children,parentNode=(node.parentTId)?node.getParentNode():data.getRoot(this.setting);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i]==node){return i}}return -1},getSelectedNodes:function(){var r=[],list=data.getRoot(this.setting).curSelectedList;for(var i=0,l=list.length;i<l;i++){r.push(list[i])}return r},isSelectedNode:function(node){return data.isSelectedNode(this.setting,node)},reAsyncChildNodes:function(parentNode,reloadType,isSilent){if(!this.setting.async.enable){return}var isRoot=!parentNode;if(isRoot){parentNode=data.getRoot(this.setting)}if(reloadType=="refresh"){var childKey=this.setting.data.key.children;for(var i=0,l=parentNode[childKey].length;i<l;i++){data.removeNodeCache(setting,parentNode[childKey][i])}data.removeSelectedNode(setting);parentNode[childKey]=[];if(isRoot){this.setting.treeObj.empty()}else{var ulObj=$("#"+parentNode.tId+consts.id.UL);ulObj.empty()}}view.asyncNode(this.setting,isRoot?null:parentNode,!!isSilent)},refresh:function(){this.setting.treeObj.empty();var root=data.getRoot(this.setting),nodes=root[this.setting.data.key.children];data.initRoot(this.setting);root[this.setting.data.key.children]=nodes;data.initCache(this.setting);view.createNodes(this.setting,0,root[this.setting.data.key.children])},removeChildNodes:function(node){if(!node){return null}var childKey=setting.data.key.children,nodes=node[childKey];view.removeChildNodes(setting,node);return nodes?nodes:null},removeNode:function(node,callbackFlag){if(!node){return}callbackFlag=!!callbackFlag;if(callbackFlag&&tools.apply(setting.callback.beforeRemove,[setting.treeId,node],true)==false){return}view.removeNode(setting,node);if(callbackFlag){this.setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node])}},selectNode:function(node,addFlag){if(!node){return}if(tools.uCanDo(this.setting)){addFlag=setting.view.selectedMulti&&addFlag;if(node.parentTId){view.expandCollapseParentNode(this.setting,node.getParentNode(),true,false,function(){try{$("#"+node.tId).focus().blur()}catch(e){}})}else{try{$("#"+node.tId).focus().blur()}catch(e){}}view.selectNode(this.setting,node,addFlag)}},transformTozTreeNodes:function(simpleNodes){return data.transformTozTreeFormat(this.setting,simpleNodes)},transformToArray:function(nodes){return data.transformToArrayFormat(this.setting,nodes)},updateNode:function(node,checkTypeFlag){if(!node){return}var nObj=$("#"+node.tId);if(nObj.get(0)&&tools.uCanDo(this.setting)){view.setNodeName(this.setting,node);view.setNodeTarget(node);view.setNodeUrl(this.setting,node);view.setNodeLineIcos(this.setting,node);view.setNodeFontCss(this.setting,node)}}};root.treeTools=zTreeTools;data.setZTreeTools(setting,zTreeTools);if(root[childKey]&&root[childKey].length>0){view.createNodes(setting,0,root[childKey])}else{if(setting.async.enable&&setting.async.url&&setting.async.url!==""){view.asyncNode(setting)}}return zTreeTools}};var zt=$.fn.zTree,consts=zt.consts})(jQuery);(function(f){var z={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},m={check:{enable:false,autoCheckTrigger:false,chkStyle:z.checkbox.STYLE,nocheckInherit:false,radioType:z.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},v=function(A){var B=y.getRoot(A);B.radioCheckedList=[]},d=function(A){},n=function(A){var B=A.treeObj,C=q.event;B.bind(C.CHECK,function(F,E,G,D){t.apply(A.callback.onCheck,[!!E?E:F,G,D])})},x=function(A){var B=A.treeObj,C=q.event;B.unbind(C.CHECK)},o=function(G){var H=G.target,J=y.getSetting(G.data.treeId),E="",B=null,C="",F="",A=null,D=null;if(t.eqs(G.type,"mouseover")){if(J.check.enable&&t.eqs(H.tagName,"span")&&H.getAttribute("treeNode"+q.id.CHECK)!==null){E=H.parentNode.id;C="mouseoverCheck"}}else{if(t.eqs(G.type,"mouseout")){if(J.check.enable&&t.eqs(H.tagName,"span")&&H.getAttribute("treeNode"+q.id.CHECK)!==null){E=H.parentNode.id;C="mouseoutCheck"}}else{if(t.eqs(G.type,"click")){if(J.check.enable&&t.eqs(H.tagName,"span")&&H.getAttribute("treeNode"+q.id.CHECK)!==null){E=H.parentNode.id;C="checkNode"}}}}if(E.length>0){B=y.getNodeCache(J,E);switch(C){case"checkNode":A=l.onCheckNode;break;case"mouseoverCheck":A=l.onMouseoverCheck;break;case"mouseoutCheck":A=l.onMouseoutCheck;break}}var I={stop:false,node:B,nodeEventType:C,nodeEventCallback:A,treeEventType:F,treeEventCallback:D};return I},u=function(D,H,G,A,F,C,E){if(!G){return}var B=D.data.key.checked;if(typeof G[B]=="string"){G[B]=t.eqs(G[B],"true")}G[B]=!!G[B];G.checkedOld=G[B];if(typeof G.nocheck=="string"){G.nocheck=t.eqs(G.nocheck,"true")}G.nocheck=!!G.nocheck||(D.check.nocheckInherit&&A&&!!A.nocheck);if(typeof G.chkDisabled=="string"){G.chkDisabled=t.eqs(G.chkDisabled,"true")}G.chkDisabled=!!G.chkDisabled||(A&&!!A.chkDisabled);if(typeof G.halfCheck=="string"){G.halfCheck=t.eqs(G.halfCheck,"true")}G.halfCheck=!!G.halfCheck;G.check_Child_State=-1;G.check_Focus=false;G.getCheckStatus=function(){return y.getCheckStatus(D,G)}},a=function(C,E,B){var A=C.data.key.checked;if(C.check.enable){y.makeChkFlag(C,E);if(C.check.chkStyle==q.radio.STYLE&&C.check.radioType==q.radio.TYPE_ALL&&E[A]){var D=y.getRoot(C);D.radioCheckedList.push(E)}B.push("<span ID='",E.tId,q.id.CHECK,"' class='",j.makeChkClass(C,E),"' treeNode",q.id.CHECK,(E.nocheck===true?" style='display:none;'":""),"></span>")}},k=function(C,B){B.checkNode=function(H,G,I,F){var D=this.setting.data.key.checked;if(H.chkDisabled===true){return}if(G!==true&&G!==false){G=!H[D]}F=!!F;if(H[D]===G&&!I){return}else{if(F&&t.apply(this.setting.callback.beforeCheck,[this.setting.treeId,H],true)==false){return}}if(t.uCanDo(this.setting)&&this.setting.check.enable&&H.nocheck!==true){H[D]=G;var E=f("#"+H.tId+q.id.CHECK);if(I||this.setting.check.chkStyle===q.radio.STYLE){j.checkNodeRelation(this.setting,H)}j.setChkClass(this.setting,E,H);j.repairParentChkClassWithSelf(this.setting,H);if(F){C.treeObj.trigger(q.event.CHECK,[null,C.treeId,H])}}};B.checkAllNodes=function(D){j.repairAllChk(this.setting,!!D)};B.getCheckedNodes=function(E){var D=this.setting.data.key.children;E=(E!==false);return y.getTreeCheckedNodes(this.setting,y.getRoot(C)[D],E)};B.getChangeCheckedNodes=function(){var D=this.setting.data.key.children;return y.getTreeChangeCheckedNodes(this.setting,y.getRoot(C)[D])};B.setChkDisabled=function(E,D){D=!!D;j.repairSonChkDisabled(this.setting,E,D);if(!D){j.repairParentChkDisabled(this.setting,E,D)}};var A=B.updateNode;B.updateNode=function(F,G){if(A){A.apply(B,arguments)}if(!F||!this.setting.check.enable){return}var D=f("#"+F.tId);if(D.get(0)&&t.uCanDo(this.setting)){var E=f("#"+F.tId+q.id.CHECK);if(G==true||this.setting.check.chkStyle===q.radio.STYLE){j.checkNodeRelation(this.setting,F)}j.setChkClass(this.setting,E,F);j.repairParentChkClassWithSelf(this.setting,F)}}},p={getRadioCheckedList:function(D){var C=y.getRoot(D).radioCheckedList;for(var B=0,A=C.length;B<A;B++){if(!y.getNodeCache(D,C[B].tId)){C.splice(B,1);B--;A--}}return C},getCheckStatus:function(B,D){if(!B.check.enable||D.nocheck){return null}var A=B.data.key.checked,C={checked:D[A],half:D.halfCheck?D.halfCheck:(B.check.chkStyle==q.radio.STYLE?(D.check_Child_State===2):(D[A]?(D.check_Child_State>-1&&D.check_Child_State<2):(D.check_Child_State>0)))};return C},getTreeCheckedNodes:function(I,B,H,E){if(!B){return[]}var C=I.data.key.children,A=I.data.key.checked,G=(H&&I.check.chkStyle==q.radio.STYLE&&I.check.radioType==q.radio.TYPE_ALL);E=!E?[]:E;for(var F=0,D=B.length;F<D;F++){if(B[F].nocheck!==true&&B[F][A]==H){E.push(B[F]);if(G){break}}y.getTreeCheckedNodes(I,B[F][C],H,E);if(G&&E.length>0){break}}return E},getTreeChangeCheckedNodes:function(F,C,E){if(!C){return[]}var G=F.data.key.children,B=F.data.key.checked;E=!E?[]:E;for(var D=0,A=C.length;D<A;D++){if(C[D].nocheck!==true&&C[D][B]!=C[D].checkedOld){E.push(C[D])}y.getTreeChangeCheckedNodes(F,C[D][G],E)}return E},makeChkFlag:function(J,D){if(!D){return}var C=J.data.key.children,A=J.data.key.checked,F=-1;if(D[C]){var B=false;for(var H=0,E=D[C].length;H<E;H++){var I=D[C][H];var G=-1;if(J.check.chkStyle==q.radio.STYLE){if(I.nocheck===true){G=I.check_Child_State}else{if(I.halfCheck===true){G=2}else{if(I.nocheck!==true&&I[A]){G=2}else{G=I.check_Child_State>0?2:0}}}if(G==2){F=2;break}else{if(G==0){F=0}}}else{if(J.check.chkStyle==q.checkbox.STYLE){if(I.nocheck===true){G=I.check_Child_State}else{if(I.halfCheck===true){G=1}else{if(I.nocheck!==true&&I[A]){G=(I.check_Child_State===-1||I.check_Child_State===2)?2:1}else{G=(I.check_Child_State>0)?1:0}}}if(G===1){F=1;break}else{if(G===2&&B&&G!==F){F=1;break}else{if(F===2&&G>-1&&G<2){F=1;break}else{if(G>-1){F=G}}}}if(!B){B=(I.nocheck!==true)}}}}}D.check_Child_State=F}},h={},l={onCheckNode:function(E,D){if(D.chkDisabled===true){return false}var C=y.getSetting(E.data.treeId),A=C.data.key.checked;if(t.apply(C.callback.beforeCheck,[C.treeId,D],true)==false){return true}D[A]=!D[A];j.checkNodeRelation(C,D);var B=f("#"+D.tId+q.id.CHECK);j.setChkClass(C,B,D);j.repairParentChkClassWithSelf(C,D);C.treeObj.trigger(q.event.CHECK,[E,C.treeId,D]);return true},onMouseoverCheck:function(D,C){if(C.chkDisabled===true){return false}var B=y.getSetting(D.data.treeId),A=f("#"+C.tId+q.id.CHECK);C.check_Focus=true;j.setChkClass(B,A,C);return true},onMouseoutCheck:function(D,C){if(C.chkDisabled===true){return false}var B=y.getSetting(D.data.treeId),A=f("#"+C.tId+q.id.CHECK);C.check_Focus=false;j.setChkClass(B,A,C);return true}},i={},e={checkNodeRelation:function(J,D){var H,F,E,C=J.data.key.children,B=J.data.key.checked,A=q.radio;if(J.check.chkStyle==A.STYLE){var I=y.getRadioCheckedList(J);if(D[B]){if(J.check.radioType==A.TYPE_ALL){for(F=I.length-1;F>=0;F--){H=I[F];H[B]=false;I.splice(F,1);j.setChkClass(J,f("#"+H.tId+q.id.CHECK),H);if(H.parentTId!=D.parentTId){j.repairParentChkClassWithSelf(J,H)}}I.push(D)}else{var G=(D.parentTId)?D.getParentNode():y.getRoot(J);for(F=0,E=G[C].length;F<E;F++){H=G[C][F];if(H[B]&&H!=D){H[B]=false;j.setChkClass(J,f("#"+H.tId+q.id.CHECK),H)}}}}else{if(J.check.radioType==A.TYPE_ALL){for(F=0,E=I.length;F<E;F++){if(D==I[F]){I.splice(F,1);break}}}}}else{if(D[B]&&(!D[C]||D[C].length==0||J.check.chkboxType.Y.indexOf("s")>-1)){j.setSonNodeCheckBox(J,D,true)}if(!D[B]&&(!D[C]||D[C].length==0||J.check.chkboxType.N.indexOf("s")>-1)){j.setSonNodeCheckBox(J,D,false)}if(D[B]&&J.check.chkboxType.Y.indexOf("p")>-1){j.setParentNodeCheckBox(J,D,true)}if(!D[B]&&J.check.chkboxType.N.indexOf("p")>-1){j.setParentNodeCheckBox(J,D,false)}}},makeChkClass:function(B,E){var A=B.data.key.checked,G=q.checkbox,D=q.radio,F="";if(E.chkDisabled===true){F=G.DISABLED}else{if(E.halfCheck){F=G.PART}else{if(B.check.chkStyle==D.STYLE){F=(E.check_Child_State<1)?G.FULL:G.PART}else{F=E[A]?((E.check_Child_State===2||E.check_Child_State===-1)?G.FULL:G.PART):((E.check_Child_State<1)?G.FULL:G.PART)}}}var C=B.check.chkStyle+"_"+(E[A]?G.TRUE:G.FALSE)+"_"+F;C=(E.check_Focus&&E.chkDisabled!==true)?C+"_"+G.FOCUS:C;return"button "+G.DEFAULT+" "+C},repairAllChk:function(E,H){if(E.check.enable&&E.check.chkStyle===q.checkbox.STYLE){var C=E.data.key.checked,G=E.data.key.children,B=y.getRoot(E);for(var D=0,A=B[G].length;D<A;D++){var F=B[G][D];if(F.nocheck!==true){F[C]=H}j.setSonNodeCheckBox(E,F,H)}}},repairChkClass:function(B,C){if(!C){return}y.makeChkFlag(B,C);var A=f("#"+C.tId+q.id.CHECK);j.setChkClass(B,A,C)},repairParentChkClass:function(B,C){if(!C||!C.parentTId){return}var A=C.getParentNode();j.repairChkClass(B,A);j.repairParentChkClass(B,A)},repairParentChkClassWithSelf:function(A,C){if(!C){return}var B=A.data.key.children;if(C[B]&&C[B].length>0){j.repairParentChkClass(A,C[B][0])}else{j.repairParentChkClass(A,C)}},repairSonChkDisabled:function(E,G,D){if(!G){return}var F=E.data.key.children;if(G.chkDisabled!=D){G.chkDisabled=D;if(G.nocheck!==true){j.repairChkClass(E,G)}}if(G[F]){for(var C=0,B=G[F].length;C<B;C++){var A=G[F][C];j.repairSonChkDisabled(E,A,D)}}},repairParentChkDisabled:function(B,C,A){if(!C){return}if(C.chkDisabled!=A){C.chkDisabled=A;if(C.nocheck!==true){j.repairChkClass(B,C)}}j.repairParentChkDisabled(B,C.getParentNode(),A)},setChkClass:function(A,C,B){if(!C){return}if(B.nocheck===true){C.hide()}else{C.show()}C.removeClass();C.addClass(j.makeChkClass(A,B))},setParentNodeCheckBox:function(K,D,J,G){var C=K.data.key.children,A=K.data.key.checked,H=f("#"+D.tId+q.id.CHECK);if(!G){G=D}y.makeChkFlag(K,D);if(D.nocheck!==true&&D.chkDisabled!==true){D[A]=J;j.setChkClass(K,H,D);if(K.check.autoCheckTrigger&&D!=G&&D.nocheck!==true){K.treeObj.trigger(q.event.CHECK,[K.treeId,D])}}if(D.parentTId){var I=true;if(!J){var B=D.getParentNode()[C];for(var F=0,E=B.length;F<E;F++){if((B[F].nocheck!==true&&B[F][A])||(B[F].nocheck===true&&B[F].check_Child_State>0)){I=false;break}}}if(I){j.setParentNodeCheckBox(K,D.getParentNode(),J,G)}}},setSonNodeCheckBox:function(K,D,J,G){if(!D){return}var C=K.data.key.children,A=K.data.key.checked,H=f("#"+D.tId+q.id.CHECK);if(!G){G=D}var B=false;if(D[C]){for(var F=0,E=D[C].length;F<E&&D.chkDisabled!==true;F++){var I=D[C][F];j.setSonNodeCheckBox(K,I,J,G);if(I.chkDisabled===true){B=true}}}if(D!=y.getRoot(K)&&D.chkDisabled!==true){if(B&&D.nocheck!==true){y.makeChkFlag(K,D)}if(D.nocheck!==true){D[A]=J;if(!B){D.check_Child_State=(D[C]&&D[C].length>0)?(J?2:0):-1}}else{D.check_Child_State=-1}j.setChkClass(K,H,D);if(K.check.autoCheckTrigger&&D!=G&&D.nocheck!==true){K.treeObj.trigger(q.event.CHECK,[K.treeId,D])}}}},s={tools:i,view:e,event:h,data:p};f.extend(true,f.fn.zTree.consts,z);f.extend(true,f.fn.zTree._z,s);var c=f.fn.zTree,t=c._z.tools,q=c.consts,j=c._z.view,y=c._z.data,r=c._z.event;y.exSetting(m);y.addInitBind(n);y.addInitUnBind(x);y.addInitCache(d);y.addInitNode(u);y.addInitProxy(o);y.addInitRoot(v);y.addBeforeA(a);y.addZTreeTools(k);var w=j.createNodes;j.createNodes=function(C,D,B,A){if(w){w.apply(j,arguments)}if(!B){return}j.repairParentChkClassWithSelf(C,A)};var b=j.removeNode;j.removeNode=function(B,C){var A=C.getParentNode();if(b){b.apply(j,arguments)}if(!C||!A){return}j.repairChkClass(B,A);j.repairParentChkClass(B,A)};var g=j.appendNodes;j.appendNodes=function(E,G,B,A,D,F){var C="";if(g){C=g.apply(j,arguments)}if(A){y.makeChkFlag(E,A)}return C}})(jQuery);(function(f){var A={event:{DRAG:"ztree_drag",DROP:"ztree_drop",REMOVE:"ztree_remove",RENAME:"ztree_rename"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},l={edit:{enable:false,editNameSelectAll:false,showRemoveBtn:true,showRenameBtn:true,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:false,isCopy:true,isMove:true,prev:true,next:true,inner:true,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDrop:null,onRename:null}},v=function(B){var C=y.getRoot(B);C.curEditNode=null;C.curEditInput=null;C.curHoverNode=null;C.dragFlag=0;C.dragNodeShowBefore=[];C.dragMaskList=new Array();C.showHoverDom=true},c=function(B){},m=function(B){var C=B.treeObj;var D=p.event;C.bind(D.RENAME,function(E,G,F){t.apply(B.callback.onRename,[E,G,F])});C.bind(D.REMOVE,function(E,G,F){t.apply(B.callback.onRemove,[E,G,F])});C.bind(D.DRAG,function(F,E,H,G){t.apply(B.callback.onDrag,[E,H,G])});C.bind(D.DROP,function(H,G,J,I,K,F,E){t.apply(B.callback.onDrop,[G,J,I,K,F,E])})},x=function(B){var C=B.treeObj;var D=p.event;C.unbind(D.RENAME);C.unbind(D.REMOVE);C.unbind(D.DRAG);C.unbind(D.DROP)},n=function(I){var J=I.target,M=y.getSetting(I.data.treeId),K=I.relatedTarget,G="",C=null,D="",H="",B=null,F=null,E=null;if(t.eqs(I.type,"mouseover")){E=t.getMDom(M,J,[{tagName:"a",attrName:"treeNode"+p.id.A}]);if(E){G=E.parentNode.id;D="hoverOverNode"}}else{if(t.eqs(I.type,"mouseout")){E=t.getMDom(M,K,[{tagName:"a",attrName:"treeNode"+p.id.A}]);if(!E){G="remove";D="hoverOutNode"}}else{if(t.eqs(I.type,"mousedown")){E=t.getMDom(M,J,[{tagName:"a",attrName:"treeNode"+p.id.A}]);if(E){G=E.parentNode.id;D="mousedownNode"}}}}if(G.length>0){C=y.getNodeCache(M,G);switch(D){case"mousedownNode":B=k.onMousedownNode;break;case"hoverOverNode":B=k.onHoverOverNode;break;case"hoverOutNode":B=k.onHoverOutNode;break}}var L={stop:false,node:C,nodeEventType:D,nodeEventCallback:B,treeEventType:H,treeEventCallback:F};return L},u=function(D,H,G,B,F,C,E){if(!G){return}G.isHover=false;G.editNameFlag=false},j=function(C,B){B.cancelEditName=function(E){var D=y.getRoot(C),F=C.data.key.name,G=D.curEditNode;if(!D.curEditNode){return}i.cancelCurEditNode(C,E?E:G[F])};B.copyNode=function(H,G,F,I){if(!G){return null}if(H&&!H.isParent&&C.data.keep.leaf&&F===p.move.TYPE_INNER){return null}var D=t.clone(G);if(!H){H=null;F=p.move.TYPE_INNER}if(F==p.move.TYPE_INNER){function E(){i.addNodes(C,H,[D],I)}if(t.canAsync(C,H)){i.asyncNode(C,H,I,E)}else{E()}}else{i.addNodes(C,H.parentNode,[D],I);i.moveNode(C,H,D,F,false,I)}return D};B.editName=function(D){if(!D||!D.tId||D!==y.getNodeCache(C,D.tId)){return}if(D.parentTId){i.expandCollapseParentNode(C,D.getParentNode(),true)}i.editNode(C,D)};B.moveNode=function(F,E,D,H){if(!E){return E}if(F&&!F.isParent&&C.data.keep.leaf&&D===p.move.TYPE_INNER){return null}else{if(F&&((E.parentTId==F.tId&&D==p.move.TYPE_INNER)||f("#"+E.tId).find("#"+F.tId).length>0)){return null}else{if(!F){F=null}}}function G(){i.moveNode(C,F,E,D,false,H)}if(t.canAsync(C,F)){i.asyncNode(C,F,H,G)}else{G()}return E};B.setEditable=function(D){C.edit.enable=D;return this.refresh()}},o={setSonNodeLevel:function(E,B,G){if(!G){return}var F=E.data.key.children;G.level=(B)?B.level+1:0;if(!G[F]){return}for(var D=0,C=G[F].length;D<C;D++){if(G[F][D]){y.setSonNodeLevel(E,G,G[F][D])}}}},g={},k={onHoverOverNode:function(E,D){var C=y.getSetting(E.data.treeId),B=y.getRoot(C);if(B.curHoverNode!=D){k.onHoverOutNode(E)}B.curHoverNode=D;i.addHoverDom(C,D)},onHoverOutNode:function(E,D){var C=y.getSetting(E.data.treeId),B=y.getRoot(C);if(B.curHoverNode&&!y.isSelectedNode(C,B.curHoverNode)){i.removeTreeDom(C,B.curHoverNode);B.curHoverNode=null}},onMousedownNode:function(N,H){var V,S,M=y.getSetting(N.data.treeId),R=y.getRoot(M);if(N.button==2||!M.edit.enable||(!M.edit.drag.isCopy&&!M.edit.drag.isMove)){return true}var Y=N.target,G=y.getRoot(M).curSelectedList,O=[];if(!y.isSelectedNode(M,H)){O=[H]}else{for(V=0,S=G.length;V<S;V++){if(G[V].editNameFlag&&t.eqs(Y.tagName,"input")&&Y.getAttribute("treeNode"+p.id.INPUT)!==null){return true}O.push(G[V]);if(O[0].parentTId!==G[V].parentTId){O=[H];break}}}i.editNodeBlur=true;i.cancelCurEditNode(M,null,true);var ab=f(document),U,I,W,X=false,Z=M,B,F,P=null,E=null,L=null,C=p.move.TYPE_INNER,T=N.clientX,Q=N.clientY,J=(new Date()).getTime();if(t.uCanDo(M)){ab.bind("mousemove",K)}function K(a0){if(R.dragFlag==0&&Math.abs(T-a0.clientX)<M.edit.drag.minMoveSize&&Math.abs(Q-a0.clientY)<M.edit.drag.minMoveSize){return true}var aV,aR,at,aM,aE,aL=M.data.key.children;t.noSel(M);f("body").css("cursor","pointer");if(R.dragFlag==0){if(t.apply(M.callback.beforeDrag,[M.treeId,O],true)==false){aa(a0);return true}for(aV=0,aR=O.length;aV<aR;aV++){if(aV==0){R.dragNodeShowBefore=[]}at=O[aV];if(at.isParent&&at.open){i.expandCollapseNode(M,at,!at.open);R.dragNodeShowBefore[at.tId]=true}else{R.dragNodeShowBefore[at.tId]=false}}R.dragFlag=1;R.showHoverDom=false;t.showIfameMask(M,true);var ad=true,ag=-1;if(O.length>1){var aq=O[0].parentTId?O[0].getParentNode()[aL]:y.getNodes(M);aE=[];for(aV=0,aR=aq.length;aV<aR;aV++){if(R.dragNodeShowBefore[aq[aV].tId]!==undefined){if(ad&&ag>-1&&(ag+1)!==aV){ad=false}aE.push(aq[aV]);ag=aV}if(O.length===aE.length){O=aE;break}}}if(ad){B=O[0].getPreNode();F=O[O.length-1].getNextNode()}U=f("<ul class='zTreeDragUL'></ul>");for(aV=0,aR=O.length;aV<aR;aV++){at=O[aV];at.editNameFlag=false;i.selectNode(M,at,aV>0);i.removeTreeDom(M,at);aM=f("<li id='"+at.tId+"_tmp'></li>");aM.append(f("#"+at.tId+p.id.A).clone());aM.css("padding","0");aM.children("#"+at.tId+p.id.A).removeClass(p.node.CURSELECTED);U.append(aM);if(aV==M.edit.drag.maxShowNodeNum-1){aM=f("<li id='"+at.tId+"_moretmp'><a>  ...  </a></li>");U.append(aM);break}}U.attr("id",O[0].tId+p.id.UL+"_tmp");U.addClass(M.treeObj.attr("class"));U.appendTo("body");I=f("<span class='tmpzTreeMove_arrow'></span>");I.attr("id","zTreeMove_arrow_tmp");I.appendTo("body");M.treeObj.trigger(p.event.DRAG,[a0,M.treeId,O])}if(R.dragFlag==1){if(W&&I.attr("id")==a0.target.id&&L&&(a0.clientX+ab.scrollLeft()+2)>(f("#"+L+p.id.A,W).offset().left)){var aZ=f("#"+L+p.id.A,W);a0.target=(aZ.length>0)?aZ.get(0):a0.target}else{if(W){W.removeClass(p.node.TMPTARGET_TREE);if(L){f("#"+L+p.id.A,W).removeClass(p.node.TMPTARGET_NODE+"_"+p.move.TYPE_PREV).removeClass(p.node.TMPTARGET_NODE+"_"+A.move.TYPE_NEXT).removeClass(p.node.TMPTARGET_NODE+"_"+A.move.TYPE_INNER)}}}W=null;L=null;X=false;Z=M;var aW=y.getSettings();for(var aN in aW){if(aW[aN].treeId&&aW[aN].edit.enable&&aW[aN].treeId!=M.treeId&&(a0.target.id==aW[aN].treeId||f(a0.target).parents("#"+aW[aN].treeId).length>0)){X=true;Z=aW[aN]}}var ap=ab.scrollTop(),aY=ab.scrollLeft(),ae=Z.treeObj.offset(),ay=Z.treeObj.get(0).scrollHeight,aO=Z.treeObj.get(0).scrollWidth,aX=(a0.clientY+ap-ae.top),aK=(Z.treeObj.height()+ae.top-a0.clientY-ap),aF=(a0.clientX+aY-ae.left),ao=(Z.treeObj.width()+ae.left-a0.clientX-aY),ar=(aX<M.edit.drag.borderMax&&aX>M.edit.drag.borderMin),a1=(aK<M.edit.drag.borderMax&&aK>M.edit.drag.borderMin),aI=(aF<M.edit.drag.borderMax&&aF>M.edit.drag.borderMin),am=(ao<M.edit.drag.borderMax&&ao>M.edit.drag.borderMin),af=aX>M.edit.drag.borderMin&&aK>M.edit.drag.borderMin&&aF>M.edit.drag.borderMin&&ao>M.edit.drag.borderMin,aC=(ar&&Z.treeObj.scrollTop()<=0),aB=(a1&&(Z.treeObj.scrollTop()+Z.treeObj.height()+10)>=ay),ai=(aI&&Z.treeObj.scrollLeft()<=0),aw=(am&&(Z.treeObj.scrollLeft()+Z.treeObj.width()+10)>=aO);if(a0.target.id&&Z.treeObj.find("#"+a0.target.id).length>0){var an=a0.target;while(an&&an.tagName&&!t.eqs(an.tagName,"li")&&an.id!=Z.treeId){an=an.parentNode}var av=true;for(aV=0,aR=O.length;aV<aR;aV++){at=O[aV];if(an.id===at.tId){av=false;break}else{if(f("#"+at.tId).find("#"+an.id).length>0){av=false;break}}}if(av){if(a0.target.id&&(a0.target.id==(an.id+p.id.A)||f(a0.target).parents("#"+an.id+p.id.A).length>0)){W=f(an);L=an.id}}}at=O[0];if(af&&(a0.target.id==Z.treeId||f(a0.target).parents("#"+Z.treeId).length>0)){if(!W&&(a0.target.id==Z.treeId||aC||aB||ai||aw)&&(X||(!X&&at.parentTId))){W=Z.treeObj}if(ar){Z.treeObj.scrollTop(Z.treeObj.scrollTop()-10)}else{if(a1){Z.treeObj.scrollTop(Z.treeObj.scrollTop()+10)}}if(aI){Z.treeObj.scrollLeft(Z.treeObj.scrollLeft()-10)}else{if(am){Z.treeObj.scrollLeft(Z.treeObj.scrollLeft()+10)}}if(W&&W!=Z.treeObj&&W.offset().left<Z.treeObj.offset().left){Z.treeObj.scrollLeft(Z.treeObj.scrollLeft()+W.offset().left-Z.treeObj.offset().left)}}U.css({top:(a0.clientY+ap+3)+"px",left:(a0.clientX+aY+3)+"px"});var aA=0;var az=0;if(W&&W.attr("id")!=Z.treeId){var aJ=L==null?null:y.getNodeCache(Z,L),aD=(a0.ctrlKey&&M.edit.drag.isMove&&M.edit.drag.isCopy)||(!M.edit.drag.isMove&&M.edit.drag.isCopy),ak=!!(B&&L===B.tId),aH=!!(F&&L===F.tId),aT=(at.parentTId&&at.parentTId==L),aG=(aD||!aH)&&t.apply(Z.edit.drag.prev,[Z.treeId,O,aJ],!!Z.edit.drag.prev),aj=(aD||!ak)&&t.apply(Z.edit.drag.next,[Z.treeId,O,aJ],!!Z.edit.drag.next),ac=(aD||!aT)&&!(Z.data.keep.leaf&&!aJ.isParent)&&t.apply(Z.edit.drag.inner,[Z.treeId,O,aJ],!!Z.edit.drag.inner);if(!aG&&!aj&&!ac){W=null;L="";C=p.move.TYPE_INNER;I.css({display:"none"});if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}}else{var ax=f("#"+L+p.id.A,W),aQ=aJ.isLastNode?null:f("#"+aJ.getNextNode().tId+p.id.A,W.next()),aS=ax.offset().top,aU=ax.offset().left,aP=aG?(ac?0.25:(aj?0.5:1)):-1,al=aj?(ac?0.75:(aG?0.5:0)):-1,ah=(a0.clientY+ap-aS)/ax.height();if((aP==1||ah<=aP&&ah>=-0.2)&&aG){aA=1-I.width();az=aS-I.height()/2;C=p.move.TYPE_PREV}else{if((al==0||ah>=al&&ah<=1.2)&&aj){aA=1-I.width();az=(aQ==null||(aJ.isParent&&aJ.open))?(aS+ax.height()-I.height()/2):(aQ.offset().top-I.height()/2);C=p.move.TYPE_NEXT}else{aA=5-I.width();az=aS;C=p.move.TYPE_INNER}}I.css({display:"block",top:az+"px",left:(aU+aA)+"px"});ax.addClass(p.node.TMPTARGET_NODE+"_"+C);if(P!=L||E!=C){J=(new Date()).getTime()}if(aJ&&aJ.isParent&&C==p.move.TYPE_INNER){var au=true;if(window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==aJ.tId){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}else{if(window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===aJ.tId){au=false}}if(au){window.zTreeMoveTimer=setTimeout(function(){if(C!=p.move.TYPE_INNER){return}if(aJ&&aJ.isParent&&!aJ.open&&(new Date()).getTime()-J>Z.edit.drag.autoOpenTime&&t.apply(Z.callback.beforeDragOpen,[Z.treeId,aJ],true)){i.switchNode(Z,aJ);if(Z.edit.drag.autoExpandTrigger){Z.treeObj.trigger(p.event.EXPAND,[Z.treeId,aJ])}}},Z.edit.drag.autoOpenTime+50);window.zTreeMoveTargetNodeTId=aJ.tId}}}}else{C=p.move.TYPE_INNER;if(W&&t.apply(Z.edit.drag.inner,[Z.treeId,O,null],!!Z.edit.drag.inner)){W.addClass(p.node.TMPTARGET_TREE)}else{W=null}I.css({display:"none"});if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}}P=L;E=C}return false}ab.bind("mouseup",aa);function aa(aj){if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}P=null;E=null;ab.unbind("mousemove",K);ab.unbind("mouseup",aa);ab.unbind("selectstart",D);f("body").css("cursor","auto");if(W){W.removeClass(p.node.TMPTARGET_TREE);if(L){f("#"+L+p.id.A,W).removeClass(p.node.TMPTARGET_NODE+"_"+p.move.TYPE_PREV).removeClass(p.node.TMPTARGET_NODE+"_"+A.move.TYPE_NEXT).removeClass(p.node.TMPTARGET_NODE+"_"+A.move.TYPE_INNER)}}t.showIfameMask(M,false);R.showHoverDom=true;if(R.dragFlag==0){return}R.dragFlag=0;var ah,ad,ai;for(ah=0,ad=O.length;ah<ad;ah++){ai=O[ah];if(ai.isParent&&R.dragNodeShowBefore[ai.tId]&&!ai.open){i.expandCollapseNode(M,ai,!ai.open);delete R.dragNodeShowBefore[ai.tId]}}if(U){U.remove()}if(I){I.remove()}var ac=(aj.ctrlKey&&M.edit.drag.isMove&&M.edit.drag.isCopy)||(!M.edit.drag.isMove&&M.edit.drag.isCopy);if(!ac&&W&&L&&O[0].parentTId&&L==O[0].parentTId&&C==p.move.TYPE_INNER){W=null}if(W){var ae=L==null?null:y.getNodeCache(Z,L);if(t.apply(M.callback.beforeDrop,[Z.treeId,O,ae,C,ac],true)==false){return}var af=ac?t.clone(O):O;function ag(){if(X){if(!ac){for(var al=0,ak=O.length;al<ak;al++){i.removeNode(M,O[al])}}if(C==p.move.TYPE_INNER){i.addNodes(Z,ae,af)}else{i.addNodes(Z,ae.getParentNode(),af);if(C==p.move.TYPE_PREV){for(al=0,ak=af.length;al<ak;al++){i.moveNode(Z,ae,af[al],C,false)}}else{for(al=-1,ak=af.length-1;al<ak;ak--){i.moveNode(Z,ae,af[ak],C,false)}}}}else{if(ac&&C==p.move.TYPE_INNER){i.addNodes(Z,ae,af)}else{if(ac){i.addNodes(Z,ae.getParentNode(),af)}if(C!=p.move.TYPE_NEXT){for(al=0,ak=af.length;al<ak;al++){i.moveNode(Z,ae,af[al],C,false)}}else{for(al=-1,ak=af.length-1;al<ak;ak--){i.moveNode(Z,ae,af[ak],C,false)}}}}for(al=0,ak=af.length;al<ak;al++){i.selectNode(Z,af[al],al>0)}f("#"+af[0].tId).focus().blur()}if(C==p.move.TYPE_INNER&&t.canAsync(Z,ae)){i.asyncNode(Z,ae,false,ag)}else{ag()}M.treeObj.trigger(p.event.DROP,[aj,Z.treeId,af,ae,C,ac])}else{for(ah=0,ad=O.length;ah<ad;ah++){i.selectNode(Z,O[ah],ah>0)}M.treeObj.trigger(p.event.DROP,[aj,M.treeId,O,null,null,null])}}ab.bind("selectstart",D);function D(){return false}if(N.preventDefault){N.preventDefault()}return true}},h={getAbs:function(B){var C=B.getBoundingClientRect();return[C.left,C.top]},inputFocus:function(B){if(B.get(0)){B.focus();t.setCursorPosition(B.get(0),B.val().length)}},inputSelect:function(B){if(B.get(0)){B.focus();B.select()}},setCursorPosition:function(C,D){if(C.setSelectionRange){C.focus();C.setSelectionRange(D,D)}else{if(C.createTextRange){var B=C.createTextRange();B.collapse(true);B.moveEnd("character",D);B.moveStart("character",D);B.select()}}},showIfameMask:function(I,G){var F=y.getRoot(I);while(F.dragMaskList.length>0){F.dragMaskList[0].remove();F.dragMaskList.shift()}if(G){var J=f("iframe");for(var E=0,C=J.length;E<C;E++){var D=J.get(E),B=t.getAbs(D),H=f("<div id='zTreeMask_"+E+"' class='zTreeMask' style='top:"+B[1]+"px; left:"+B[0]+"px; width:"+D.offsetWidth+"px; height:"+D.offsetHeight+"px;'></div>");H.appendTo("body");F.dragMaskList.push(H)}}}},d={addEditBtn:function(C,D){if(D.editNameFlag||f("#"+D.tId+p.id.EDIT).length>0){return}if(!t.apply(C.edit.showRenameBtn,[C.treeId,D],C.edit.showRenameBtn)){return}var E=f("#"+D.tId+p.id.A),B="<span class='button edit' id='"+D.tId+p.id.EDIT+"' title='"+t.apply(C.edit.renameTitle,[C.treeId,D],C.edit.renameTitle)+"' treeNode"+p.id.EDIT+" style='display:none;'></span>";E.append(B);f("#"+D.tId+p.id.EDIT).bind("click",function(){if(!t.uCanDo(C)||t.apply(C.callback.beforeEditName,[C.treeId,D],true)==false){return false}i.editNode(C,D);return false}).show()},addRemoveBtn:function(B,C){if(C.editNameFlag||f("#"+C.tId+p.id.REMOVE).length>0){return}if(!t.apply(B.edit.showRemoveBtn,[B.treeId,C],B.edit.showRemoveBtn)){return}var E=f("#"+C.tId+p.id.A),D="<span class='button remove' id='"+C.tId+p.id.REMOVE+"' title='"+t.apply(B.edit.removeTitle,[B.treeId,C],B.edit.removeTitle)+"' treeNode"+p.id.REMOVE+" style='display:none;'></span>";E.append(D);f("#"+C.tId+p.id.REMOVE).bind("click",function(){if(!t.uCanDo(B)||t.apply(B.callback.beforeRemove,[B.treeId,C],true)==false){return false}i.removeNode(B,C);B.treeObj.trigger(p.event.REMOVE,[B.treeId,C]);return false}).bind("mousedown",function(F){return true}).show()},addHoverDom:function(B,C){if(y.getRoot(B).showHoverDom){C.isHover=true;if(B.edit.enable){i.addEditBtn(B,C);i.addRemoveBtn(B,C)}t.apply(B.view.addHoverDom,[B.treeId,C])}},cancelCurEditNode:function(G,E){var C=y.getRoot(G),F=G.data.key.name,H=C.curEditNode;if(H){var D=C.curEditInput;var B=E?E:D.val();if(!E&&t.apply(G.callback.beforeRename,[G.treeId,H,B],true)===false){H.editNameFlag=true;return false}else{H[F]=B?B:D.val();if(!E){G.treeObj.trigger(p.event.RENAME,[G.treeId,H])}}var I=f("#"+H.tId+p.id.A);I.removeClass(p.node.CURSELECTED_EDIT);D.unbind();i.setNodeName(G,H);H.editNameFlag=false;C.curEditNode=null;C.curEditInput=null;i.selectNode(G,H,false)}C.noSelection=true;return true},editNode:function(E,F){var B=y.getRoot(E);i.editNodeBlur=false;if(y.isSelectedNode(E,F)&&B.curEditNode==F&&F.editNameFlag){setTimeout(function(){t.inputFocus(B.curEditInput)},0);return}var D=E.data.key.name;F.editNameFlag=true;i.removeTreeDom(E,F);i.cancelCurEditNode(E);i.selectNode(E,F,false);f("#"+F.tId+p.id.SPAN).html("<input type=text class='rename' id='"+F.tId+p.id.INPUT+"' treeNode"+p.id.INPUT+" >");var C=f("#"+F.tId+p.id.INPUT);C.attr("value",F[D]);if(E.edit.editNameSelectAll){t.inputSelect(C)}else{t.inputFocus(C)}C.bind("blur",function(G){if(!i.editNodeBlur){i.cancelCurEditNode(E)}}).bind("keydown",function(G){if(G.keyCode=="13"){i.editNodeBlur=true;i.cancelCurEditNode(E,null,true)}else{if(G.keyCode=="27"){i.cancelCurEditNode(E,F[D])}}}).bind("click",function(G){return false}).bind("dblclick",function(G){return false});f("#"+F.tId+p.id.A).addClass(p.node.CURSELECTED_EDIT);B.curEditInput=C;B.noSelection=false;B.curEditNode=F},moveNode:function(L,E,O,D,Z,F){var Q=y.getRoot(L),J=L.data.key.children;if(E==O){return}if(L.data.keep.leaf&&E&&!E.isParent&&D==p.move.TYPE_INNER){return}var T=(O.parentTId?O.getParentNode():Q),N=(E===null||E==Q);if(N&&E===null){E=Q}if(N){D=p.move.TYPE_INNER}var B=(E.parentTId?E.getParentNode():Q);if(D!=p.move.TYPE_PREV&&D!=p.move.TYPE_NEXT){D=p.move.TYPE_INNER}if(D==p.move.TYPE_INNER){if(N){O.parentTId=null}else{if(!E.isParent){E.isParent=true;E.open=!!E.open;i.setNodeLineIcos(L,E)}O.parentTId=E.tId}}var G,I;if(N){G=L.treeObj;I=G}else{if(!F&&D==p.move.TYPE_INNER){i.expandCollapseNode(L,E,true,false)}else{if(!F){i.expandCollapseNode(L,E.getParentNode(),true,false)}}G=f("#"+E.tId);I=f("#"+E.tId+p.id.UL);if(!!G.get(0)&&!I.get(0)){var X=[];i.makeUlHtml(L,E,X,"");G.append(X.join(""))}I=f("#"+E.tId+p.id.UL)}var V=f("#"+O.tId);if(!V.get(0)){V=i.appendNodes(L,O.level,[O],null,false,true).join("")}else{if(!G.get(0)){V.remove()}}if(I.get(0)&&D==p.move.TYPE_INNER){I.append(V)}else{if(G.get(0)&&D==p.move.TYPE_PREV){G.before(V)}else{if(G.get(0)&&D==p.move.TYPE_NEXT){G.after(V)}}}var S,R,H=-1,U=0,Y=null,C=null,W=O.level;if(O.isFirstNode){H=0;if(T[J].length>1){Y=T[J][1];Y.isFirstNode=true}}else{if(O.isLastNode){H=T[J].length-1;Y=T[J][H-1];Y.isLastNode=true}else{for(S=0,R=T[J].length;S<R;S++){if(T[J][S].tId==O.tId){H=S;break}}}}if(H>=0){T[J].splice(H,1)}if(D!=p.move.TYPE_INNER){for(S=0,R=B[J].length;S<R;S++){if(B[J][S].tId==E.tId){U=S}}}if(D==p.move.TYPE_INNER){if(!E[J]){E[J]=new Array()}if(E[J].length>0){C=E[J][E[J].length-1];C.isLastNode=false}E[J].splice(E[J].length,0,O);O.isLastNode=true;O.isFirstNode=(E[J].length==1)}else{if(E.isFirstNode&&D==p.move.TYPE_PREV){B[J].splice(U,0,O);C=E;C.isFirstNode=false;O.parentTId=E.parentTId;O.isFirstNode=true;O.isLastNode=false}else{if(E.isLastNode&&D==p.move.TYPE_NEXT){B[J].splice(U+1,0,O);C=E;C.isLastNode=false;O.parentTId=E.parentTId;O.isFirstNode=false;O.isLastNode=true}else{if(D==p.move.TYPE_PREV){B[J].splice(U,0,O)}else{B[J].splice(U+1,0,O)}O.parentTId=E.parentTId;O.isFirstNode=false;O.isLastNode=false}}}y.fixPIdKeyValue(L,O);y.setSonNodeLevel(L,O.getParentNode(),O);i.setNodeLineIcos(L,O);i.repairNodeLevelClass(L,O,W);if(!L.data.keep.parent&&T[J].length<1){T.isParent=false;T.open=false;var M=f("#"+T.tId+p.id.UL),P=f("#"+T.tId+p.id.SWITCH),K=f("#"+T.tId+p.id.ICON);i.replaceSwitchClass(T,P,p.folder.DOCU);i.replaceIcoClass(T,K,p.folder.DOCU);M.css("display","none")}else{if(Y){i.setNodeLineIcos(L,Y)}}if(C){i.setNodeLineIcos(L,C)}if(!!L.check&&L.check.enable&&i.repairChkClass){i.repairChkClass(L,T);i.repairParentChkClassWithSelf(L,T);if(T!=O.parent){i.repairParentChkClassWithSelf(L,O)}}if(!F){i.expandCollapseParentNode(L,O.getParentNode(),true,Z)}},removeEditBtn:function(B){f("#"+B.tId+p.id.EDIT).unbind().remove()},removeRemoveBtn:function(B){f("#"+B.tId+p.id.REMOVE).unbind().remove()},removeTreeDom:function(B,C){C.isHover=false;i.removeEditBtn(C);i.removeRemoveBtn(C);t.apply(B.view.removeHoverDom,[B.treeId,C])},repairNodeLevelClass:function(C,E,D){if(D===E.level){return}var F=f("#"+E.tId),I=f("#"+E.tId+p.id.A),H=f("#"+E.tId+p.id.UL),B="level"+D,G="level"+E.level;F.removeClass(B);F.addClass(G);I.removeClass(B);I.addClass(G);H.removeClass(B);H.addClass(G)}},r={tools:h,view:d,event:g,data:o};f.extend(true,f.fn.zTree.consts,A);f.extend(true,f.fn.zTree._z,r);var b=f.fn.zTree,t=b._z.tools,p=b.consts,i=b._z.view,y=b._z.data,q=b._z.event;y.exSetting(l);y.addInitBind(m);y.addInitUnBind(x);y.addInitCache(c);y.addInitNode(u);y.addInitProxy(n);y.addInitRoot(v);y.addZTreeTools(j);var s=i.cancelPreSelectedNode;i.cancelPreSelectedNode=function(D,E){var F=y.getRoot(D).curSelectedList;for(var C=0,B=F.length;C<B;C++){if(!E||E===F[C]){i.removeTreeDom(D,F[C]);if(E){break}}}if(s){s.apply(i,arguments)}};var w=i.createNodes;i.createNodes=function(D,E,C,B){if(w){w.apply(i,arguments)}if(!C){return}if(i.repairParentChkClassWithSelf){i.repairParentChkClassWithSelf(D,B)}};i.makeNodeUrl=function(B,C){return(C.url&&!B.edit.enable)?C.url:null};var a=i.removeNode;i.removeNode=function(C,D){var B=y.getRoot(C);if(B.curEditNode===D){B.curEditNode=null}if(a){a.apply(i,arguments)}};var z=i.selectNode;i.selectNode=function(D,E,C){var B=y.getRoot(D);if(y.isSelectedNode(D,E)&&B.curEditNode==E&&E.editNameFlag){return false}if(z){z.apply(i,arguments)}i.addHoverDom(D,E);return true};var e=t.uCanDo;t.uCanDo=function(C,D){var B=y.getRoot(C);if(D&&(t.eqs(D.type,"mouseover")||t.eqs(D.type,"mouseout")||t.eqs(D.type,"mousedown")||t.eqs(D.type,"mouseup"))){return true}return(!B.curEditNode)&&(e?e.apply(i,arguments):true)}})(jQuery);
;
(function(e){var r=function(w,A,z,u,y,v,x){if(typeof z.isHidden=="string"){z.isHidden=q.eqs(z.isHidden,"true")}z.isHidden=!!z.isHidden;s.initHideForExCheck(w,z)},a=function(v,w,u){},h=function(w,v){v.showNodes=function(x,y){g.showNodes(w,x,y)};v.showNode=function(y,x){if(!y){return}g.showNodes(w,[y],x)};v.hideNodes=function(x,y){g.hideNodes(w,x,y)};v.hideNode=function(y,x){if(!y){return}g.hideNodes(w,[y],x)};var u=v.checkNode;if(u){v.checkNode=function(z,y,A,x){if(!!z&&!!z.isHidden){return}u.apply(v,arguments)}}},j={initHideForExCheck:function(u,v){if(v.isHidden&&u.check&&u.check.enable){v._nocheck=!!v.nocheck;v.nocheck=true;v.check_Child_State=-1;if(g.repairParentChkClassWithSelf){g.repairParentChkClassWithSelf(u,v)}}},initShowForExCheck:function(v,w){if(!w.isHidden&&v.check&&v.check.enable){w.nocheck=w._nocheck;delete w._nocheck;if(g.setChkClass){var u=e("#"+w.tId+k.id.CHECK);g.setChkClass(v,u,w)}if(g.repairParentChkClassWithSelf){g.repairParentChkClassWithSelf(v,w)}}}},c={clearOldFirstNode:function(u,v){var w=v.getNextNode();while(!!w){if(w.isFirstNode){w.isFirstNode=false;g.setNodeLineIcos(u,w);break}if(w.isLastNode){break}w=w.getNextNode()}},clearOldLastNode:function(u,v){var w=v.getPreNode();while(!!w){if(w.isLastNode){w.isLastNode=false;g.setNodeLineIcos(u,w);break}if(w.isFirstNode){break}w=w.getPreNode()}},makeDOMNodeMainBefore:function(u,v,w){u.push("<li ",(w.isHidden?"style='display:none;' ":""),"id='",w.tId,"' class='level",w.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(v,w,u){w.isHidden=false;s.initShowForExCheck(v,w);e("#"+w.tId).show()},showNodes:function(C,u,D){if(!u||u.length==0){return}var x={},A,z;for(A=0,z=u.length;A<z;A++){var w=u[A];if(!x[w.parentTId]){var y=w.getParentNode();x[w.parentTId]=(y===null)?s.getRoot(C):w.getParentNode()}g.showNode(C,w,D)}for(var B in x){var v=x[B][C.data.key.children];g.setFirstNodeForShow(C,v);g.setLastNodeForShow(C,v)}},hideNode:function(v,w,u){w.isHidden=true;w.isFirstNode=false;w.isLastNode=false;s.initHideForExCheck(v,w);g.cancelPreSelectedNode(v,w);e("#"+w.tId).hide()},hideNodes:function(C,u,D){if(!u||u.length==0){return}var x={},A,z;for(A=0,z=u.length;A<z;A++){var w=u[A];if((w.isFirstNode||w.isLastNode)&&!x[w.parentTId]){var y=w.getParentNode();x[w.parentTId]=(y===null)?s.getRoot(C):w.getParentNode()}g.hideNode(C,w,D)}for(var B in x){var v=x[B][C.data.key.children];g.setFirstNodeForHide(C,v);g.setLastNodeForHide(C,v)}},setFirstNode:function(v,u){var x=v.data.key.children,w=u[x].length;if(w>0&&!u[x][0].isHidden){u[x][0].isFirstNode=true}else{if(w>0){g.setFirstNodeForHide(v,u[x])}}},setLastNode:function(v,u){var x=v.data.key.children,w=u[x].length;if(w>0&&!u[x][0].isHidden){u[x][w-1].isLastNode=true}else{if(w>0){g.setLastNodeForHide(v,u[x])}}},setFirstNodeForHide:function(x,u){var y,w,v;for(w=0,v=u.length;w<v;w++){y=u[w];if(y.isFirstNode){break}if(!y.isHidden&&!y.isFirstNode){y.isFirstNode=true;g.setNodeLineIcos(x,y);break}else{y=null}}return y},setFirstNodeForShow:function(y,v){var A,x,w,z,u;for(x=0,w=v.length;x<w;x++){A=v[x];if(!z&&!A.isHidden&&A.isFirstNode){z=A;break}else{if(!z&&!A.isHidden&&!A.isFirstNode){A.isFirstNode=true;z=A;g.setNodeLineIcos(y,A)}else{if(z&&A.isFirstNode){A.isFirstNode=false;u=A;g.setNodeLineIcos(y,A);break}else{A=null}}}}return{"new":z,old:u}},setLastNodeForHide:function(w,u){var x,v;for(v=u.length-1;v>=0;v--){x=u[v];if(x.isLastNode){break}if(!x.isHidden&&!x.isLastNode){x.isLastNode=true;g.setNodeLineIcos(w,x);break}else{x=null}}return x},setLastNodeForShow:function(y,v){var A,x,w,z,u;for(x=v.length-1;x>=0;x--){A=v[x];if(!z&&!A.isHidden&&A.isLastNode){z=A;break}else{if(!z&&!A.isHidden&&!A.isLastNode){A.isLastNode=true;z=A;g.setNodeLineIcos(y,A)}else{if(z&&A.isLastNode){A.isLastNode=false;u=A;g.setNodeLineIcos(y,A);break}else{A=null}}}}return{"new":z,old:u}}},n={view:c,data:j};e.extend(true,e.fn.zTree._z,n);var b=e.fn.zTree,q=b._z.tools,k=b.consts,g=b._z.view,s=b._z.data,o=b._z.event;s.addInitNode(r);s.addBeforeA(a);s.addZTreeTools(h);var d=s.initNode;s.tmpHideParent=-1;s.initNode=function(C,u,y,z,B,A,w){if(s.tmpHideParent!==z){s.tmpHideParent=z;var x=(z)?z:s.getRoot(C),v=x[C.data.key.children];s.tmpHideFirstNode=g.setFirstNodeForHide(C,v);s.tmpHideLastNode=g.setLastNodeForHide(C,v);g.setNodeLineIcos(C,s.tmpHideFirstNode);g.setNodeLineIcos(C,s.tmpHideLastNode)}B=(s.tmpHideFirstNode===y);A=(s.tmpHideLastNode===y);if(d){d.apply(s,arguments)}if(A){g.clearOldLastNode(C,y)}};var p=s.makeChkFlag;if(!!p){s.makeChkFlag=function(u,v){if(!!v&&!!v.isHidden){return}p.apply(s,arguments)}}var f=s.getTreeCheckedNodes;if(!!f){s.getTreeCheckedNodes=function(w,u,x,v){if(!!u&&u.length>0){var y=u[0].getParentNode();if(!!y&&!!y.isHidden){return[]}}return f.apply(s,arguments)}}var l=s.getTreeChangeCheckedNodes;if(!!l){s.getTreeChangeCheckedNodes=function(w,u,v){if(!!u&&u.length>0){var x=u[0].getParentNode();if(!!x&&!!x.isHidden){return[]}}return l.apply(s,arguments)}}var m=g.expandCollapseSonNode;if(!!m){g.expandCollapseSonNode=function(u,v,x,w,y){if(!!v&&!!v.isHidden){return}m.apply(g,arguments)}}var t=g.setSonNodeCheckBox;if(!!t){g.setSonNodeCheckBox=function(u,v,w,x){if(!!v&&!!v.isHidden){return}t.apply(g,arguments)}}var i=g.repairParentChkClassWithSelf;if(!!i){g.repairParentChkClassWithSelf=function(u,v){if(!!v&&!!v.isHidden){return}i.apply(g,arguments)}}})(jQuery);
;
$(function(){var e="<div id='dialog_form'><div class='dialog_form_content'><table width='100%'><tbody><tr class='odd'><td class='Label'></td><td class='value'><div class='td_class'><select name='serialName' id='serialName' style='' ><option value='' >----</option></select></div></td></tr><tr><td class='Label'></td><td class='value'><div class='td_class'><select name='serialMaintain' id='serialMaintain' style='width=90%' ><option value='' >----</option></select></div></td></tr><tr class='odd'></tr><tr class='odd'><td class='Label'></td><td class='value'><div class='td_class'><div class='serilNumPosition' style='float:left;padding-top:3px;'  id='serialNum_head_part'></div>&nbsp;&nbsp;&nbsp;<input class='serilNumPosition' style='width:30px;margin:0px 5px;float:left;' type='text' name='serialNum_pointer'  id='serialNum_pointer' value=''/>&nbsp;&nbsp;&nbsp;<div class='serilNumPosition' style='float:left;padding-top:3px;' id='serialNum_last_part'></div><input style='display:none;' type='text' name='serialNum'  id='serialNum' value=''/></div></td></tr></tbody></table></div></div>";var h="";var j="";var a="";var d="";$("#iseditor").focus(function(){document.getElementById("serialName").options.length=1;$(".hide").show()});function b(n,m,l,o,k){document.getElementById("serialName").options.length=1;if(n!=""&&n!=""){JDS.call({service:"serialNumberService.getByDesignatedId",data:[true,n],success:function(p){$.each(p.data,function(q){$("#serialName").append('<option value="'+p.data[q].name+'">'+p.data[q].name+"</option>/n/r");incremental=p.data[q].incremental})},})}else{if(m!=""&&m!=""){JDS.call({service:"serialNumberService.getByDesignatedType",data:[true,m],success:function(p){$.each(p.data,function(q){$("#serialName").append('<option value="'+p.data[q].name+'">'+p.data[q].name+"</option>/n/r");incremental=p.data[q].incremental})},})}else{JDS.call({service:"serialNumberService.getByIsEditor",data:[true],success:function(p){$.each(p.data,function(q){$("#serialName").append('<option value="'+p.data[q].name+'">'+p.data[q].name+"</option>/n/r");incremental=p.data[q].incremental})},})}}}function c(){$("#serialName").change(function(){document.getElementById("serialMaintain").options.length=1;$("#serialName option").each(function(k,l){if($(this).attr("selected")){g($(this).val())}})})}function g(k){JDS.call({service:"serialNumberMaintainService.getByName",data:[k],success:function(l){if(l.data.length>0){$.each(l.data,function(m){$("#serialMaintain").append('<option value="'+l.data[m].keyPart+'">'+l.data[m].headPart+l.data[m].pointer+l.data[m].lastPart+"</option>/n/r");h=l.data[m].headPart;j=l.data[m].lastPart;a=l.data[m].pointer;d=l.data[m].keyPart})}else{JDS.call({service:"serialNumberService.getByName",data:[k],success:function(m){d=m.data.keyPart;$("#serialNum").val(m.data.headPart+m.data.initialValue+m.data.lastPart)},error:function(m){}})}},})}function i(){$("#serialMaintain").change(function(){$("#serialMaintain option").each(function(k,l){if($(this).attr("selected")){$("#serialNum_head_part").text(h);$("#serialNum_pointer").val(a);$("#serialNum_last_part").text(j);$("#serialNum").val($(this).text());d=$(this).val()}})})}function f(){document.getElementById("serialName").options.length=1;document.getElementById("serialMaintain").options.length=1;$("#serialNum").val("");$("#serialNum_head_part").text("");$("#serialNum_pointer").val("");$("#serialNum_last_part").text("");$(".hide").hide()}getEditableSerialNumber=function(k,s,q,t,p,n){var v=new Object();v.content=e;v.title="";v.height=400;v.width=700;var r=new Object();r.=u;v.buttons=r;showDialog(v);b(k,s,q,t,p);c();i();var m="";function u(){var w=$("#serialNum").val();var y=$("#serialNum_pointer").val();m=h+y+j;var x=l(t,p,m);if(x){oAlert2("!",closeDialog,"");return}else{if(q==0){f();$("#editableSerialNumber").dialog("close");closeDialog();$("#iseditor").val(m)}if(q==1){var z=a-incremental;if(y>z){o(m,h,d,q,y);closeDialog();$("#iseditor").val(m)}else{closeDialog();$("#iseditor").val(m)}}if(q==2){o(m,h,d,q,y);closeDialog();$("#iseditor").val(m)}}$("#"+n).val(m)}function o(y,z,x,w,A){JDS.call({service:"serialNumberMaintainService.savePointer",data:[y,z,x,w,A],async:false,success:function(B){f()},})}function l(z,w,x){var y;JDS.call({service:"serialNumberMaintainService.checkIsOccupied",data:[z,w,x],async:false,success:function(A){y=A.data},});return y}};getNotEditableSerialNumberForDytable=function(k,n,l,m){var o;JDS.call({service:"serialNumberService.getNotEditorSerialNumberForDytable",data:[k,n,l,m],async:false,success:function(p){o=p.data;return p.data},});return o}});
;
(function(e){var h=function(l,k){this.init("numberInput",l,k)};var c=new Number(2147483647);var b=new Number(-2147483648);var i=new Number(9223372036854776000);var g=new Number(-9223372036854776000);var d=new Number(1.7976931348623157e+308);var j=new Number(5e-324);var f={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"};h.prototype={constructor:h,init:function(m,l,k){this.type=m;this.$element=e(l);this.options=this.getOptions(k);this.$element.keydown(e.proxy(this._preCheckInput,this));this.$element.keyup(e.proxy(this._postCheckInput,this))},getOptions:function(k){k=e.extend({},e.fn[this.type].defaults,k,this.$element.data());return k},_preCheckInput:function(k){this.oldValue=this.$element.val();if(k.keyCode==46||k.keyCode==8||k.keyCode==9||k.keyCode==27||(k.keyCode==65&&k.ctrlKey===true)||(k.keyCode>=35&&k.keyCode<=39)){return true}if(k.keyCode==189&&this.options.negative==true){return true}if(k.keyCode==190&&this.options.dataType=="double"){return true}if(!(k.keyCode>=48&&k.keyCode<=57)&&!(k.keyCode>=95&&k.keyCode<=105)){return false}},_postCheckInput:function(l){var m=this.$element.val();if(this.options.negative==true&&m=="-"){return true}if(this.$element.val()==""){return true}var n=Number(this.$element.val());if(!a(n)){this.$element.val(this.oldValue);return false}var k=this.options.dataType;if(k==="int"){if(m.indexOf(".")!=-1){this.$element.val(this.oldValue);return false}if(n>c||n<b){this.$element.val(this.oldValue);return false}}else{if(k==="long"){if(m.indexOf(".")!=-1){this.$element.val(this.oldValue);return false}if(n>i||n<g){this.$element.val(this.oldValue);return false}}else{if(k==="double"){if(n>d||n<j){this.$element.val(this.oldValue);return false}}else{this.$element.val(this.oldValue);return false}}}}};function a(k){return !isNaN(parseFloat(k))&&isFinite(k)}e.fn.numberInput=function(k){return this.each(function(){var n=e(this),m=n.data("numberInput"),l=typeof k=="object"&&k;if(!m){n.data("numberInput",(m=new h(this,l)))}if(typeof k=="string"){m[k]()}})};e.fn.numberInput.Constructor=h;e.fn.numberInput.defaults={decimal:0,dataType:"double",format:false,pattern:null,negative:true}})(jQuery);
;
var fileServiceURL={saveFiles:"/repository/file/mongo/savefiles",downFile:"/repository/file/mongo/download?fileID=",downloadBody:"/repository/file/mongo/downloadBody/",deleteFile:"/repository/file/mongo/deleteFile?fileID=",updateSignature:"/repository/file/mongo/updateSignature",viewFile:"/repository/file/mongo/downloadSWF?fileID="};iconFileControlStyle={OnlyIcon:0,OnlyBody:1,IconAndBody:2};BODY_FILEID_PREFIX="BODY_FILEID_";
;
var FileInfo=function(){this.fileID=null;this.fileName=null;this.contentType=null;this.digestAlgorithm=null;this.digestValue=null;this.certificate=null;this.signatureValue=null;this.isNew=true};$(function(){WellFileUpload=function(a){this.ctlID=a;this.$containerElement=null;this.signature=false;this.readOnly=false;this.multiple=false;this.$fileContainer=null;this.files=null};WellFileUpload.files=[];WellFileUpload.bodyFiles=[];WellFileUpload.fileUploadObj=[];WellFileUpload.file2swf=false;WellFileUpload.get=function(a){return WellFileUpload.fileUploadObj[a]};WellFileUpload.loadFilesFormDb=function(b,c){var a=[];JDS.call({service:"mongoFileService.getNonioFilesFromFolder",data:[b,c],async:false,success:function(d){var h=d.data;if(h!=null){for(var f in h){var e=h[f];var g=new FileInfo();g.fileID=e.fileID;g.fileName=e.fileName;g.contentType=e.contentType;g.digestAlgorithm=e.digestAlgorithm;g.digestValue=e.digestValue;g.certificate=e.certificate;g.isNew=false;a.push(g)}}},error:function(d){}});return a};WellFileUpload.sign=function(h,c,g,i){var j=fjcaWs.OpenFJCAUSBKey();fjcaWs.ReadCertFromKey();var e=fjcaWs.GetCertData();fjcaWs.SignDataWithKey(c);var d=fjcaWs.GetSignData();var f={};fjcaWs.CloseUSBKey();f.digestValue=c;f.certificate=e;f.signatureValue=d;f.digestAlgorithm=g;var a=ctx+fileServiceURL.updateSignature;var k=false;$.ajax({type:"post",url:a,data:{signatureData:JSON.stringify(f),fileID:h},timeout:1000,async:false,success:function(b){k=true},error:function(b){k=false}});return k};WellFileUpload.prototype.initWithLoadFilesFromFileSystem=function(g,e,d,c,b,f){if((b==undefined||b==null||b=="")){throw new Error("ID")}if((f==undefined||f==null||f=="")){throw new Error("")}var a=WellFileUpload.loadFilesFormDb(b,f);this.init(g,e,d,c,a)};WellFileUpload.prototype.init=function(m,k,h,p,e){if((k==undefined||k==null||k=="")){throw new Error("")}this.$containerElement=k;this.signature=((h==undefined||h==null||h=="")?false:true);this.readOnly=((m==undefined||m==null||m=="")?false:true);this.multiple=((p==undefined||p==null||p=="")?false:true);WellFileUpload.fileUploadObj[this.ctlID]=this;this.$fileContainer=null;this.files=null;if(WellFileUpload.files[this.ctlID]==undefined){WellFileUpload.files[this.ctlID]=[]}this.files=WellFileUpload.files[this.ctlID];var c="";var j="filelist"+this.ctlID;if(!this.readOnly){c+='<div class="upload_div" id="upload_div"><span class="btn btn-success fileinput-button2"><span class="file_icon" style="display: block;float: left;"></span><span class="add_icon"></span><input id='+this.ctlID+' type="file" name="files" multiple class="fileupload_css"></span></div>'}c+='<div id="'+j+'"></div>';this.$containerElement.html(c);if(!this.multiple){$("#"+this.ctlID).removeAttr("multiple")}var l=this;l.$fileContainer=$("#"+j);var a="attach-list"+l.ctlID;l.$fileContainer.append('<ul class="'+a+'" style="list-style-type:none;padding: 0;" />');if(e!=null&&e.length>0){var g=e.length;for(var b=0;b<g;b++){var n=e[b];var i=n.fileID;var r=n.fileName;var s=n.digestValue;var f=n.digestAlgorithm;var d=n.certificate;var o=n.contentType;var q=n.isNew;q=q==undefined?true:q;l.addFile(r,i,o,s,f,d,q)}}if(!l.readOnly){l.defineUploadEvent()}};WellFileUpload.prototype.defineUploadEvent=function(){var c=this;var a=ctx+fileServiceURL.saveFiles;var b=false;if($.browser.msie&&$.browser.version<10){b=true}$("#"+c.ctlID).fileupload({url:a,iframe:b,dataType:"json",autoUpload:true,formData:{signUploadFile:c.signature},maxFileSize:5000000,previewMaxWidth:100,previewMaxHeight:100,previewCrop:true}).on("fileuploadadd",function(f,d){pageLock("show")}).on("fileuploadsubmit",function(f,d){if(c.signature&&!c.validSignatureUSB()){pageLock("hide");return false}return true}).on("fileuploaddone",function(f,d){pageLock("hide");if((typeof d.result)=="undefined"){oAlert("")}else{$.each(d.result.data,function(e){c.addFile(this.filename,this.fileID,this.contentType,this.digestValue,this.digestAlgorithm,this.certificate,true)})}}).on("fileuploadfail",function(f,d){pageLock("hide");if((typeof d.result)=="undefined"){oAlert("!!!")}else{$.each(d.result.files,function(g,h){var e=$("<span/>").text(h.error);$(d.context.children()[g]).append("<br>").append(e)})}})};WellFileUpload.createReplicaOfSWF=function(a){var b=true;if(this.file2swf){JDS.call({service:"mongoFileService.createReplicaOfSWF",data:a,async:false,success:function(c){},error:function(c){b=false}})}return b};WellFileUpload.prototype.addFile=function(a,k,o,b,j,l,f){if(typeof f=="undefined"){f=false}var h=this;if(this.signature&&f){var n=WellFileUpload.sign(k,b,j,l);if(!n){oAlert(",");return}}if(f&&WellFileUpload.file2swf){var m=WellFileUpload.createReplicaOfSWF(k);if(!m){oAlert(",");return}}var e=this.$fileContainer.find("ul");if(!this.multiple){this.files.length=0;e.find("._delete_input").last().trigger("click")}this.$fileContainer.find("ul").append('<li filename="'+a+'"></li>');var c='<div class="files_div" style="background:none;"><span class="file_icon" style="display:block;float:left;"></span><p class="filename"  style="display:block;float:left;">'+a+"</p>";if(this.readOnly){c+="</div>"}else{c+="<div class='delete_Div' style='float:left;'><input type='button' id='delete' class='_delete_input' filename='"+a+"' value='' /></div></div>"}e.find("li").last().html(c);var i=false;for(var g=0;g<this.files.length;g++){if(h.files[g].fileID==k){i=true}}if(!i){var d=new FileInfo();d.fileID=k;d.fileName=a;d.digestAlgorithm=j==undefined?"":j;d.digestValue=b==undefined?"":b;d.certificate=l==undefined?"":l;d.signatureValue="";d.contentType=o==undefined?"":o;d.isNew=f;this.files.push(d)}(function(p){e.find(".filename").last().last().click(function(){location.href=ctx+fileServiceURL.downFile+p})})(k);e.find("._delete_input").last().click(function(){$(this).parent().parent().remove();for(var p=0;p<h.files.length;p++){if(h.files[p].fileID==k){h.files.splice(p,1)}}if(f){$.ajax({type:"post",url:ctx+fileServiceURL.deleteFile+k,success:function(q){},error:function(q){}})}})};WellFileUpload.prototype.addFiles=function(c,d){var e=this;if(c==undefined||!(c instanceof Array)||c.length==0){return}if(d==false){e.files.length=0}for(var b in c){var a=c[b];e.addFile(a.fileName,a.fileID,a.contentType,a.digestValue,a.digestAlgorithm,a.certificate,a.isNew)}};WellFileUpload.prototype.validSignatureUSB=function(){return checkCAKey()};WellFileUpload.getFiles=function(a){var b=WellFileUpload.files[a];return b};WellFileUpload.createFolderID=function(){var a=null;JDS.call({service:"mongoFileService.createFolderID",data:[],async:false,success:function(b){a=b.data},error:function(b){a=new UUID().id.toLowerCase()}});return a};WellFileUpload.getCtlID4Dytable=function(a,d,c){var b=a+"___"+d+"____"+c;return b}});
;
$(function(){WellFileUpload4Icon=function(a,b){this.ctlID=a;this.bodyFiles=[];this.style=(b==undefined?iconFileControlStyle.IconAndBody:b)};WellFileUpload4Icon.prototype=new WellFileUpload("formWellFileUpload4Icon","icon");WellFileUpload4Icon.prototype.initWithLoadFilesFromFileSystem=function(f,g,d,c,b,e){if((b==undefined||b==null||b=="")){throw new Error("ID")}if((e==undefined||e==null||e=="")){throw new Error("")}var a=WellFileUpload.loadFilesFormDb(b,e);this.dbFiles=a;this.init(f,g,d,c,this.dbFiles)};WellFileUpload4Icon.prototype.init=function(c,a,l,i,g){this.uploadable=c;this.downable=a;this.$containerElement=l;this.signature=i;if(WellFileUpload.bodyFiles[this.ctlID]==undefined){WellFileUpload.bodyFiles[this.ctlID]=[]}this.bodyFiles=WellFileUpload.bodyFiles[this.ctlID];if(WellFileUpload.files[this.ctlID]==undefined){WellFileUpload.files[this.ctlID]=[]}this.files=WellFileUpload.files[this.ctlID];var k="titleContainer_Id_"+this.ctlID;var r="<div class='title' style='padding-top:10px;padding-left:14px;height:29px;margin-right: -16px;margin-left: -13px;' id='"+k+"'></div>";var s="files_"+this.ctlID;var p='<div class="post-info"><div id="aaaa" class="post-bd aaaa"></div><div id="'+s+'" class="post-bd"></div></div>';this.$containerElement.html(r);this.$containerElement.append(p);this.$fileContainer=$("#"+s);this.$fileContainer4Body=this.$fileContainer.prev();this.$titleContainer=$("#"+k);if(this.uploadable){var f=" / ";if(this.style==iconFileControlStyle.OnlyIcon){f=""}else{if(this.style==iconFileControlStyle.OnlyBody){f=""}}var e='<div class="post-info"><div class="post-hd">'+f+'<div class="extralDiv"><span class="btn btn-success fileinput-button"><i></i>';if(this.style!=iconFileControlStyle.OnlyBody){e=e+"<span></span><input id='"+this.ctlID+"' type='file' name='files' multiple>"}e=e+"</span></div></div></div>";this.$titleContainer.html(e);if(this.style!=iconFileControlStyle.OnlyIcon){this.$titleContainer.find(".extralDiv").prepend('<div id="'+this.ctlID+'_body" isNew="true" class="extral z"><i></i> </div>')}}else{var e='<div class="post-info"><div class="post-hd"></div></div>';this.$titleContainer.html(e)}this.$fileContainer.append('<div class="filelist"/>');this.$fileContainer.find(".filelist").append('<ul class="attach-list"/>');this.$fileContainer4Body.append('<div class="filelist"/>');this.$fileContainer4Body.find(".filelist").append('<ul class="attach-list2" >');if(this.style!=iconFileControlStyle.OnlyBody){this.defineDeleteEvent()}if(g!=null&&g.length>0){var n=g;for(var b=0;b<n.length;b++){var o=n[b];var m=o.fileName;var j=o.fileID;var t=o.digestValue;var h=o.digestAlgorithm;var d=o.certificate;var q=o.contentType;if(j.indexOf(BODY_FILEID_PREFIX)==0){this.addBodyFile(m,j,false)}else{this.addFile(m,j,q,t,h,d,false,false)}}}if(this.uploadable){this.defineUploadEvent();if(this.style!=iconFileControlStyle.OnlyIcon){this.defineUploadBodyEvent()}}};WellFileUpload4Icon.prototype.addFile=function(a,i,n,b,h,j,g){if(this.signature&&g){var o=WellFileUpload.sign(i,b,h,j);if(!o){oAlert(",");return}}if(g&&WellFileUpload.file2swf){var l=WellFileUpload.createReplicaOfSWF(i);if(!l){oAlert(",");return}}var f=this.$fileContainer.find("ul");f.append('<li filename="'+a+'" fileID="'+i+'" isNew="'+g+'"></li>');var k=f.find("li").last();var e=a.toLowerCase();if(e.indexOf("txt")>-1){k.html('<img src="'+ctx+'/resources/form/file_txt.png" alt="" /><span>'+a+"</span>")}else{if(e.indexOf("doc")>-1||e.indexOf("docx")>-1){k.html('<img src="'+ctx+'/resources/form/file_doc.png" alt="" /><span>'+a+"</span>")}else{if(e.indexOf("rar")>-1||e.indexOf("zip")>-1){k.html('<img src="'+ctx+'/resources/form/rar.png" alt="" /><span>'+a+"</span>")}else{if(e.indexOf("png")>-1||e.indexOf("jpg")>-1){k.html('<img src="'+ctx+'/resources/form/jpg.png" alt="" /><span>'+a+"</span>")}else{k.html('<img src="'+ctx+'/resources/form/file_doc.png" alt="" /><span>'+a+"</span>")}}}}var d=new FileInfo();d.fileID=i;d.fileName=a;d.digestAlgorithm=h==undefined?"":h;d.digestValue=b==undefined?"":b;d.certificate=j==undefined?"":j;d.contentType=n==undefined?"":n;d.signatureValue="";d.isNew=g;this.files.push(d);var m=ctx+fileServiceURL.downFile;var c=ctx+fileServiceURL.viewFile;k.bind("click",function(){if(k.attr("class")!=null&&k.attr("class")!=""){k.removeClass("bar")}else{k.addClass("bar")}});if(g||this.downable){k.dblclick(function(){location.href=m+i})}else{if(!this.downable){k.bind("dblclick",function(){if((a.toLowerCase().indexOf(".doc")>-1||a.toLowerCase().indexOf(".docx")>-1||a.toLowerCase().indexOf(".ppt")>-1||a.toLowerCase().indexOf(".pptx")>-1||a.toLowerCase().indexOf(".xls")>-1||a.toLowerCase().indexOf(".xlsx")>-1||a.toLowerCase().indexOf(".txt")>-1)&&WellFileUpload.file2swf){var p=c+i;window.open(p)}else{location.href=m+i}})}}};WellFileUpload4Icon.prototype.defineDeleteEvent=function(){var a='<div id="'+this.ctlID+'file_clear" class="extral c"><i></i> </div><div id="'+this.ctlID+'file_delete" class="extral d"><i></i> </div>';this.$titleContainer.find(".extralDiv").append(a);var b=this;$("#"+this.ctlID+"file_delete").bind("click",function(){if(b.$fileContainer.find(".attach-list").find(".bar").length==0){oAlert("")}else{b.$fileContainer.find("ul").find("li").each(function(){var h=$(this);var g=h.attr("class");var e=h.attr("filename");var d=h.attr("fileID");var c=h.attr("isNew");if(g!=undefined){if(g=="bar"){if(confirm("["+e+"]?")){for(var f=0;f<b.files.length;f++){if(b.files[f].fileID==d){b.files.splice(f,1)}}if(c=="true"){$.ajax({type:"post",url:ctx+fileServiceURL.deleteFile+d,success:function(i){},Error:function(i){}})}h.remove()}}}})}});$("#"+this.ctlID+"file_clear").live("click",function(){if(confirm("?")){b.$fileContainer.find("ul").find("li").each(function(){var f=$(this);var d=f.attr("fileID");var c=f.attr("isNew");for(var e=0;e<b.files.length;e++){if(b.files[e].fileID==d){b.files.splice(e,1)}}if(c=="true"){$.ajax({type:"post",url:ctx+fileServiceURL.deleteFile+d,success:function(g){},Error:function(g){}})}f.remove()})}else{return false}})};WellFileUpload4Icon.prototype.defineUploadBodyEvent=function(){var b=this;var a=$("#"+this.ctlID+"_body");isNew=a.attr("isNew");a.click(function(){var d=b.createBodyFileInfo();var c={fileID:d.fileID,$fileContainer:b.$fileContainer.prev(),fileName:d.fileName};MSOffice.caller=c;NewOfficeDocument(MSOffice,"1");b.addBodyFile(c.fileName,c.fileID,true)})};WellFileUpload4Icon.prototype.createBodyFileInfo=function(){var a=WellFileUpload.createFolderID();a=BODY_FILEID_PREFIX+a;var b=a+".doc";return{fileID:a,fileName:b}};WellFileUpload4Icon.prototype.addBodyFile=function(f,b,a){$("#"+this.ctlID+"_body").remove();_this=this;var c=this.$fileContainer4Body.find("ul");c.append('<li filename="'+f+'" fileID="'+b+'"   style="margin-left: 0px;"></li>');var e=c.find("li").last();e.html('<img src="'+ctx+'/resources/form/word.png" alt="'+f+'"   title="'+f+'"/><span>.doc</span>');var d=new FileInfo();d.fileID=b;d.fileName=f;d.digestAlgorithm="";d.digestValue="";d.certificate="";d.signatureValue="";d.isNew=a;this.files.push(d);e.bind("dblclick",function(){_this.$fileContainer4Body.find("ul").find("li").removeClass("bar");_this.files.pop(d);var h=_this.createBodyFileInfo();var g={oldFileID:b,fileID:h.fileID,fileName:h.fileName};_this.files.push({fileID:h.fileID,ctlID:_this.ctlID,fileName:h.fileName});MSOffice.caller=g;EditWordBody(MSOffice,"1","0","0","0","1")})}});
;
$(function(){WellFileUpload4Image=function(a){this.ctlID=a};WellFileUpload4Image.prototype=new WellFileUpload("formWellFileUpload4Image","image");WellFileUpload4Image.prototype.initWithLoadFilesFromFileSystem=function(h,c,d,i,e,b,f,g){if((e==undefined||e==null||e=="")){throw new Error("ID")}if((b==undefined||b==null||b=="")){throw new Error("")}var a=WellFileUpload.loadFilesFormDb(e,b);this.init(h,c,d,i,a,f,g)};WellFileUpload4Image.prototype.init=function(n,l,i,r,f,e,q){if((l==undefined||l==null||l=="")){throw new Error("")}this.$containerElement=l;this.signature=((i==undefined||i==null||i=="")?false:true);this.readOnly=((n==undefined||n==null||n=="")?false:true);this.multiple=((r==undefined||r==null||r=="")?false:true);this.imgHeight=((q==undefined||q==null||q=="")?"200":q);this.imgWidth=((e==undefined||e==null||e=="")?"200":e);WellFileUpload.fileUploadObj[this.ctlID]=this;this.$fileContainer=null;this.files=null;if(WellFileUpload.files[this.ctlID]==undefined){WellFileUpload.files[this.ctlID]=[]}this.files=WellFileUpload.files[this.ctlID];var d="";var k="filelist"+this.ctlID;if(!this.readOnly){d+='<div class="upload_div" id="upload_div"><span class="btn btn-success fileinput-button2"><span class="file_icon" style="display: block;float: left;"></span><span class="add_icon"></span><input id='+this.ctlID+' type="file" name="files" multiple class="fileupload_css" accept="image/png,image/jpeg,image/gif"></span></div>'}d+="<div id=img_container_"+this.ctlID+" ></div>";d+='<div id="'+k+'" ></div>';$("#img_container_"+this.ctlID).html('<img src="" alt=""></img>');this.$containerElement.html(d);if(!this.multiple){$("#"+this.ctlID).removeAttr("multiple")}var m=this;m.$fileContainer=$("#"+k);var a="attach-list"+m.ctlID;m.$fileContainer.append('<ul class="'+a+'" style="list-style-type:none;padding: 0;" />');if(f!=null&&f.length>0){var h=f.length;for(var b=0;b<h;b++){var o=f[b];var j=o.fileID;var t=o.fileName;var u=o.digestValue;var g=o.digestAlgorithm;var c=o.certificate;var p=o.contentType;var s=o.isNew;s=s==undefined?true:s;m.addFile(t,j,p,u,g,c,s)}}if(!m.readOnly){m.defineUploadEvent()}};WellFileUpload4Image.prototype.defineUploadEvent=function(){var c=this;var a=ctx+fileServiceURL.saveFiles;var b=false;if($.browser.msie&&$.browser.version<10){b=true}$("#"+c.ctlID).fileupload({url:a,iframe:b,dataType:"json",autoUpload:true,formData:{signUploadFile:c.signature},maxFileSize:5000000,previewMaxWidth:100,previewMaxHeight:100,previewCrop:true}).on("fileuploadadd",function(f,d){pageLock("show")}).on("fileuploadsubmit",function(f,d){if(c.signature&&!c.validSignatureUSB()){pageLock("hide");return false}return true}).on("fileuploaddone",function(g,f){pageLock("hide");if((typeof f.result)=="undefined"){oAlert("")}else{var d=true;$.each(f.result.data,function(e){if(this.filename.indexOf(".jpg")==-1&&this.filename.indexOf(".jpeg")==-1&&this.filename.indexOf(".gif")==-1&&this.filename.indexOf(".png")==-1){oAlert("");d=false}});if(!d){return}$.each(f.result.data,function(e){c.addFile(this.filename,this.fileID,this.contentType,this.digestValue,this.digestAlgorithm,this.certificate,true)})}}).on("fileuploadfail",function(f,d){pageLock("hide");if((typeof d.result)=="undefined"){oAlert("!!!")}else{$.each(d.result.files,function(g,h){var e=$("<span/>").text(h.error);$(d.context.children()[g]).append("<br>").append(e)})}})};WellFileUpload4Image.prototype.addFile=function(a,m,q,b,l,n,h){var j=this;if(this.signature&&h){var p=WellFileUpload.sign(m,b,l,n);if(!p){oAlert(",");return}}if(h&&WellFileUpload.file2swf){var o=WellFileUpload.createReplicaOfSWF(m);if(!o){oAlert(",");return}}var g=this.$fileContainer.find("ul");if(!this.multiple){this.files.length=0;g.find("._delete_input").last().trigger("click")}this.$fileContainer.find("ul").append('<li filename="'+a+'"></li>');var e='<div class="files_div" style="background:none;"><span class="file_icon" style="display:block;float:left;"></span><p class="filename"  style="display:block;float:left;">'+a+"</p>";if(this.readOnly){e+="</div>"}else{e+="<div class='delete_Div' style='float:left;'><input type='button' id='delete' class='_delete_input' filename='"+a+"' value='' /></div></div>"}g.find("li").last().html(e);$("#img_container_"+this.ctlID).html('<a id="imgherf_'+this.ctlID+'" name="imgherf_'+this.ctlID+'" href="'+ctx+fileServiceURL.downFile+m+'"></a>');var d=document.getElementById("imgherf_"+this.ctlID);var c=document.createElement("img");c.src=ctx+fileServiceURL.downFile+m;c.setAttribute("id","img_"+m);c.setAttribute("name","img_"+m);c.setAttribute("style","width:"+this.imgWidth+"px;height:"+this.imgHeight+"px;");d.appendChild(c);var k=false;for(var i=0;i<this.files.length;i++){if(j.files[i].fileID==m){k=true}}if(!k){var f=new FileInfo();f.fileID=m;f.fileName=a;f.digestAlgorithm=l==undefined?"":l;f.digestValue=b==undefined?"":b;f.certificate=n==undefined?"":n;f.signatureValue="";f.contentType=q==undefined?"":q;f.isNew=h;this.files.push(f)}(function(r){g.find(".filename").last().last().click(function(){location.href=ctx+fileServiceURL.downFile+r})})(m);g.find("._delete_input").last().click(function(){if($(this).parent().parent().parent().parent().parent().prev().attr("id").indexOf("img_container")==0){$(this).parent().parent().parent().parent().parent().prev().empty()}$(this).parent().parent().remove();for(var r=0;r<j.files.length;r++){if(j.files[r].fileID==m){j.files.splice(r,1)}}if(h){$.ajax({type:"post",url:ctx+fileServiceURL.deleteFile+m,success:function(s){},error:function(s){}})}})}});
;
(function(b){var a=function(d,c){this.$element=b(d);this.options=b.extend({},b.fn.comboTree.defaults,c);this.init()};a.prototype={constructor:a,init:function(){var d=this.$element;var g=d.attr("id")+"_ztree";var f="content_"+g;var c=this.options.width||d.width();var e=this.options.height||200;var h="<div id='"+f+"' style='display: none; position: absolute; z-index: 9999; background-color: #fff; overflow-x: hidden;overflow-y: auto; border: 1px solid #c5dbec;'><ul id='"+g+"' class='ztree' style='margin-top: 0; width: "+c+"px; height: "+e+"px;'></ul></div>";this.treeId=g;this.treeDivId=f;b(h).insertAfter(d);this.$element.click(b.proxy(this._showComboTree,this));if(b("#"+this.options.valueField).val()&&this.options.autoInitValue===true){this.initValue(b("#"+this.options.valueField).val())}d.keyup(function(m){var j=d.val();if(j==""){b.fn.zTree.init(b("#"+g),window.settingParam)}else{var l=b.fn.zTree.getZTreeObj(g);var k=l.getNodes();l.showNodes(k);i(l,k,j);l.expandAll(true)}});function i(j,o,n){for(var l=0;l<o.length;l++){var m=o[l];if(m.isParent==true){if(JSON.stringify(m).indexOf(n)<0){j.hideNode(m)}else{var k=m.children;if(k.length>0){i(j,k,n)}}}else{if(m.name.indexOf(n)<0){j.hideNode(m)}}}}},setParams:function(c){this.options=b.extend(true,this.options,c)},_showComboTree:function(){if(this._enable===false){return}var m=this.$element;m.treeInitialized=false;var i=this;var e=this.options;var f=this.treeId;var n=this.treeDivId;function s(w){var v=document.cookie.match(new RegExp("(^| )"+w+"=([^;]*)(;|$)"));if(v){return decodeURI(v[2])}else{return null}}function p(){if(window.ctx==null||window.contextPath==null){window.contextPath=s("ctx");window.contextPath=window.contextPath=='""'?"":window.contextPath;window.ctx=window.contextPath}return window.ctx}p();var u={view:{showLine:false},async:{enable:true,contentType:"application/json",url:ctx+"/json/data/services",otherParam:{serviceName:e.serviceName,methodName:e.methodName},type:"POST"},check:{enable:true},callback:{onClick:h,onCheck:t,onExpand:q,onAsyncSuccess:j}};var d={};b.extend(true,d,u);var o=b.extend(true,u,e.treeSetting||{});if(typeof o.src!="undefined"&&o.src=="control"){o.callback.onCheck=function(v,x,w){if(o.check.enable){d.callback.onCheck(v,x,w)}if(typeof e.treeSetting.callback!="undefined"&&typeof e.treeSetting.callback.onCheck!="undefined"){e.treeSetting.callback.onCheck(v,x,w)}}}window.settingParam=o;if(o.check.chkStyle==="radio"){i.enableRadio=true}function q(v,A,C){if(e.valueField!=null&&e.valueField!=""){var B=b.fn.zTree.getZTreeObj(A);var w=B.getNodes();var D=b("#"+e.valueField).val();if(D!=null&&D!=""){var E=D.split(";");for(var z=0;z<w.length;z++){var x=w[z];for(var y=0;y<E.length;y++){k(B,x,E[y])}}}}}function k(v,y,z){if(z==y.data){v.checkNode(y,true)}var x=y.children;for(var w=0;w<x.length;w++){k(v,x[w],z)}}function l(z,y){var w=z.getCheckedNodes(false);for(var x=0;x<w.length;x++){var A=w[x];var v=A.data;if(v==y){return true}}return false}function t(w,x,E){if(E.isParent){if(e.labelField!=null){b("#"+e.labelField).val("")}if(e.valueField!=null){b("#"+e.valueField).val("")}return}var D=b.fn.zTree.getZTreeObj(x);var K="";var F="";var v=b("#"+e.valueField).val();var J=b("#"+e.labelField).val();var H=v.split(";");var I=J.split(";");for(var z=0;z<H.length;z++){if(I.length!=H.length){break}var y=H[z];if(y.length==0){continue}var C=l(D,y);if(!C){if(F==""){F=y;K=I[z]}else{F=F+";"+y;K=K+";"+I[z]}}}v=";"+v+";";var G=D.getCheckedNodes(true);for(var z=0;z<G.length;z++){var B=G[z];var A="";var y="";if(i.enableRadio&&i.enableRadio==true){if(B!==E){D.checkNode(B,false);continue}}if(v.indexOf(";"+B.data+";")>-1){continue}if(e.labelField!=null){A=r(B);if(K==""){K=A}else{K=K+";"+A}}if(e.valueField!=null){y=B.data;if(F==""){F=y}else{F=F+";"+y}if(!i.$element.data.comboTreeValueLabelMap){i.$element.data.comboTreeValueLabelMap={}}i.$element.data.comboTreeValueLabelMap[y]=A}}b("#"+e.labelField).val(K);b("#"+e.valueField).val(F)}function h(x,z,y){if(y.isParent){if(e.labelField!=null){b("#"+e.labelField).val("")}if(e.valueField!=null){b("#"+e.valueField).val("")}var w=b.fn.zTree.getZTreeObj(z);var v=w.getCheckedNodes(true);b.each(v,function(){w.checkNode(this,false)});return}var w=b.fn.zTree.getZTreeObj(z);w.checkNode(y,!y.checked);t(null,z,y)}function j(v,x,w,y){q(null,x,null)}function r(w){var x=w.name;var v=w.getParentNode();while(v!=null){x=v.name+"/"+x;v=v.getParentNode()}return x}if(this.treeInitialized!==true){b.fn.zTree.init(b("#"+f),o);this.treeInitialized=true}else{var c=b.fn.zTree.getZTreeObj(f);c.checkAllNodes(false);q(null,f,null)}var g=this;g.show();b(document).mousedown(function(v){var w=v.target.id;if((w!=null)&&(typeof w=="string")&&(w.lastIndexOf(f)==-1)&&(w!=n)&&(w!=m.attr("id"))){g.hide()}})},show:function(){var d=this.treeDivId;var c=this.$element;var e=c.outerHeight();var f=c.position();b("#"+d).css({left:f.left+"px",top:f.top+e+"px"}).slideDown("fast")},hide:function(){var c=this.treeDivId;b("#"+c).fadeOut("fast")},_getCacheValueKey:function(c){var d="DY_FORM_FIELD_MAPPING_"+c;return d},_getCacheLabelKey:function(d){var c=this._getCacheValueKey(d)+"_label";return c},initValue:function(h){var f=this.options.initService;var e=this.options.initServiceParam;var i=e.concat([h]);var d=this.options;var c=this.$element;var j=this._getCacheValueKey(h);var g=this._getCacheLabelKey(h);if(c.data[j]){if(d.labelField!=null){b("#"+d.labelField).val(c.data[g])}if(d.valueField!=null){b("#"+d.valueField).val(c.data[j])}return}if(h!=null&&h!=""){JDS.call({service:f,data:i,success:function(k){if(k.data){if(d.labelField!=null){b("#"+d.labelField).val(k.data.label)}if(d.valueField!=null){b("#"+d.valueField).val(k.data.value)}c.data[g]=k.data.label;c.data[j]=k.data.value;if(k.data.value){var l=k.data.value.split(";");var p=k.data.label.split(";");c.data.comboTreeValueLabelMap={};for(var n=0;l.length==p.length&&n<l.length;n++){var m=l[n];var o=p[n];c.data.comboTreeValueLabelMap[m]=o}}}}})}else{if(d.labelField!=null){b("#"+d.labelField).val("")}if(d.valueField!=null){b("#"+d.valueField).val("")}}},clear:function(){if(this.options.labelField!=null){b("#"+this.options.labelField).val("")}if(this.options.valueField!=null){b("#"+this.options.valueField).val("")}},disable:function(){this._enable=false;this.treeInitialized=false;b.fn.zTree.destroy(this.treeId)},enable:function(){this._enable=true}};b.fn.comboTree=function(d){var e=false;var c=null;if(arguments.length==2){e=true;c=arguments[1]}return this.each(function(){var h=b(this),g=h.data("comboTree"),f=b.extend({},h.data(),typeof d=="object"&&d);if(!g){h.data("comboTree",(g=new a(this,f)))}if(typeof d=="string"){if(e==true&&c!=null){g[d](c)}else{g[d]()}}else{if(f.show){g.show()}}})};b.fn.comboTree.defaults={autoInitValue:true,serviceName:"dataDictionaryService",methodName:"getAsTreeAsync",initService:"dataDictionaryService.getKeyValuePair",initServiceParam:["DY_FORM_FIELD_MAPPING"]}})(jQuery);
;
(function(a){a.fn.myTimeEmploy=function(h,l){var d=h.resCode;var f=a(this);var e="";var n="today";var g="";var j="RES_MANAGE";var k="datetime_begin,datetime_end";var h=h;var b;m(f,e,n,g,j,k,d,l,h);function i(o,q){var s=o.split(" ");var B=s[1].split(":");var C=B[1];var r=q.split(" ");var p=r[1].split(":");var A=p[1];var z=0,w=0;if(parseInt(C)>=30){z=parseInt(B[0])*2+parseInt(2)}else{z=parseInt(B[0])*2+parseInt(1)}if(parseInt(A)>=30){w=parseInt(p[0])*2+parseInt(2)}else{w=parseInt(p[0])*2+parseInt(1)}var u="";var v=parseInt(w)-parseInt(z);for(var t=0;t<v;t++){var y=parseInt(z)+parseInt(t);u+=","+y}return u.substring(1)}function c(o,s){var u=o.split(" ");var F=u[1].split(":");var G=F[1];var t=s.split(" ");var r=t[1].split(":");var E=r[1];var D=0,z=0,q=0,p=0;if(parseInt(G)==0){D=parseInt(F[0])*2+parseInt(1);q=parseInt(30)}else{if(parseInt(G)==30){D=parseInt(F[0])*2+parseInt(2);q=parseInt(30)}else{D=parseInt(F[0])*2+parseInt(1);q=parseInt(30)-parseInt(G)}}if(parseInt(E)==0){z=parseInt(r[0])*2+parseInt(1);p=parseInt(30)}else{if(parseInt(E)==30){z=parseInt(r[0])*2+2;p=parseInt(30)}else{z=parseInt(r[0])*2+parseInt(1);p=parseInt(30)-parseInt(E)}}var w="";var y=parseInt(z)-parseInt(D);for(var v=0;v<y;v++){var C=parseInt(D)+parseInt(v);if(v==0){w+=","+C+"_"+q}else{if(parseInt(v)<(parseInt(y)-parseInt(1))&&v>0){w+=","+C+"_30"}else{if(parseInt(v)==(parseInt(y)-parseInt(1))){w+=","+C+"_"+p}}}}return w.substring(1)}a("#s_today").live("focus",function(){var o=a(this).attr("resourceName");var p=a(this).attr("field");WdatePicker({startDate:"%y-%M-01 00:00:00",dateFmt:"yyyy-MM-dd",alwaysUseStartDate:false,onpicking:function(q){m(a("#s_today"),"","notoday",q.cal.getNewDateStr(),o,p,d,l,h)}})});a("#prevWeek").live("click",function(){var p=a(this).attr("week");var o=a(this).attr("resourceName");var q=a(this).attr("field");m(a(this),p,"notoday","",o,q,d,l,h)});a("#nextWeek").live("click",function(){var p=a(this).attr("week");var o=a(this).attr("resourceName");var q=a(this).attr("field");m(a(this),p,"notoday","",o,q,d,l,h)});function m(r,q,z,s,u,w,p,y,t){var o="";if(p=="MEET_RESOURCE"){o=ctx+"/calendar/calendar_show_new.action?weekCount="+q+"&appointDate="+s+"&resourceName="+u+"&resourceType="+p}else{if(p=="CAR_RESOURCE"){o=ctx+"/calendar/calendar_show_new.action?weekCount="+q+"&appointDate="+s+"&resourceName="+u+"&resourceType="+p}else{if(p=="DRIVER_RESOURCE"){o=ctx+"/calendar/calendar_show_new.action?weekCount="+q+"&appointDate="+s+"&resourceName="+u+"&resourceType="+p}}}var v=new Array;v=["changeDiv","changeDiv1","changeDiv2","changeDiv3","changeDiv4","changeDiv5","changeDiv6","changeDiv7","changeDiv8","changeDiv9"];a.ajax({type:"post",url:o,success:function(aD){var W="";var ae=aD.weekCount;var O=aD.today;var ag=aD.weekList;var au=ag[0][1].split("-");var K=au[1]+""+au[2]+"";var aB=ag[6][1].split("-");var M=aB[1]+""+aB[2]+"";W+='<div class="toolbar">';W+='<table width="100%">';W+="<tr>";W+='<td align="left" width="300">';W+='<a class="s_prev_day" href="#" mtype="0" id="prevWeek" resourceName ="'+u+'"  field="'+w+'"  week="'+(ae-parseInt(1))+'"><</a>';W+='<input  type="text"  resourceName ="'+u+'"  field="'+w+'" id="s_today" class="s_today" value="'+O+'" size="7">';W+='<a class="s_next_day" href="#" mtype="0"  resourceName ="'+u+'" field="'+w+'" id="nextWeek" week="'+(parseInt(ae)+parseInt(1))+'">></a>';W+='<span class="fromandto">'+K+""+M+"</span>";W+="</td >";W+='<td align="right">';W+='<input id="clear" type="button" style="float:right;font-size: 14px;color:#0f599c; height:22px; margin-right:24px; padding:0 5px;border:1px solid #dee1e2; font-family:Microsoft YaHei" value=""/>';W+="</td>";W+="</tr>";W+="</table>";W+="</div>";var ak=aD.queryItem;b=aD.tmList;if(t.beginTime!=""){b.push(t)}for(var aA=0;aA<ag.length;aA++){var aC=ag[aA][1];var aw=aC.split("-");var am=aw[1]+""+aw[2]+"";W+="<table class='weekList_table'>";if(aA%2!=0){W+="<tr><td class='calendar_weekList_2'><div class='weekDay'>"+ag[aA][0]+"</div><div class='weedDay2'>"+am+"</div></td>"}else{W+="<tr><td class='calendar_weekList'><div class='weekDay'>"+ag[aA][0]+"</div><div class='weedDay2'>"+am+"</div></td>"}if(p=="MEET_RESOURCE"){W+="<td class='calendar_rightTd'><table class='title_table'><tr class='calendar_table'><td style='width:80px' class='title_td' ><span class='title_text'></span></td>"}else{if(p=="CAR_RESOURCE"){W+="<td class='calendar_rightTd'><table class='title_table'><tr class='calendar_table'><td style='width:80px' class='title_td' ><span class='title_text'></span></td>"}else{if(p=="DRIVER_RESOURCE"){W+="<td class='calendar_rightTd'><table class='title_table'><tr class='calendar_table'><td style='width:80px' class='title_td' ><span class='title_text'></span></td>"}}}var ai=new Array();for(var Z=1;Z<49;Z++){var ab="";if(parseInt(Z)<17){if(Z%4==0){ab=Z/2-2+":00";if(ab==""){var A=(Z/2)*2-3}var ah=(Z/2)*2;W+="<td colspan=4 timestamp='"+A+","+ah+"'>"+ab+"</td>"}}else{if(parseInt(Z)>=17&&parseInt(Z)<=37){if(Z%2==0){ab=Z/2-1+":00";var A=Z-1;var ah=Z;W+="<td colspan=2 timestamp='"+A+","+ah+"'>"+ab+"</td>"}}else{if(parseInt(Z)>37&&parseInt(Z)<=49){if((Z-parseInt(2))%4==0){var A=Z-1;var ah=Z+2;ab=(Z-parseInt(2))/2-2+parseInt(2)+":00";W+="<td colspan=4 timestamp='"+A+","+ah+"'>"+ab+"</td>"}}}}}W+="</tr>";for(var az=0;az<ak.length;az++){v.sort(function(){return Math.random()-0.5});if(p=="MEET_RESOURCE"){W+="<tr><td class='basic' width='80px' title='"+ak[az].title+"'><div class='autocut'>"+ak[az].title+"</div></td>"}else{if(p=="CAR_RESOURCE"){W+="<tr><td class='basic' width='80px' title='"+ak[az].title+"'><div class='autocut'>"+ak[az].title+"</div></td>"}else{if(p=="DRIVER_RESOURCE"){W+="<tr><td class='basic' width='80px' title='"+ak[az].title+"'><div class='autocut'>"+ak[az].title+"</div></td>"}}}window.flag2="default";for(var ay=1;ay<49;ay++){var aa=0;var X=","+ay+",";for(var ax=0;ax<b.length;ax++){var x=v[ax%(b.length)];var ac="";if(x=="changeDiv"){ac="#FD6F00"}else{if(x=="changeDiv1"){ac="#0B78AD"}else{if(x=="changeDiv2"){ac="#D2CB80"}else{if(x=="changeDiv3"){ac="#AE9EA6"}else{if(x=="changeDiv4"){ac="#3E9448"}else{if(x=="changeDiv5"){ac="#89A7B6"}else{if(x=="changeDiv6"){ac="#946DD5"}else{if(x=="changeDiv7"){ac="#D56D79"}else{if(x=="changeDiv8"){ac="#4D3235"}else{if(x=="changeDiv9"){ac="#E1C8B9"}}}}}}}}}}var Q=aC+" 00:00";var D=aC+" 23:59";var C=new Date(aw[0],aw[1],aw[2],0,0);var T=new Date(aw[0],aw[1],aw[2],23,59);var aE=b[ax].flowUuid;var S=b[ax].taskUuid;var R=b[ax].beginTime;var V=R.split(" ");var G=V[0].split("-");var F=V[1].split(":");var aF=new Date(G[0],G[1],G[2],F[0],F[1]);var B=b[ax].endTime;var al=B.split(" ");var J=al[0].split("-");var I=al[1].split(":");var N=new Date(J[0],J[1],J[2],I[0],I[1]);var at="";var L="";if(C<aF&&T<aF){}else{if(C>N&&T>N){}else{if(C<=aF&&T>=aF&&T<=N){at=i(R,D);L=c(R,D)}else{if(C<aF&&T>N){at=i(R,B);L=c(R,B)}else{if(C>=aF&&T<=N){at=i(Q,D);L=c(Q,D)}else{if(C>=aF&&T>N){at=i(Q,B);L=c(Q,B)}}}}}}if(at!=""){at=","+at+",";var E=L.split(",");var af=b[ax].beginTime;var ar=af.split(" ");var P=b[ax].endTime;var U=P.split(" ");var H=b[ax].employWork;var an=b[ax].employName;var Y=H+" "+ar[1]+"-"+U[1];for(var av=0;av<E.length;av++){var aj=parseInt(ay)+parseInt(1);var ad=parseInt(ay)+parseInt(3);var aq=E[av].split("_")[0];if(aq==ay&&b[ax].employName==ak[az].title){if(ay>17&&ay<=36){if(ay%2==1){var ao=E[av].split("_")[1];if(av==0){if(at.indexOf(X)>=0){W+="<td colspan='2' class='basic change1 left'"+ay+"' right'"+aj+"'' title='"+Y+"' timestamp='"+ay+","+aj+"'><div class='basicDiv' style='width:50%;float:left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:right;'></div></div></td>";aa=1;window.flag2="odd"}}else{if(av==(E.length-1)){if(at.indexOf(X)>=0){W+="<td colspan='2' class='basic change1 left' style='border-left:1px solid "+ac+"' title='"+Y+"' timestamp='"+ay+","+aj+"'><div class='basicDiv' style='width:50%;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:left;'></div></div></td>";aa=1;window.flag2="odd"}}else{if(at.indexOf(X)>=0){W+="<td colspan='2' class='basic change1' style='border-right:1px solid "+ac+";border-left:1px solid "+ac+"' title='"+Y+"' timestamp='"+ay+","+aj+"'><div class='basicDiv' style='width:50%;float: left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:100%;'></div></div></td>";aa=1}}}}else{var ao=E[av].split("_")[1];if(av==0){if(at.indexOf(X)>=0){W=W.substring(0,W.length-7);W+=" change1 right' style='border-right:1px solid "+ac+"' title='"+Y+"'><div class='basicDiv' style='width:50%;float: right;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:right;'></div></div></td>";aa=1}}else{if(av==(E.length-1)){if(at.indexOf(X)>=0){W.replace("left"+ay,"left");W.replace("right"+aj,"right");W=W.substring(0,W.length-5);W+="<div class='basicDiv' style='width:50%;float: right;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:left;'></div></div></td>";aa=1;window.flag2="default"}}else{if(at.indexOf(X)>=0){W=W.substring(0,W.length-5);W+="<div class='basicDiv' style='width:50%;float:right;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:100%;'></div></div></td>";aa=1;window.flag2="default"}}}}}else{if(ay%4==1){var ao=E[av].split("_")[1];if(av==0){if(at.indexOf(X)>=0){W+="<td colspan='4' class='basic change1 left'"+ay+"' right'"+ad+"''' title='"+Y+"' timestamp='"+ay+","+ad+"'><div class='basicDiv ol"+ay%4+"' style='width:25%;float:left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:right;'></div></div></td>";aa=1;window.flag2="odd"}}else{if(av==(E.length-1)){if(at.indexOf(X)>=0){W+="<td colspan='4' class='basic change1 left' style='border-left:1px solid "+ac+"' title='"+Y+"' timestamp='"+ay+","+ad+"'><div class='basicDiv ol"+ay%4+"' style='width:25%;float:left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:left;'></div></div></td>";aa=1;window.flag2="odd"}}else{if(at.indexOf(X)>=0){W+="<td colspan='4' class='basic change1 middle' style='border-right:1px solid "+ac+";border-left:1px solid "+ac+"' title='"+Y+"' timestamp='"+ay+","+ad+"'><div class='basicDiv ol"+ay%4+"' style='width:25%;float: left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:100%;'></div></div></td>";aa=1}}}}else{var ao=E[av].split("_")[1];if(av==0){if(at.indexOf(X)>=0){W=W.substring(0,W.length-5);W+="<div class='basicDiv ol"+ay%4+"' style='width:25%;float: left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:right;'></div></div></td>";aa=1}}else{if(av==(E.length-1)){if(at.indexOf(X)>=0){W.replace("left"+ay,"left");W.replace("right"+aj,"right");W=W.replace("middle","left");W=W.substring(0,W.length-5);W+="<div class='basicDiv ol"+ay%4+"' style='width:25%;float: left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:"+ao/30*100+"%;float:left;'></div></div></td>";aa=1;window.flag2="default"}}else{if(at.indexOf(X)>=0){W.replace("left"+ay,"left");W.replace("right"+ad,"right");W=W.substring(0,W.length-5);W+="<div class='basicDiv ol"+ay%4+"' style='width:25%;float:left;'><div flowUuid='"+aE+"' taskUuid='"+S+"' class='"+x+"' title='"+Y+"' style='width:100%;'></div></div></td>";aa=1;window.flag2="default"}}}}}}}}}if(aa==0){if(ay<17){if(ay%4==1){var A=(ay/2)*2;var ah=(ay/2)*2+3;W+="<td colspan=4  timestamp='"+A+","+ah+"' date='"+aC+"' uuid='"+ak[az].uUID+"' resCode='"+ak[az].reservedText4+"' meetroomName='"+ak[az].title+"' class='basic' ><div class='basicDiv o1' style='width:25%;float:left;'></div></td>";window.flag2="default"}else{if(ay%4==2){W=W.substring(0,W.length-5);W+="<div class='basicDiv o2' style='width:25%;float:left;'></div></td>"}else{if(ay%4==3){W=W.substring(0,W.length-5);W+="<div class='basicDiv o3' style='width:25%;float:left;'></div></td>"}else{if(ay%4==0){W=W.substring(0,W.length-5);W+="<div class='basicDiv o4' style='width:25%;float:left;'></div></td>"}}}}}else{if(ay>36){if(ay%4==1){var A=ay;var ah=ay+3;W+="<td colspan=4 timestamp='"+A+","+ah+"' class='basic' date='"+aC+"' uuid='"+ak[az].uUID+"' resCode='"+ak[az].reservedText4+"' meetroomName='"+ak[az].title+"'></td>";window.flag2="default"}}else{if(ay%2==1){var A=ay;var ah=ay+1;W+="<td colspan=2 timestamp='"+A+","+ah+"' class='basic' date='"+aC+"' uuid='"+ak[az].uUID+"' resCode='"+ak[az].reservedText4+"'  meetroomName='"+ak[az].title+"'></td>";window.flag2="default"}}}}}W+="</tr>"}W+="</table></td></tr>";W+="</table>"}if(z=="today"){var ap="";if(p=="MEET_RESOURCE"){ap={title:"",closeOnEscape:true,draggable:true,resizable:true,height:950,width:1200,content:W,defaultBtnName:""}}else{if(p=="CAR_RESOURCE"){ap={title:"",closeOnEscape:true,draggable:true,resizable:true,height:950,width:1200,content:W,defaultBtnName:""}}else{if(p=="DRIVER_RESOURCE"){ap={title:"",closeOnEscape:true,draggable:true,resizable:true,height:950,width:1200,content:W,defaultBtnName:""}}}}showDialog(ap)}else{r.parents(".dialogcontent").html(W)}},Error:function(x){oAlert(x)}});a("#clear").die().live("click",function(){var F=confirm("?");if(F){var C=t.resCode;var E="";var x="";var A="";var B="";var D='{"beginTime": "'+E+'","endTime": "'+x+'","employName": "'+A+'","uuid": "'+B+'","resCode":"'+C+'"}';y(a.parseJSON(D));closeDialog()}});a(".basic").die().live("click",function(H){var G=a(H.target).attr("class");var A="";var E="";var I=a(this).attr("timestamp");var B=a(this).attr("date");if(I=="1,4"){A=B+" 00:00";E=B+" 02:00"}else{if(I=="5,8"){A=B+" 02:00";E=B+" 04:00"}else{if(I=="9,12"){A=B+" 04:00";E=B+" 06:00"}else{if(I=="13,16"){A=B+" 06:00";E=B+" 08:00"}else{if(I=="17,18"){A=B+" 08:00";E=B+" 09:00"}else{if(I=="19,20"){A=B+" 09:00";E=B+" 10:00"}else{if(I=="21,22"){A=B+" 10:00";E=B+" 11:00"}else{if(I=="23,24"){A=B+" 11:00";E=B+" 12:00"}else{if(I=="25,26"){A=B+" 12:00";E=B+" 13:00"}else{if(I=="27,28"){A=B+" 13:00";E=B+" 14:00"}else{if(I=="29,30"){A=B+" 14:00";E=B+" 15:00"}else{if(I=="31,32"){A=B+" 15:00";E=B+" 16:00"}else{if(I=="33,34"){A=B+" 16:00";E=B+" 17:00"}else{if(I=="35,36"){A=B+" 17:00";E=B+" 18:00"}else{if(I=="37,40"){A=B+" 18:00";E=B+" 20:00"}else{if(I=="41,44"){A=B+" 20:00";E=B+" 22:00"}else{if(I=="45,48"){A=B+" 22:00";E=B+" 23:59"}}}}}}}}}}}}}}}}}if(G.indexOf("changeDiv")>=0){}else{if(p=="MEET_RESOURCE"){var F='<div class="newAppend" style="width:100%;"><div class="changeDiv4"  style="width:100%;float:left;"></div></div>';a(this).children().remove();a(this).append(F);var C=a(this).attr("meetroomname");var x=a(this).attr("uuid");var D=a(this).attr("resCode");a(".newAppend").click(function(){if(confirm("?")){var K=r.val(C);r.next().val(u+";"+C);a("#"+w.split(",")[0]).val(A);var J=a("#"+w.split(",")[1]).val(E);if(y){var L='{"beginTime": "'+A+'","endTime": "'+E+'","employName": "'+C+'","uuid": "'+x+'","resCode":"'+D+'"}';y(a.parseJSON(L))}closeDialog()}})}else{if(p=="CAR_RESOURCE"){var F='<div class="newAppend" style="width:100%;"><div class="changeDiv4"  style="width:100%;float:left;"></div></div>';a(this).children().remove();a(this).append(F);var C=a(this).attr("meetroomname");var x=a(this).attr("uuid");var D=a(this).attr("resCode");a(".newAppend").click(function(){if(confirm("?")){a("#"+w.split(",")[0]).val(A);a("#"+w.split(",")[1]).val(E);r.val(C);r.next().val(u+";"+C);if(y){var J='{"beginTime": "'+A+'","endTime": "'+E+'","employName": "'+C+'","uuid": "'+x+'","resCode":"'+D+'"}';y(a.parseJSON(J))}closeDialog()}})}else{if(p=="DRIVER_RESOURCE"){var F='<div class="newAppend" style="width:100%;"><div class="changeDiv4"  style="width:100%;float:left;"></div></div>';a(this).children().remove();a(this).append(F);var C=a(this).attr("meetroomname");var x=a(this).attr("uuid");var D=a(this).attr("resCode");a(".newAppend").click(function(){if(confirm("?")){a("#"+w.split(",")[0]).val(A);a("#"+w.split(",")[1]).val(E);r.val(C);r.next().val(u+";"+C);if(y){var J='{"beginTime": "'+A+'","endTime": "'+E+'","employName": "'+C+'","uuid": "'+x+'","resCode":"'+D+'"}';y(a.parseJSON(J))}closeDialog()}})}}}}})}};a(".basic .basicDiv div").live("click",function(){var d=a(this).attr("flowUuid");var b=a(this).attr("taskUuid");var c=ctx+"/workflow/work/view/todo?taskUuid="+b+"&flowInstUuid="+d+"";window.open(c)})})(jQuery);
;
var unitDialogCount=0;(function(a){a.unit={open:function(j){j=a.extend({labelField:null,valueField:null,initNames:null,initIDs:null,title:"",multiple:true,selectType:1,nameType:"21",showType:true,type:"MyUnit",loginStatus:false,excludeValues:null,sexField:null,emailField:null,employeeNumberField:null,loginNameField:null,filterCondition:"",isSetChildWin:false},j);var e=new Array();if(j.labelField!=null&&j.initNames==null){e.Name=a("#"+j.labelField).val()}else{e.Name=j.initNames}if(j.valueField!=null&&j.initIDs==null){e.ID=a("#"+j.valueField).val()}else{e.ID=j.initIDs}if((e.ID==null||e.ID=="")&&typeof(a("#"+j.labelField).attr("hiddenValue"))!="undefined"){e.ID=a("#"+j.labelField).attr("hiddenValue")}if(e.Name==""||e.ID==""){e.Name=null;e.ID=null}e.Title=null;e.Sex=j.sexField;e.Multiple=j.multiple;e.SelectType=j.selectType;e.NameType=j.nameType;e.ShowType=j.showType;e.Type=j.type;e.LoginStatus=j.loginStatus;e.Exclude=j.excludeValues;e.FilterCondition=j.filterCondition;if(j.valueField!=null){e.email=a("#"+j.emailField).val()}if(j.employeeNumberField!=null){e.employeeNumber=a("#"+j.employeeNumberField).val()}if(j.loginNameField!=null){e.loginName=a("#"+j.loginNameField).val()}function i(l){var k=document.cookie.match(new RegExp("(^| )"+l+"=([^;]*)(;|$)"));if(k){return decodeURI(k[2])}else{return null}}function f(){if(window.ctx==null||window.contextPath==null){window.contextPath=i("ctx");window.contextPath=window.contextPath=='""'?"":window.contextPath;window.ctx=window.contextPath}return window.ctx}f();unitDialogCount++;var h=unitDialogCount;e.index=h;e.ctx=window.ctx;var d=".ui-layout-container";var c=a(d).css("overflow-x");var b=a(d).css("overflow-y");var g=a('<iframe id="unit_dialog_'+h+'" src="'+ctx+'/resources/pt/js/org/unit/unit.htm" frameborder="0"></iframe>').dialog({title:j.title,bgiframe:true,autoOpen:true,resizable:true,stack:true,zIndex:9999,width:850,height:560,modal:true,overlay:{background:"#000",opacity:0.5},close:function(m,l){if(this.contentWindow.goUnitTree){var k=this.contentWindow.goUnitTree.returnValue;if(k){if(j.labelField!=null){a("#"+j.labelField).val(k.name);a("#"+j.labelField).attr("hiddenValue",k.id)}if(j.valueField!=null){a("#"+j.valueField).val(k.id)}if(j.sexField!=null){a("#"+j.sexField).val(k.sex)}if(j.emailField!=null){a("#"+j.emailField).val(k.email)}if(j.employeeNumberField!=null){a("#"+j.employeeNumberField).val(k.employeeNumber)}if(j.loginNameField!=null){a("#"+j.loginNameField).val(k.loginName)}if(j.isSetChildWin){setChildWin()}}if(k&&j.afterSelect){j.afterSelect.call(this,this.contentWindow.goUnitTree.returnValue)}if(k&&j.ok){j.ok.call(this,this.contentWindow.goUnitTree.returnValue)}}if(j.close){j.close.call(this,m)}a(d).css("overflow-x",c);a(d).css("overflow-y",b)},open:function(k){a(".ui-widget-overlay").css("background","#000");a(".ui-widget-overlay").css("opacity","0.5");a(this).css("width","100%");a(this).css("margin","0");a(this).css("padding","0");this.contentWindow.dialogArguments=e;a(d).css("overflow-x","scroll");a(d).css("overflow-y","scroll")}});if(!window.unitDialogs){window.unitDialogs=[]}window.unitDialogs[h]=g}}})(jQuery);
;
(function(a){a.alerts={overlayOpacity:0.5,overlayColor:"#000",time_s:5,prompt:"",prompt1:"",isSubmit:"no",callback_:null,flag:0,width:400,height:180,alert:function(d,f,e,c,b){a.alerts.isSubmit="no";callback_=f;if(e==null){e=a.alerts.prompt}if(f==null){a.alerts.callback_=f}if(c==null){c=a.alerts.width}if(b==null){b=a.alerts.height}a.alerts.show(e,d,"alert_",c,b);a("#submit_button").focus();a("#close_button").remove();a("#popup_close").click(function(){a.alerts._hideAndCallBack(f);return false});a("#submit_button").click(function(g){a.alerts._hideAndCallBack(f);return false});a.alerts.countDown(a.alerts.time_s)},alert2:function(d,f,e,c,b){if(e==null){e=a.alerts.prompt}if(c==null){c=a.alerts.width}if(b==null){b=a.alerts.height}a.alerts.show(e,d,"alert_",c,b);a("#submit_button").focus();a("#close_time_div").hide();a("#close_button").remove();a("#popup_close").click(function(){a.alerts._hideAndCallBack(f);return false});a("#submit_button").click(function(g){a.alerts._hideAndCallBack(f);return false})},alert3:function(e,g,f,d,c,b){callback_=g;if(f==null){f=a.alerts.prompt1}if(c==null){c=a.alerts.width}if(b==null){b=a.alerts.height}if(g==null){a.alerts.callback_=g}a.alerts.show(f,e,"alert_",c,b);a("#close_button").focus();a("#close_time_div").hide();a("#close_button").click(function(){a.alerts._hide()});a("#popup_close").click(function(){a.alerts._hide()});a("#submit_button").click(function(h){a.alerts._hideAndCallBack(g,d)})},countDown:function(b){var b=a.alerts.time_s;a("body").everyTime("1s",function(){b--;a(".close_time").html(b);if(b==0){a.alerts._hide();if(callback_!=null){callback_()}}},5)},show:function(f,e,d,c,b){a.alerts._hide();a.alerts._overlay("show");a("body").append('<div id="popup_container"><div id="popup_title"><div id="popup_title_name"></div><div id="popup_close"></div></div><div id="popup_content"><div id="popup_message_div"><div id="popup_message_icon"></div><div id="popup_message"></div></div><div id="close_button_div"><button id="submit_button"></button><button id="close_button"></button></div><div id="close_time_div"><span class="close_time">'+a.alerts.time_s+"</span>,</div></div></div>");a("#popup_title_name").html(f);a("#popup_content").addClass(d);a("#popup_message").html(e);a("#popup_content").css("height",b-40);a("#popup_message_div").css("height",b-85);a("#popup_message").css("width",c-90).css("height",b-115).css("overflow","auto");a("#popup_container").css({position:"fixed",zIndex:99999,padding:0,margin:0,width:c,height:b,background:"#fff",fontFamily:"Microsoft YaHei",fontSize:12});a.alerts._reposition()},_hide:function(){a("#popup_container").remove();a.alerts._overlay("hide");a("body").stopTime()},_hideAndCallBack:function(c,b){a.alerts.flag=1;a("#popup_container").remove();a.alerts._overlay("hide");if(c!=null&&b!=null){c(b)}if(c!=null&&b==null){c()}a.alerts.isSubmit="yes";a("body").stopTime()},_overlay:function(b){switch(b){case"show":a.alerts._overlay("hide");a("BODY").append('<div id="popup_overlay"></div>');a("#popup_overlay").css({position:"fixed",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity});break;case"hide":a("#popup_overlay").remove();break}},_reposition:function(){var c=((a(window).height()/2)-(a("#popup_container").outerHeight())/2-150);var b=((a(window).width()/2)-(a("#popup_container").outerWidth())/2);if(c<0){c=0}if(b<0){b=0}a("#popup_container").css({top:c+"px",left:b+"px"})},pageLock:function(b){switch(b){case"show":a.alerts._overlay("hide");a("BODY").append('<div id="page_lock"><img class="page_lock_icon" src="'+ctx+'/resources/pt/images/loading.gif"></div>');a("#page_lock").css({position:"fixed",zIndex:99998,top:"0px",left:"0px",width:"100%",textAlign:"center",height:a(document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity});a(".page_lock_icon").css({marginTop:a(document).height()/2-50});break;case"hide":a("#page_lock").remove();break}},dialog_:function(d){var c={title:"",autoOpen:true,modal:true,closeOnEscape:true,draggable:true,resizable:true,defaultBtnName:"",height:400,width:860,buttons:{}};c=a.extend(true,c,d);var b=c.open;if(b!=null&&b!=undefined){c.open=function(){if(d.defaultBtnName!=null){a(".ui-dialog-buttonset button").each(function(){if(a(this).text()==d.defaultBtnName){a(this).attr("class","cancel")}})}else{a(".ui-dialog-buttonset button").each(function(){if(a(this).text()==""){a(this).attr("class","cancel")}})}a(".ui-widget-overlay").css("background","#000");a(".ui-widget-overlay").css("opacity","0.5");if(d.content!=null){a(".dialogcontent").html(d.content)}b()}}else{c.open=function(){if(d.defaultBtnName!=null){a(".ui-dialog-buttonset button").each(function(){if(a(this).text()==d.defaultBtnName){a(this).attr("class","cancel")}})}else{a(".ui-dialog-buttonset button").each(function(){if(a(this).text()==""){a(this).attr("class","cancel")}})}a(".ui-widget-overlay").css("background","#000");a(".ui-widget-overlay").css("opacity","0.5");if(d.content!=null){a(".dialogcontent").html(d.content)}}}if(d.defaultBtnName!=null){c.buttons[d.defaultBtnName]=function(){a(this).dialog("close")}}else{c.buttons.=function(){a(this).dialog("close")}}a("#dialogModule").dialog(c)},closeDialog_:function(){a("#dialogModule").dialog("close")}};oAlert=function(d,f,e,c,b){a.alerts.alert(d,f,e,c,b)};oAlert2=function(d,f,e,c,b){a.alerts.alert2(d,f,e,c,b)};oConfirm=function(e,g,d,f,c,b){a.alerts.alert3(e,g,f,d,c,b)};pageLock=function(b){a.alerts.pageLock(b)};showDialog=function(b){str='<div id="dialogModule" title="" style="padding:0;margin:0; display:none;"><div class="dialogcontent"></div></div>';if(a("#dialogModule .dialogcontent").html()==undefined){a("body").after(str)}a.alerts.dialog_(b)};closeDialog=function(){a.alerts.closeDialog_()};a.fn.oDialog=function(b){return this.each(function(){if(typeof b=="string"){a(this).dialog(b)}else{if(b.open!=null){var c=b.open;b.open=function(d){a.fn.oDialog.defaults.open.call(this,d);c.call(this,d)}}else{b.open=function(d){a.fn.oDialog.defaults.open.call(this,d)}}a(this).dialog(b)}})};a.fn.oDialog.defaults={open:function(b){a(".ui-dialog-buttonset button").each(function(){if(a(this).text()==""){a(this).attr("class","cancel")}});a(".ui-widget-overlay").css("background","#000");a(".ui-widget-overlay").css("opacity","0.5")}};a.fn.Autocomplete=function(b){function c(e){return e.split(/;\s*/)}function d(e){return c(e).pop()}a(this).bind("keydown",function(e){if(e.keyCode===a.ui.keyCode.TAB&&a(this).data("ui-autocomplete").menu.active){e.preventDefault()}}).autocomplete({minLength:0,source:function(f,e){e(a.ui.autocomplete.filter(b,d(f.term)))},focus:function(){return false},select:function(f,g){var e=c(this.value);e.pop();e.push(g.item.value);e.push("");this.value=e.join(";");return false}})}})(jQuery);
;
(function(b){var a=function(d,c){this.init("dyView",d,c)};a.prototype={constructor:a,init:function(h,e,k){this.$element=b(e);var j=this.$element;this.options=this.getOptions(k);var k=this.options;var g=this;var d=this.options.data;var c=this.options.data.pageTotalCount;var i=this.options.data.pageSize;var f=c%i==0?c/i:parseInt(c/i)+1;var g=this;b(".selectKeyText").die().live("keydown",(function(q){ele=b(this);var p=q.keyCode;if(p==13){stopDefault(q);var o=new Array();var n=new Object();if(b("#selectKeyTableId").attr("id")!=undefined){b(".selectKeyText").each(function(){var t=b(this).attr("field");var s=b(this).val().replace(" ","");n[t]=s});o.push(n)}var l=b("#beginTime").val();if(l==""){l=""}var m=b("#endTime").val();if(m==""){m=""}var r=b(".searchField").val();g.keySelectClick(o,l,m,r,ele);b(".selectKeyText").each(function(){var s=b(this).val();if(s!=""){b("#selectKeyTableId").css("display","");b("#keyWord").css("display","none");b("#showButton").text("")}})}}));b("#keyWord").live("keydown",(function(q){ele=b(this);var p=q.keyCode;if(p==13){stopDefault(q);var o=new Array();var n=new Object();if(b("#selectKeyTableId").attr("id")!=undefined&&b("#selectKeyTableId").css("display")!="none"){b(".selectKeyText").each(function(){var u=b(this).attr("field");var t=b(this).val().replace(" ","");n[u]=t});o.push(n)}else{var s=b("#keyWord").val();s=s.replace("","");s=s.replace(" ","");n.all=s;o.push(n)}var l=b("#beginTime").val();if(l==""){l=""}var m=b("#endTime").val();if(m==""){m=""}var r=b(".searchField").val();g.keySelectClick(o,l,m,r,ele)}else{var s=b("#keyWord").val();if(s==""||s==""){if(b("#keyWord").next().attr("class")=="clearText"){b(".clearText").remove()}}else{if(b("#keyWord").next().attr("class")!="clearText"){b("#keyWord").after("<div class='clearText'></div>")}}}}));b(".view_tool2 .clearText").die().live("click",(function(){ele=b(this);b(".view_tool2 .clearText").remove();b("#keyWord").val("");g.keySelectClick("","","","",ele)}));b("#keySelect").die().live("click",(function(){ele=b(this);var o=new Array();var n=new Object();if(b("#selectKeyTableId").attr("id")!=undefined&&b("#selectKeyTableId").css("display")!="none"){b(".selectKeyText").each(function(){var s=b(this).attr("field");var r=b(this).val().replace(" ","");n[s]=r});o.push(n)}else{var q=b("#keyWord").val();q=q.replace("","");q=q.replace(" ","");n.all=q;o.push(n)}var l=b("#beginTime").val();if(l==""){l=""}var m=b("#endTime").val();if(m==""){m=""}var p=b(".searchField").val();g.keySelectClick(o,l,m,p,ele);b(".selectKeyText").each(function(){var r=b(this).val();if(r!=""){b("#selectKeyTableId").css("display","");b("#keyWord").css("display","none");b("#showButton").text("")}})}));b("#showButton").die().live("click",function(){var l=b(this);if(l.text()==""){b("#selectKeyTableId").css("display","");b("#keyWord").css("display","none");l.text("");jsmod(".dnrw .tab-content",true)}else{if(l.text()==""){b("#selectKeyTableId").css("display","none");b("#keyWord").css("display","");l.text("")}}});b(".cond_class").die().live("click",(function(){var m=b(this).find("a").attr("class");if(m!=undefined&&m.indexOf("cond_class_bg")>-1){b(".cond_class a").attr("class","cond_class_a");refreshWindow(b(this))}else{b(".cond_class a").attr("class","cond_class_a");b(this).find("a").attr("class","cond_class_a cond_class_bg");var o=b(this).attr("value");var n=b(this).attr("appointColumn");var l=b(this).parents("#abc").find("#viewUuid").val();g.condSelectClick({value:o,appointColumn:n})}}));b(".sortAble").die().live("click",function(){var r=b(this);var t=b(".sortAble").index(r);var n=new Object();var q=r.attr("orderby");var x=b(this).parents("#abc").find("#viewUuid").val();var s=b(this).parents("#abc").find("#pageCurrentPage").val();var v=b(this).parents("#abc").find("#pageSize").val();var w=r.text().replace("","").replace("","");n.viewUuid=x;var p=new Object();p.orderTitle=w;p.orderbyArr=q;var B=new Object();B.currentPage=s;B.pageSize=v;n.condSelect=p;n.pageInfo=B;var A=r.parents("#abc").find("#parmStr").val();var z=A.split("&");var C=new Object();for(var m=0;m<z.length;m++){var y=z[m].split("=")[0];var u=z[m].split("=")[1];if(y!=""){if(y=="openBy"){n.openBy=u}else{C[y]=u}}}n.expandParams=C;var l=ctx+"/basicdata/dyview/view_show_param.action";b(".sortAble").each(function(){b(this).text(b(this).text().replace("","").replace("",""))});b.ajax({url:l,type:"POST",data:JSON.stringify(n),dataType:"text",contentType:"application/json",success:function(D){b("#update_"+x).html(D);formDate();var o=b(".sortAble").eq(t).html();if(q=="asc"){b(".sortAble").eq(t).attr("orderby","desc");b(".sortAble").eq(t).html(o+"")}else{b(".sortAble").eq(t).attr("orderby","asc");b(".sortAble").eq(t).html(o+"")}}})});b("#chooseDate").click(function(){b("#dateInput").css("display","");var l=b("#datepicker").attr("appointColumn");b("#datepicker").datepicker({onClose:function(m){g.condSelectClick({value:m,appointColumn:l});b("#dateInput").css("display","none")}});b("#datepicker").datepicker("option","dateFormat","yy-mm-dd")})},getOptions:function(c){c=b.extend({},b.fn.dyView.defaults,c,this.$element.data());return c},clickSort:function(h){var g=this.collectData(this);var c=h.viewUuid;var f=h.pageCurrentPage;var d=h.pageSize;var i=b(this).text();g.viewUuid=c;g.condSelect.orderTitle=i;g.pageInfo.currentPage=f;g.pageInfo.pageSize=d;var e=ctx+"/basicdata/dyview/view_show_param.action";b.ajax({url:e,type:"POST",data:JSON.stringify(g),dataType:"text",contentType:"application/json",success:function(j){b("#update_"+c).html(j);formDate()}})},condSelectClick:function(i){var h=this.collectData(this);var g=new Object();var e=new Object();var f=this.options.data.pageCurrentPage;var c=this.options.data.pageSize;h.viewUuid=viewUuid;g.currentPage=f;g.pageSize=c;e.optionValue=i.value;e.appointColumn=i.appointColumn;h.pageInfo=g;h.condSelect=e;var d=ctx+"/basicdata/dyview/view_show_param.action";b.ajax({url:d,type:"POST",data:JSON.stringify(h),dataType:"text",contentType:"application/json",success:function(j){if(j==""){alert(",!")}b("#update_"+viewUuid).html(j);formDate()}})},keySelectClick:function(g,h,i,p,q){var m=q.parents("#abc").find("#parmStr").val();var e=this.collectData(this);var f=e.condSelect;f.keyWords=g;f.beginTime=h;f.endTime=i;f.searchField=p;e.condSelect=f;var l=m.split("&");var n=new Object();for(var d=0;d<l.length;d++){var k=l[d].split("=")[0];var j=l[d].split("=")[1];if(k!=""){if(k=="openBy"){e.openBy=j}else{n[k]=j}}}e.expandParams=n;var c=ctx+"/basicdata/dyview/view_show_param.action";b.ajax({async:false,url:c,type:"POST",data:JSON.stringify(e),dataType:"text",contentType:"application/json",success:function(o){if(o==""){alert(",!")}b("#update_"+e.viewUuid).html(o);formDate()}})},collectData:function(f){var h=new Object();var e=new Object();e.optionTitle="";e.optionValue="";e.appointColumn="";e.beginTime="";e.endTime="";e.searchField="";e.keyWords=[];e.orderbyArr="";e.orderTitle="";var g=new Object();var c=this.options.data.viewUuid;var d=this.options.data.pageSize;var i=1;h.viewUuid=c;h.viewName="";g.currentPage=i;g.pageSize=d;g.totalCount=0;g.first=0;g.autoCount=true;h.condSelect=e;h.pageInfo=g;return h}};b.fn.dyView=function(d){var c=null;if(arguments.length==2){c=arguments[1]}return this.each(function(){var g=b(this),f=g.data("dyView"),e=b.extend({},g.data(),typeof d=="object"&&d);if(!f){g.data("dyView",(f=new a(this,e)))}if(typeof d=="string"){if(typeof c!=null){return f[d](c)}return f[d]()}})};b.fn.dyView.Constructor=a;b.fn.dyView.defaults={}})(jQuery);function exportData(){var a=new Array();$(".checkeds").each(function(){var d=$(this);if(d.attr("checked")){var c=d.val();a.push(c)}});var b=ctx+"/basicdata/excelexportrule/export?viewUuid="+viewUuid+"&dataArray="+a;window.location.href=b}function stopDefault(a){if(a&&a.preventDefault){a.preventDefault()}else{window.event.returnValue=false}return false}function formDate(){$(".dataTr td").each(function(){var d=/^(?:19|20)[0-9][0-9]-(?:(?:[1-9])|(?:1[0-2]))-(?:(?:[1-9])|(?:[1-2][1-9])|(?:[1-3][0-1])) (?:(?:2[0-3])|(?:1[0-9])|(?:[1-9])|0):[0-5][0-9]:[0-5][0-9]$/;var h=$(this).text();if(d.test(h)){var c=h.split(" ")[0];var a=h.split(" ")[1];var b=c.split("-");var j=a.split(":");var f=new Array();f[0]=b[0];f[1]=b[1];f[2]=b[2];f[3]=j[0];f[4]=j[1];f[5]=j[2];for(var e=1;e<6;e++){if(f[e].length==1){f[e]=0+""+f[e]}}var g=f[0]+"-"+f[1]+"-"+f[2]+" "+f[3]+":"+f[4];$(this).text(g);$(this).attr("title",g)}})};
;
var gsCurUser=getCookie("cookie.current.username");function NewOfficeDocument(g,e,b){var d=g.caller;var a=e;if(b==undefined||b==""){if(typeof(g)!="object"){return false}var c=ctx+"/resources/form/aaa.doc";g.SetIni(c,d.fileName,"");window.LastModify=g.getLastModify();g.OpenFile(gsCurUser,"0","0",false,"1");if(a=="1"){BodySignRevisionCanAccept(g)}var f=g.GetLocalFile();return true}else{c=b;g.SetIni(c,"",ID_BodyLastModified.innerText);window.LastModify=g.getLastModify();g.OpenFile(gsCurUser,"0","0",false,"1");if(a=="1"){BodySignRevisionCanAccept(g)}if(s_BodySaved){s_BodySaved.value=""}return true}}function EditWordBody(k,e,g,o,h,l){var a;var i="";var m=e;var j=h;var c=g;var n=l;var d=o;var f="Template.doc";if(k.GetLocalFile()==""){if(f.value==""){NewOfficeDocument(k,"1")}else{i="aaa.doc";var b=k.caller;a=ctx+fileServiceURL.downloadBody+b.oldFileID;if(typeof ID_CopyURLPath=="object"&&ID_CopyURLPath.innerText!=""){a=ID_CopyURLPath.innerText+i}if(!k.SetIni(a,b.fileName,"")){alert(sGetLang("P_OFFICE_PROMPTFILEEXIST"));return false}if(!k.WordIsOpen()){k.OpenFile(gsCurUser,n,m,j,"1");if(c!="0"){BodySignAccept(k)}if(d=="1"){BodySignRevisionCanAccept(k)}}else{k.SetWordFocus()}window.LastModify=k.getLastModify()}}else{if(!k.WordIsOpen()){k.OpenFile(gsCurUser,n,m,j,"1");if(c!="0"){BodySignAccept(k)}if(d=="1"){BodySignRevisionCanAccept(k)}}else{k.SetWordFocus()}}top.IsOpenOffice}function BodySignAccept(a){BodyRunMacro(a,"OASignAccept")}function BodySignRevisionCanAccept(a){BodyRunMacro(a,"OASignRevisionCanAccept")}function BodyAcceptRevision(a){BodyRunMacro(a,"OAAcceptAllRevisions")}function BodyRunMacro(a,n,k,j,i,h,g,f,e,d,c,b){var v=(k==null)?"":k;var u=(j==null)?"":j;var t=(i==null)?"":i;var s=(h==null)?"":h;var r=(g==null)?"":g;var q=(f==null)?"":f;var p=(e==null)?"":e;var o=(d==null)?"":d;var m=(c==null)?"":c;var l=(b==null)?"":b;return a.RunVBA(n,v,u,t,s,r,q,p,o,m,l)}function QuerySaveBody(g,d,c,b){if(typeof(g)!="object"||c=="1"){return true}var a=(d==null)?false:d;var e=b;var f;if(g.WordIsOpen()){if(!g.IsSaved()){if(s_BodySaved.value=="1"){f=4}else{f=4}if(f==4){if(e!="0"){BodyAcceptRevision(g)}g.SaveWord();g.CloseWord(2);s_BodySaved.value="1";return true}else{if(f==8){g.CloseWord(3);return false}else{return -1}}}else{g.CloseWord(2)}}if(typeof window.LastModify!="undefined"&&g.GetLocalFile()!=""&&(window.LastModify==""||g.getLastModify()==""||window.LastModify<g.getLastModify())){if(s_BodySaved.value=="1"){f=4}else{if(!a){f=4}else{f=4}}if(f==4){s_BodySaved.value="1";return true}else{if(f==8){return false}else{return -1}}}else{return false}}function SaveBody(f,e,b){if(typeof(f)!="object"||b=="1"){return true}var a=(e==null)?QuerySaveBody(f,null,b,"1"):e;if(a==-1){return false}else{if(a==true){var c=f.Upload("");if(c!=""){var d=f.GetFileName("")}else{}}}return true};
;
var dyResult={success:"1",error:"0"};var dyFormInputType={_text:"1",_date:"2",_double:"12",_int:"13",_long:"14",_float:"15",_clob:"16"};var dyFormInputTypeObj={_text:{code:dyFormInputType._text,name:""},_date:{code:dyFormInputType._date,name:""},_double:{code:dyFormInputType._double,name:""},_int:{code:dyFormInputType._int,name:""},_long:{code:dyFormInputType._long,name:""},_float:{code:dyFormInputType._float,name:""},_clob:{code:dyFormInputType._clob,name:""}};var dyFormInputValue={userImport:"1",jsEquation:"2",creatOperation:"3",showOperation:"4",twoDimensionCode:"5",shapeCod:"6",relationDoc:"7"};var dyFormOrgSelectType={orgSelect:"8",orgSelectStaff:"9",orgSelectDepartment:"10",orgSelectStaDep:"11",orgSelectAddress:"28",orgSelectJob:"51",orgSelectPublicGroup:"52",orgSelectMyDept:"53",orgSelectMyParentDept:"54",orgSelectMyUnit:"55"};var dyFormInputMode={text:"1",ckedit:"2",accessory1:"4",accessory3:"6",accessoryImg:"33",serialNumber:"7",unEditSerialNumber:"29",orgSelect:dyFormOrgSelectType.orgSelect,orgSelectStaff:dyFormOrgSelectType.orgSelectStaff,orgSelectDepartment:dyFormOrgSelectType.orgSelectDepartment,orgSelectStaDep:dyFormOrgSelectType.orgSelectStaDep,orgSelectAddress:dyFormOrgSelectType.orgSelectAddress,timeEmploy:"12",timeEmployForMeet:"13",timeEmployForCar:"14",timeEmployForDriver:"15",treeSelect:"16",radio:"17",checkbox:"18",selectMutilFase:"19",textArea:"20",textBody:"22",dialog:"26",xml:"27",date:"30",number:"31",viewdisplay:"32",embedded:"40",job:"41"};var elementShow={show:"1",hidden:"2"};var dyFormDataShow={directShow:"1",indirect:"2"};var dyFormDataType={_string:dyFormInputType._text,_date:dyFormInputType._date,_int:dyFormInputType._int,_long:dyFormInputType._long,_float:dyFormInputType._float,_clob:dyFormInputType._clob};var dySubFormEdittype={rowEdit:"1",newWin:"2"};var dySubFormShowType={jqgridShow:"1",tableShow:"2"};var dySubFormHideButtons={show:"1",hide:"2"};var dySubFormTableOpen={open:"1",notOpen:"2"};var dySubFormGroupShow={show:"1",notShow:"2"};var dySubFormFieldShow={show:"1",notShow:"2"};var dySubFormFieldEdit={notEdit:"0",edit:"1"};var dySubFormFieldCtl={label:"0",control:"1"};var dyCheckRule={notNull:"1",unique:"5",common:"10",url:"11",email:"12",idCard:"13",tel:"14",mobilePhone:"15",num_int:"n13",num_long:"n14",num_float:"n15",num_double:"n12"};var dyTableType={mainTable:"1",subtable:"2"};var dyDataSourceType={dataConstant:"1",dataDictionary:"2",dataView:"3",dataSource:"4"};var dyshowType={edit:"1",showAsLabel:"2",readonly:"3",disabled:"4",hide:"5"};var dyStatusType={NORMAL:"",DELETED:""};var signature={enable:"2",disable:"1"};var dyFieldSysType={system:0,custom:2,admin:1,assist:4};var dyDateFmt={yearMonthDate:"1",yearMonthDateCn:"2",yearCn:"3",yearMonthCn:"4",monthDateCn:"5",weekCn:"6",year:"7",timeHour:"8",timeMin:"9",timeSec:"10",dateTimeHour:"11",dateTimeMin:"12",dateTimeSec:"13"};var dySysVariable={currentYearMonthDate:"{CURRENTYEARMONTHDATE}",currentYearMonthDateCn:"{CURRENTYEARMONTHDATECN}",currentYearCn:"{CURRENTYEARCN}",currentYearMonthCn:"{CURRENTYEARMONTHCN}",currentMonthDateCn:"{CURRENTMONTHDATECN}",currentWeekCn:"{CURRENTWEEKCN}",currentYear:"{CURRENTYEAR}",currentTimeMin:"{CURRENTTIMEMIN}",currentTimeSec:"{CURRENTTIMESEC}",currentDateTimeMin:"{CURRENTDATETIMEMIN}",currentDateTimeSec:"{CURRENTDATETIMESEC}",currentUserId:"{CURRENTUSERID}",currentUserName:"{CURRENTUSERNAME}",currentUserDepartmentPath:"{CURRENTUSERDEPARTMENTPATH}",currentUserDepartmentName:"{CURRENTUSERDEPARTMENTNAME}",currentUserMainJobName:"{CURRENTUSERMAINJOBNAME}",currentCreatorId:"{CURRENTCREATORID}",currentCreatorName:"{CURRENTCREATORNAME}",currentCreatorDepartmentId:"{CURRENTCREATORDEPARTMENTID}",currentCreatorDepartmentPath:"{CURRENTCREATORDEPARTMENTPATH}",currentCreatorDepartmentName:"{CURRENTCREATORDEPARTMENTNAME}",currentCreatorMainJobName:"{CURRENTCREATORMAINJOBNAME}"};var relationShowType={dialog:"1",dropdiv:"2"};var dyControlPos={mainForm:"0",subForm:"1"};var groupUsed={uniqueGroup:"uniqueGroup"};var timeResouceType={MEET_RESOURCE:"MEET_RESOURCE",CAR_RESOURCE:"CAR_RESOURCE",DRIVER_RESOURCE:"DRIVER_RESOURCE"};var dyRelativeMethod={DIALOG:"1",SEARCH:"2"};var dySelectType={single:"1",multiple:"2"};var layOutInput={tab:"1",block:"2"};
;
var MainFormClass=function(){this.uuid="";this.createTime="";this.creator="";this.modifyTime="";this.recVer="";this.modifier="";this.applyTo="";this.relationTbl="";this.outerId="";this.name="";this.displayName="";this.remark="";this.formDisplay="";this.moduleId="";this.moduleName="";this.printTemplateId="";this.printTemplateName="";this.displayFormModelName="";this.displayFormModelId="";this.code="";this.version="1.0";this.enableSignature="";this.html="";this.fields={};this.subforms={};this.customJs=""};var MainFormFieldClass=function(){this.applyTo="";this.name="";this.displayName="";this.oldName="";this.dbDataType=dyFormDataType._string;this.indexed="";this.showed="";this.sorted="";this.sysType=dyFieldSysType.custom;this.length="255";this.showType=dyshowType.edit;this.defaultValue="";this.valueCreateMethod=dyFormInputValue.userImport;this.onlyreadUrl="";this.inputMode=dyFormInputMode.text;this.textAlign="left";this.ctlWidth="";this.ctlHight="";this.fontSize="12";this.fontColor="black";this.fieldCheckRules=[];this.realDisplay={real:"",display:""}};var SubFormClass=function(){this.formUuid="";this.outerId="";this.name="";this.displayName="";this.isGroupShowTitle="";this.groupShowTitle="";this.isGroupColumnShow="";this.subformApplyTableId="";this.subrRelationDataDefiantion="";this.tableOpen="";this.editMode="";this.hideButtons="";this.fields={}};var SubFormFieldClass=function(){this.name="";this.displayName="";this.order="0";this.sortable=false;this.srcFieldName="";this.hidden=dySubFormFieldShow.show;this.width="";this.editable=dySubFormFieldEdit.edit;this.controlable=dySubFormFieldCtl.label;this.formula=""};var LayOut=function(){this.name="";this.inputMode="";this.displayName="";this.isHide=false};
;
var loadFormDefinition=function(a){if(a==""||a==null||typeof a=="undefined"||a=="undefined"){return new MainFormClass()}var b=null;var d=(new Date()).getTime();$.ajax({url:contextPath+"/dyform/getFormDefinition",cache:false,async:false,type:"POST",data:{formUuid:a},dataType:"json",success:function(e){b=e},error:function(){oAlert(",");b=null}});if(b!=null){$.extend(b,formDefinitionMethod)}var c=(new Date()).getTime();console.log(":"+(c-d)/1000+"s");return b};var loadFormDefinitions=function(formUuids){if(formUuids==""||formUuids==null||typeof formUuids=="undefined"||formUuids=="undefined"||formUuids.length==0){return{}}var definitionObjs=[];var time1=(new Date()).getTime();$.ajax({url:contextPath+"/dyform/getFormDefinitions",cache:false,async:false,type:"POST",data:{formUuids:JSON.cStringify(formUuids)},dataType:"json",success:function(data){definitionObjs=data},error:function(){oAlert(",")}});var definitionMap=[];if(definitionObjs!=null&&definitionObjs.length>0){for(var i=0;i<definitionObjs.length;i++){var definitionObj=eval("("+definitionObjs[i]+")");$.extend(definitionObj,formDefinitionMethod);definitionMap[definitionObj.uuid]=definitionObj}}var time2=(new Date()).getTime();console.log(":"+(time2-time1)/1000+"s");return definitionMap};var loadFormDefinitionsAndDefaultFormData=function(b,c){var a={};$.ajax({url:contextPath+"/dyform/getFormDefinitions",cache:false,async:false,type:"POST",data:{formUuids:JSON.cStringify(b),formUuid:c},dataType:"json",success:function(d){a=d},error:function(){oAlert(",")}});return a};var loadFormData=function(b,a){if(b==""||b==null||typeof a=="undefined"||a=="undefined"){throw new Error("formUuid or dataUuid is not initialized")}var c=null;$.ajax({url:contextPath+"/dyformdata/getFormData",cache:false,async:false,type:"POST",data:{formUuid:b,dataUuid:a},dataType:"json",success:function(d){if(d.success=="true"||d.success==true){c=d.data}else{alert("")}},error:function(d){alert("");alert(JSON.cStringify(d));c=null}});return c};var loadFormDefinitionData=function(b,a){if(typeof a=="undefined"||a=="undefined"){a=""}var c=null;$.ajax({url:contextPath+"/dyformdata/getFormDefinitionData",cache:false,async:false,type:"POST",data:{formUuid:b,dataUuid:a},dataType:"json",success:function(d){if(d.success=="true"||d.success==true){c=d.data}else{alert("")}},error:function(){alert("");c=null}});return c};var loadFormDefinitionDataByFormId=function(b,a){if(typeof a=="undefined"||a=="undefined"){a=""}var c=null;$.ajax({url:contextPath+"/dyformdata/getFormDefinitionDataByFormId",cache:false,async:false,type:"POST",data:{formId:b,dataUuid:a},dataType:"json",success:function(d){if(d.success=="true"||d.success==true){c=d.data}else{alert("")}},error:function(){alert("");c=null}});return c};function loadDisplayModelDefintion(uuid){var model=null;var url=contextPath+"/dyformmodel/getDisplayModel";$.ajax({url:url,type:"POST",data:{uuid:uuid},dataType:"json",async:false,timeout:120000,contentType:"application/x-www-form-urlencoded",beforeSend:function(){pageLock("show")},complete:function(){pageLock("hide")},success:function(result){if(result.success=="true"||result.success==true){model=result.data}else{alert("")}},error:function(result){var responseText=result.responseText;try{var errorObj=eval("("+responseText+")");alert("\n"+errorObj.data)}catch(e){alert(JSON.cStringify(result))}}});return model}function loadDisplayModelDefintionByModelId(modelId){var model=null;var url=contextPath+"/dyformmodel/getDisplayModelByModelId";$.ajax({url:url,type:"POST",data:{modelId:modelId},dataType:"json",async:false,timeout:120000,contentType:"application/x-www-form-urlencoded",beforeSend:function(){pageLock("show")},complete:function(){pageLock("hide")},success:function(result){if(result.success=="true"||result.success==true){model=result.data}else{alert("")}},error:function(result){var responseText=result.responseText;try{var errorObj=eval("("+responseText+")");alert("\n"+errorObj.data)}catch(e){alert(JSON.cStringify(result))}}});return model}function formPreview(a){if(a.uuid==""){a.uuid="demouuid"}var b=JSON.cStringify(a);openPostWindow(ctx+"/dyformdata/demo",urlencode(urlencode(b)),"_blank")}function openPostWindow(b,e,a){var d=document.createElement("form");d.id="tempForm1";d.method="post";d.action=b;d.target=a;var c=document.createElement("input");c.type="hidden";c.name="formDefinition";c.value=e;d.appendChild(c);d.onsubmit=function(){openWindow(a)};document.body.appendChild(d);d.submit();document.body.removeChild(d)}function openWindow(a){window.open("about:blank",a,"height=400, width=400, top=0, left=0, toolbar=yes, menubar=yes, scrollbars=yes, resizable=yes,location=yes, status=yes")}var toJSON=function(){if(typeof Object.create!=="function"){Object.create=function(d){function c(){}c.prototype=d;return new c()}}var a=Object.create(this);for(var b in a){a[b]=a[b]}return a};var getDbDataTypeName=function(b){for(var a in dyFormDataType){if(dyFormDataType[a]==b){return a}}};var getControlName=function(a){if(a==dyFormInputMode.text){return""}else{if(a==dyFormInputMode.ckedit){return""}else{if(a==dyFormInputMode.accessory1){return""}else{if(a==dyFormInputMode.accessory3){return""}else{if(a==dyFormInputMode.accessoryImg){return"	"}else{if(a==dyFormInputMode.serialNumber){return""}else{if(a==dyFormInputMode.unEditSerialNumber){return""}else{if(a==dyFormInputMode.orgSelect){return""}else{if(a==dyFormInputMode.orgSelectStaff){return""}else{if(a==dyFormInputMode.orgSelectDepartment){return""}else{if(a==dyFormInputMode.orgSelectStaDep){return"+"}else{if(a==dyFormInputMode.orgSelectAddress){return" ()"}else{if(a==dyFormInputMode.timeEmploy){return""}else{if(a==dyFormInputMode.timeEmployForMeet){return""}else{if(a==dyFormInputMode.timeEmployForCar){return""}else{if(a==dyFormInputMode.timeEmployForDriver){return""}else{if(a==dyFormInputMode.treeSelect){return""}else{if(a==dyFormInputMode.radio){return"radio"}else{if(a==dyFormInputMode.checkbox){return"checkbox"}else{if(a==dyFormInputMode.selectMutilFase){return""}else{if(a==dyFormInputMode.textArea){return""}else{if(a==dyFormInputMode.textBody){return" "}else{if(a==dyFormInputMode.dialog){return""}else{if(a==dyFormInputMode.xml){return"XML"}else{if(a==dyFormInputMode.date){return""}else{if(a==dyFormInputMode.number){return""}else{if(a==dyFormInputMode.viewdisplay){return""}else{if(a==dyFormInputMode.text){return""}}}}}}}}}}}}}}}}}}}}}}}}}}}}};var getApplyToName=function(a){if(a==undefined||a.length==0){return""}var b="";JDS.call({service:"dataDictionaryService.getKeyValuePair",data:["DY_FORM_FIELD_MAPPING",a],async:false,success:function(c){b=c.data.label},error:function(c){}});return b};var getValueCreateMethod=function(a){if(a=dyFormInputValue.userImport){return""}else{if(a=dyFormInputValue.jsEquation){return"JS"}else{if(a=dyFormInputValue.creatOperation){return""}else{if(a=dyFormInputValue.showOperation){return""}else{if(a=dyFormInputValue.twoDimensionCode){return""}else{if(a=dyFormInputValue.shapeCod){return""}else{if(a=dyFormInputValue.relationDoc){return""}}}}}}}};var getShowType=function(a){if(a==dyshowType.edit){return""}else{if(a==dyshowType.showAsLabel){return"  "}else{if(a==dyshowType.readonly){return" "}else{if(a==dyshowType.disabled){return" "}else{if(a==dyshowType.hide){return""}}}}}};var sortASCBy=function(a,g){len=a.length;if(typeof g=="string"){for(var b=0;b<len-1;b++){for(var d=0;d<(len-(b+1));d++){var e=a[d];var f=a[d+1];if(!e[g]){e[g]=0}if(!f[g]){f[g]=0}if(e[g]>f[g]){var c=f;a[d+1]=e;a[d]=c}}}}else{throw""}return a};function getSortFun(b,d){var c=(b=="asc")?">":"<";var a=new Function("a","b","return a."+d+c+"b."+d+"?1:-1");return a}function loadScript(b,a){$.ajax({url:b,dataType:"script",async:false,cache:a})}function parseNumber(a){if(typeof a=="undefined"||a==null||$.trim(a).length==0){a="0"}return parseFloat(a)}function sumAllColumn(b,l){if(l){}else{if(!arguments.callee.caller==null){return 0}if(!arguments.callee.caller.$form){return 0}l=arguments.callee.caller.$form}var f=/\${([^}]*)}/g.exec(b);var k=f[1].split(":");if(k.length==0){return}var g=k[0];var h=k[1];var j=l.dyform("collectSubformData",g);if(typeof j=="undefined"||j.length==0){return 0}var e=0;for(var d=0;d<j.length;d++){var a=j[d]["uuid"];var c=$.ControlManager.getCtl($.wSubFormMethod.getCellId(a,h));e+=parseNumber(c.getValue())}return e}var urlClickEvent=function(e){var d=new RegExp(/\$\{([^\}]*)\}/g);var b=e.data.a;var f=b.match(d);if(typeof f!="undefined"&&f!=null){for(var a=0;a<f.length;a++){var c=f[a].replace("${","").replace("}","");var g=$.ControlManager.getCtl(c);if(g!=undefined){b=b.replace(f[a],g.getValue())}else{if(c=="datauuid"){}else{if(c.indexOf("sys")>-1){}}}}}window.open(ctx+b)};var loadPersonInfo=function(d){var c={};var b=null;var a=contextPath+"/dyform/loadOrg";$.ajax({url:a,type:"POST",data:{userId:d},dataType:"json",async:false,timeout:120000,beforeSend:function(){pageLock("show")},complete:function(){pageLock("hide")},success:function(e){c=e},error:function(f){var g=f.responseText;try{console.error("")}catch(h){}}});return c};function isIE8(){if(typeof $!="undefined"&&$.browser&&$.browser.msie&&$.browser.version<9){return true}if(typeof navigator=="undefined"){return false}var b=navigator.appName;var d=navigator.appVersion;var a=d.split(";");if(a.length<2){return false}var c=a[1].replace(/[ ]/g,"");if(b=="Microsoft Internet Explorer"&&c=="MSIE6.0"){return false}else{if(b=="Microsoft Internet Explorer"&&c=="MSIE7.0"){return false}else{if(b=="Microsoft Internet Explorer"&&c=="MSIE8.0"){return true}else{if(b=="Microsoft Internet Explorer"&&c=="MSIE9.0"){return false}}}}return false}JSON.cStringify=function(b){if(typeof b!="object"){return b}var a=false;a=isIE8();if(a){return JSONUtil.encode(b)}else{return JSON.stringify(b)}};if(isIE8()){JSON.stringify=JSON.cStringify}var JSONUtil;if(!JSONUtil){JSONUtil={}}JSONUtil.decode=function(json){try{return eval("\u0028"+json+"\u0029")}catch(exception){return eval("\u0075\u006e\u0064\u0065\u0066\u0069\u006e\u0065\u0064")}};JSONUtil.encode=(function(){var c=!!{}.hasOwnProperty,b=function(d){return d<10?"0"+d:d},a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return(function(h){if(typeof h=="\u0075\u006e\u0064\u0065\u0066\u0069\u006e\u0065\u0064"||h===null){return"null"}else{if(Object.prototype.toString.call(h)==="\u005b\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0041\u0072\u0072\u0061\u0079\u005d"){var i=["\u005b"],d,f,g=h.length,e;for(f=0;f<g;f+=1){e=h[f];switch(typeof e){case"\u0075\u006e\u0064\u0065\u0066\u0069\u006e\u0065\u0064":case"\u0066\u0075\u006e\u0063\u0074\u0069\u006f\u006e":case"\u0075\u006e\u006b\u006e\u006f\u0077\u006e":break;default:if(d){i.push("\u002c")}i.push(e===null?"null":this.encode(e));d=true}}i.push("\u005d");return i.join("")}else{if((Object.prototype.toString.call(h)==="\u005b\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0044\u0061\u0074\u0065\u005d")){return'"'+h.getFullYear()+"-"+b(h.getMonth()+1)+"-"+b(h.getDate())+"T"+b(h.getHours())+":"+b(h.getMinutes())+":"+b(h.getSeconds())+'"'}else{if(typeof h=="\u0073\u0074\u0072\u0069\u006e\u0067"){if(/["\\\x00-\x1f]/.test(h)){return'"'+h.replace(/([\x00-\x1f\\"])/g,function(l,j){var k=a[j];if(k){return k}k=j.charCodeAt();return"\\u00"+Math.floor(k/16).toString(16)+(k%16).toString(16)})+'"'}return'"'+h+'"'}else{if(typeof h=="\u006e\u0075\u006d\u0062\u0065\u0072"){return isFinite(h)?String(h):"null"}else{if(typeof h=="\u0062\u006f\u006f\u006c\u0065\u0061\u006e"){return String(h)}else{i=["\u007b"],d,f,e;for(f in h){if(!c||h.hasOwnProperty(f)){e=h[f];if(e===null){continue}switch(typeof e){case"\u0075\u006e\u0064\u0065\u0066\u0069\u006e\u0065\u0064":case"\u0066\u0075\u006e\u0063\u0074\u0069\u006f\u006e":case"\u0075\u006e\u006b\u006e\u006f\u0077\u006e":break;default:if(d){i.push("\u002c")}i.push(this.encode(f),"\u003a",this.encode(e));d=true}}}i.push("\u007d");return i.join("")}}}}}}})})();window.JSONUtil=JSONUtil;
;
var CkPlugin={SUBFORM:"dysubform",DATECTL:"control4date",LABEL:"control4label",PREVIEW:"dyformpreview",TREESELECTCTL:"control4treeselect",NUMBERCTL:"control4number",RADIOCTL:"control4radio",COMBOBOXCTL:"control4combobox",CHECKBOXCTL:"control4checkbox",CKEDITORCTL:"control4ckeditor",TEXTCTL:"control4text",TEXTAREACTL:"control4textarea",CKEDITORCTL:"control4ckeditor",CHECKBOXCTL:"control4checkbox",SERIALNUMBERCTL:"control4serialnumber",DIALOGCTL:"control4dialog",UNITCTL:"control4unit",FILEUPLOADCTL:"control4fileupload",FILEUPLOAD4ICONCTL:"control4fileupload4icon",FILEUPLOAD4IMAGECTL:"control4fileupload4image",VIEWDISPLAYCTL:"control4viewdisplay",PROPERTIESDIALOGS:"propertiesDialog",BLOCK:"block"};var ckUtils={removeHintInDesigner:function(){var a=this.document.find("#user__hint");if(a.count()>0){a.getItem(0).remove()}},doubleClick:function(h){var b=h.data.element;var a=b;var j=this.getTableContainer(a);var g=$(j).attr("formUuid");if(g!=""&&(typeof g)!="undefined"){return this.jump2PropertyDialog(j,CkPlugin.SUBFORM,h)}if(a.is("img")){var e=$(a).attr("inputmode");var c=$(a).attr("class");var i=$(a).attr("name");if(typeof i=="undefined"||typeof c=="undefined"||c!="value"){return false}var f=formDefinition.fields[i];if(typeof e=="undefined"&&typeof f!="undefined"){e=f.inputMode}else{if(typeof f=="undefined"){f=new MainFormFieldClass();f.name=i;formDefinition.fields[i]=f}}if(typeof e=="undefined"){return false}var d=this.getPluginName(e);if(d==null){return false}return this.jump2PropertyDialog(a,d,h)}if(a.is("label")){if($(a).attr("class")=="label"){this.jump2PropertyDialog(a,CkPlugin.LABEL,h);return}}if(a.is("td")){if($(a).attr("class")=="title"){this.jump2PropertyDialog(a,CkPlugin.BLOCK,h);return}}return pluginContainerDomElement},getTableContainer:function(b){var a=null;if(b.is("table")||b.hasAscendant("table")){if(b.is("table")){a=b;return a}else{a=this.getTableContainer(b.getParent())}}return a},jump2PropertyDialog:function(b,c,a){this.focusedDom=b;a.data.dialog=c},getPluginName:function(b){var a="";switch(b){case dyFormInputMode.date:a=CkPlugin.DATECTL;break;case dyFormInputMode.treeSelect:a=CkPlugin.TREESELECTCTL;break;case dyFormInputMode.number:a=CkPlugin.NUMBERCTL;break;case dyFormInputMode.radio:a=CkPlugin.RADIOCTL;break;case dyFormInputMode.checkbox:a=CkPlugin.CHECKBOXCTL;break;case dyFormInputMode.selectMutilFase:a=CkPlugin.COMBOBOXCTL;break;case dyFormInputMode.text:a=CkPlugin.TEXTCTL;break;case dyFormInputMode.orgSelectAddress:case dyFormInputMode.orgSelectStaDep:case dyFormInputMode.orgSelectDepartment:case dyFormInputMode.orgSelectStaff:a=CkPlugin.UNITCTL;break;case dyFormInputMode.accessory3:a=CkPlugin.FILEUPLOADCTL;break;case dyFormInputMode.accessory1:a=CkPlugin.FILEUPLOAD4ICONCTL;break;case dyFormInputMode.accessoryImg:a=CkPlugin.FILEUPLOAD4IMAGECTL;break;case dyFormInputMode.dialog:a=CkPlugin.DIALOGCTL;break;case dyFormInputMode.viewdisplay:a=CkPlugin.VIEWDISPLAYCTL;break;case dyFormInputMode.ckedit:a=CkPlugin.CKEDITORCTL;break;case dyFormInputMode.serialNumber:case dyFormInputMode.unEditSerialNumber:a=CkPlugin.SERIALNUMBERCTL;break;case dyFormInputMode.textArea:a=CkPlugin.TEXTAREACTL;break;default:return null}return a},createPlugin:function(d,c,a){var b=this.plugins[d].path;this.ui.addButton(d,{label:c,icon:b+"/images/anchor.jpg",command:d});if(a){this.plugins[d].htmlUrl=b+"dialogs/"+d+".html";CKEDITOR.dialog.add(d,b+"dialogs/"+d+".js");this.addCommand(d,new CKEDITOR.dialogCommand(d))}}};var dialogMethod={onOk:function(){var a=this.getParentEditor();alert(a)},onCancel:function(){var a=this.getParentEditor();alert(a)},onShow:function(){var a=this.getParentEditor()}};
;
var formDefinitionMethod={deleteField:function(b){var a=this.fields[b];if(typeof a=="undefined"){console.log(b+" ");return}if(typeof a.oldName=="undefined"){return}else{}if(typeof this.deletedFieldNames=="undefined"){this.deletedFieldNames=[]}this.deletedFieldNames.push(a.name);delete this.fields[name]},deleteSubform:function(b){var a=this.subforms[b];if(typeof a=="undefined"){console.log(b+" ");return}delete this.subforms[b]},addField:function(c,b){if(typeof this.deletedFieldNames=="undefined"){this.deletedFieldNames=[]}for(var a=0;a<this.deletedFieldNames.length;a++){if(this.deletedFieldNames[a]==c){this.deletedFieldNames.splice(0,1)}}this.fields[c]=b},isInputModeAsAttach:function(c){var a=this.fields[c];if(typeof a=="undefined"){return false}var b=a.inputMode;if(b==dyFormInputMode.accessory1||b==dyFormInputMode.accessoryImg||b==dyFormInputMode.accessory3){return true}else{return false}},isValueAsMap:function(b){if(typeof b=="undefined"){return false}var a=this.fields[b].inputMode;return this.isInputModeAsValueMap(a)},isInputModeAsValueMap:function(a){if(typeof a=="undefined"){return false}if(dyFormInputMode.orgSelect==(a)||dyFormInputMode.orgSelectStaff==(a)||dyFormInputMode.orgSelectDepartment==(a)||dyFormInputMode.orgSelectStaDep==(a)||dyFormInputMode.orgSelectAddress==(a)||dyFormInputMode.treeSelect==(a)||dyFormInputMode.radio==(a)||dyFormInputMode.checkbox==(a)||dyFormInputMode.selectMutilFase==(a)||dyFormInputMode.job==(a)){return true}return false},isCustomField:function(b){if(typeof b=="undefined"){return false}var a=this.fields[b].sysType;if(a!=dyFieldSysType.custom){return false}else{return true}},isInputModeAsText:function(a){if(typeof a=="undefined"){return false}if(dyFormInputMode.text==(a)){return true}return false},sortFieldsOfSubform:function(f,g){var a=this.subforms[f].fields;var e=[];for(var c in a){e.push(a[c])}var b=sortASCBy(e,"order");var d={};for(var c=0;c<b.length;c++){d[b[c].name]=b[c]}return d}};
;
if(typeof I18nLoader!="undefined"){I18nLoader.load("/resources/pt/js/global")}if(typeof I18nLoader!="undefined"){I18nLoader.load("/resources/pt/js/dyform/validate/messages")}$(function(){jQuery.validator.addMethod("regexCaseNotSensitive",function(b,a,d){var c=new RegExp(d,"i");return c.test(b)},"");jQuery.validator.addMethod("regex",function(b,a,d){var c=new RegExp(d);return c.test(b)},"");jQuery.validator.addMethod("isUnique",function(g,b,h){var f={};$.extend(f,h.data);for(var a in h.data){if(typeof h.data[a]=="function"){f[a]=h.data[a]()}}var e=true;var d=$(b).attr("uniqueGroup");$("input[uniqueGroup='"+d+"']").each(function(){var i=$(this).attr("name");if($(b).attr("name")==i){return true}var k=$.ControlManager.getCtl(i);var j="";if(k.isValueMap()){j=k.getValueMap()}else{j=k.getValue()}if(j==f.fieldValue){e=e&&false}});if(!e){return e}var c=false;$.ajax({url:h.url,type:h.type,async:h.async,data:JSON.cStringify(f),dataType:"json",contentType:"application/json",type:"POST",success:function(i){if(i.success=="true"||i.success==true){if(i.data=="false"||i.data==false){c=true}else{c=false}}else{c=false}},error:function(i){c=true}});return c},"")});
;
var Theme=function(){var d,b=a();d=["#94BA65","#2B4E72","#2790B0","#777","#555","#999","#bbb","#ccc","#eee"];return{init:e,chartColors:d,validationRules:b};function e(){c();if($.fn.lightbox){$(".ui-lightbox").lightbox()}if($.fn.cirque){$(".ui-cirque").cirque({})}$("#wrapper").append('<div class="push"></div>')}function c(){$(".accordion").on("show",function(f){$(f.target).prev(".accordion-heading").parent().addClass("open")});$(".accordion").on("hide",function(f){$(this).find(".accordion-toggle").not($(f.target)).parents(".accordion-group").removeClass("open")});$(".accordion").each(function(){$(this).find(".accordion-body.in").parent().addClass("open")})}function a(){var f={focusCleanup:false,wrapper:"div",errorElement:"span",highlight:function(h){if(v_checkable(h)){var g=$(h)[0].name;var i=$("input[name="+g+"]:last");if($(i).next().next(".Validform_checktip").size()>0){if($(i).not(":hidden")){$(i).next().next(".Validform_checktip").show()}return}$(i).next().after('<span class="Validform_checktip"></span>');$(i).next().next(".Validform_checktip").show()}else{if($(h).next(".Validform_checktip").size()>0){if($(h).not(":hidden")){$(h).next(".Validform_checktip").show()}return}$(h).after('<span class="Validform_checktip"></span>');$(h).next(".Validform_checktip").show()}},success:function(g,j){if(v_checkable(j)){var h=$(j)[0].name;var i=$("input[name="+h+"]:last");$(j).attr("valid","true");$(i).next().next(".Validform_checktip").remove()}else{$(j).attr("valid","true");$(j).next(".Validform_checktip").remove()}},errorPlacement:function(h,k){var i=h.html();if(i.indexOf("><")!=-1){return}if(v_checkable(k)){var g=$(k)[0].name;var j=$("input[name="+g+"]:last");$(k).attr("valid","false");$(j).next().next(".Validform_checktip").html(i)}else{$(k).attr("valid","false");$(k).next(".Validform_checktip").html(i)}if($.browser.msie){$(".Validform_checktip .error").css("display","block")}}};return f}}();var v_checkable=function(a){if((/radio|checkbox/i).test($(a)[0].type)){return true}else{return false}};
;
var WFileUploadClass=function(){this.allowUpload=true;this.allowDownload=true;this.allowDelete=true;this.mutiselect=true;this.toJSON=toJSON};WFileUploadClass.prototype=new MainFormFieldClass();
;
var WCheckBoxClass=function(){this.ctrlField="";this.optionDataSource="1";this.dictCode="";this.optionSet=[];this.selectMode="2";this.singleCheckContent="";this.singleUnCheckContent="";this.toJSON=toJSON};WCheckBoxClass.prototype=new MainFormFieldClass();
;
var WCkeditorClass=function(){this.toJSON=toJSON};WCkeditorClass.prototype=new MainFormFieldClass();
;
var WComboBoxClass=function(){this.optionDataSource="1";this.dictCode="";this.optionSet=[];this.toJSON=toJSON};WComboBoxClass.prototype=new MainFormFieldClass();
;
var WComboTreeClass=function(){this.serviceName="";this.treeWidth="220",this.treeHeight="220",this.mutiSelect=true,this.toJSON=toJSON};WComboTreeClass.prototype=new MainFormFieldClass();
;
var WDatePickerClass=function(){this.contentFormat="0";this.toJSON=toJSON};WDatePickerClass.prototype=new MainFormFieldClass();
;
var WFileUpload4IconClass=function(){this.allowUpload=true;this.allowDownload=true;this.allowDelete=true;this.mutiselect=true;this.toJSON=toJSON};WFileUpload4IconClass.prototype=new MainFormFieldClass();
;
var NumberOperator=function(){this.plus=false;this.plusUnit=1;this.minus=false;this.minusUnit=1;this.formula=""};var WNumberInputClass=function(){this.decimal=2;this.operator=new NumberOperator();this.toJSON=toJSON};WNumberInputClass.prototype=new MainFormFieldClass();
;
var WRadioClass=function(){this.optionDataSource="1";this.dictCode="";this.optionSet=[];this.toJSON=toJSON};WRadioClass.prototype=new MainFormFieldClass();
;
var WSerialNumberClass=function(){this.designatedId="";this.designatedType="";this.isOverride="";this.isSaveDb="";this.toJSON=toJSON};WSerialNumberClass.prototype=new MainFormFieldClass();
;
var WTextAreaClass=function(){this.toJSON=toJSON};WTextAreaClass.prototype=new MainFormFieldClass();
;
var WTextInputClass=function(){this.contentFormat="0";this.formula="";this.toJSON=toJSON};WTextInputClass.prototype=new MainFormFieldClass();
;
var WUnitClass=function(){this.mutiSelect=true,this.showUnitType=true,this.filterCondition="",this.toJSON=toJSON};WUnitClass.prototype=new MainFormFieldClass();
;
var WViewDisplayClass=function(){this.relationDataText="";this.relationDataValue="";this.relationDataSql="";this.toJSON=toJSON};WViewDisplayClass.prototype=new MainFormFieldClass();
;
var WDialogClass=function(){this.relationDataTextTwo="";this.relationDataValueTwo="";this.relationDataTwoSql="";this.relationDataDefiantion="";this.relationDataShowMethod="";this.relationDataShowType="";this.relativeMethod=dyRelativeMethod.DIALOG;this.toJSON=toJSON};WDialogClass.prototype=new MainFormFieldClass();
;
var WTimeEmployClass=function(){this.resCode=timeResouceType.MEET_RESOURCE;this.toJSON=toJSON};WDialogClass.prototype=new MainFormFieldClass();
;
var unitDialogCount=0;(function(a){a.product={open:function(j){j=a.extend({labelField:null,valueField:null,descField:null,initNames:null,initIDs:null,title:"",multiple:false,showType:true,type:"LED",descFlag:false,isSetChildWin:false},j);var e=new Array();if(j.labelField!=null&&j.initNames==null){e.Name=a("#"+j.labelField).val()}else{e.Name=j.initNames}if(j.valueField!=null&&j.initIDs==null){e.ID=a("#"+j.valueField).val()}else{e.ID=j.initIDs}if((e.ID==null||e.ID=="")&&typeof(a("#"+j.labelField).attr("hiddenValue"))!="undefined"){e.ID=a("#"+j.labelField).attr("hiddenValue")}if(e.Name==""||e.ID==""){e.Name=null;e.ID=null}e.Title=null;e.Type=j.type;e.ShowType=j.showType;e.multiple=j.multiple;e.descFlag=j.descFlag;function i(l){var k=document.cookie.match(new RegExp("(^| )"+l+"=([^;]*)(;|$)"));if(k){return decodeURI(k[2])}else{return null}}function f(){if(window.ctx==null||window.contextPath==null){window.contextPath=i("ctx");window.contextPath=window.contextPath=='""'?"":window.contextPath;window.ctx=window.contextPath}return window.ctx}f();unitDialogCount++;var h=unitDialogCount;e.index=h;e.ctx=window.ctx;var d=".ui-layout-container";var c=a(d).css("overflow-x");var b=a(d).css("overflow-y");var g=a('<iframe id="unit_dialog_'+h+'" src="'+ctx+'/resources/pt/js/ldx/unit/unit.htm" frameborder="0"></iframe>').dialog({title:j.title,bgiframe:true,autoOpen:true,resizable:true,stack:true,zIndex:9999,width:850,height:560,modal:true,overlay:{background:"#000",opacity:0.5},close:function(m,l){if(this.contentWindow.goUnitTree){var k=this.contentWindow.goUnitTree.returnValue;if(k){if(j.labelField!=null){a("#"+j.labelField).val(k.name);a("#"+j.labelField).attr("hiddenValue",k.id);a("input[name='"+j.labelField+"']").val(k.name);a("input[name='"+j.labelField+"']").attr("hiddenValue",k.id)}if(j.valueField!=null){a("#"+j.valueField).val(k.id);a("input[name='"+j.valueField+"']").val(k.id)}if(j.descFlag&&j.descField!=null){a.get(ctx+"/ldx/unit/product/search/getLondDesc",{id:k.id},function(n){a("#"+j.descField).val(n);a("input[name='"+j.descField+"']").val(n)})}if(j.isSetChildWin){setChildWin()}}if(k&&j.afterSelect){j.afterSelect.call(this,this.contentWindow.goUnitTree.returnValue)}}if(j.close){j.close.call(this,m)}a(d).css("overflow-x",c);a(d).css("overflow-y",b)},open:function(k){a(".ui-widget-overlay").css("background","#000");a(".ui-widget-overlay").css("opacity","0.5");a(this).css("width","100%");a(this).css("margin","0");a(this).css("padding","0");this.contentWindow.dialogArguments=e;a(d).css("overflow-x","scroll");a(d).css("overflow-y","scroll")}});if(!window.unitDialogs){window.unitDialogs=[]}window.unitDialogs[h]=g}}})(jQuery);
;
(function($){$.ControlUtil={setCommonCtrAttr:function(elment,options){elment.attr("applyTo",options.columnProperty.applyTo);elment.attr("controlName",options.columnProperty.controlName);elment.attr("columnName",options.columnProperty.columnName);elment.attr("displayName",options.columnProperty.displayName);elment.attr("dbDataType",options.columnProperty.dbDataType);elment.attr("indexed",options.columnProperty.indexed);elment.attr("showed",options.columnProperty.showed);elment.attr("sorted",options.columnProperty.sorted);elment.attr("sysType",options.columnProperty.sysType);elment.attr("length",options.columnProperty.length);elment.attr("showType",options.columnProperty.showType);elment.attr("defaultValue",options.columnProperty.defaultValue);elment.attr("valueCreateMethod",options.columnProperty.valueCreateMethod);elment.attr("onlyreadUrl",options.columnProperty.onlyreadUrl);elment.attr("inputMode",options.commonProperty.inputMode);elment.attr("fieldCheckRules",options.commonProperty.fieldCheckRules);elment.attr("textAlign",options.commonProperty.textAlign);elment.attr("fontSize",options.commonProperty.fontSize);elment.attr("fontColor",options.commonProperty.fontColor);elment.attr("ctlWidth",options.commonProperty.ctlWidth);elment.attr("ctlHight",options.commonProperty.ctlHight)},setEnable:function(elment,isenable){if(isenable){elment.removeAttr("disabled")}else{elment.attr("disabled","disabled")}},setReadOnly:function(elment,isreadonly){if(isreadonly){elment.attr("readonly","readonly")}else{elment.removeAttr("readonly")}},setVisible:function(elment,isvisible){if(isvisible){elment.show();if(elment.parent().is("tr[class='field']")){elment.parent().show()}else{if(elment.parent().parent().is("tr[class='field']")){elment.parent().parent().show()}else{if(elment.parent().parent().parent().is("tr[class='field']")){elment.parent().parent().parent().show()}}}}else{elment.hide();if(elment.parent().is("tr[class='field']")){elment.parent().hide()}else{if(elment.parent().parent().is("tr[class='field']")){elment.parent().parent().hide()}else{if(elment.parent().parent().parent().is("tr[class='field']")){elment.parent().parent().parent().hide()}}}}},setDisplayAsCtl:function(elment,options){if(options.isShowAsLabel==false){return}elment.show();if(elment.next().is("span")){elment.next().remove()}options.isShowAsLabel=false;elment.focus()},setDisplayAsLabel:function(elment,options,islabelshow,ctlObj){if(elment.attr("valid")=="false"){return}var name=elment.attr("name");$("#span"+name).remove();var val="";if(ctlObj){val=ctlObj.getValue()}else{val=elment.val()}elment.hide();this.setSpanStyle(elment,options.commonProperty.textAlign,options.commonProperty.fontSize,options.commonProperty.fontColor,options.commonProperty.ctlWidth,options.commonProperty.ctlHight,val);options.isShowAsLabel=true},setRequired:function(isrequire,options){var checkruleisempty;var fieldCheckRules=options.commonProperty.fieldCheckRules;if(fieldCheckRules==""||fieldCheckRules==undefined){checkruleisempty=true}else{checkruleisempty=false}if(checkruleisempty){if(isrequire){fieldCheckRules="[{value:'1',label:''}]"}}else{if(typeof fieldCheckRules=="string"){var jsonarray=eval("("+fieldCheckRules+")")}else{var jsonarray=fieldCheckRules}if(isrequire){var isaddrequire=true;for(var k=0;k<jsonarray.length;k++){if(dyCheckRule.notNull==jsonarray[k].value){isaddrequire=false;break}}if(isaddrequire){jsonarray.push({value:"1",label:""})}}var checkrules=[];for(var k=0;k<jsonarray.length;k++){if(dyCheckRule.notNull==jsonarray[k].value&&!isrequire){continue}checkrules.push({value:jsonarray[k].value,label:jsonarray[k].label})}fieldCheckRules=JSON.cStringify(checkrules)}if(!isaddrequire&&fieldCheckRules.length>0){var rules=eval("("+fieldCheckRules+")");var rules2=[];for(var z=0;z<rules.length;z++){if(rules[z].value==dyCheckRule.notNull){rules2.push({value:rules[z].value,label:rules[z].label})}}fieldCheckRules=JSON.cStringify(rules2)}options.commonProperty.fieldCheckRules=fieldCheckRules},getCheckRuleAndMsg:function(options){var fieldCheckRules=options.commonProperty.fieldCheckRules;var columnProperty=options.columnProperty;if(fieldCheckRules==""||fieldCheckRules==undefined){return{}}var rules=eval(fieldCheckRules);var ruleAndMsgMap={};var msgmap={};var rulemap={};for(var k=0;k<rules.length;k++){if(dyCheckRule.notNull==rules[k].value){msgmap.required=rules[k].label;rulemap.required=true}else{if(dyCheckRule.url==rules[k].value){msgmap.url=rules[k].label;rulemap.url=true}else{if(dyCheckRule.email==rules[k].value){msgmap.email=rules[k].label;rulemap.email=true}else{if(dyCheckRule.idCard==rules[k].value){msgmap.isIdCardNo=rules[k].label;rulemap.isIdCardNo=true}else{if(dyCheckRule.unique==rules[k].value){msgmap.unique=rules[k].label;rulemap.unique=true}else{if(dyCheckRule.tel==rules[k].value){msgmap.isPhone=rules[k].label;rulemap.isPhone=true}else{if(dyCheckRule.mobilePhone==rules[k].value){msgmap.isMobile=rules[k].label;rulemap.isMobile=true}else{if(dyCheckRule.num_int==rules[k].value){msgmap.isInteger=rules[k].label;rulemap.isInteger=true}else{if(dyCheckRule.num_long==rules[k].value){msgmap.isInteger=rules[k].label;rulemap.isInteger=true}else{if(dyCheckRule.num_float==rules[k].value){msgmap.isFloat=rules[k].label;rulemap.isFloat=true}else{if(dyCheckRule.num_double==rules[k].value){msgmap.isFloat=rules[k].label;rulemap.isFloat=true}}}}}}}}}}}}if(columnProperty.length&&$.trim(columnProperty.length).length>0){rulemap.maxlength=parseInt(columnProperty.length,10);msgmap.maxlength=jQuery.validator.messages.maxlength}ruleAndMsgMap.rule=rulemap;ruleAndMsgMap.msg=msgmap;return ruleAndMsgMap},isRequired:function(options){var fieldCheckRules=options.commonProperty.fieldCheckRules;if(fieldCheckRules==""||fieldCheckRules==undefined){return false}var checkrules="";if(typeof fieldCheckRules=="object"){checkrules=fieldCheckRules}else{checkrules=eval("("+fieldCheckRules+")")}var isexistrequired=false;for(var k=0;k<checkrules.length;k++){if(dyCheckRule.notNull==checkrules[k].value){isexistrequired=true;break}}return isexistrequired},setSpanStyle:function(elment,textAlign,fontSize,fontColor,ctlWidth,ctlHight,val){var name=elment.attr("name");$("#span"+name).remove();var spanstyle=this.getStyleHtmlByParams(textAlign,fontSize,fontColor,ctlWidth,ctlHight,"");elment.after("<span  id='span"+name+"'"+spanstyle+" >"+val+"</span>")},getStyleHtmlByParams:function(textAlign,fontSize,fontColor,ctlWidth,ctlHight,otherstyle){var cssTemp="style = '";if(textAlign=="center"){cssTemp+="text-align:center;"}else{if(textAlign=="left"){cssTemp+="text-align:left;"}else{if(textAlign=="right"){cssTemp+="text-align:right;"}}}if(fontSize!=null&&fontSize!=""){cssTemp+="font-size:"+fontSize+"px;"}if(fontColor!=null&&fontColor!=""){cssTemp+="color:"+fontColor+";"}if(ctlWidth!=null&&ctlWidth!=""){cssTemp+="width:"+ctlWidth+"px;"}if(ctlHight!=null&&ctlHight!=""){cssTemp+="height:"+ctlHight+"px;"}if(otherstyle!=null&&otherstyle!=""){cssTemp+=otherstyle}cssTemp+="'";return cssTemp},}})(jQuery);
;
(function(a){a.ControlConfigUtil={ctlPropertyComInitSet:function(g){var b=this.$;this.initApplyToTree(b("#applyTo"));b("#applyTo").wcomboTree("getObject").setValue(g.applyTo);b("#applyTo").comboTree("initValue",g.applyTo);b("#name").val(g.name);b("#name").attr("oldName",g.oldName);b("#displayName").val(g.displayName);b("#dbDataType").val(g.dbDataType);selColor(g.fontColor);b("#fontSize").val(g.fontSize);b("#length").val(g.length);b("#ctlWidth").val(g.ctlWidth);b("#ctlHight").val(g.ctlHight);b("#textAlign").val(g.textAlign);b("#defaultValue").val(g.defaultValue);b("#onlyreadUrl").val(g.onlyreadUrl);b("#realDisplay_display").empty();b("#realDisplay_real").empty();b("#realDisplay_display").append('<option value="">----</option>');b("#realDisplay_real").append('<option value="">----</option>');if(formDefinition.isInputModeAsValueMap(g.inputMode)){for(var c in formDefinition.fields){var d=formDefinition.fields[c];if(!formDefinition.isCustomField(d.name)||d.name==g.name||!formDefinition.isInputModeAsText(d.inputMode)){continue}b("#realDisplay_display").append('<option value="'+d.name+'">'+d.displayName+"</option>");b("#realDisplay_real").append('<option value="'+d.name+'">'+d.displayName+"</option>")}var e=g.realDisplay;if(typeof e!="undefined"){var h=e.real;var k=e.display;b("#realDisplay_display").val(k);b("#realDisplay_real").val(h)}}else{}if((typeof g.fieldCheckRules)!="undefined"&&g.fieldCheckRules!=null){var j=g.fieldCheckRules;for(var c=0;c<j.length;c++){var f=j[c];b("input[name='fieldCheckRules'][value='"+f.value+"']").each(function(){this.checked=true})}}b("input[name='showType'][value='"+g.showType+"']").each(function(){this.checked=true});if(g.name!=""&&g.name!=undefined){}else{b("#name").removeAttr("readonly")}this.setDbDataType(g.dbDataType)},setDbDataType:function(c){if(typeof c=="undefined"){return}if(this.$("#dbDataType").size()==0){return}if(this.$("#dbDataType").find("option").length>0){this.$("#dbDataType").val(c);return}for(var b in dyFormInputTypeObj){this.$("#dbDataType").append("<option value='"+b.code+"'>"+b.name+"</option>")}this.$("#dbDataType").val(c)},getDbDataType:function(){if(this.$("#dbDataType").size()==0){return null}return this.$("#dbDataType").val()},ctlEditDialogonShow:function(b,g,m){if(b==undefined){return}var l=b.getSelection();var c=l.getRanges();var d=c[0].startContainer;var j=d.getParents(true);var h=j.length;if(h>3){var f=null;for(var e=h-1;e>-1;e--){var k=j[e];if(k.type!=3&&k.getName()=="tr"){f=k}else{if(k.type!=3){valueClassElement=k}}}editor.fieldClazzElement=f}else{g.hide();alert(""+m+"!!")}},ctlEditDialogOnOk:function(c,b){var d=c.collectFormAndFillCkeditor();if(!d){return false}c.exitDialog();window.setTimeout(function(){a("#"+b).empty()},100);return true},ctlEditDialogOnCancel:function(c,b){if((typeof c.exitDialog)!="undefined"){c.exitDialog();window.setTimeout(function(){a("#"+b).empty()},100)}},initApplyToTree:function(b){b.wcomboTree({treewidth:300,treeheight:220,serviceName:"dataDictionaryService.getFromTypeAsTreeAsync('DY_FORM_FIELD_MAPPING')",initService:"dataDictionaryService.getKeyValuePair",initServiceParam:["DY_FORM_FIELD_MAPPING"],mutiselect:true,isinitTreeById:true});b.addClass("input-tier")},collectFormCtlComProperty:function(d){var e=this.$;var b=true;d.name=e("#name").val();d.oldName=e("#name").attr("oldName");d.displayName=e("#displayName").val();if(d.name==""||d.name==undefined){alert(dymsg.fieldNameNotEmpty);return false}if(d.displayName==""||d.displayName==undefined){alert(dymsg.displayNameNotEmpty);return false}if(preservedFields.is(a.trim(d.name))){alert(dymsg.preservedField);return false}d.valueCreateMethod="1";d.applyTo=e("#applyTo").wcomboTree("getObject").getValue();d.fontColor=e("#fontColor").val();d.fontSize=e("#fontSize").val();d.ctlWidth=e("#ctlWidth").val();d.ctlHight=e("#ctlHight").val();d.textAlign=e("#textAlign").val();d.showType=e("input[name='showType']:checked").val();d.defaultValue=e("#defaultValue").val();d.onlyreadUrl=e("#onlyreadUrl").val();if(e("#length").size()>0){d.length=e("#length").val()}if(e("#dbDataType").size()>0){d.dbDataType=e("#dbDataType").val()}e("input[name='fieldCheckRules']:checked").each(function(){if(this.checked){d.fieldCheckRules.push({value:a(this).val(),label:a(this).next().text()})}});if(typeof d.oldName!="undefined"&&d.name!=d.oldName){delete formDefinition.fields[d.oldName]}if(formDefinition.isInputModeAsValueMap(d.inputMode)){d.realDisplay={};d.realDisplay.real=e("#realDisplay_real").val();d.realDisplay.display=e("#realDisplay_display").val()}var c=this.getDbDataType();if(c!=null){d.dbDataType=c}return b},initDictCode:function(){var e={async:{otherParam:{serviceName:"dataDictionaryService",methodName:"getAsTreeAsyncForControl",}},check:{enable:false},callback:{onClick:b,beforeClick:d}};a("#dictName").comboTree({labelField:"dictName",valueField:"dictCode",treeSetting:e,width:220,height:220});function b(f,h,g){a("#dictName").val(c(g));a("#dictCode").val(g.data+":"+c(g))}function d(h,g,f){return g.isParent}function c(g){var h=g.name;var f=g.getParentNode();while(f!=null){h=f.name+"/"+h;f=f.getParentNode()}return h}a("#dictName").addClass("input-tier")},initDataSource:function(){var e={async:{otherParam:{serviceName:"dyFormDefinitionService",methodName:"getAsTreeAsyncForControl",}},check:{enable:false},callback:{onClick:b,beforeClick:d}};a("#dictName").comboTree({labelField:"dictName",valueField:"dictCode",treeSetting:e,width:220,height:220});function b(f,h,g){a("#dictName").val(c(g));a("#dictCode").val(g.data+":"+c(g))}function d(h,g,f){return g.isParent}function c(g){var h=g.name;var f=g.getParentNode();while(f!=null){h=f.name+"/"+h;f=f.getParentNode()}return h}a("#dictName").addClass("input-tier")},createControlPlaceHolder:function(g,d,e){var f=e.inputMode;var b="<img  class='value' inputMode='"+f+"' name='"+e.name+"' title='"+e.displayName+"' src='"+d+"'/>";a(g.editor.fieldClazzElement).attr("class","field");var c=CKEDITOR.dom.element.createFromHtml(b);if(g.editor.focusedDom!=null){c.insertBefore(g.editor.focusedDom);g.editor.focusedDom.remove()}else{g.editor.insertElement(c)}}}})(jQuery);
;
(function($){$.ControlManager={createCtl:function($placeHolder,column,formDefinition){if(typeof $placeHolder=="undefined"||$placeHolder==null||$placeHolder.size()==0){console.error("placeholder not defined");return null}var ctlName=$placeHolder.attr("name");if(typeof ctlName=="undefined"||ctlName.length==0){console.error("placeholer must have a name property ,used to save the control id");return null}$placeHolder.hide();var ctlType="";var columnProperty={applyTo:column.applyTo,controlName:ctlName,columnName:column.name,displayName:column.displayName,dbDataType:column.dbDataType,indexed:column.indexed,showed:column.showed,sorted:column.sorted,sysType:column.sysType,length:column.length,isHide:column.isHide,showType:column.showType,defaultValue:column.defaultValue,valueCreateMethod:column.valueCreateMethod,onlyreadUrl:column.onlyreadUrl,realDisplay:column.realDisplay,formDefinition:formDefinition,pos:column.pos,data:column.data,dataUuid:column.dataUuid,relativeMethod:column.relativeMethod};var commonProperty={inputMode:column.inputMode,fieldCheckRules:column.fieldCheckRules,fontSize:column.fontSize,fontColor:column.fontColor,ctlWidth:column.ctlWidth,ctlHight:column.ctlHight,textAlign:column.textAlign};var inputMode=commonProperty.inputMode;if(inputMode==dyFormInputMode.radio){$placeHolder.wradio({columnProperty:columnProperty,commonProperty:commonProperty,optionDataSource:column.optionDataSource,optionSet:column.optionSet,dictCode:column.dictCode});ctlType="wradio"}else{if(inputMode==dyFormInputMode.checkbox){$placeHolder.wcheckBox({columnProperty:columnProperty,commonProperty:commonProperty,ctrlField:column.ctrlField,optionDataSource:column.optionDataSource,optionSet:column.optionSet,dictCode:column.dictCode,selectMode:column.selectMode,singleCheckContent:column.singleCheckContent,singleUnCheckContent:column.singleUnCheckContent});ctlType="wcheckBox"}else{if(inputMode==dyFormInputMode.number){$placeHolder.wnumberInput({columnProperty:columnProperty,commonProperty:commonProperty,decimal:column.decimal,negative:column.negative,operator:column.operator});ctlType="wnumberInput"}else{if(inputMode==dyFormInputMode.text){$placeHolder.wtextInput({columnProperty:columnProperty,commonProperty:commonProperty});ctlType="wtextInput"}else{if(inputMode==dyFormOrgSelectType.orgSelectAddress||inputMode==dyFormOrgSelectType.orgSelectStaDep||inputMode==dyFormOrgSelectType.orgSelectDepartment||inputMode==dyFormOrgSelectType.orgSelectStaff||inputMode==dyFormOrgSelectType.orgSelectJob||inputMode==dyFormOrgSelectType.orgSelectPublicGroup||inputMode==dyFormOrgSelectType.orgSelectMyDept||inputMode==dyFormOrgSelectType.orgSelectMyParentDept||inputMode==dyFormOrgSelectType.orgSelectMyUnit){$placeHolder.wunit({columnProperty:columnProperty,commonProperty:commonProperty,mutiSelect:column.mutiSelect,showUnitType:column.showUnitType,filterCondition:column.filterCondition});ctlType="wunit"}else{if(inputMode==dyFormInputMode.serialNumber||inputMode==dyFormInputMode.unEditSerialNumber){$placeHolder.wserialNumber({columnProperty:columnProperty,commonProperty:commonProperty,designatedId:column.designatedId,designatedType:column.designatedType,isOverride:column.isOverride,isSaveDb:column.isSaveDb,formUuid:formDefinition.uuid});ctlType="wserialNumber"}else{if(inputMode==dyFormInputMode.date){$placeHolder.wdatePicker({columnProperty:columnProperty,commonProperty:commonProperty,contentFormat:column.contentFormat});ctlType="wdatePicker"}else{if(inputMode==dyFormInputMode.textArea){$placeHolder.wtextArea({columnProperty:columnProperty,commonProperty:commonProperty});ctlType="wtextArea"}else{if(inputMode==dyFormInputMode.ckedit){$placeHolder.wckeditor({columnProperty:columnProperty,commonProperty:commonProperty,indent:true,breakBeforeOpen:false,breakAfterOpen:false,breakBeforeClose:false,breakAfterClose:false});ctlType="wckeditor"}else{if(inputMode==dyFormInputMode.selectMutilFase){$placeHolder.wcomboBox({columnProperty:columnProperty,commonProperty:commonProperty,optionDataSource:column.optionDataSource,optionSet:column.optionSet,dictCode:column.dictCode});ctlType="wcomboBox"}else{if(inputMode==dyFormInputMode.treeSelect){$placeHolder.wcomboTree({columnProperty:columnProperty,commonProperty:commonProperty,serviceName:column.serviceName,treeWidth:column.treeWidth,treeHeight:column.treeHeight,mutiSelect:column.mutiSelect,realDisplay:column.realDisplay});ctlType="wcomboTree"}else{if(inputMode==dyFormInputMode.viewdisplay){$placeHolder.wviewDisplay({columnProperty:columnProperty,commonProperty:commonProperty,relationDataText:column.relationDataText,relationDataValue:column.relationDataValue,relationDataSql:column.relationDataSql});ctlType="wviewDisplay"}else{if(inputMode==dyFormInputMode.accessory3){$placeHolder.wfileUpload({columnProperty:columnProperty,commonProperty:commonProperty,allowUpload:column.allowUpload,allowDownload:column.allowDownload,allowDelete:column.allowDelete,mutiselect:column.mutiselect,enableSignature:columnProperty.formDefinition.enableSignature==signature.enable});ctlType="wfileUpload"}else{if(inputMode==dyFormInputMode.accessoryImg){$placeHolder.wfileUpload4Image({columnProperty:columnProperty,commonProperty:commonProperty,allowUpload:column.allowUpload,allowDownload:column.allowDownload,allowDelete:column.allowDelete,mutiselect:column.mutiselect,enableSignature:columnProperty.formDefinition.enableSignature==signature.enable});ctlType="wfileUpload4Image"}else{if(inputMode==dyFormInputMode.accessory1){$placeHolder.wfileUpload4Icon({columnProperty:columnProperty,commonProperty:commonProperty,allowUpload:column.allowUpload,allowDownload:column.allowDownload,allowDelete:column.allowDelete,mutiselect:column.mutiselect,enableSignature:columnProperty.formDefinition.enableSignature==signature.enable});ctlType="wfileUpload4Icon"}else{if(inputMode==dyFormInputMode.dialog){$placeHolder.wdialog({columnProperty:columnProperty,commonProperty:commonProperty,relationDataTextTwo:column.relationDataTextTwo,relationDataValueTwo:column.relationDataValueTwo,relationDataTwoSql:column.relationDataTwoSql,relationDataDefiantion:column.relationDataDefiantion,relationDataShowMethod:column.relationDataShowType,relationDataShowType:column.relationDataShowType,selectType:column.selectType,destType:column.destType,destSubform:column.destSubform,pageSize:column.pageSize});ctlType="wdialog"}else{if(inputMode==dyFormInputMode.timeEmploy){$placeHolder.wtimeEmploy({columnProperty:columnProperty,commonProperty:commonProperty,resCode:column.resCode});ctlType="wtimeEmploy"}else{if(inputMode==dyFormInputMode.embedded){$placeHolder.wembedded({columnProperty:columnProperty,commonProperty:commonProperty});ctlType="wembedded"}else{if(inputMode==dyFormInputMode.job){$placeHolder.wjobSelect({columnProperty:columnProperty,commonProperty:commonProperty,realDisplay:column.realDisplay,optionSet:column.optionSet});ctlType="wjobSelect"}else{console.error(ctlName+"--> unknown inputMode["+inputMode+"]");return}}}}}}}}}}}}}}}}}}}if(column.formula){$.ControlManager.registFormula(column.formula)}$.ControlManager[ctlName]={"$placeHolder":$placeHolder,ctlType:ctlType}},createSubFormControl:function($tableelement,parentelement,formDefinition,subformDefinition){var formUuid=$tableelement.attr("formUuid");var subformConfig=formDefinition.subforms[formUuid];if(typeof subformConfig=="undefined"||subformConfig==null){throw new Error(" cann't find subform["+formUuid+"] in form definition json package]")}if(typeof subformDefinition=="undefined"||subformDefinition==null){subformDefinition=loadFormDefinition(formUuid);if(typeof subformDefinition=="undefined"||subformDefinition==null){throw new Error(" cann't find formUuid["+formUuid+" in db]")}}parentelement.cache.put.call(parentelement,cacheType.formDefinition,subformDefinition);var groupColumnShow=true;if(subformConfig.isGroupColumnShow=="2"){groupColumnShow=false}if(subformConfig.isGroupShowTitle==dySubFormGroupShow.show){$tableelement.before("<input  id=_inputsubform_"+formUuid+" isGroupShowTitle="+dySubFormGroupShow.show+">");$("#_inputsubform_"+formUuid).wsubForm4Group({$paranentelement:parentelement,formDefinition:formDefinition,subformDefinition:subformDefinition,readOnly:false,mainformdataUuid:parentelement.getDataUuid(),formUuid:formUuid,groupField:subformConfig.groupShowTitle,groupOrder:"asc",groupColumnShow:groupColumnShow,autoWidth:subformConfig.autoWidth,$parent:$tableelement.parent()})}else{$tableelement.before("<input  id=_inputsubform_"+formUuid+" isGroupShowTitle="+dySubFormGroupShow.notShow+">");$("#_inputsubform_"+formUuid).wsubForm({$paranentelement:parentelement,formDefinition:formDefinition,subformDefinition:subformDefinition,readOnly:false,mainformdataUuid:parentelement.getDataUuid(),formUuid:formUuid,autoWidth:subformConfig.autoWidth,$parent:$tableelement.parent()})}},getSubFormControl:function(formUuid){var ctl={};var isGroupShowTitle="";if($("#_inputsubform_"+formUuid).size()>0){isGroupShowTitle=$("#_inputsubform_"+formUuid).attr("isGroupShowTitle")}else{return undefined}if(isGroupShowTitle==dySubFormGroupShow.show){ctl=$("#_inputsubform_"+formUuid).wsubForm4Group("getObject")}else{ctl=$("#_inputsubform_"+formUuid).wsubForm("getObject")}return ctl},getCtl:function(ctlName){var ctlMapInfo=$.ControlManager[ctlName];if(typeof ctlMapInfo=="undefined"||ctlMapInfo==null){return null}var obj=ctlMapInfo.$placeHolder;var getmethod="getObject";return obj[ctlMapInfo.ctlType](getmethod)},getControlFormulas:function(){if(typeof controlFormulas=="undefined"){controlFormulas={}}return controlFormulas},registFormula:function(formula){var formulas=$.ControlManager.getControlFormulas();if(typeof formulas=="undefined"||formulas==null){formulas={}}if(typeof formula=="undefined"||formula==null||$.trim(formula).length==0){return}if(typeof formula=="string"){try{formula=eval("("+formula+")")}catch(e){console.log(formula+"");return}}var triggerElements=formula.triggerElements;var formulaFun=formula.formula;if(typeof triggerElements=="undefined"||typeof formulaFun=="undefined"){if(typeof formula=="string"){console.error(":"+formula)}else{console.error("")}return}for(var i=0;i<triggerElements.length;i++){var triggerElementFieldName=triggerElements[i];var fieldFormulas=[];for(var fn in formulas){if(fn==triggerElementFieldName){fieldFormulas=formulas[fn]}}fieldFormulas.push(formulaFun);formulas[triggerElementFieldName]=fieldFormulas}},culateByFormula:function(triggerControl){var fieldName=triggerControl.getCtlName();var allformulas=$.ControlManager.getControlFormulas();if(triggerControl.getPos()==dyControlPos.subForm){fieldName=triggerControl.options.columnProperty.columnName;fieldName=triggerControl.getFormDefinition().outerId+":"+fieldName}var formulas=allformulas[fieldName];if(typeof formulas=="undefined"){return}for(var i=0;i<formulas.length;i++){try{formulas[i].call(triggerControl)}catch(e){console.error(e)}}}};function initDyControl(ctlName,name,column,formDefinition){var columnProperty={applyTo:column.applyTo,controlName:ctlName,columnName:column.name,displayName:column.displayName,dbDataType:column.dbDataType,indexed:column.indexed,showed:column.showed,sorted:column.sorted,sysType:column.sysType,length:column.length,isHide:column.isHide,showType:column.showType,defaultValue:column.defaultValue,valueCreateMethod:column.valueCreateMethod,onlyreadUrl:column.onlyreadUrl,realDisplay:column.realDisplay,formDefinition:formDefinition};var commonProperty={inputMode:column.inputMode,fieldCheckRules:column.fieldCheckRules,fontSize:column.fontSize,fontColor:column.fontColor,ctlWidth:column.ctlWidth,ctlHight:column.ctlHight,textAlign:column.textAlign};var inputMode=commonProperty.inputMode;if(inputMode==dyFormInputMode.radio){$("input[name='"+name+"']").wradio({columnProperty:columnProperty,commonProperty:commonProperty,optionDataSource:column.optionDataSource,optionSet:column.optionSet,dictCode:column.dictCode})}else{if(inputMode==dyFormInputMode.checkbox){$("input[name='"+name+"']").wcheckBox({columnProperty:columnProperty,commonProperty:commonProperty,ctrlField:column.ctrlField,optionDataSource:column.optionDataSource,optionSet:column.optionSet,dictCode:column.dictCode,selectMode:column.selectMode,singleCheckContent:column.singleCheckContent,singleUnCheckContent:column.singleUnCheckContent})}else{if(inputMode==dyFormInputMode.number){$("input[name='"+name+"']").wnumberInput({columnProperty:columnProperty,commonProperty:commonProperty,decimal:column.decimal,negative:column.negative,operator:column.operator})}else{if(inputMode==dyFormInputMode.text){$("input[name='"+name+"']").wtextInput({columnProperty:columnProperty,commonProperty:commonProperty})}else{if(inputMode==dyFormOrgSelectType.orgSelectAddress||inputMode==dyFormOrgSelectType.orgSelectStaDep||inputMode==dyFormOrgSelectType.orgSelectDepartment||inputMode==dyFormOrgSelectType.orgSelectStaff){$("input[name='"+name+"']").wunit({columnProperty:columnProperty,commonProperty:commonProperty,mutiSelect:column.mutiSelect})}else{if(inputMode==dyFormInputMode.serialNumber||inputMode==dyFormInputMode.unEditSerialNumber){$("input[name='"+name+"']").wserialNumber({columnProperty:columnProperty,commonProperty:commonProperty,designatedId:column.designatedId,designatedType:column.designatedType,isOverride:column.isOverride,isSaveDb:column.isSaveDb,formUuid:formDefinition.uuid})}else{if(inputMode==dyFormInputMode.date){$("input[name='"+name+"']").wdatePicker({columnProperty:columnProperty,commonProperty:commonProperty,contentFormat:column.contentFormat})}else{if(inputMode==dyFormInputMode.textArea){$("#"+name).wtextArea({columnProperty:columnProperty,commonProperty:commonProperty})}else{if(inputMode==dyFormInputMode.ckedit){$("#"+name).wckeditor({columnProperty:columnProperty,commonProperty:commonProperty,indent:true,breakBeforeOpen:false,breakAfterOpen:false,breakBeforeClose:false,breakAfterClose:false})}else{if(inputMode==dyFormInputMode.selectMutilFase){$("select[name='"+name+"']").wcomboBox({columnProperty:columnProperty,commonProperty:commonProperty,optionDataSource:column.optionDataSource,optionSet:column.optionSet,dictCode:column.dictCode})}else{if(inputMode==dyFormInputMode.treeSelect){$("input[name='"+name+"']").wcomboTree({columnProperty:columnProperty,commonProperty:commonProperty,serviceName:column.serviceName,treeWidth:column.treeWidth,treeHeight:column.treeHeight,mutiSelect:column.mutiSelect,realDisplay:column.realDisplay})}else{if(inputMode==dyFormInputMode.viewdisplay){$("input[name='"+name+"']").wviewDisplay({columnProperty:columnProperty,commonProperty:commonProperty,relationDataText:column.relationDataText,relationDataValue:column.relationDataValue,relationDataSql:column.relationDataSql})}else{if(inputMode==dyFormInputMode.accessory3){$("input[name='"+name+"']").wfileUpload({columnProperty:columnProperty,commonProperty:commonProperty,allowUpload:column.allowUpload,allowDownload:column.allowDownload,allowDelete:column.allowDelete,mutiselect:column.mutiselect,enableSignature:columnProperty.formDefinition.enableSignature==signature.enable})}else{if(inputMode==dyFormInputMode.accessoryImg){$("input[name='"+name+"']").wfileUpload4Image({columnProperty:columnProperty,commonProperty:commonProperty,allowUpload:column.allowUpload,allowDownload:column.allowDownload,allowDelete:column.allowDelete,mutiselect:column.mutiselect,enableSignature:columnProperty.formDefinition.enableSignature})}else{if(inputMode==dyFormInputMode.accessory1){$("input[name='"+name+"']").wfileUpload4Icon({columnProperty:columnProperty,commonProperty:commonProperty,allowUpload:column.allowUpload,allowDownload:column.allowDownload,allowDelete:column.allowDelete,mutiselect:column.mutiselect,enableSignature:columnProperty.formDefinition.enableSignature})}else{if(inputMode==dyFormInputMode.dialog){$("input[name='"+name+"']").wdialog({columnProperty:columnProperty,commonProperty:commonProperty,relationDataTextTwo:column.relationDataTextTwo,relationDataValueTwo:column.relationDataValueTwo,relationDataTwoSql:column.relationDataTwoSql,relationDataDefiantion:column.relationDataDefiantion,relationDataShowMethod:column.relationDataShowType,relationDataShowType:column.relationDataShowType})}}}}}}}}}}}}}}}}}function getHtmlStrByInputDataType(inputMode,fieldcode,elmenttype){var appendhtml={};if(inputMode==dyFormInputMode.textArea||inputMode==dyFormInputMode.ckedit){formfieldcode=elmenttype+"textarea"+fieldcode;appendhtml.html='<textarea type="text" id="'+formfieldcode+'" name="'+formfieldcode+'"></textarea>';appendhtml.formfieldcode=formfieldcode}else{if(inputMode==dyFormInputMode.selectMutilFase){formfieldcode=elmenttype+"select"+fieldcode;appendhtml.formfieldcode=formfieldcode;appendhtml.html='<select name="'+formfieldcode+'" type="text" > </select>'}else{formfieldcode=elmenttype+"input"+fieldcode;appendhtml.formfieldcode=formfieldcode;appendhtml.html='<input name="'+formfieldcode+'"  type="text" />'}}return appendhtml}})(jQuery);
;
(function($){$.wControlInterface={labelClass:"labelclass",editableClass:"editableClass",init:function(){this.initSelf()},initSelf:function(){var options=this.options;if(this.isInSubform()){this.setDisplayAsLabel()}else{this.dispalyByShowType()}if(options.columnProperty.data){this.setDefaultValue(this.options.columnProperty.data)}else{this.setDefaultValue(options.columnProperty.defaultValue)}this.addMustMark();this.options.initComplete=true},clear:function(){if(this.isValueMap()){this.setValueByMap("",true)}else{this.setValue("")}},setTextInputCss:function(){this.$element.css(this.getTextInputCss())},getTextInputCss:function(){var width=this.options.commonProperty.ctlWidth;if(width&&width.indexOf("%")==-1){width=width+"px"}return{width:width,height:this.options.commonProperty.ctlHight+"px","text-align":this.options.commonProperty.textAlign,"font-size":this.options.commonProperty.fontSize+"px",color:this.options.commonProperty.fontColor,}},setValueByMap:function(valuemap,isRender){this.value=valuemap;if(!this.options.isHide){this.render(isRender)}if(this.options.initComplete){this.setToRealDisplayColumn()}this.invoke("afterSetValue",this.value)},setDefaultValue:function(defaultValue){if(defaultValue==null){return}if(this.isValueAsJsonCtl()){if(defaultValue.indexOf("{")==-1){this.setValue(defaultValue)}else{this.setValueByMap(defaultValue)}}else{this.setValue(defaultValue)}},dispalyByShowType:function(){var showType=this.options.columnProperty.showType;if(showType==dyshowType.showAsLabel){this.setDisplayAsLabel()}else{if(showType==dyshowType.readonly){this.setReadOnly(true)}else{if(showType==dyshowType.disabled){this.setEnable(false)}else{if(showType==dyshowType.hide){this.setVisible(false)}else{this.setEnable(true)}}}}},setValue:function(value){this.get$InputElem().val(value);this.value=value;this.invoke("afterSetValue",this.value)},setRequired:function(isrequire){$.ControlUtil.setRequired(isrequire,this.options)},setEditable:function(isEnable){this.options.isShowAsLabel=false;this.render();if(isEnable){this.setEnable(true)}},setVisible:function(isvisible){this.options.isHide=!isvisible;if(isvisible){this.render();this.$placeHolder.parents(".field").show()}else{this.hideLabelElem();this.hideEditableElem();this.$placeHolder.parents(".field").hide()}},setDisplayAsLabel:function(){var options=this.options;if(this.$labelElem==null){var labelElem=document.createElement("span");labelElem.setAttribute("class",this.labelClass);labelElem.setAttribute("name",this.getCtlName());$(labelElem).css(this.getTextInputCss());this.$placeHolder.after($(labelElem));this.$labelElem=this.$placeHolder.next("."+this.labelClass)}this.$labelElem.show();options.isShowAsLabel=true;this.hideEditableElem();this.setValue2LabelElem();if(this.setCtlField){this.setCtlField()}this.addUrlClickEvent(urlClickEvent)},setDisplayAsCtl:function(){var options=this.options;options.isShowAsLabel=false;if(this.$editableElem==null){this.createEditableElem()}this.$editableElem.show();this.hideLabelElem();this.setValue2EditableElem();this.invoke("show")},hideEditableElem:function(){if(this.$editableElem==null){return}this.$editableElem.hide();this.$editableElem.siblings(".Validform_checktip").hide()},hideLabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.hide()},setDataUuid:function(datauuid){this.options.columnProperty.dataUuid=datauuid},getDataUuid:function(){return this.options.columnProperty.dataUuid},getFormDefinition:function(){return this.options.columnProperty.formDefinition},setPos:function(pos){this.options.columnProperty.pos=pos},getPos:function(pos){return this.options.columnProperty.pos},getValue:function(){var value=this.value;if(value==null||$.trim(value).length==0){return""}if(this.isValueMap()){var valueObj=eval("("+value+")");var realValue=[];for(var i in valueObj){realValue.push(i)}return realValue.join(";")}else{return this.value}},getValueMap:function(){if(typeof this.value=="object"){return JSON.cStringify(this.value)}else{if(this.value==undefined||this.value==null||$.trim(this.value).length==0){return JSON.cStringify({})}return this.value}},getDisplayValue:function(){var value=this.value;if(value==null||$.trim(value).length==0){return""}var valueObj=eval("("+value+")");var displayValue=[];for(var i in valueObj){displayValue.push(valueObj[i])}return displayValue.join(";")},isValueMap:function(){return false},isEditable:function(){if(this.options.showType==dyshowType.edit){return true}else{return false}},isEnable:function(){if(this.options.showType==dyshowType.disabled){return false}return true},clean:function(selector){return $(selector)[0]},isVisible:function(){return !this.options.isHide},setEnable:function(isenable){if(this.isShowAsLabel()){return}this.render();if(isenable){this.options.columnProperty.showType=dyshowType.edit;this.get$InputElem().removeAttr("disabled")}else{this.options.columnProperty.showType=dyshowType.disabled;this.get$InputElem().attr("disabled","disabled")}},setReadOnly:function(isReadOnly){if(this.isShowAsLabel()){return}this.render(true);if(isReadOnly){this.options.columnProperty.showType=dyshowType.readonly;this.get$InputElem().attr("readonly","readonly")}else{this.options.columnProperty.showType=dyshowType.edit;this.get$InputElem().removeAttr("readonly")}this.render()},isReadOnly:function(){if(this.options.columnProperty.showType==dyshowType.readonly){return true}return false},isRequired:function(){return $.ControlUtil.isRequired(this.options)},isShowAsLabel:function(){return this.options.isShowAsLabel},getAllOptions:function(){return this.options},getRule:function(){if($.ControlUtil.getCheckRuleAndMsg(this.options)["rule"]==undefined&&(this.options.columnProperty.dbDataType=="12"||this.options.columnProperty.dbDataType=="13"||this.options.columnProperty.dbDataType=="14"||this.options.columnProperty.dbDataType=="15")){var rule;if(this.options.columnProperty.dbDataType=="12"){rule={isFloat:true,maxlength:"18"}}else{if(this.options.columnProperty.dbDataType=="15"){rule={isFloat:true,maxlength:"12"}}else{if(this.options.columnProperty.dbDataType=="13"){rule={isInteger:true,maxlength:"9"}}else{if(this.options.columnProperty.dbDataType=="14"){rule={isInteger:true,maxlength:"16"}}}}}return JSON.cStringify(rule)}return JSON.cStringify($.ControlUtil.getCheckRuleAndMsg(this.options)["rule"])},getMessage:function(){if($.ControlUtil.getCheckRuleAndMsg(this.options)["msg"]==undefined&&(this.options.columnProperty.dbDataType=="12"||this.options.columnProperty.dbDataType=="13"||this.options.columnProperty.dbDataType=="14"||this.options.columnProperty.dbDataType=="15")){var msg;if(this.options.columnProperty.dbDataType=="12"){msg={isFloat:"  ",maxlength:"  {0} "}}else{if(this.options.columnProperty.dbDataType=="15"){msg={isFloat:"  ",maxlength:"  {0} "}}else{if(this.options.columnProperty.dbDataType=="13"){msg={isInteger:"  ",maxlength:"  {0} "}}else{if(this.options.columnProperty.dbDataType=="14"){msg={isInteger:"  ",maxlength:"  {0} "}}}}}return JSON.cStringify(msg)}return JSON.cStringify($.ControlUtil.getCheckRuleAndMsg(this.options)["msg"])},getCtlName:function(){return this.options.columnProperty.controlName},getFieldName:function(){return this.options.columnProperty.columnName},bind:function(eventname,event,custom){if(custom){this.options[eventname]=event}else{$("."+this.editableClass+"[name='"+this.getCtlName()+"']").live(eventname,event)}return this},unbind:function(eventname){$("."+this.editableClass+"[name='"+this.getCtlName()+"']").die(eventname);return this},getCtlElement:function(){return this.get$InputElem()},render:function(isRender){if(this.isShowAsLabel()){this.setDisplayAsLabel()}else{if(typeof isRender=="undefined"||isRender==null||isRender===true){this.setDisplayAsCtl()}}},get$InputElem:function(){if(this.$editableElem==null){return $([])}else{return this.$editableElem}},addUrlClickEvent:function(urlClickEvent){var onlyreadUrl=this.options.columnProperty.onlyreadUrl;if(!(onlyreadUrl==""||onlyreadUrl==undefined)){if(this.isShowAsLabel()){var elment=this.$labelElem;elment.css("cursor","pointer");elment.css("color","#0000FF");elment.unbind("click",urlClickEvent);elment.bind("click",{a:onlyreadUrl},urlClickEvent)}}},setValidateGroup:function(group){var element=this.$placeHolder;element.attr(group.groupUsed,group.groupName)},getValidator:function(element){var $form=element.parents("form");if($form.size()==0){throw new Error("element must be nested in form html element")}var validator=$form.data("validator");if(typeof validator=="undefined"||validator==null){validator=$form.validate(Theme.validationRules);$form.data("validator",validator)}else{}return validator},isControlInFieldTr:function(){if(this.$placeHolder.parents("tr[class='field']").size()==0){return false}else{return true}},isFieldTrHide:function(){if(this.$placeHolder.parents("tr[class='field']:hidden").size()==0){return false}else{return true}},validate:function(){this.invoke("beforeValidate");if(!this.isVisible()){return true}if(this.isControlInFieldTr()){if(this.isFieldTrHide()){return true}}var validator=this.getValidator(this.$placeHolder);var rule=this.getRule();var message=this.getMessage();if(typeof rule=="undefined"){return true}var ctlName=this.getCtlName();var ruleObj={};var messageObj={};ruleObj=eval("("+rule+")");messageObj=eval("("+message+")");var isLabel=false;if(this.objectLength(ruleObj)){isLabel=this.isShowAsLabel();if(isLabel){this.setEditable(true)}for(var i in groupUsed){var groupVal=this.$placeHolder.attr(i);if(typeof groupVal!="undefined"&&$.trim(groupVal).length>0){this.get$InputElem().attr(i,groupVal)}}if((this.isCheckBoxCtl()||this.isRadioCtl())&&this.get$InputElem().not(":hidden").size()==0){return true}}else{return true}var fieldName=this.getFieldName();this.setCustomValidateRule(ruleObj,messageObj,this.getDataUuid(),fieldName,this.getFormDefinition().name);validator.settings.rules[ctlName]=ruleObj;validator.settings.messages[ctlName]=messageObj;validator.findByName=function(name){var element=$(this.currentForm).find(".editableClass>[name='"+name+"']");if(element.size==0){element=$(this.currentForm).find(".editableClass[name='"+name+"']")}return element};var valid=validator.element(this.get$InputElem());if(valid&&isLabel){this.setDisplayAsLabel()}this.invoke("afterValidate");return valid},objectLength:function(obj){var count=0;for(var i in obj){count++}return count},setCustomValidateRule:function(ruleObj,messageObj,dataUuid,fieldName,tblName){var _this=this;var newRuleObj={};var newMessageObj={};for(var i in ruleObj){if(i=="unique"){newRuleObj.isUnique={url:ctx+"/dyformdata/validate/exists",type:"POST",async:false,data:{uuid:dataUuid,tblName:tblName,fieldName:fieldName,fieldValue:function(){if(_this.isValueMap()){value=JSON.cStringify(_this.getValueMap())}else{value=_this.getValue()}return value}}};newMessageObj.isUnique=messageObj[i];delete ruleObj[i]}}$.extend(ruleObj,newRuleObj);$.extend(messageObj,newMessageObj)},getControl:function(fieldName){},setToRealDisplayColumn:function(){if(!this.options.columnProperty.realDisplay){return}var value=this.getValue();var displayValue=this.getDisplayValue();var real=this.options.columnProperty.realDisplay.real;var display=this.options.columnProperty.realDisplay.display;if(typeof real!="undefined"&&real.length>0){var control=$.ControlManager.getCtl(this.getContronId(real));if(typeof control=="undefined"||control==null){return}control.setValue(value)}if(typeof display!="undefined"&&display.length>0){var control=$.ControlManager.getCtl(this.getContronId(display));if(typeof control=="undefined"||control==null){return}control.setValue(displayValue)}},isInSubform:function(){if(this.getPos()==dyControlPos.subForm){return true}else{return false}},getContronId:function(fieldName){var dataUuid=this.options.columnProperty.dataUuid;if(this.getPos()==dyControlPos.subForm){return this.getCellId(dataUuid,fieldName)}return fieldName},getCellId:function(rowId,fieldName){var id=rowId+"___"+fieldName;return id},addMustMark:function(){if(this.getPos()==dyControlPos.subForm){return}if(!this.isRequired()){return}var $parentTd=this.$placeHolder.parent("td");(function($parentTd){window.setTimeout(function(){if($parentTd.size()==0){return}var $prevTd=$parentTd.prev("td");if($prevTd.size()==0){return}var requiredAttr=$prevTd.attr("required");if(typeof requiredAttr!="undefined"){return}var mustRemark="<font color='red' size='2'>*</font>";if(($prevTd.is(".Label")&&$prevTd.html().length>0)||$prevTd.find("label").size()>0){if($prevTd.is(".Label")){var html=$prevTd.html()+mustRemark;$prevTd.html(html)}else{var label=$prevTd.find("label").get($prevTd.find("label").size()-1);var $label=$(label);$label.html($label.html()+mustRemark)}$prevTd.attr("required","required")}else{if($.trim($prevTd.html()).length>0&&!($.trim($prevTd.html()).indexOf("<")!=-1&&$.trim($prevTd.html()).indexOf("/>")!=-1)){var html=$prevTd.html()+mustRemark;$prevTd.html(html)}}},100)})($parentTd)},isRadioCtl:function(){if(this.getInputMode()==dyFormInputMode.radio){return true}else{return false}},getInputMode:function(){if(typeof this.options.commonProperty.inputMode=="undefined"){throw new Error(this.getCtlName()+" inputMode is undefined")}return this.options.commonProperty.inputMode},isCheckBoxCtl:function(){if(this.getInputMode()==dyFormInputMode.checkbox){return true}else{return false}},isTreeSelectCtl:function(){if(this.options.commonProperty.inputMode==dyFormInputMode.treeSelect){return true}else{return false}},isSelectCtl:function(){if(this.options.commonProperty.inputMode==dyFormInputMode.selectMutilFase){return true}else{return false}},isNumberCtl:function(){if(this.options.commonProperty.inputMode==dyFormInputMode.number){return true}else{return false}},isValueAsJsonCtl:function(){return this.isValueMap()},culateByFormula:function(){$.ControlManager.culateByFormula(this)},invoke:function(method){if(this.options[method]){this.options[method].apply(this,$.makeArray(arguments).slice(1))}},dyform$Context:function(){return this.$placeHolder.parents(".dyform")},getSelection:function(){if(!this.$editableElem[0]){return null}if(document.selection){return(document.selection.createRange().text)}else{return(this.$editableElem[0].value.substring(this.$editableElem[0].selectionStart,this.$editableElem[0].selectionEnd))}},isSelection:function(){var selectionVal=this.getSelection();if(selectionVal==null||$.trim(selectionVal).length==0){return false}else{return true}}}})(jQuery);
;
(function(a){a.wTextCommonMethod={get$InputElem:function(){if(this.$editableElem==null){return a([])}else{return this.$editableElem}},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.value)},setValue2EditableElem:function(){if(this.$editableElem==null){return}this.$editableElem.val(this.value)},setValue:function(c,b){if(c==null){return}this.value=c;if(!this.options.isHide){this.render(b)}if(this.culateByFormula){this.culateByFormula()}this.invoke("afterSetValue",this.value)},isValueMap:function(){return false},}})(jQuery);
;
(function($){$.wRadioCheckBoxCommonMethod={setDisplayAsCtl:function(){var options=this.options;options.isShowAsLabel=false;if(this.$editableElem==null){this.createEditableElem()}this.$editableElem.show();this.hideLabelElem();this.setValue2EditableElem()},getValueMapInOptionSet:function(value){if(typeof value=="undefined"||value.length==0){return""}var options=this.options;var value1=null;if(value.indexOf(",")!=-1){value1=value.split(",")}else{value1=value.split(";")}var valueMap={};for(var i=0;i<value1.length;i++){if(this.isSingleCheck()){var selectobj=eval("("+options.singleCheckContent+")");var checked=false;for(attrbute in selectobj){if(attrbute==value1[i]){valueMap[attrbute]=selectobj[attrbute];checked=true;break}}if(!checked){var selectobj=eval("("+options.singleUnCheckContent+")");for(attrbute in selectobj){if(attrbute==value1[i]){valueMap[attrbute]=selectobj[attrbute];break}}}}else{var optionSet={};var selectobj=this.options.optionSet;if(typeof selectobj=="undefined"||selectobj==null||(typeof selectobj=="string"&&$.trim(selectobj).length==0)){console.error("a json parameter is null , used to initialize checkbox options ");return}if(options.optionDataSource!=dyDataSourceType.dataConstant){if(selectobj.length==0){return}else{for(var j=0;j<selectobj.length;j++){optionSet[selectobj[j].code]=selectobj[j].name}}}else{optionSet=selectobj}if(typeof optionSet=="object"){optionSet=eval("("+JSON.cStringify(optionSet)+")")}else{if(typeof optionSet=="string"){try{optionSet=eval("("+(optionSet)+")")}catch(e){console.error(optionSet+" -->not json format ");return}}}for(attrbute in optionSet){if(attrbute==value1[i]){valueMap[attrbute]=optionSet[attrbute]}}}}if(typeof valueMap=="string"){return valueMap}else{return JSON.cStringify(valueMap)}},createEditableElem:function(){if(this.$editableElem!=null){return}var options=this.options;var inputType="";if(this.isCheckBoxCtl()){inputType="checkbox"}else{if(this.isRadioCtl()){inputType="radio"}else{return}}var ctlName=this.getCtlName();var editableElem=document.createElement("span");editableElem.setAttribute("class",this.editableClass);editableElem.setAttribute("name",ctlName);$(editableElem).css(this.getTextInputCss());this.$placeHolder.after($(editableElem));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var opt=new Array();var labelstyle=$.ControlUtil.getStyleHtmlByParams(options.commonProperty.textAlign,options.commonProperty.fontSize,options.commonProperty.fontColor,options.commonProperty.ctlWidth,options.commonProperty.ctlHight,"");var otherinputstyle=$.ControlUtil.getStyleHtmlByParams(options.commonProperty.textAlign,options.commonProperty.fontSize,options.commonProperty.fontColor,"120","");if(this.isSingleCheck()){var selectobj=eval("("+options.singleCheckContent+")");for(attrbute in selectobj){var s="";s="<input type='"+inputType+"' name='"+ctlName+"' id='"+ctlName+"_"+attrbute+"' value='"+attrbute+"'/><label "+labelstyle+"for='"+ctlName+"_"+attrbute+"'>"+selectobj[attrbute]+"</label>";opt.push(s)}this.setCtlField()}else{var optionSet={};var selectobj=this.options.optionSet;if(typeof selectobj=="undefined"||selectobj==null||(typeof selectobj=="string"&&$.trim(selectobj).length==0)){console.error("a json parameter is null , used to initialize checkbox options ");return}if(options.optionDataSource!=dyDataSourceType.dataConstant){if(selectobj.length==0){return}else{for(var i=0;i<selectobj.length;i++){optionSet[selectobj[i].code]=selectobj[i].name}}}else{optionSet=selectobj}if(typeof optionSet=="object"){optionSet=eval("("+JSON.cStringify(optionSet)+")")}else{if(typeof optionSet=="string"){try{optionSet=eval("("+(optionSet)+")")}catch(e){console.error(optionSet+" -->not json format ");return}}}for(attrbute in optionSet){var s="";if(optionSet[attrbute]==""){s="<input class='other_input' type='"+inputType+"' name='"+ctlName+"' id='"+ctlName+"_"+attrbute+"' value='"+attrbute+"'/><label "+labelstyle+"for='"+ctlName+"_"+attrbute+"'>"+optionSet[attrbute]+"</label><input  id='other_input"+ctlName+"_"+attrbute+"' "+otherinputstyle+" type='text' value='"+optionSet[attrbute]+"'  />"}else{s="<input type='"+inputType+"' name='"+ctlName+"' id='"+ctlName+"_"+attrbute+"' value='"+attrbute+"'/><label "+labelstyle+"for='"+ctlName+"_"+attrbute+"'>"+optionSet[attrbute]+"</label>"}opt.push(s)}}this.$editableElem.html(opt.join(""));var _this=this;$("input[id^=other_input]",this.$editableElem[0]).hide();$("input[id^=other_input]",this.$editableElem[0]).change(function(){_this.collectValue()});this.get$InputElem().click(function(){if($(this).is(".other_input")){var $otherinput=$(this).next().next();if($(this).prop("checked")==true){$otherinput.show()}else{$otherinput.hide()}}else{if(_this.isRadioCtl()){$("input[id^=other_input]",_this.$editableElem[0]).hide()}}_this.collectValue();if(_this.isSingleCheck()){_this.setCtlField($(this))}})},setCtlField:function($this){if(this.options.ctrlField!=""&&this.options.ctrlField!=null&&this.options.ctrlField!=","){var ctlField=this.options.ctrlField.split(",")[0];var fields=ctlField.split(";");for(var i=0;i<fields.length;i++){var field=fields[i];if(typeof $this=="undefined"){$(".value[name='"+field+"']").parents(".field").hide()}else{if($.ControlManager){var ctl=$.ControlManager.getCtl(field);if(typeof ctl=="undefined"||ctl==null){console.log(""+field);continue}if($this.prop("checked")==true){ctl.setVisible(true)}else{ctl.setVisible(false)}}}}}},collectValue:function(){var value={};var _this=this;var empty=true;$("input[name='"+this.getCtlName()+"']:checked",this.$editableElem[0]).each(function(){if($(this).is(".other_input")){value[$(this).val()]=$(this).next().next().val()}else{value[$(this).val()]=$(this).next().html()}empty=false});if(!empty){value=JSON.cStringify(value)}else{value="";if(this.isSingleCheck()){value=this.options.singleUnCheckContent}}this.setValueByMap(value)},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.getDisplayValue())},setValue2EditableElem:function(){if(this.$editableElem==null){return}var valueObj={};if(this.value==null||$.trim(this.value).length==0){}else{valueObj=eval("("+this.value+")")}var _this=this;this.get$InputElem().each(function(){var checked=false;for(var i in valueObj){if($(this).val()==i){if($(this).prop("checked")!=true){$(this).prop("checked",true)}checked=true;break}}if(!checked){$(this).prop("checked",false)}if($(this).is(".other_input")&&$(this).prop("checked")==true){$(this).next().next().show();$(this).next().next().val(valueObj[$(this).val()])}})},isSingleCheck:function(){return this.options.selectMode=="1"},setValue:function(value){var options=this.options;if(value.length>0){var value1=null;if(value.indexOf(",")!=-1){value1=value.split(",")}else{value1=value.split(";")}var valueMap={};if(this.get$InputElem().size()==0){valueMap=this.getValueMapInOptionSet(value);this.setValueByMap(valueMap);return}for(var i=0;i<value1.length;i++){if(this.get$InputElem().size()==0){}else{if(this.isSingleCheck()){if(this.get$InputElem().val()==value1[i]){this.setValueByMap(this.options.singleCheckContent);return}else{this.setValueByMap(this.options.singleUnCheckContent);return}}else{$("input[name='"+this.getCtlName()+"'][value='"+$.trim(value1[i])+"']").each(function(){var val=$(this).val();var displayvalue=$(this).next().text();if(displayvalue==""){displayvalue=$(this).next().next().val()}valueMap[val]=displayvalue})}}}this.setValueByMap(JSON.cStringify(valueMap))}},getValue:function(){var value=this.value;if(value==null||$.trim(value).length==0){return""}var valueObj=eval("("+value+")");var realValue=[];for(var i in valueObj){realValue.push(i)}return realValue.join(";")},getDisplayValue:function(){var value=this.value;if(value==null||$.trim(value).length==0){if(this.isSingleCheck()){var selectobj=eval("("+this.options.singleUnCheckContent+")");for(var i in selectobj){return selectobj[i]}}return""}var valueObj=eval("("+value+")");var displayValue=[];for(var i in valueObj){displayValue.push(valueObj[i])}return displayValue.join(";")},get$InputElem:function(){if(this.$editableElem==null){return $([])}else{return $("input[name='"+this.getCtlName()+"']",this.$editableElem[0])}},isValueMap:function(){return true},setReadOnly:function(isReadOnly){if(this.options.isShowAsLabel){return}this.render();if(isReadOnly){this.options.columnProperty.showType=dyshowType.readonly;this.get$InputElem().attr("disabled","disabled");$("#other_input"+this.getCtlName(),this.$editableElem[0]).attr("readonly","readonly")}else{this.options.columnProperty.showType=dyshowType.edit;this.get$InputElem().removeAttr("disabled");$("#other_input"+this.getCtlName(),this.$editableElem[0]).removeAttr("readonly")}},}})(jQuery);
;
(function(a){a.wFileUploadMethod={getValue:function(){var b=WellFileUpload.files[this.getFielctlID()];if(b){return b}else{return[]}},getFielctlID:function(){var b=this.$element.attr("id");return WellFileUpload.getCtlID4Dytable(this.options.mainTableName,b,0)},getAllOptions:function(){return this.options},getRule:function(){return a.ControlUtil.getCheckRules(this.options)},getMessage:function(){return a.ControlUtil.getCheckMsg(this.options)},isValueMap:function(){return false},setValue:function(d){if(typeof d=="undefined"||d==null){var b=this.options.columnProperty.columnName;var c=WellFileUpload.loadFilesFormDb(this.getDataUuid(),b);console.log(JSON.cStringify(c));this.fileuploadobj.addFiles(c,true)}else{this.fileuploadobj.addFiles(d,false)}},setTextFile2SWF:function(b){WellFileUpload.file2swf=b},enableSignature:function(b){if(b){this.fileuploadobj.signature=signature.enable}else{this.fileuploadobj.signature=signature.disable}},setDataUuid:function(b){this.options.columnProperty.dataUuid=b},getDataUuid:function(){return this.options.columnProperty.dataUuid},setPos:function(b){this.options.columnProperty.pos=b},getPos:function(b){return this.options.columnProperty.pos},getFormDefinition:function(){return this.options.columnProperty.formDefinition},setEditable:function(){this.options.readOnly=false;this.$element.siblings("div[id^='_fileupload']").find(".upload_div").show();this.$element.siblings("div[id^='_fileupload']").find(".delete_Div").show()},setReadOnly:function(){this.options.readOnly=true;this.$element.siblings("div[id^='_fileupload']").find(".upload_div").hide();this.$element.siblings("div[id^='_fileupload']").find(".delete_Div").hide()},getCtlName:function(){var b=this.$element.attr("id");return WellFileUpload.getCtlID4Dytable(this.options.mainTableName,b,0)},getCtlElement:function(){return this.$element},bind:function(b,c){this.$element.bind(b,c);return this},validate:function(){return true},unbind:function(b){this.$element.unbind(b);return this},addUrlClickEvent:function(b){},setDisplayAsLabel:function(){this.setReadOnly()},setValidateGroup:function(c){var b=this.$element;b.attr(c.groupUsed,c.groupName)},isAttachCtl:function(){if(this.options.commonProperty.inputMode==dyFormInputMode.accessory3||this.options.commonProperty.inputMode==dyFormInputMode.accessory1||this.options.commonProperty.inputMode==dyFormInputMode.accessoryImg){return true}else{return false}},clear:function(){this.setValue([])}}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wdatePicker.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a};d.DatePicker={createEditableElem:function(){if(this.$editableElem!=null){return}var h=this.options;var e=this.getCtlName();var g=document.createElement("input");g.setAttribute("class",this.editableClass);g.setAttribute("name",e);g.setAttribute("type","text");d(g).css(this.getTextInputCss());this.$placeHolder.after(d(g));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var j="";var f=h.contentFormat;if(f==dyDateFmt.yearMonthDate){j="yyyy-MM-dd"}else{if(f==dyDateFmt.dateTimeHour){j="yyyy-MM-dd HH"}else{if(f==dyDateFmt.dateTimeMin){j="yyyy-MM-dd HH:mm"}else{if(f==dyDateFmt.dateTimeSec){j="yyyy-MM-dd HH:mm:ss"}else{if(f==dyDateFmt.timeHour){j="HH"}else{if(f==dyDateFmt.timeMin){j="HH:mm"}else{if(f==dyDateFmt.timeSec){j="HH:mm:ss"}else{if(f==dyDateFmt.yearMonthDateCn){j="yyyyMMdd"}else{if(f==dyDateFmt.yearCn){j="yyyy"}else{if(f==dyDateFmt.yearMonthCn){j="yyyyMM"}else{if(f==dyDateFmt.monthDateCn){j="MMdd"}else{if(f==dyDateFmt.year){j="yyyy"}}}}}}}}}}}}if(this.options.showIcon){this.$editableElem.attr("class","Wdate")}var i=this.$editableElem;var l=this;var k=this.options;i.bind("click",function(){if(!l.options.readOnly){WdatePicker({dateFmt:j,alwaysUseStartDate:h.alwaysUseStartDate,onpicked:function(){i.focus();l.setValue(i.val(),false)},startDate:h.startDate})}});i.bind("paste",function(){window.setTimeout(function(){l.setValue(i.val(),false)},100)});i.keyup(function(){l.setValue(i.val(),false)})}};d.fn.wdatePicker=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=d(this);data=g.data("wdatePicker");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=d(this),j=k.data("wdatePicker"),i=typeof f=="object"&&f;if(!j){j=new a(d(this),i);d.extend(j,d.wControlInterface);d.extend(j,d.wTextCommonMethod);d.extend(j,d.DatePicker);j.init();k.data("wdatePicker",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};d.fn.wdatePicker.Constructor=a;d.fn.wdatePicker.defaults={columnProperty:c,commonProperty:b,disabled:false,readOnly:false,isShowAsLabel:false,isHide:false,alwaysUseStartDate:false,startDate:"%y-%M-%d %H:%m:%s",showIcon:true,contentFormat:""}})(jQuery);
;
(function(f){var i={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var c={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var k=function(o,p){this.options=f.extend({},f.fn.wnumberInput.defaults,p);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=o};var d=new Number(2147483647);var b=new Number(-2147483648);var m=new Number(9223372036854776000);var h=new Number(-9223372036854776000);var e=new Number(1.7976931348623157e+308);var n=new Number(5e-324);var g={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"};f.NumberInput={createEditableElem:function(){if(this.$editableElem!=null){return}var r=this.options;var o=this.getCtlName();var q=document.createElement("input");if(r.columnProperty.dbDataType=="13"&&r.columnProperty.length>9){r.columnProperty.length="9"}else{if(r.columnProperty.dbDataType=="14"&&r.columnProperty.length>16){r.columnProperty.length="16"}else{if(r.columnProperty.dbDataType=="15"&&r.columnProperty.length>12){r.columnProperty.length="12"}else{if(r.columnProperty.dbDataType=="12"&&r.columnProperty.length>18){r.columnProperty.length="18"}}}}q.setAttribute("class",this.editableClass);q.setAttribute("name",o);q.setAttribute("type","text");q.setAttribute("maxlength",r.columnProperty.length);f(q).css(this.getTextInputCss());this.$placeHolder.after(f(q));this.$editableElem=this.$placeHolder.next("."+this.editableClass);this.htmlelement=this.$editableElem[0];var v=this;var s=function(){v.setValue(v.$editableElem.val(),false)};this.$editableElem.keyup(s);this.$editableElem.bind("paste",function(){window.setTimeout(function(){v.setValue(v.$editableElem.val(),false)},100)});this.$editableElem.bind("change",s);var p=this.options.operator;var u=this.options.commonProperty.inputMode;if(p){var v=this;var t=this.options.dbDataType;if(p.plus){this.$editableElem.before("<span class='plus' style='cursor:pointer' inputMode='"+u+"'>+&nbsp;</span>");this.$editableElem.prev().click(function(){var w=v.value;if(f.trim(w).length==0){w=0}if(t!=dyFormDataType["float"]){v.setValue(parseInt(w)+p.plusUnit)}else{v.setValue(parseFloat(w)+p.plusUnit)}})}if(p.minus){this.$editableElem.after("<span class='minus' style='cursor:pointer' inputMode='"+u+"'>&nbsp;-</span>");this.$editableElem.next().click(function(){var w=v.value;if(f.trim(w).length==0){w=0}if(t!=dyFormDataType["float"]){v.setValue(parseInt(w)-p.minusUnit)}else{v.setValue(parseFloat(w)-p.minusUnit)}})}}},hideEditableElem:function(){if(this.$editableElem==null){return}this.$editableElem.hide();this.hideOperator();this.$editableElem.siblings(".Validform_checktip").hide()},setDisplayAsCtl:function(){var o=this.options;o.isShowAsLabel=false;if(this.$editableElem==null){this.createEditableElem()}this.$editableElem.show();this.showOperator();this.hideLabelElem();this.setValue2EditableElem()},hideOperator:function(){var o=this.options.operator;if(o){if(o.plus){this.$editableElem.prev(".plus").hide()}if(o.minus){this.$editableElem.siblings(".minus").hide()}}},showOperator:function(){var o=this.options.operator;if(o){if(o.plus){this.$editableElem.prev(".plus").show()}if(o.minus){this.$editableElem.siblings(".minus").show()}}},_preCheckInput:function(r){this.oldValue=this.$editableElem.val();if(r.keyCode==46||r.keyCode==8||r.keyCode==9||r.keyCode==27||(r.keyCode==65&&r.ctrlKey===true)||(r.keyCode>=35&&r.keyCode<=39)){return true}if(this.oldValue.indexOf(".")>0&&(r.keyCode==190||r.keyCode==110)&&this.options.columnProperty.dbDataType=="15"){return false}if(!(r.keyCode>=48&&r.keyCode<=57)&&!(r.keyCode>=95&&r.keyCode<=105)&&!((r.keyCode==190||r.keyCode==173||r.keyCode==110)&&this.options.negative==true)){return false}if(this.options.columnProperty.dbDataType=="15"){var s=this.oldValue;var o=this.options.decimal;if((r.keyCode>=48&&r.keyCode<=57)||(r.keyCode>=95&&r.keyCode<=105)||(r.keyCode==190||r.keyCode==110)){var p=l(this.htmlelement);var u=j(this.htmlelement);var q=s.indexOf(".");if(q>0&&p>q){if(p>q+o){return false}if(u.length>0||s.substr(q+1).length<o){return true}else{return false}}return true}return true}else{if(this.options.columnProperty.dbDataType=="13"){var t=Number(this.$editableElem.val());var u=j(this.htmlelement);if(u.length==0&&t>d||t<b){this.$editableElem.val(this.oldValue);return false}}else{if(this.options.columnProperty.dbDataType=="14"){var t=Number(this.$editableElem.val());var u=j(this.htmlelement);if(u.length==0&&t>m||t<h){this.$editableElem.val(this.oldValue);return false}}else{return true}}}},_postCheckInput:function(o){var p=this.$editableElem.val();if(this.options.negative==true&&p=="-"){return true}if(this.$editableElem.val()==""){return true}var q=Number(this.$editableElem.val());if(!a(q)){this.$editableElem.val(this.oldValue);return false}},setReadOnly:function(o){this.render();if(o){this.options.columnProperty.showType=dyshowType.readonly;this.get$InputElem().attr("readonly","readonly");this.hideOperator()}else{this.options.columnProperty.showType=dyshowType.edit;this.get$InputElem().removeAttr("readonly","");this.showOperator()}},};function l(p){var o=0;if(p.selectionStart||p.selectionStart=="0"){o=p.selectionStart}return o}function j(o){if(o.selectionStart||o.selectionStart=="0"){return o.value.substring(o.selectionStart,o.selectionEnd)}return""}function a(o){return !isNaN(parseFloat(o))&&isFinite(o)}f.fn.wnumberInput=function(p){var r=false;var o=null;if(arguments.length==2){r=true;o=arguments[1]}if(typeof p=="string"){if(p==="getObject"){var q=f(this);data=q.data("wnumberInput");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var u=f(this),t=u.data("wnumberInput"),s=typeof p=="object"&&p;if(!t){t=new k(f(this),s);f.extend(t,f.wControlInterface);f.extend(t,f.wTextCommonMethod);f.extend(t,f.NumberInput);t.init();u.data("wnumberInput",t)}if(typeof p=="string"){t[p]()}})};f.fn.wnumberInput.Constructor=k;f.fn.wnumberInput.defaults={columnProperty:i,commonProperty:c,decimal:2,negative:true,disabled:false,readOnly:false,isShowAsLabel:false,isHide:false,formulas:{}}})(jQuery);
;
(function(c){var b={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null};var a={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null};var d=function(e,f){this.options=c.extend({},c.fn.wradio.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};d.prototype={constructor:d};c.fn.wradio=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=c(this);data=g.data("wradio");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=c(this),j=k.data("wradio"),i=typeof f=="object"&&f;if(!j){j=new d(c(this),i);c.extend(j,c.wControlInterface);c.extend(j,c.wRadioCheckBoxCommonMethod);j.init();k.data("wradio",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};c.fn.wradio.Constructor=d;c.fn.wradio.defaults={columnProperty:b,commonProperty:a,isHide:false,checked:false,disabled:false,isShowAsLabel:false,optionDataSource:"1",optionSet:[],dictCode:null,value:""}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wtextInput.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a,};d.TextInput={createEditableElem:function(){if(this.$editableElem!=null){return}var g=this.options;var e=this.getCtlName();var f=document.createElement("input");f.setAttribute("class",this.editableClass);f.setAttribute("name",e);f.setAttribute("type","text");f.setAttribute("maxlength",g.columnProperty.length);d(f).css(this.getTextInputCss());this.$placeHolder.after(d(f));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var h=this;this.$editableElem.keyup(function(i){h.setValue(h.$editableElem.val(),false)});this.$editableElem.bind("paste",function(i){window.setTimeout(function(){h.setValue(h.$editableElem.val(),false)},100)});this.$editableElem.bind("change",function(){h.setValue(h.$editableElem.val(),false)})}};d.fn.wtextInput=function(f){var i=false;var e=null;if(arguments.length==2){i=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var h=d(this);var g=h.data("wtextInput");if(g){return g}else{throw new Error("This object is not available")}}}return this.each(function(){var l=d(this),k=l.data("wtextInput"),j=typeof f=="object"&&f;if(!k){k=new a(d(this),j);d.extend(k,d.wControlInterface);d.extend(k,d.wTextCommonMethod);d.extend(k,d.TextInput);k.init();l.data("wtextInput",k)}if(typeof f=="string"){if(i==true&&e!=null){return k[f](e)}else{return k[f]()}}})};d.fn.wtextInput.Constructor=a;d.fn.wtextInput.defaults={columnProperty:c,commonProperty:b,readOnly:false,disabled:false,isHide:false,isShowAsLabel:false,formulas:{}}})(jQuery);
;
(function(c){var b={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var a={inputMode:dyFormInputMode.textArea,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var d=function(e,f){this.options=c.extend({},c.fn.wtextArea.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};d.prototype={constructor:d};c.TextArea={createEditableElem:function(){if(this.$editableElem!=null){return}var g=this.options;var e=this.getCtlName();var f=document.createElement("textarea");f.setAttribute("class",this.editableClass);f.setAttribute("name",e);f.setAttribute("type","text");f.setAttribute("maxlength",g.columnProperty.length);var j=this.getTextInputCss();var h=j.width;if(h.replace("p","").replace("x","")==""){j.width="100%"}c(f).css(j);this.$placeHolder.after(c(f));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var i=this;this.$editableElem.change(function(){i.setValue(i.$editableElem.val(),false)})},setValue2EditableElem:function(){if(this.$editableElem==null){return}console.log(this.value);this.$editableElem.val(this.value)},};c.fn.wtextArea=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=c(this);data=g.data("wtextArea");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=c(this),j=k.data("wtextArea"),i=typeof f=="object"&&f;if(!j){j=new d(c(this),i);c.extend(j,c.wControlInterface);c.extend(j,c.wTextCommonMethod);c.extend(j,c.TextArea);j.init();k.data("wtextArea",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};c.fn.wtextArea.Constructor=d;c.fn.wtextArea.defaults={columnProperty:b,commonProperty:a,disabled:false,readOnly:false,isHide:false,isShowAsLabel:false}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wckeditor.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a};d.Ckeditor={createEditableElem:function(){if(this.$editableElem!=null){return}var m=this.options;var h=this.getCtlName();var g=document.createElement("textarea");g.setAttribute("class",this.editableClass);g.setAttribute("name",h);g.setAttribute("id",h);g.setAttribute("type","text");d(g).css(this.getTextInputCss());this.$placeHolder.after(d(g));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var j=this;var e=this.$editableElem.attr("id");var k=CKEDITOR.instances[e];if(k){CKEDITOR.remove(k)}m=this.options;var f=this.options.commonProperty.ctlWidth;if(d.trim(f).length>0){if(f.indexOf("px")==-1&&f.indexOf("%")==-1){f=f+"px"}}else{f="100%"}var l=this.options.commonProperty.ctlHight;if(d.trim(l).length>0){if(l.indexOf("px")==-1&&l.indexOf("%")==-1){l=f+"px"}}else{l="100%"}var j=this;var i=CKEDITOR.replace(e,{allowedContent:true,enterMode:CKEDITOR.ENTER_P,height:l,width:f,toolbar:[["Bold","Italic","Underline"],["Cut","Copy","Paste"],["NumberedList","BulletedList","-"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink"],["Format","Font","FontSize"],["TextColor","BGColor"],["Image","Table","Smiley"],["Source","Maximize"],["formfile"]],on:{instanceReady:function(n){this.dataProcessor.writer.setRules("p",{indent:m.indent,breakBeforeOpen:m.breakBeforeOpen,breakAfterOpen:m.breakAfterOpen,breakBeforeClose:m.breakBeforeClose,breakAfterClose:m.breakAfterClose})},change:function(){j.value=j.getCkText()},key:function(){}}})},getCkText:function(){var e=this.$editableElem.attr("id");var f=CKEDITOR.instances[e];return f.getData()},getCkHtml:function(){var e=this.$editableElem.attr("id");var f=CKEDITOR.instances[e];return f.document.getBody().getHtml()},setRequired:function(e){d.ControlUtil.setRequired(e,this.options)},setDisplayAsLabel:function(){d.wControlInterface.setDisplayAsLabel.call(this);this.$placeHolder.parents("td").first().css("white-space","");this.hideDiv()},hideDiv:function(){var e=this;if(e.$editableElem==null){return}if(e.$editableElem.siblings("div[role='application']").size()==0&&e.$editableElem.siblings("span[role='application']").size()==0){window.setTimeout(function(){e.hideDiv()},10)}else{e.$editableElem.siblings("span[role='application']").hide();e.$editableElem.siblings("div[role='application']").hide()}},setDisplayAsCtl:function(){d.wControlInterface.setDisplayAsCtl.call(this);this.$editableElem.hide();this.$editableElem.next().show()},getValue:function(){if(this.$editableElem==null){return this.value}this.value=this.getCkText();return this.value},getwckeditorInstance:function(){return CKEDITOR.instances[this.getCtlName()]},setReadOnly:function(e){if(this.isShowAsLabel()){return}if(e){this.options.columnProperty.showType=dyshowType.readonly;this.setDisplayAsLabel()}else{this.options.columnProperty.showType=dyshowType.edit;this.setDisplayAsCtl()}},};d.fn.wckeditor=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=d(this);data=g.data("wckeditor");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=d(this),j=k.data("wckeditor"),i=typeof f=="object"&&f;if(!j){j=new a(k,i);d.extend(j,d.wControlInterface);d.extend(j,d.wTextCommonMethod);d.extend(j,d.Ckeditor);j.init();k.data("wckeditor",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};d.fn.wckeditor.Constructor=a;d.fn.wckeditor.defaults={columnProperty:c,commonProperty:b,isShowAsLabel:false,disabled:false,readOnly:false,isHide:false,indent:true,breakBeforeOpen:false,breakAfterOpen:false,breakBeforeClose:false,breakAfterClose:false,allowedContent:true,}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wcheckBox.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a};d.fn.wcheckBox=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=d(this);data=g.data("wcheckBox");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=d(this),j=k.data("wcheckBox"),i=typeof f=="object"&&f;if(!j){j=new a(d(this),i);d.extend(j,d.wControlInterface);d.extend(j,d.wRadioCheckBoxCommonMethod);j.init();k.data("wcheckBox",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}else{return j}})};d.fn.wcheckBox.Constructor=a;d.fn.wcheckBox.defaults={columnProperty:c,commonProperty:b,isShowAsLabel:false,isHide:false,checked:false,disabled:false,ctrlField:null,optionDataSource:"1",optionSet:[],dictCode:null,dataDictionarys:[],selectMode:"2",singleCheckContent:"",singleUnCheckContent:"",value:""}})(jQuery);
;
(function($){var columnProperty={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var commonProperty={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var ComboBox=function($placeHolder,options){this.options=$.extend({},$.fn.wcomboBox.defaults,options);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=$placeHolder};ComboBox.prototype={constructor:ComboBox};$.ComboBox={createEditableElem:function(){if(this.$editableElem!=null){return}var options=this.options;var ctlName=this.getCtlName();var editableElem=document.createElement("select");editableElem.setAttribute("class",this.editableClass);editableElem.setAttribute("name",ctlName);$(editableElem).css(this.getTextInputCss());this.$placeHolder.after($(editableElem));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var opt=new Array();if(options.optionDataSource==dyDataSourceType.dataConstant){var selectobj=this.options.optionSet;if(typeof selectobj=="object"){selectobj=eval("("+JSON.cStringify(selectobj)+")")}for(attrbute in selectobj){var s="<option value="+attrbute+">"+selectobj[attrbute]+"</option>";opt.push(s)}}else{var selectobj=this.options.optionSet;if(typeof selectobj=="undefined"){return}if(typeof selectobj=="string"){if(selectobj.length==0){return}else{selectobj=eval("("+selectobj+")")}}var datas=selectobj;for(var i in datas){var data=datas[i];var s="<option value="+data.code+">"+data.name+"</option>";opt.push(s)}}var _this=this;this.$editableElem.html('<option value="" ></option>'+opt.join(""));this.$editableElem.change(function(){var $selectedOpt=$(this).find("option:selected");var realValue=$selectedOpt.val();if($.trim(realValue)==""){_this.value="";return}else{_this.setValue(realValue)}})},getValueMapInOptionSet:function(value){if(typeof value=="undefined"||value.length==0){return""}var options=this.options;var valueMap={};var optionSet={};var selectobj=this.options.optionSet;if(typeof selectobj=="undefined"||selectobj==null||(typeof selectobj=="string"&&$.trim(selectobj).length==0)){console.error("a json parameter is null , used to initialize select options ");return}if(options.optionDataSource!=dyDataSourceType.dataConstant){if(selectobj.length==0){return}else{for(var j=0;j<selectobj.length;j++){optionSet[selectobj[j].code]=selectobj[j].name}}}else{optionSet=selectobj}if(typeof optionSet=="object"){}else{if(typeof optionSet=="string"){try{optionSet=eval("("+(optionSet)+")")}catch(e){console.error(optionSet+" -->not json format ");return}}}for(attrbute in optionSet){if(attrbute==value){valueMap[attrbute]=optionSet[attrbute]}}return JSON.cStringify(valueMap)},setDefaultValue:function(defaultValue){if(defaultValue==null||defaultValue.length==0){return}if(this.isValueAsJsonCtl()){if(defaultValue.indexOf("{")==-1){defaultValue=this.getValueMapInOptionSet(defaultValue)}this.setValueByMap(defaultValue)}else{this.setValue(defaultValue)}},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.getDisplayValue())},setValue2EditableElem:function(){if(this.$editableElem==null){return}var valueObj={};if(this.value==null||$.trim(this.value).length==0){this.$editableElem.val("")}else{valueObj=eval("("+this.value+")")}for(var i in valueObj){this.$editableElem.val(i)}},setValue:function(value){if(typeof value=="undefined"||value==null){return}var valueMap=this.getValueMapInOptionSet(value);if(typeof valueMap=="string"){this.setValueByMap(valueMap)}else{this.setValueByMap(JSON.cStringify(valueMap))}},isValueMap:function(){return true}};$.fn.wcomboBox=function(option){var method=false;var args=null;if(arguments.length==2){method=true;args=arguments[1]}if(typeof option=="string"){if(option==="getObject"){var $this=$(this);data=$this.data("wcomboBox");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var $this=$(this),data=$this.data("wcomboBox"),options=typeof option=="object"&&option;if(!data){data=new ComboBox($(this),options);$.extend(data,$.wControlInterface);$.extend(data,$.ComboBox);data.init();$this.data("wcomboBox",data)}if(typeof option=="string"){if(method==true&&args!=null){return data[option](args)}else{return data[option]()}}})};$.fn.wcomboBox.Constructor=ComboBox;$.fn.wcomboBox.defaults={columnProperty:columnProperty,commonProperty:commonProperty,isShowAsLabel:false,isHide:false,disabled:false,optionDataSource:"1",optionSet:[],dictCode:null}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wserialNumber.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a};d.SerialNumber={createEditableElem:function(){if(this.$editableElem!=null){return}var s=this.options;var i=this.getCtlName();var f=document.createElement("input");f.setAttribute("class",this.editableClass);f.setAttribute("name",i);f.setAttribute("type","text");d(f).css(this.getTextInputCss());this.$placeHolder.after(d(f));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var m=this;var e=this.options.commonProperty.inputMode;if(e==dyFormInputMode.serialNumber){this.$editableElem.addClass("input-search")}var r=this.options.formUuid;var j=this.$editableElem;var g=this.$editableElem.val();var s=this.options;if(dyFormInputMode.serialNumber==e){var n=s.designatedId;var l=s.designatedType;var o=s.isOverride;this.$editableElem.live("click",function(){getEditableSerialNumber(n,l,parseInt(o),r,s.columnProperty.columnName,i);this.setValue(q)});this.dispalyByShowType()}else{var h=s.designatedId;var p=s.isSaveDb;if(g!=""){this.setValue(g)}else{var k=p=="0"?true:false;var q=getNotEditableSerialNumberForDytable(h,k,r,this.options.columnProperty.columnName);this.setValue(q)}this.setDisplayAsLabel()}if(this.getValue()==""||this.getValue()==undefined){this.setValue(s.columnProperty.defaultValue)}}};d.fn.wserialNumber=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=d(this);data=g.data("wserialNumber");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=d(this),j=k.data("wserialNumber"),i=typeof f=="object"&&f;if(!j){j=new a(d(this),i);d.extend(j,d.wControlInterface);d.extend(j,d.wTextCommonMethod);d.extend(j,d.SerialNumber);j.init();k.data("wserialNumber",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};d.fn.wserialNumber.Constructor=a;d.fn.wserialNumber.defaults={columnProperty:c,commonProperty:b,isHide:false,disabled:false,readOnly:false,designatedId:"",isShowAsLabel:false,designatedType:"",isOverride:"",isSaveDb:"",formUuid:""}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wunit.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a};d.Unit={createEditableElem:function(){if(this.$editableElem!=null){return}var m=this.options;var i=this.getCtlName();var f=document.createElement("input");f.setAttribute("class",this.editableClass);f.setAttribute("name",i);f.setAttribute("id",i);f.setAttribute("type","text");d(f).css(this.getTextInputCss());this.$placeHolder.after(d(f));this.$editableElem=this.$placeHolder.next("."+this.editableClass);this.$editableElem.mouseover(function(){d(this).attr("title",d(this).val())});this.$editableElem.addClass("input-people");var h=this.getCtlName();var e=this.options.commonProperty.inputMode;var l=this;var j=this.options.mutiSelect;var g=this.options.showUnitType;var k=this.options.filterCondition;if(dyFormOrgSelectType.orgSelectAddress==e){this.$editableElem.click(function(){if(!l.options.readOnly){if(l.isSelection()){return}d.unit.open({title:"",labelField:h,type:"Unit",commonType:2,multiple:j,showType:g,filterCondition:k,ok:function(){d("#"+h).focus();d("#"+h).blur();l.setToRealDisplayColumn();l.setValue2Object();l.afterUnitChoose()}})}})}else{this.$editableElem.click(function(){if(!l.options.readOnly){if(l.isSelection()){return}d.unit.open({title:"",labelField:h,selectType:l.getSelectTypeByinputMode(e),type:l.getTypeByinputMode(e),multiple:j,showType:g,filterCondition:k,ok:function(){d("#"+h).focus();d("#"+h).blur();l.setToRealDisplayColumn();l.setValue2Object();l.afterUnitChoose()}})}})}},getTypeByinputMode:function(f){var e="MyUnit";if(dyFormOrgSelectType.orgSelectAddress==f){e="Unit"}else{if(dyFormOrgSelectType.orgSelectStaff==f){e="MyUnit"}else{if(dyFormOrgSelectType.orgSelectDepartment==f){e="Dept"}else{if(dyFormOrgSelectType.orgSelect==f){e="MyUnit"}else{if(dyFormOrgSelectType.orgSelectStaDep==f){e="MyUnit"}else{if(dyFormOrgSelectType.orgSelectJob==f){e="Job"}else{if(dyFormOrgSelectType.orgSelectPublicGroup==f){e="PublicGroup"}else{if(dyFormOrgSelectType.orgSelectMyDept==f){e="MyDept"}else{if(dyFormOrgSelectType.orgSelectMyParentDept==f){e="MyParentDept"}else{if(dyFormOrgSelectType.orgSelectMyUnit==f){e="MyUnit"}}}}}}}}}}return e},getSelectTypeByinputMode:function(f){var e=1;if(dyFormOrgSelectType.orgSelectAddress==f){e=1}else{if(dyFormOrgSelectType.orgSelectStaff==f){e=4}else{if(dyFormOrgSelectType.orgSelectDepartment==f){e=2}else{if(dyFormOrgSelectType.orgSelect==f){e=1}else{if(dyFormOrgSelectType.orgSelectStaDep==f){e=6}else{if(dyFormOrgSelectType.orgSelectJob==f){e=32}else{if(dyFormOrgSelectType.orgSelectPublicGroup==f){e=1}else{if(dyFormOrgSelectType.orgSelectMyDept==f){e=1}else{if(dyFormOrgSelectType.orgSelectMyParentDept==f){e=1}else{if(dyFormOrgSelectType.orgSelectMyUnit==f){e=1}}}}}}}}}}return e},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.getDisplayValue())},setValue2EditableElem:function(){if(this.$editableElem==null){return}this.$editableElem.attr("hiddenvalue",this.getValue());this.$editableElem.val(this.getDisplayValue())},isValueMap:function(){return true},setValueByMap:function(e){this.value=e;if(!this.options.isHide){this.render()}this.setToRealDisplayColumn()},setValue:function(h){var f=this.options;if(h.length>0){var e=null;if(h.indexOf(",")!=-1){e=h.split(",")}else{e=h.split(";")}var j={};for(var g=0;g<e.length;g++){j[e[g]]=e[g]}this.setValueByMap(JSON.cStringify(j))}},setValue2Object:function(){var k=this.$editableElem.attr("hiddenvalue");if(k.length==0){this.setValueByMap("");return}var h=this.$editableElem.val();var f=k.split(";");var j=h.split(";");if(f.length!=j.length){throw new Error("!")}var e={};for(var g=0;g<f.length;g++){e[f[g]]=j[g]}this.setValueByMap(JSON.cStringify(e))},afterUnitChoose:function(){var f="afterUnitChoose";var h=this;var e={};if(typeof loadPersonInfo!="undefined"){var g=h.getValue();if(typeof g=="undefined"||g==null||g.length==0){}else{if(g.indexOf(";")!=-1){}else{if(d.trim(g).length>0){e=loadPersonInfo(h.getValue());this.invoke("afterOrgInfo",e)}}}}this.bind(f,function(j){console.log(JSON.cStringify(j));for(var k in j){if(typeof k=="string"){if(typeof console!="undefined"){console.log(k+"--->"+j[k])}var l=d.ControlManager.getCtl(k);if(typeof l!="undefined"&&l!=null){l.setValue(j[k])}}}},true);this.invoke(f,e)}};d.fn.wunit=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=d(this);data=g.data("wunit");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=d(this),j=k.data("wunit"),i=typeof f=="object"&&f;if(!j){j=new a(d(this),i);d.extend(j,d.wControlInterface);d.extend(j,d.wTextCommonMethod);d.extend(j,d.Unit);j.init();k.data("wunit",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};d.fn.wunit.Constructor=a;d.fn.wunit.defaults={columnProperty:c,commonProperty:b,readOnly:false,disabled:false,isHide:false,mutiSelect:true,showUnitType:true,filterCondition:null}})(jQuery);
;
(function($){var columnProperty={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var commonProperty={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var TimeEmploy=function($placeHolder,options){this.options=$.extend({},$.fn.wtimeEmploy.defaults,options);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=$placeHolder};TimeEmploy.prototype={constructor:TimeEmploy};$.TimeEmploy={createEditableElem:function(){if(this.$editableElem!=null){return}var options=this.options;var ctlName=this.getCtlName();var editableElem=document.createElement("input");editableElem.setAttribute("class",this.editableClass);editableElem.setAttribute("name",ctlName);editableElem.setAttribute("type","text");$(editableElem).css(this.getTextInputCss());this.$placeHolder.after($(editableElem));this.$editableElem=this.$placeHolder.next("."+this.editableClass);this.$editableElem.addClass("input-search");var _this=this;this.create$DialogElement()},bind:function(event,callback){this.options[event]=callback},create$DialogElement:function(){var _this=this;this.$editableElem.unbind("click");this.$editableElem.click(function(){var json={beginTime:"",endTime:"",employName:"",uuid:"",resCode:_this.options.resCode};if($.trim(_this.value).length>0){if(typeof _this.value=="object"){json=_this.value}else{json=eval("("+_this.value+")")}}_this.$editableElem.myTimeEmploy(json,function(data){if(typeof data=="string"){_this.setValue(data)}else{_this.setValue(JSON.cStringify(data))}if(_this.options.afterResourceSelect){_this.options.afterResourceSelect.call(_this,_this.getCtlName(),data)}})})},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.getDisplayValue())},getDisplayValue:function(){if(this.value==null||$.trim(this.value).length==0){return""}var val=eval("("+this.value+")");if(typeof val.uuid=="undefined"||$.trim(val.uuid).length==0){return""}if(typeof val.uuid=="undefined"||$.trim(val.uuid).length==0){return""}return val.employName+"("+val.beginTime+""+val.endTime+")"},setValue2EditableElem:function(){if(this.$editableElem==null){return}this.$editableElem.val(this.getDisplayValue())}};$.fn.wtimeEmploy=function(option){var method=false;var args=null;if(arguments.length==2){method=true;args=arguments[1]}if(typeof option=="string"){if(option==="getObject"){var $this=$(this);data=$this.data("wtimeEmploy");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var $this=$(this),data=$this.data("wtimeEmploy"),options=typeof option=="object"&&option;if(!data){data=new TimeEmploy($(this),options);$.extend(data,$.wControlInterface);$.extend(data,$.wTextCommonMethod);$.extend(data,$.TimeEmploy);data.init();$this.data("wtimeEmploy",data)}if(typeof option=="string"){if(method==true&&args!=null){return data[option](args)}else{return data[option]()}}})};$.fn.wtimeEmploy.Constructor=TimeEmploy;$.fn.wtimeEmploy.defaults={columnProperty:columnProperty,commonProperty:commonProperty,readOnly:false,isShowAsLabel:false,disabled:false,isHide:false,afterResourceSelect:function(){},resCode:timeResouceType.MEET_RESOURCE}})(jQuery);
;
(function(b){var a=function(c,d){this.init("wviewDisplay",c,d)};a.prototype={constructor:a,init:function(e,d,c){this.type=e;this.$element=b(d);this.options=this.getOptions(c);this.initparams(this.options)},initparams:function(d){this.$element.attr("relationdatatext",d.relationdatatext);this.$element.attr("relationdatavalue",d.relationdatavalue);this.$element.attr("relationdatasql",d.relationdatasql);var g="/basicdata/dyview/view_show?viewUuid="+this.options.relationDataValue+"&currentPage=1&openBy=dytable";var h=new Array();this.options.relationdatasql=" & o.status = '1' ";var f=this.options.relationdatasql;if(f!=undefined){while(f.indexOf("${")>-1){var e=f.match("\\${.*?\\}")+"";h.push(e.replace("${","").replace("}",""));f=f.replace(e,"")}}g+=this.options.relationdatasql;if(d.columnProperty.showType==dyshowType.hide){b.ControlUtil.setVisible(this.$element,false)}else{var c=this.$element;if(g.indexOf("${")>-1){c.after("<span></span>");c.hide()}else{b.ajax({async:false,url:ctx+g,success:function(i){c.after(i);c.hide()}})}}},setValue:function(c){},setVisible:function(c){b.ControlUtil.setVisible(this.$element,c);this.options.isHide=!c},isVisible:function(){return this.options.isHide},getOptions:function(c){c=b.extend({},b.fn[this.type].defaults,c,this.$element.data());return c},setDataUuid:function(c){this.options.columnProperty.dataUuid=c},getDataUuid:function(){return this.options.columnProperty.dataUuid},getFormDefinition:function(){return this.options.columnProperty.formDefinition},isValueMap:function(){return false},validate:function(){return true},getValue:function(){return""},getAllOptions:function(){return this.options},getRule:function(){return b.ControlUtil.getCheckRules(this.options)},getMessage:function(){return b.ControlUtil.getCheckMsg(this.options)},setPos:function(c){this.options.columnProperty.pos=c},getPos:function(c){return this.options.columnProperty.pos},addUrlClickEvent:function(c){},bind:function(c,d){this.$element.bind(c,d);return this},unbind:function(c){this.$element.unbind(c);return this},getFieldName:function(){return this.options.columnProperty.columnName},};b.fn.wviewDisplay=function(d){var f=false;var c=null;if(arguments.length==2){f=true;c=arguments[1]}if(typeof d=="string"){if(d==="getObject"){var e=b(this);data=e.data("wviewDisplay");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var i=b(this),h=i.data("wviewDisplay"),g=typeof d=="object"&&d;if(!h){i.data("wviewDisplay",(h=new a(b(this),g)))}if(typeof d=="string"){if(f==true&&c!=null){return h[d](c)}else{return h[d]()}}})};b.fn.wviewDisplay.Constructor=a;b.fn.wviewDisplay.defaults={isHide:false,columnProperty:{},commonProperty:{},relationDataText:"",relationDataValue:"",relationDataSql:""}})(jQuery);
;
(function($){var columnProperty={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var commonProperty={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var Dialog=function($placeHolder,options){this.options=$.extend({},$.fn.wdialog.defaults,options);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=$placeHolder};Dialog.prototype={constructor:Dialog};$.Dialog={createEditableElem:function(){if(this.$editableElem!=null){return}var options=this.options;var ctlName=this.getCtlName();var editableElem=document.createElement("input");editableElem.setAttribute("class",this.editableClass);editableElem.setAttribute("name",ctlName);editableElem.setAttribute("type","text");$(editableElem).css(this.getTextInputCss());this.$placeHolder.after($(editableElem));this.$editableElem=this.$placeHolder.next("."+this.editableClass);this.$editableElem.addClass("input-search");var _this=this;var _relationDataDefiantion=this.options.relationDataDefiantion;if($.trim(_relationDataDefiantion).length==0){alert(":"+ctlName);return}var relationFieldMappingstrArray=_relationDataDefiantion.split("|");var relationFieldMappingArray=[];for(var i=0;i<relationFieldMappingstrArray.length;i++){relationFieldMappingArray.push(JSON.parse(relationFieldMappingstrArray[i]))}var _relationDataValueTwo=this.options.relationDataValueTwo;var _relationDataTwoSql=this.options.relationDataTwoSql;var _this=this;if(typeof options.columnProperty.relativeMethod=="undefined"||options.columnProperty.relativeMethod==dyRelativeMethod.DIALOG){this.create$DialogElement(relationFieldMappingArray,_relationDataValueTwo,_relationDataTwoSql)}else{this.create$SearchElement(relationFieldMappingArray,_relationDataValueTwo,_relationDataTwoSql,this.options.pageSize)}this.$editableElem.bind("paste",function(){var _dom=this;window.setTimeout(function(){_this.setValue($(_dom).val(),false)},100)});this.$editableElem.bind("keyup",function(){_this.setValue($(this).val(),false)});this.$editableElem.bind("change",function(){_this.setValue($(this).val(),false)})},bind:function(event,callback){this.options[event]=callback},create$SearchElement:function(relationFieldMapping,dataSourceId,contrainSql,pageSize){var _this=this;this.$editableElem.addClass("input-search");var $searchInput=this.$editableElem;$searchInput.attr("autocomplete","off");var $autocomplete=$('<div class="autocomplete"></div>').hide().insertAfter($searchInput);var clear=function(){$autocomplete.empty().hide()};var isInAutoCompleteDiv=false;$autocomplete.mouseover(function(evt){isInAutoCompleteDiv=true});$autocomplete.mouseout(function(evt){var _this=evt.currentTarget;var rect=_this.getBoundingClientRect();isInAutoCompleteDiv=false;var inDiv=(evt.clientX>=rect.left&&evt.clientX<=rect.right);inDiv=inDiv&&(evt.clientY>=rect.top&&evt.clientY<=rect.bottom);if(!inDiv){setTimeout(clear,350)}});$searchInput.blur(function(evt){if(isInAutoCompleteDiv){}else{setTimeout(clear,350)}isInAutoCompleteDiv=false;_this.clearAllSession()});var setCheckedItem=function(_this){clearCheckedItem(_this);$(_this).addClass("highlight")};var getCheckedItem=function(){return $autocomplete.find(".highlight")};var moveCheckedItem2Next=function(){if($autocomplete.find(".highlight")[0]==$autocomplete.find("tr:last")[0]){return}var $dom=getCheckedItem();if($dom.size()==0){setCheckedItem($autocomplete.find("tr").first());return}var dom=$dom[0];clearCheckedItem($(dom));setCheckedItem($(dom).next())};var moveCheckedItem2Prev=function(){if($autocomplete.find(".highlight")[0]==$autocomplete.find("tr:first")[0]){return}var dom=$autocomplete.find(".highlight")[0];clearCheckedItem($(dom));setCheckedItem($(dom).prev())};var clearCheckedItem=function(_this){$(_this).siblings().removeClass("highlight")};var selectItem=function(mappingFields){var $checkedTr=$autocomplete.find(".highlight");var $checkedTd=$checkedTr.find("td");var fieldsKeyValue={};$checkedTd.each(function(){fieldsKeyValue[$(this).attr("fieldname").toLowerCase()]=$(this).find("div").first().html()});_this.setValue2Controls(mappingFields,fieldsKeyValue)};var sqlFields=[];for(var i=0;i<relationFieldMapping.length;i++){sqlFields.push(relationFieldMapping[i].sqlField)}var contraint={};var relationDataTwoSql=this.options.relationDataTwoSql;var ajax_request=function(){contraint=_this.getContraint();_this.clearAllSession();var currentSessionId=_this.createSession();$searchInput.addClass("input-waiting");$.ajax({url:contextPath+"/dyform/autoComplete",data:{searchText:$searchInput.val(),fields:JSON.cStringify(sqlFields),dataSourceId:dataSourceId,contraint:JSON.cStringify(contraint),pageSize:typeof pageSize=="undefined"?"300":pageSize},dataType:"json",type:"POST",success:function(data){$searchInput.removeClass("input-waiting");if(_this.isSessionTimeout(currentSessionId)){return}clear();_this.invoke("beforeAutoCompleteShow",data);if(data.length){$autocomplete.append("<table></table>");$.each(data,function(index,term){if(typeof term=="string"){$("<tr></tr>").html("<td>"+term+"</td>").appendTo($autocomplete.find("table")).addClass("clickable").hover(function(){setCheckedItem(this)},function(){}).click(function(){clear()})}else{var content="";for(var i in term){var isHide=_this.isFieldHide(relationFieldMapping,i);var width=_this.getFieldWidth(relationFieldMapping,i);content+="<td fieldName='"+i+"' style='"+(isHide?"display:none;":"")+"' title='"+term[i]+"' ><div style='width:"+width+"px;'>"+term[i]+"</div></td>"}$("<tr></tr>").html(content).appendTo($autocomplete.find("table")).addClass("clickable").hover(function(){setCheckedItem(this)},function(){clearCheckedItem(this)}).click(function(){selectItem(relationFieldMapping);clear()})}});var ypos=$searchInput.position().top;var xpos=$searchInput.position().left;var width=$autocomplete.width();$autocomplete.css("width",$searchInput.width());$autocomplete.css({position:"absolute",left:(xpos-4)+"px",top:(ypos+35)+"px","z-index":9999,"overflow-x":"auto","overflow-y":"auto",height:300+"px",border:"1px solid #c5dbec","background-color":"#fff","text-align":"left"});$autocomplete.show()}if(_this.options.afterAutoCompleteShow){_this.options.afterAutoCompleteShow.call(_this)}}})};var timeoutid=null;$searchInput.click(function(){if(_this.isReadOnly()){return}clear();clearTimeout(timeoutid);timeoutid=setTimeout(ajax_request,100)});$searchInput.change(function(){var fieldsKeyValue={};for(var i=0;i<relationFieldMapping.length;i++){fieldsKeyValue[relationFieldMapping[i]["formField"].toLowerCase()]=""}_this.setValue2Controls(relationFieldMapping,fieldsKeyValue)});$searchInput.keyup(function(event){if(_this.isReadOnly()){return}if(event.keyCode>40||event.keyCode==8||event.keyCode==32){clear();clearTimeout(timeoutid);timeoutid=setTimeout(ajax_request,100)}else{if(event.keyCode==38){moveCheckedItem2Prev();event.preventDefault()}else{if(event.keyCode==40){moveCheckedItem2Next();event.preventDefault()}}}}).keypress(function(event){if(event.keyCode==13){getCheckedItem().trigger("click")}}).keydown(function(event){if(event.keyCode==27){clear();event.preventDefault()}});$(window).resize(function(){var ypos=$searchInput.position().top;var xpos=$searchInput.position().left;$autocomplete.css("width",$searchInput.css("width"));$autocomplete.css({position:"absolute",left:xpos+"px",top:ypos+"px"})})},isFieldHide:function(mappingFields,fieldName){for(var i=0;i<mappingFields.length;i++){var tempObj=mappingFields[i];var sqlField=tempObj.sqlField;var formField=tempObj.formField;var isHide=tempObj.isHide;if(fieldName.toLowerCase()==sqlField.toLowerCase()){if(typeof isHide=="undefined"){return false}else{return isHide}}}return false},getFieldWidth:function(mappingFields,fieldName){for(var i=0;i<mappingFields.length;i++){var tempObj=mappingFields[i];var sqlField=tempObj.sqlField;var formField=tempObj.formField;var width=tempObj.width;if(fieldName.toLowerCase()==sqlField.toLowerCase()){if(typeof width=="undefined"||$.trim(width).length==0){break}else{return width}}}return""},isSessionTimeout:function(sessionId){if(typeof jqueryWDialogSession[sessionId]=="undefined"){return true}else{return false}},createSession:function(){var sessionId=new UUID().id.toLowerCase();jqueryWDialogSession[sessionId]=sessionId;return sessionId},clearAllSession:function(){jqueryWDialogSession={}},getContraint:function(){var _this=this;var relationDataTwoSql=this.options.relationDataTwoSql;var contraint={};if(typeof relationDataTwoSql!="undefined"&&$.trim(relationDataTwoSql).length>0){var fieldvalues=relationDataTwoSql.split(";");for(var i=0;i<fieldvalues.length;i++){var fieldValue=fieldvalues[i].split("=");if(fieldValue.length!=2){continue}var field=fieldValue[0];var valueField=fieldValue[1];if(_this.getPos()==dyControlPos.subForm){}else{var control=$.ControlManager.getCtl(valueField);if(typeof control=="undefined"||control==null){continue}var value=control.getValue();if(typeof value=="undefined"||value==null||$.trim(value).length==0){continue}contraint[field]=value}}}return contraint},create$DialogElement:function(relationFieldMappingArray,_relationDataValueTwo,_relationDataTwoSql){if(this.getPos()==dyControlPos.subForm&&this.options.destType!=dyControlPos.mainForm){alert(this.getCtlName+"-");return}var _this=this;this.$editableElem.unbind("click");this.$editableElem.click(function(){var str="";for(var j=0;j<relationFieldMappingArray.length;j++){if(relationFieldMappingArray[j]!=""){var tempObj=relationFieldMappingArray[j];str+=","+tempObj.sqlField}}for(var i=0;i<relationFieldMappingArray.length;i++){var fields=relationFieldMappingArray[i];fields.sqlField=fields.sqlField.replace("_","");fields.sqlField=fields.sqlField.replace("_","");fields.sqlField=fields.sqlField.replace("_","")}var path="";if(_relationDataValueTwo!=undefined){path="/basicdata/view/view_show?viewUuid="+_relationDataValueTwo+"&currentPage=1&openBy=dytable&relationDataDefiantion="+str}var contraint=_this.getContraint();if($.wControlInterface.objectLength(contraint)>0){path+="&whereSql="+JSON.cStringify(contraint)}else{}var title="("+_this.options.columnProperty.displayName+")";if(path.indexOf("${")>-1){var json=new Object();json.content="";json.title=title;json.height=600;json.width=800;showdialog(json)}else{$.ajax({async:false,cache:false,url:ctx+path,success:function(data){var json=new Object();json.content="<div class='dnrw' style='width:99%;'>"+data+" </div>";json.title=title;json.height=600;json.width=800;var $checkeds=$(json.content).find(".checkeds");if($checkeds.size()>0){json.buttons={"":function(){var datas=_this.collectData();if(datas.length==0){alert("");return}if(_this.options.destType==dyControlPos.subForm){_this.addRowData(relationFieldMappingArray,datas)}else{_this.setValue2Controls(relationFieldMappingArray,datas[0])}$("#dialogModule").dialog("close")}}}showDialog(json);var $checkeds=$(".checkeds");if(_this.options.selectType!=dySelectType.multiple||_this.options.destType!=dyControlPos.subForm){$checkeds.click(function(){if($(this).attr("checked")=="checked"){$checkeds.attr("checked",false);$(this).attr("checked",true)}})}$(".dataTr").unbind("dblclick");$(".dataTr").live("dblclick",function(){var jsonstr=$(this).attr("jsonstr");var jsonObj=eval("("+urldecode(jsonstr)+")");var datas=[];datas.push(jsonObj);if(_this.options.destType==dyControlPos.subForm){_this.addRowData(relationFieldMappingArray,datas)}else{_this.setValue2Controls(relationFieldMappingArray,jsonObj)}$("#dialogModule").dialog("close")})}})}})},collectData:function(){var $checkeds=$("#dialogModule").find(".checkeds:checked");var viewDatas=[];$checkeds.each(function(){if($(this).parent().parent().is(".dataTr")){var $tr=$(this).parent().parent();var jsonstr=$tr.attr("jsonstr");var jsonObj=eval("("+urldecode(jsonstr)+")");viewDatas.push(jsonObj)}});return viewDatas},addRowData:function(mappingFields,datas){var $form=this.$placeHolder.parents("form");var destFormId=this.options.destSubform;var paramsObjs=[];for(var index=0;index<datas.length;index++){var fieldsKeyValue=datas[index];var fieldsKeyValueObj={};for(var i in fieldsKeyValue){fieldsKeyValueObj[i.toLowerCase()]=fieldsKeyValue[i]}fieldsKeyValue=fieldsKeyValueObj;var _this=this;var paramsObj={};for(var i=0;i<mappingFields.length;i++){var tempObj=mappingFields[i];var sqlField=tempObj.sqlField;var formField=tempObj.formField;var value=fieldsKeyValue[sqlField.toLowerCase()];if(typeof value=="undefined"){value=""}paramsObj[formField]=value}paramsObjs.push(paramsObj);$form.dyform("addRowData",destFormId,paramsObj)}if(_this.options.afterDialogSelect){_this.options.afterDialogSelect.call(this,this.getCtlName(),paramsObjs,datas)}},setValue2Controls:function(mappingFields,fieldsKeyValue){var issubformdialog=false;if(this.getCtlName().indexOf("____"+this.options.columnProperty.columnName)>0){issubformdialog=true}else{if(this.getCtlName().indexOf("___"+this.options.columnProperty.columnName)>0){issubformdialog=false}}var fieldsKeyValueObj={};for(var i in fieldsKeyValue){fieldsKeyValueObj[i.toLowerCase()]=fieldsKeyValue[i]}fieldsKeyValue=fieldsKeyValueObj;var _this=this;var paramsObj={};for(var i=0;i<mappingFields.length;i++){var tempObj=mappingFields[i];var sqlField=tempObj.sqlField;var formField=tempObj.formField;var value=fieldsKeyValue[sqlField.toLowerCase()];if(typeof value=="undefined"){value=""}var control={};if(_this.getPos()==dyControlPos.subForm){var datauuid=_this.getDataUuid();if(issubformdialog){control=$.ControlManager.getCtl(datauuid+"____"+formField);paramsObj[datauuid+"____"+formField]=value}else{control=$.ControlManager.getCtl(datauuid+"___"+formField);paramsObj[datauuid+"___"+formField]=value}if(typeof control=="undefined"||control==null){continue}control.setValue(value)}else{control=$.ControlManager.getCtl(formField);if(control==undefined){$("#"+formField).val(value)}else{if(typeof control=="undefined"||typeof control.setValue=="undefined"){continue}control.setValue(value);if("cbzxfzrid"==control.getCtlName()){}paramsObj[formField]=value}}}if(_this.options.afterDialogSelect){_this.options.afterDialogSelect.call(this,this.getCtlName(),paramsObj,fieldsKeyValue)}}};$.fn.wdialog=function(option){var method=false;var args=null;if(arguments.length==2){method=true;args=arguments[1]}if(typeof option=="string"){if(option==="getObject"){var $this=$(this);data=$this.data("wdialog");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var $this=$(this),data=$this.data("wdialog"),options=typeof option=="object"&&option;if(!data){data=new Dialog($(this),options);$.extend(data,$.wControlInterface);$.extend(data,$.wTextCommonMethod);$.extend(data,$.Dialog);data.init();$this.data("wdialog",data)}if(typeof option=="string"){if(method==true&&args!=null){return data[option](args)}else{return data[option]()}}})};$.fn.wdialog.Constructor=Dialog;$.fn.wdialog.defaults={columnProperty:columnProperty,commonProperty:commonProperty,readOnly:false,isShowAsLabel:false,disabled:false,isHide:false,relationDataTextTwo:"",relationDataValueTwo:"",relationDataTwoSql:"",relationDataDefiantion:"",relationDataShowMethod:"",relationDataShowType:"",afterDialogSelect:function(){}}})(jQuery);var jqueryWDialogSession={};
;
$(function(){$.wSubFormMethod={editSubformRowDataInDialog:function(k,A,q){var z=this.options.$paranentelement;var l=k.formUuid;var a=this.options.subformDefinition;var g=z.$("#"+l).jqGrid("getGridParam","colModel");var x=false;var u=A.uuid;if(typeof A=="undefined"||A==null||typeof u=="undefined"){x=true;u=this.createUuid();A.id=u;A.newRow=true;var s=this.loadDefaultFormData(l);for(var t=0;t<g.length;t++){var d=g[t];var c=d.name;var p=s[c];if(typeof p!="undefined"&&p!=null){A[c]=s[c]}}if(typeof q!="undefined"){A.parent_uuid=q.uuid}}else{A.id=u}$("#dialog"+u).remove();z.append("<div id='dialog"+u+"' title="+k.displayName+"("+dybtn.add+")></div>");var i="<div class='dyform'>";i+="<table></table>";z.$("#dialog"+u).append(i);var o=k.fields;var y={};for(var t=0;t<g.length;t++){var d=g[t];var c=d.name;if(!this.isControlFieldInSubform(c)){continue}var b=o[c];var e=b.displayName;var n=this.getCellId(u+"_",c);var w="";w+="<tr><td >";w+=e;w+="</td>";w+="<td>";w+="<img class='value' name='"+n+"'/>";w+="</td></tr>";z.$("#dialog"+u+" .dyform").find("table").append(w);var m=a.fields[c];$.ControlManager.createCtl(z.$("img[name='"+n+"']"),m,a);var f=$.ControlManager.getCtl(n);y[c]=f;var p=A[c];f.setPos(dyControlPos.subForm);f.setDataUuid(u);if(typeof p=="undefined"){continue}this.setValue(f,p,u);f.setEditable(true)}var r=this;var v={};v[dybtn.save]=function(){for(var B=0;B<g.length;B++){var h=g[B];var C=h.name;if(!r.isControlFieldInSubform(C)){continue}if(y[C]!=undefined){A[C]=r.getValue(y[C])}}if(x){r.addRowData(l,A)}else{r.updateRowData(l,A)}$(this).dialog("close");$("#dialog"+u).remove()};v[dybtn.cancel]=function(){$(this).dialog("close");$("#dialog"+u).remove()};z.$("#dialog"+u).dialog({buttons:v,height:380,width:700,modal:true})},getJqGridColModel:function(b){var c=b;var a={};a.name=c.name;a.index=c.name;a.edittype="custom";var d=this;a.formatter=function(e,f,g){var h=d.getCellId(f.rowId,f.colModel.name);return"<img class='value' style='display:none' name='"+h+"' pos='"+dyControlPos.subForm+"'/>"};return a},bind:function(a,b){this.options[a]=b;return this},invoke:function(a){if(this.options[a]){this.options[a].apply(this,$.makeArray(arguments).slice(1))}},addControlUrl:function(a,c){var d=this;var b=function(j){var i=new RegExp(/\$\{([^\}]*)\}/g);var g=j.data.a;var l=g.match(i);for(var f=0;f<l.length;f++){var h=l[f].replace("${","").replace("}","");var e=d.getCellId(c,h);var m=$.ControlManager.getCtl(e);if(m!=undefined){g=g.replace(l[f],m.getValue())}else{if(h=="datarowid"){g=g.replace(l[f],c)}}}window.open(ctx+g)};a.addUrlClickEvent(b)},getCellId:function(a,c){var b=a+"___"+c;return b},getSubformDefinitionByFormUuid:function(a,e){var f=a.subforms;var c=null;for(var d in f){var b=f[d];if(b.formUuid==e){c=b;break}}return c},isControlFieldInSubform:function(a){if(a=="seqNO"||a=="cb"||a=="id"||a=="uuid"||a=="parent_uuid"||a=="level"||a=="isLeaf"||a=="expanded"||a=="loaded"||a=="parent"||a=="icon"){return false}else{return true}},addSubformRowDataInJqGrid:function(i,f){var g=this.options.$paranentelement.$("#"+i).jqGrid("getGridParam","colModel");var a=this.createUuid();var d={};d.id=a;d.newRow=true;if(typeof f!="undefined"){d.parent_uuid=f.uuid}var b=this.loadDefaultFormData(i);for(var c=0;c<g.length;c++){var e=g[c];var k=e.name;var h=b[k];if(typeof h!="undefined"&&h!=null){d[k]=b[k]}}this.addRowData(i,d)},initRowControls:function(i,b,n){var g=this;var k=this.options.subformDefinition;var h=this.options.$paranentelement.$("#"+i).jqGrid("getGridParam","colModel");for(var d=0;d<h.length;d++){var f=h[d];var l=f.name;if(!g.isControlFieldInSubform(l)){continue}var a=g.getCellId(b,l);var c=k.fields[l];if(typeof c=="undefined"){continue}var m=n[l];var e=g.createControl($(".value[name='"+a+"']"),c,k,m,b,f)}},setBlurPartOfSwitch:function(b,a){var c=this;if(!c.options.readOnly&&a.editable&&a.controlable){b.setDisplayAsCtl();return}(function(f){if(f.getAllOptions().commonProperty.inputMode==dyFormInputMode.checkbox||f.getAllOptions().commonProperty.inputMode==dyFormInputMode.radio){var e=$(f.$placeHolder.parents("td").get(0));e.bind("mouseleave",function(){f.setDisplayAsLabel()});return}var d=f.getCtlName();$(".editableClass[name='"+d+"']").live("blur",function(){f.setDisplayAsLabel()})})(b)},addRowData:function(d,e,b,f){var c=d;if(arguments.length==1){d=this.options.formUuid;e=c}if(typeof b=="undefined"){b=true}if(typeof f=="undefined"){f=true}e.controlable=b;e.seqNOable=f;if(typeof e.id=="undefined"){e.id=this.createUuid();e.newRow=true}if(typeof e.level=="undefined"){e.level="0"}if(typeof e.parent_uuid=="undefined"){e.parent_uuid=""}if(typeof e.isLeaf=="undefined"){e.isLeaf=true}if(typeof e.expanded=="undefined"){e.expanded=true}if(typeof e.loaded=="undefined"){e.loaded=true}this.options.$paranentelement.$("#"+d).jqGrid("addChildNode",e.id,e.parent_uuid,e);var a=this.options.$paranentelement.$("#"+d).jqGrid("getNodeParent",e);if(f!=false){this.updateSeqNo(this.getFormUuid(),a)}return e.id},getControls:function(c){var i=[];var f=this.options.$paranentelement.$("#"+this.getFormUuid()).jqGrid("getRowData",c);var h=this.options.$paranentelement.$("#"+this.getFormUuid()).jqGrid("getGridParam","colModel");var a=this.options.subformDefinition;for(var d=0;d<h.length;d++){var g=h[d];var k=g.name;if(!this.isControlFieldInSubform(k)){continue}var b=this.getCellId(c,k);var e=$.ControlManager.getCtl(b);if(typeof e=="undefined"||e==null){continue}i.push(e)}return i},getRowData:function(n,c){var p=n;if(arguments.length==1){n=this.options.formUuid;c=p}var k={};k.uuid=c;var f=this.options.$paranentelement.$("#"+n).jqGrid("getRowData",c);for(var g in f){if(!this.isControlFieldInSubform(g)){k[g]=f[g]}}var l=this.options.$paranentelement.$("#"+n).jqGrid("getGridParam","colModel");var a=this.options.subformDefinition;for(var d=0;d<l.length;d++){var h=l[d];var o=h.name;if(!this.isControlFieldInSubform(o)){continue}var b=this.getCellId(c,o);var e=$.ControlManager.getCtl(b);var m=a.fields[o];if(typeof m=="undefined"){console.log(" unknown fieldName["+o+"]");continue}k[o]=this.getValue(e)}return k},getSubformValueKeySetMap:function(){var h={};var a=this.options.subformDefinition.fields;for(var f in a){var g=a[f].inputMode;if(g==dyFormInputMode.treeSelect||g==dyFormInputMode.radio||g==dyFormInputMode.checkbox||g==dyFormInputMode.selectMutilFase){var e=a[f].optionSet;if(typeof e=="undefined"||e==null||e.length==0){console.log("field["+f+"] optionSet undefined");continue}var d={};for(var b in e){var c=e[b];d[c]=b}h[f]=d}}return h},getSubformValueFormatSetMap:function(){var f={};var a=this.options.subformDefinition.fields;for(var d in a){var e=a[d].inputMode;if(e==dyFormInputMode.date){var b=a[d].contentFormat;if(typeof b=="undefined"||b==null){console.log("field["+d+"] contentFormat undefined");continue}var c="";if(b==dyDateFmt.yearMonthDate){c="yyyy-MM-dd"}else{if(b==dyDateFmt.dateTimeHour){c="yyyy-MM-dd HH"}else{if(b==dyDateFmt.dateTimeMin){c="yyyy-MM-dd HH:mm"}else{if(b==dyDateFmt.dateTimeSec){c="yyyy-MM-dd HH:mm:ss"}else{if(b==dyDateFmt.timeHour){c="HH"}else{if(b==dyDateFmt.timeMin){c="HH:mm"}else{if(b==dyDateFmt.timeSec){c="HH:mm:ss"}else{if(b==dyDateFmt.yearMonthDateCn){c="yyyyMMdd"}else{if(b==dyDateFmt.yearCn){c="yyyy"}else{if(b==dyDateFmt.yearMonthCn){c="yyyyMM"}else{if(b==dyDateFmt.monthDateCn){c="MMdd"}else{if(b==dyDateFmt.year){c="yyyy"}}}}}}}}}}}}f[d]=c}}return f},getRowDisplayData:function(n,c){var p=n;if(arguments.length==1){n=this.options.formUuid;c=p}var k={};k.uuid=c;var f=this.options.$paranentelement.$("#"+n).jqGrid("getRowData",c);for(var g in f){if(!this.isControlFieldInSubform(g)){k[g]=f[g]}}var l=this.options.$paranentelement.$("#"+n).jqGrid("getGridParam","colModel");var a=this.options.subformDefinition;for(var d=0;d<l.length;d++){var h=l[d];var o=h.name;if(!this.isControlFieldInSubform(o)){continue}var b=this.getCellId(c,o);var e=$.ControlManager.getCtl(b);var m=a.fields[o];if(typeof m=="undefined"){console.log(" unknown fieldName["+o+"]");continue}k[o]=this.getDisplayValue(e)}return k},deleteSubformRowDataEvent:function(c,b){var d=this;var a=[];a.push(b);if(a.length>0){oConfirm(dymsg.delConfirm,function(){for(var g=(a.length-1);g>=0;g--){var e=d.getControls(a[g]);for(var f=0;f<e.length;f++){if(e[f].clear){e[f].clear()}}d.delRowData(c,a[g])}})}else{$.jBox.info(dymsg.selectRecordDel,dymsg.tipTitle)}},upSubformRowDataEvent:function(c,b){var f=null;var e=$("#"+b);f=$("#"+b).prev("tr");if(!f.hasClass("jqgfirstrow")){var d=e.children("td:eq(2)").html();var a=f.children("td:eq(2)").html();e.after(f);e.children("td:eq(2)").html(a);f.children("td:eq(2)").html(d)}},downSubformRowDataEvent:function(c,b){var f=null;var e=$("#"+b);f=$("#"+b).next("tr");if("undefined"!=typeof(f.html())){var d=e.children("td:eq(2)").html();var a=f.children("td:eq(2)").html();e.before(f);e.children("td:eq(2)").html(a);f.children("td:eq(2)").html(d)}},updateSeqNo:function(d,b){if(typeof b=="undefined"||b==null){var a=this.options.$paranentelement.$("#"+d).jqGrid("getRootNodes","reccount");for(var c=0;c<a.length;c++){var f=a[c]["id"];this.options.$paranentelement.$("#"+d).jqGrid("setCell",f,"seqNO",c+1)}}else{var e=this.options.$paranentelement.$("#"+d).jqGrid("getNodeChildren",b);for(var c=0;c<e.length;c++){var f=e[c]["id"];this.options.$paranentelement.$("#"+d).jqGrid("setCell",f,"seqNO",b.seqNO+"_"+(c+1))}}},updateRowData:function(c,e){var b=c;if(arguments.length==1){c=this.options.formUuid;e=b}var g=e.id;if(typeof g=="undefined"){throw new Error("id is not defined")}for(var a in e){var h=a;if(!this.isControlFieldInSubform(h)){continue}var d=this.getCellId(g,h);var f=$.ControlManager.getCtl(d);this.setValue(f,e[h],g)}},delRowData:function(c,d){var b=c;if(arguments.length==1){c=this.options.formUuid;d=b}this.options.$paranentelement.$("#"+c).jqGrid("delRowData",d);this.updateSeqNo(c);var a=this.options.$paranentelement.$("#"+c).jqGrid("getNodeParent",data);this.cacheDeleteRow({dataUuid:d,formUuid:c})},createUuid:function(){return new UUID().id.toLowerCase()},loadDefaultFormData:function(b){var c={};var a=ctx+"/dyformdata/getDefaultFormData";$.ajax({url:a,cache:false,async:false,type:"POST",data:{formUuid:b},dataType:"json",success:function(d){if(d.success=="true"||d.success==true){c=d.data}else{}},error:function(d){console.log(JSON.cStringify(d))}});return c},getFormUuid:function(){return this.options.subformDefinition.uuid},setMainformDataUuid:function(a){this.options.mainformDataUuid=a},getDataUuid4Mainform:function(){return this.options.mainformDataUuid},loadAndAddChildRowData:function(e,f){var c=e;var h=this.getFormUuid();var d=this.getDataUuid4Mainform();if(d==undefined){return}var a=f.id;var g=this;var b=ctx+"/dyformdata/getFormDataOfChildNode4ParentNode";$.ajax({url:b,cache:false,async:true,type:"POST",data:{formUuidOfSubform:c,formUuidOfMainform:h,dataUuidOfMainform:d,dataUuidOfParentNode:a},dataType:"json",success:function(j){if(j.success=="true"||j.success==true){var m={};m=j.data;if(m==null){return}for(var k=0;k<m.length;k++){var l=m[k];l.id=l.uuid;g.addRowData(c,l)}}else{console.log(JSON.cStringify(j))}},error:function(i){console.log(JSON.cStringify(i))}})},setValue:function(c,b,a){c.setDataUuid(a);if(c.isValueMap()){c.setValueByMap(b)}else{c.setValue(b)}},getValue:function(b){var a="";if(b.isValueMap()){var c=b.getValueMap();if(typeof c=="string"){a=c}else{a=JSON.cStringify(b.getValueMap())}}else{a=b.getValue()}return a},getDisplayValue:function(b){var a="";if(b.isValueMap()){a=b.getDisplayValue()}else{a=b.getValue()}return a},collectSubformData:function(){var e=[];var b=this.options.$paranentelement.$("#"+this.options.formUuid).jqGrid("getRowData");for(var c=0;c<b.length;c++){var a={};var d=b[c];var f=d.id;a=this.getRowData(this.options.formUuid,f);e.push(a)}return e},collectSubformDisplayData:function(){var e=[];var b=this.options.$paranentelement.$("#"+this.options.formUuid).jqGrid("getRowData");for(var c=0;c<b.length;c++){var a={};var d=b[c];var f=d.id;a=this.getRowDisplayData(this.options.formUuid,f);e.push(a)}return e},getDeleteRows:function(){data=this.$element.data(cacheType.deletedFormDataOfSubform);if(typeof data=="undefined"){data=[]}return data},cacheDeleteRow:function(b){var a=this.$element.data(cacheType.deletedFormDataOfSubform);if(typeof a=="undefined"){a=[]}a.push(b.dataUuid);this.$element.data(cacheType.deletedFormDataOfSubform,a)},validate:function(){var a=true;var i=this.options.$paranentelement.$("#"+this.options.formUuid).jqGrid("getRowData");var l=this.options.$paranentelement.$("#"+this.options.formUuid).jqGrid("getGridParam","colModel");for(var e=0;e<i.length;e++){var g=i[e];var c=g.id;for(var d=0;d<l.length;d++){var h=l[d];var n=h.name;if(!this.isControlFieldInSubform(n)){continue}var b=this.getCellId(c,n);var f=$.ControlManager.getCtl(b);var m=f.validate();a=a&&m}}return a},fillFormData:function(d){var c=this;if(typeof d!="undefined"&&d.length>0){this.clearSubform()}for(var a=0;a<d.length;a++){var b=d[a];b.id=b.uuid;c.addRowData(c.options.formUuid,b,true,false)}this.updateSeqNo(c.options.formUuid)},clearSubform:function(){var a=this.options.formUuid;$("#"+a).jqGrid("clearGridData")},setReadOnly:function(){this.hideOperateBtn();this.options.readOnly=true;this.invokeCommonMethod("setReadOnly",true)},isReadOnly:function(){return this.options.readOnly==true},hideOperateBtn:function(){var a="operateBtn"+this.options.formUuid;$("#"+a).hide()},showOperateBtn:function(){if(this.isReadOnly()){return}var a="operateBtn"+this.options.formUuid;$("#"+a).show()},setTextFile2SWF:function(){var n=this.options.$paranentelement;var k=this.options.formUuid;var l=this.options.subformDefinition;var f=this.options.$paranentelement.$("#"+k).jqGrid("getRowData");var g=n.$("#"+k).jqGrid("getGridParam","colModel");for(var e=0;e<f.length;e++){var d=f[e];var a=d.id;for(var b=0;b<g.length;b++){var m=g[b].name;if(!l.isInputModeAsAttach(m)){continue}var h=this.getCellId(a,m);var c=$.ControlManager.getCtl(h);if(typeof paramters=="undefined"){c.setTextFile2SWF()}else{c.setTextFile2SWF(paramters)}}}},enableSignature:function(f){var o=this.options.$paranentelement;var l=this.options.formUuid;var m=this.options.subformDefinition;var g=this.options.$paranentelement.$("#"+l).jqGrid("getRowData");var h=o.$("#"+l).jqGrid("getGridParam","colModel");for(var e=0;e<g.length;e++){var d=g[e];var a=d.id;for(var b=0;b<h.length;b++){var n=h[b].name;if(!m.isInputModeAsAttach(n)){continue}var k=this.getCellId(a,n);var c=$.ControlManager.getCtl(k);if(typeof paramters=="undefined"){c.enableSignature()}else{c.enableSignature(paramters)}}}},setEditable:function(){this.options.readOnly=false;var b=this.options.formUuid;var a=this.options.$paranentelement;if(a.$("#gbox_"+b+" .collapsesubform ").attr("id")=="notOpenDiv"){this.hideOperateBtn()}else{this.showOperateBtn()}},setDisplayAsLabel:function(){this.options.readOnly=true;this.hideOperateBtn();this.invokeCommonMethod("setDisplayAsLabel")},invokeCommonMethod:function(k,a){var o=this.options.$paranentelement;var m=this.options.formUuid;var g=this.options.$paranentelement.$("#"+m).jqGrid("getRowData");var h=o.$("#"+m).jqGrid("getGridParam","colModel");for(var f=0;f<g.length;f++){var e=g[f];var b=e.id;for(var c=0;c<h.length;c++){var n=h[c].name;if(!this.isControlFieldInSubform(n)){continue}var l=this.getCellId(b,n);var d=$.ControlManager.getCtl(l);if(typeof d=="undefined"||d==null){continue}if(typeof a=="undefined"){d[k]()}else{d[k](a)}}}},hide:function(){var a=this.options.formUuid;$("#gbox_"+a).hide()},show:function(){var a=this.options.formUuid;$("#gbox_"+a).show()},$thisContext:function(){var a=this.options.formUuid;return $("#gbox_"+a)},group:function(){if(!this.options.groupField){return}console.log("");var b=this.options.formUuid;var a=this.collectSubformData();$("#"+b).jqGrid("clearGridData");this.fillFormData(a)},isFieldHidden:function(b){var a=((typeof b.hidden)=="undefined"?false:(dySubFormFieldShow.notShow==b.hidden));return a},isFieldEditable:function(b){var a=((typeof b.editable)=="undefined"?true:(dySubFormFieldEdit.notEdit!=b.editable));return a},definiteCollapse:function(b){var a=this.$thisContext();var c=this;a.$(".ui-jqgrid-titlebar-close").hide();a.$(".collapsesubform").unbind("click");a.$(".collapsesubform").bind("click",function(){var d=$(this).parent().parent().siblings();var e=$(this).attr("id");if(e=="openDiv"){d.hide();$(this).attr("id","notOpenDiv");c.hideOperateBtn()}else{d.show();c.showOperateBtn();$(this).attr("id","openDiv")}$(window).trigger("resize")});if(b==dySubFormTableOpen.notOpen){this.collapse()}else{this.expand()}},collapse:function(){var b=this.options.formUuid;var a=this.options.$paranentelement;if(a.$("#gbox_"+b+" .collapsesubform ").attr("id")=="openDiv"){a.$("#gbox_"+b+" .collapsesubform ").trigger("click")}},expand:function(){var b=this.options.formUuid;var a=this.options.$paranentelement;if(a.$("#gbox_"+b+" .collapsesubform ").attr("id")=="notOpenDiv"){a.$("#gbox_"+b+" .collapsesubform ").trigger("click")}},hideColumn:function(a){this.options.$paranentelement.$("#"+this.options.formUuid).jqGrid("hideCol",a)},showColumn:function(a){this.options.$paranentelement.$("#"+this.options.formUuid).jqGrid("showCol",a)},setColumnAsLabel:function(e){var d=this.options.formUuid;var a=this.options.$paranentelement;var c=a.$("#"+d).jqGrid("getGridParam","colModel");for(var b=0;b<c.length;b++){if(c[b].name==e){c[b].editable=false;break}}},setColumnEditable:function(e){var d=this.options.formUuid;var a=this.options.$paranentelement;var c=a.$("#"+d).jqGrid("getGridParam","colModel");for(var b=0;b<c.length;b++){if(c[b].name==e){c[b].editable=true}}},setColumnCtl:function(f,a){if(typeof a=="undefined"||a==null){a=true}var e=this.options.formUuid;var b=this.options.$paranentelement;var d=b.$("#"+e).jqGrid("getGridParam","colModel");for(var c=0;c<d.length;c++){if(d[c].name==f){d[c].controlable=true}}},setGridWidth:function(b){var c=this.options.formUuid;var a=this.options.$paranentelement;a.$("#"+c).jqGrid("setGridWidth",b)},getLastFormContainerWidth:function(){return this.lastFormContainerWidth},setParentWidth:function(a){this.options.$parent.css("width",a)},setParentPadding:function(a){this.options.$parent.css("padding",a)},setLastParentWidth:function(){this.lastParentWidth=this.options.$parent.width()},getLastParentWidth:function(){return this.lastParentWidth},setLastFormContainerWidth:function(){var a=this.options.$paranentelement;this.lastFormContainerWidth=a.width();this.setLastParentWidth()},resetGridWidth:function(){var a=this.options.$paranentelement;var c=a.width();var b=this.options.$parent.css("padding-left");b=b.replace("p","").replace("x","");b=parseInt(b,10);var f=this.options.$parent.css("padding-right");f=f.replace("p","").replace("x","");f=parseInt(f,10);if(this.lastFormContainerWidth!=c){var e=(c*1.1)/(this.lastFormContainerWidth*1.1);var d=this.getLastParentWidth()*e;d=d+b+f;if(e>1){this.setGridWidth(d)}else{this.setGridWidth(d-2)}if(this.options.$parent[0].tagName.toLowerCase()!="form"){this.setParentPadding("0");this.setParentWidth(d)}this.setLastFormContainerWidth()}else{if(this.options.$parent[0].tagName.toLowerCase()!="form"){this.setParentPadding("0")}var d=this.getLastParentWidth();d=d+b+f;this.setGridWidth(d-2);this.lastParentWidth=d}},addFormula:function(b,a){$.ControlManager.registFormula(a)},createControl:function(a,e,c,d,g,b){e.pos=dyControlPos.subForm;e.data=d;e.dataUuid=g;$.ControlManager.createCtl(a,e,c);var f=$.ControlManager.getCtl(a.attr("name"));if(f==undefined){return}if(f.isAttachCtl&&f.isAttachCtl()){f.setDisplayAsLabel()}f.setValidateGroup({groupName:b.name,groupUsed:"uniqueGroup"});this.addControlUrl(f,g);this.setBlurPartOfSwitch(f,b);return f},registFormula:function(d){var a=this.options.$paranentelement;var c=a.cache.get.call(a,cacheType.formula);var h=this.options.subformDefinition.outerId;var b=d.getDataUuid();var i=d.getFieldName();var f="${"+h+":"+i+"}";var e=d.getCtlName();var g=c[f];if(typeof g!="undefined"){if(d.addAllFormulas){d.addAllFormulas(f,g)}}var g=c[e];if(typeof g!="undefined"){if(d.addAllFormulas){d.addAllFormulas(e,g)}}},setModelWidth:function(a,b){if((typeof b)!="undefined"&&b!=null&&b.length>0){a.width=b;if(a.width.indexOf("px")==-1){a.width+="px"}}},getAutoWidth:function(){if(typeof this.options.autoWidth=="undefined"||this.options.autoWidth=="true"||this.options.autoWidth==true){return true}else{return false}}}});function mouseEvent(a){var d=a.currentTarget;var c=d.getBoundingClientRect();var b=(a.clientX>=c.left&&a.clientX<=(c.left+$(d).width()*2));b=b&&(a.clientY>=c.top&&a.clientY<=(c.bottom));if(!b){return false}else{return true}}var cellcount=0;var rowcount=0;
;
(function(b){var a=function(d,c){this.$element=b(d);this.options=b.extend({},b.fn.wsubForm.defaults,c,this.$element.data())};a.prototype={constructor:a,init:function(){var l=this;this.$element.hide();var s=this.options.$paranentelement;this.setLastFormContainerWidth();var c=this.$element.next();var t=this.options.formUuid;var D=this.options.formDefinition.subforms[t];if(D==null){c.remove();return true}c.attr("id",t);var y=this.options.subformDefinition;if(y==null){c.remove();return true}var k=D.displayName;var N=[];var K=[];N.push("id");K.push({name:"id",index:"id",hidden:true});N.push("parent_uuid");K.push({name:"parent_uuid",index:"parent_uuid",hidden:true});N.push("");K.push({name:"seqNO",index:"seqNO",width:"35px",fixed:true,align:"center",sortable:false});var d=this.options.formDefinition.sortFieldsOfSubform(t,false);for(var M in d){var o=d[M];N.push(o.displayName);var f=this.getJqGridColModel(d[o.name]);f.editable=this.isFieldEditable(o);f.sortable=(typeof o.sortable)=="undefined"?false:o.sortable;f.hidden=this.isFieldHidden(o);f.controlable=(o.controlable&&o.controlable==dySubFormFieldCtl.control)?true:false;this.setModelWidth(f,o.width);K.push(f);var p=o.formula;if(typeof p!="undefined"&&b.trim(p).length>0){this.addFormula(o.name,p)}}var C="";for(var M=0;M<K.length;M++){var r=K[M].hidden;var q=K[M].name;if(typeof r=="undefined"||r==false){C=q;break}}var J="operateBtn"+t;var B="btn_add_"+t;var m="btn_edit_"+t;var n="btn_del_"+t;var h="btn_up_"+t;var j="btn_down_"+t;var I="btn_add_sub_"+t;var u="btn_exp_subform_"+t;var F="btn_imp_subform_"+t;var z=this.options;if(z.readOnly){}else{if(D.hideButtons==dySubFormHideButtons.show){var A='<button  id="'+B+'"   >'+dybtn.add+"</button>";var G="";if(D.supportSubRow){G='<button  id="'+I+'"   >'+dybtn.addSub+"</button>"}var O="";if(D.showExpButton=="true"||D.showExpButton==true){O='<button  id="'+u+'">'+dybtn.exp+"</button>"}var g="";if(D.showImpButton=="true"||D.showImpButton==true){g='<button  id="'+F+'" >'+dybtn.imp+"</button>"}var E='<button  id="'+m+'"   >'+dybtn.edit+"</button>";var L='<button id="'+n+'" >'+dybtn.del+"</button>";var e='<button id="'+h+'" ></button>';var x='<button id="'+j+'" ></button>';var w='<span id="'+J+'">';var v="</span>";var H="&nbsp;&nbsp;&nbsp;&nbsp;";if(D.editMode==dySubFormEdittype.newWin){k+=w+H+A+H+G+H+E+H+L+H+g+H+O+v;s.$("#"+B).live("click",function(i){if(!mouseEvent(i)){return false}try{l.editSubformRowDataInDialog(D,{})}catch(P){console.log(P)}return false});s.$("#"+F).live("click",function(P){if(!mouseEvent(P)){return false}try{var i=this.form.id;window.excelImp4MainForm(i)}catch(Q){console.log(Q)}return false});s.$("#"+u).live("click",function(P){if(!mouseEvent(P)){return false}try{var i=this.form.id;window.excelExp4MainFormEx(i,D.outerId)}catch(Q){console.log(Q)}return false});s.$("#"+I).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert(dymsg.selectRecordModErr);return false}var P=l.getRowData(t,i);l.editSubformRowDataInDialog(D,{},P)}catch(Q){console.log(Q)}return false});s.$("#"+m).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert(dymsg.selectRecordModErr);return false}var P=l.getRowData(t,i);l.editSubformRowDataInDialog(D,P)}catch(Q){console.log(Q)}return false})}else{k+=w+H+A+H+G+H+L+H+e+H+x+H+g+H+O+v;s.$("#"+B).live("click",function(i){if(!mouseEvent(i)){return false}try{l.addSubformRowDataInJqGrid(t)}catch(P){console.log(P)}return false});s.$("#"+F).live("click",function(P){if(!mouseEvent(P)){return false}try{var i=this.form.id;window.excelImp4MainForm(i)}catch(Q){console.log(Q)}return false});s.$("#"+u).live("click",function(P){if(!mouseEvent(P)){return false}try{var i=this.form.id;window.excelExp4MainFormEx(i,D.outerId)}catch(Q){console.log(Q)}return false});s.$("#"+I).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert(dymsg.selectRecordModErr);return false}var P=l.getRowData(t,i);l.addSubformRowDataInJqGrid(t,P)}catch(Q){console.log(Q)}return false})}s.$("#"+n).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert(dymsg.selectRecordModErr);return false}l.deleteSubformRowDataEvent(t,i)}catch(P){console.log(P)}return false});s.$("#"+h).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert("");return false}if(!D.supportSubRow){l.upSubformRowDataEvent(t,i)}}catch(P){console.log(P)}return false});s.$("#"+j).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert("");return false}if(!D.supportSubRow){l.downSubformRowDataEvent(t,i)}}catch(P){console.log(P)}return false})}}c.jqGrid({datatype:"jsonstring",datastr:[],autowidth:true,colNames:N,colModel:K,ExpandColumn:C,treeGrid:true,treeGridModel:"adjacency",shrinkToFit:this.getAutoWidth(),loadui:"disable",rowNum:10000,jsonReader:{repeatitems:false,root:"response"},loadComplete:function(){},caption:"<span class='collapsesubform' id='openDiv'></span>"+k,gridComplete:function(){},afterInsertRow:function(i,Q,P){l.initRowControls(t,i,Q);l.invoke("afterInsertRow",Q)},onCellSelect:function(Q,X,U,T){if((z.readOnly)||D.editMode==dySubFormEdittype.newWin||D.hideButtons!=dySubFormHideButtons.show){return}var V=b(this).jqGrid("getGridParam","colModel");var W=V[X];var Y=W.name;if(!l.isControlFieldInSubform(Y)){return}if(!W.editable){return}var P=l.getCellId(Q,Y);var S=b.ControlManager.getCtl(P);if(S==undefined){return}if(S.isReadOnly&&S.isReadOnly()){return}S.setEditable();if(S.getAllOptions().commonProperty.inputMode==dyFormInputMode.checkbox||S.getAllOptions().commonProperty.inputMode==dyFormInputMode.radio){return}if(!l.options.readOnly){var R=S.getCtlElement()[0];R.focus();var i=R.getAttribute("focused");if(typeof i=="undefined"||i==null){R.setAttribute("focused",true);R.focus()}R.click()}l.invoke("onCellSelect",Q,X,U)},onSelectRow:function(i){l.selectedRowId=i;s.$("#"+I).attr("selectedRowId",i);s.$("#"+m).attr("selectedRowId",i);s.$("#"+n).attr("selectedRowId",i);s.$("#"+h).attr("selectedRowId",i);s.$("#"+j).attr("selectedRowId",i);l.invoke("onSelectRow",i)}});this.definiteCollapse(D.tableOpen);this.resetGridWidth()}};b.fn.wsubForm=function(d){var g=false;var c=null;if(arguments.length==2){g=true;c=arguments[1]}if(typeof d=="string"){if(d==="getObject"){var f=b(this);var e=f.data("wsubForm");if(e){return e}else{throw new Error("This object is not available")}}}return this.each(function(){var k=b(this),j=k.data("wsubForm"),i=typeof d=="object"&&d;if(!j){j=new a(this,i);var h=b.extend(j,b.wSubFormMethod);h.init();k.data("wsubForm",h)}if(typeof d=="string"){if(g==true&&c!=null){return j[d](c)}else{return j[d]()}}})};b.fn.wsubForm.Constructor=a;b.fn.wsubForm.defaults={$paranentelement:{},formDefinition:"",subformDefinition:"",readOnly:false,mainformDataUuid:"",formUuid:""}})(jQuery);
;
var data={};(function(b){var a=function(d,c){this.$element=b(d);this.options=b.extend({},b.fn.wsubForm4Group.defaults,c,this.$element.data())};a.prototype={constructor:a,count:0,init:function(){var A=this;this.$element.hide();var k=this.options.$paranentelement;this.setLastFormContainerWidth();var c=this.$element.next();var w=this.options.formUuid;var t=this.options.formDefinition.subforms[w];if(t==null){c.remove();return true}c.attr("id",w);var v=this.options.subformDefinition;if(v==null){c.remove();return true}var y=t.displayName;var s=[];var z=[];s.push("id");z.push({name:"id",index:"id",hidden:true});s.push("parent_uuid");z.push({name:"parent_uuid",index:"parent_uuid",hidden:true});s.push("");z.push({name:"seqNO",index:"seqNO",width:"35px",fixed:true,align:"center",sortable:false});var x=this.options.formDefinition.sortFieldsOfSubform(w,false);for(var C in x){var h=x[C];s.push(h.displayName);var m=this.getJqGridColModel(x[h.name]);m.editable=this.isFieldEditable(h);m.sortable=(typeof h.sortable)=="undefined"?false:h.sortable;m.controlable=(h.controlable&&h.controlable==dySubFormFieldCtl.control)?true:false;m.hidden=this.isFieldHidden(h);this.setModelWidth(m,h.width);z.push(m);var d=h.formula;if(typeof d!="undefined"&&b.trim(d).length>0){this.addFormula(h.name,d)}}var r="";for(var C=0;C<z.length;C++){var B=z[C].hidden;var H=z[C].name;if(typeof B=="undefined"||B==dySubFormFieldShow.show){r=H;break}}var D="operateBtn"+w;var u="btn_add_"+w;var F="btn_edit_"+w;var E="btn_del_"+w;var g="btn_refresh_"+w;var f="btn_add_sub_"+w;var l=this.options;if(l.readOnly){}else{if(t.hideButtons==dySubFormHideButtons.show){var j='<button  id="'+u+'"   >'+dybtn.add+"</input>";var o='<button  id="'+F+'"   >'+dybtn.edit+"</input>";var G='<button id="'+E+'" >'+dybtn.del+"</button>";var q='<button id="'+g+'" ></button>';var p='<span id="'+D+'">';var n="</span>";var e="&nbsp;&nbsp;&nbsp;&nbsp;";if(t.editMode==dySubFormEdittype.newWin){y+=p+e+j+e+e+o+e+G+q+n;k.$("#"+u).live("click",function(i){if(!mouseEvent(i)){return false}try{A.editSubformRowDataInDialog(t,{})}catch(I){console.log(I)}return false});k.$("#"+g).live("click",function(){try{var I=A.options.formUuid;var i=A.collectSubformData();b("#"+I).jqGrid("clearGridData");A.fillFormData(i)}catch(J){console.log(J)}return false});k.$("#"+F).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert(dymsg.selectRecordModErr);return false}var I=A.getRowData(w,i);A.editSubformRowDataInDialog(t,I)}catch(J){console.log(J)}return false})}else{y+=p+e+j+e+e+G+q+n;k.$("#"+u).live("click",function(i){if(!mouseEvent(i)){return false}try{A.addSubformRowDataInJqGrid(w)}catch(I){console.log(I)}return false});k.$("#"+g).live("click",function(){try{var I=A.options.formUuid;var i=A.collectSubformData();b("#"+I).jqGrid("clearGridData");A.fillFormData(i)}catch(J){console.log(J)}return false})}k.$("#"+E).live("click",function(){try{var i=b(this).attr("selectedrowid");if(typeof i=="undefined"||i==null||i.lengh==0){oAlert(dymsg.selectRecordModErr);return false}A.deleteSubformRowDataEvent(w,i)}catch(I){console.log(I)}return false})}}c.jqGrid({data:[],datatype:"local",height:"auto",rownumbers:true,rowList:[1000],rowNum:1000,autowidth:true,shrinkToFit:this.getAutoWidth(),colNames:s,colModel:z,grouping:true,groupingView:{groupField:[A.options.groupField],groupColumnShow:[A.options.groupColumnShow]},afterEditCell:function(){},loadComplete:function(){},caption:"<span class='collapsesubform' id='openDiv'></span>"+y,gridComplete:function(){},afterInsertRow:function(i,J,I){if(J.controlable!=false){A.initRowControls(w,i,J)}A.invoke("afterInsertRow",J)},onCellSelect:function(J,Q,N,M){if((l.readOnly)||t.editMode==dySubFormEdittype.newWin||t.hideButtons!=dySubFormHideButtons.show){return}var O=b(this).jqGrid("getGridParam","colModel");var P=O[Q];var R=P.name;if(!A.isControlFieldInSubform(R)){return}if(!P.editable){return}var I=A.getCellId(J,R);var L=b.ControlManager.getCtl(I);if(L==undefined){return}if(L.isReadOnly&&L.isReadOnly()){return}L.setEditable();var K=L.getCtlElement()[0];if(L.getAllOptions().commonProperty.inputMode==dyFormInputMode.checkbox||L.getAllOptions().commonProperty.inputMode==dyFormInputMode.radio){return}if(!A.options.readOnly){try{K.focus();var i=K.getAttribute("focused");if(typeof i=="undefined"||i==null){K.setAttribute("focused",true);K.focus()}}catch(M){}}A.invoke("onCellSelect",J,Q,N)},onSelectRow:function(i){A.selectedRowId=i;k.$("#"+f).attr("selectedRowId",i);k.$("#"+F).attr("selectedRowId",i);k.$("#"+E).attr("selectedRowId",i);A.invoke("onSelectRow",i)}});this.definiteCollapse(t.tableOpen);this.resetGridWidth()},addRowData:function(e,f,c){if(typeof c=="undefined"){c=true}var d=e;if(arguments.length==1){e=this.options.formUuid;f=d}f.controlable=c;if(typeof f.id=="undefined"){f.id=this.createUuid()}if(typeof f.level=="undefined"){f.level="0"}if(typeof f.parent_uuid=="undefined"){f.parent_uuid=""}if(typeof f.isLeaf=="undefined"){f.isLeaf=true}if(typeof f.expanded=="undefined"){f.expanded=true}if(typeof f.loaded=="undefined"){f.loaded=true}this.options.$paranentelement.$("#"+e).jqGrid("addChildNode",f.id,f.parent_uuid,f);if(typeof c!="undefined"&&c==false){}else{this.updateSeqNo(e,f.id)}},updateSeqNo:function(e,d){var f=this.options.$paranentelement.$("#"+e).jqGrid("getRowData");var c=f.length-1;this.options.$paranentelement.$("#"+e).jqGrid("setCell",d,"seqNO",c+1)},fillFormData:function(j){for(var f=0;f<j.length;f++){var c=j[f];c.id=c.uuid;this.addRowData(this.options.formUuid,c,false)}var d=this.options.groupField;var o=this.options.formUuid;b("#"+o).jqGrid("groupingGroupBy",d,{groupOrder:[this.options.groupOrder],groupColumnShow:[this.options.groupColumnShow],groupCollapse:this.options.groupCollapse});var k=(new Date()).getTime();var l=b("#"+o).jqGrid("getGridParam","colModel");var p=this.options.subformDefinition;var g=this;var e=b("#"+o).jqGrid("getRowData");for(var f=0;f<j.length;f++){var q=j[f];jQuery(e).each(function(){if(q.id!=this.id){return true}var r=this.id;var t="";for(var v=0;v<l.length;v++){var x=l[v];var z=x.name;if(!g.isControlFieldInSubform(z)){continue}var i=g.getCellId(r,z);var u=p.fields[z];if(typeof u=="undefined"){continue}var A=q[z];var w=g.createControl(b(".value[name='"+i+"']"),u,p,A,r,x);if(z==d){var y=w.isValueMap();if(y){t=w.getDisplayValue()}else{t=A}}}if(b("#"+r).prev().is("tr[id*=ghead]")){var s=b("#"+r).prev().find("span");b(s).after("<span>"+t+"</span>")}})}var h=(new Date()).getTime();console.log(":"+(h-k)/1000+"s");var n=(new Date()).getTime();var f=0;var e=b("#"+o).jqGrid("getRowData");jQuery(e).each(function(){var i=this.id;g.options.$paranentelement.$("#"+o).jqGrid("setCell",i,"seqNO",f+1);f++});var m=(new Date()).getTime();console.log(":"+(m-n)/1000+"s")}};b.fn.wsubForm4Group=function(d){var g=false;var c=null;if(arguments.length==2){g=true;c=arguments[1]}if(typeof d=="string"){if(d==="getObject"){var f=b(this);var e=f.data("wsubForm4Group");if(e){return e}else{throw new Error("This object is not available")}}}return this.each(function(){var l=b(this),k=l.data("wsubForm4Group"),i=typeof d=="object"&&d;if(!k){k=new a(this,i);var n={};var h=b.extend(n,k);var j=b.extend(k,b.wSubFormMethod);var m=b.extend(j,h);m.init();l.data("wsubForm4Group",m)}if(typeof d=="string"){if(g==true&&c!=null){return k[d](c)}else{return k[d]()}}})};b.fn.wsubForm4Group.Constructor=a;b.fn.wsubForm4Group.defaults={$paranentelement:{},formDefinition:"",subformDefinition:"",readOnly:false,mainformDataUuid:"",formUuid:"",groupField:"",groupOrder:"asc",groupColumnShow:true,groupCollapse:false}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(f,e){this.$element=d(f);this.options=d.extend({},d.fn.wfileUpload.defaults,e,this.$element.data());this.$editableElem=null;this.$labelElem=null;this.$placeHolder=this.$element};a.prototype={constructor:a,init:function(){d.ControlUtil.setCommonCtrAttr(this.$element,this.options);this.$element.attr("id",this.$element.attr("name"));var i=this.options.allowDownload;var l=this.options.allowDelete;var j=this.options.mutiselect;var h=false;h=!this.options.allowUpload;var k=this.options.columnProperty.showType;if(k){if(k==dyshowType.showAsLabel||k==dyshowType.readonly||k==dyshowType.disabled){h=true}else{h=false}}this.$element.hide();var g=this.$element.attr("id");var n="<div id='_fileupload"+g+"'></div>";this.$element.after(n);var f=d("#_fileupload"+g);var m=WellFileUpload.getCtlID4Dytable(this.options.mainTableName,g,0);this.fileuploadobj=new WellFileUpload(m);var e=[];if(this.options.columnProperty.data){e=this.options.columnProperty.data}this.fileuploadobj.init(h,f,this.options.enableSignature,j,e)},setVisible:function(e){d.ControlUtil.setVisible(this.$element,e);this.options.isHide=!e},getFieldName:function(){return this.options.columnProperty.columnName}};d.fn.wfileUpload=function(f){var i=false;var e=null;if(arguments.length==2){i=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var h=d(this);var g=h.data("wfileUpload");if(g){return g}else{throw new Error("This object is not available")}}}return this.each(function(){var m=d(this),l=m.data("wfileUpload"),k=typeof f=="object"&&f;if(!l){l=new a(d(this),k);var j=d.extend(l,d.wFileUploadMethod);j.init();m.data("wfileUpload",j)}if(typeof f=="string"){if(i==true&&e!=null){return l[f](e)}else{return l[f]()}}})};d.fn.wfileUpload.Constructor=a;d.fn.wfileUpload.defaults={columnProperty:c,commonProperty:b,isHide:false,mainTableName:"",formSign:"",enableSignature:false,allowUpload:true,allowDownload:true,allowDelete:true,mutiselect:true}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(f,e){this.$element=d(f);this.options=d.extend({},d.fn.wfileUpload4Image.defaults,e,this.$element.data());this.$editableElem=null;this.$labelElem=null;this.$placeHolder=this.$element};a.prototype={constructor:a,init:function(){d.ControlUtil.setCommonCtrAttr(this.$element,this.options);this.$element.attr("id",this.$element.attr("name"));var i=this.options.allowDownload;var l=this.options.allowDelete;var j=false;var h=false;h=!this.options.allowUpload;this.$element.hide();var g=this.$element.attr("id");var o="<div id='_fileupload"+g+"'></div>";this.$element.after(o);var f=d("#_fileupload"+g);var m=WellFileUpload.getCtlID4Dytable(this.options.mainTableName,g,0);this.fileuploadobj=new WellFileUpload4Image(m);var k=this.options.commonProperty.ctlWidth;var n=this.options.commonProperty.ctlHight;var e=[];if(this.options.columnProperty.data){e=this.options.columnProperty.data}this.fileuploadobj.init(h,f,this.options.enableSignature,j,e,k,n)}};d.fn.wfileUpload4Image=function(f){var i=false;var e=null;if(arguments.length==2){i=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var h=d(this);var g=h.data("wfileUpload4Image");if(g){return g}else{throw new Error("This object is not available")}}}return this.each(function(){var m=d(this),l=m.data("wfileUpload4Image"),k=typeof f=="object"&&f;if(!l){l=new a(this,k);var j=d.extend(l,d.wFileUploadMethod);j.init();m.data("wfileUpload4Image",j)}if(typeof f=="string"){if(i==true&&e!=null){return l[f](e)}else{return l[f]()}}})};d.fn.wfileUpload4Image.Constructor=a;d.fn.wfileUpload4Image.defaults={columnProperty:c,commonProperty:b,isHide:false,mainTableName:"",formSign:"",enableSignature:"",allowUpload:true,allowDownload:true,allowDelete:true,mutiselect:true}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(f,e){this.$element=d(f);this.options=d.extend({},d.fn.wfileUpload4Icon.defaults,e,this.$element.data())};a.prototype={constructor:a,init:function(){d.ControlUtil.setCommonCtrAttr(this.$element,this.options);this.$element.attr("id",this.$element.attr("name"));var h=false;if(this.options.columnProperty.showType==2){h=true}var k=this.options.allowUpload;var j=this.options.allowDownload;var g=this.options.allowDelete;this.$element.hide();var l=this.$element.attr("id");var e="<div id='_fileupload"+l+"'></div>";this.$element.after(e);var i=d("#_fileupload"+l);var f=WellFileUpload.getCtlID4Dytable(this.options.mainTableName,l,0);this.fileuploadobj=new WellFileUpload4Icon(f,iconFileControlStyle.OnlyIcon);if(this.getDataUuid()!=""&&this.getDataUuid()!=undefined){this.fileuploadobj.initWithLoadFilesFromFileSystem(k,j,i,this.options.enableSignature,this.getDataUuid(),l)}else{this.fileuploadobj.init(k,j,i,this.options.enableSignature,[])}},};d.fn.wfileUpload4Icon=function(f){var i=false;var e=null;if(arguments.length==2){i=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var h=d(this);var g=h.data("wfileUpload4Icon");if(g){return g}else{throw new Error("This object is not available")}}}return this.each(function(){var m=d(this),l=m.data("wfileUpload4Icon"),k=typeof f=="object"&&f;if(!l){l=new a(this,k);var j=d.extend(l,d.wFileUploadMethod);j.init();m.data("wfileUpload4Icon",j)}if(typeof f=="string"){if(i==true&&e!=null){return l[f](e)}else{return l[f]()}}})};d.fn.wfileUpload4Icon.Constructor=a;d.fn.wfileUpload4Icon.defaults={columnProperty:c,commonProperty:b,isHide:false,mainTableName:"",formSign:"",enableSignature:"",allowUpload:true,allowDownload:true,allowDelete:true,mutiselect:true}})(jQuery);
;
(function(d){var b={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var a={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var c=function(e,f){this.options=d.extend({},d.fn.wcomboTree.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};c.prototype={constructor:c};d.ComboTree={createEditableElem:function(){if(this.$editableElem!=null){return}var g=this.options;var i=this.getCtlName();var f=document.createElement("input");f.setAttribute("class",this.editableClass);f.setAttribute("name",i);f.setAttribute("id",i);f.setAttribute("type","text");d(f).css(this.getTextInputCss());this.$placeHolder.after(d(f));this.$editableElem=this.$placeHolder.next("."+this.editableClass);this.$editableElem.addClass("input-tier");var r=i;var v="";var l=this.options.serviceName;var h=l.split(".")[0];var e=l.split(".")[1].split("(")[0];var q=l.split(".")[1].split("(")[1].replace(")","");var t=q.split(",")[0];t=t.replace("'","").replace("'","");var j=g.mutiSelect;this.$editableElem.after("<input type='hidden' id='_"+r+"' name='_"+r+"' value=''>");this.$_editableElem=this.$editableElem.next();var k=t.replace(/\|+/g,"");this.$editableElem.after("<input type='hidden' id='"+k+"'  value='"+t.replace(/\|+/g,",")+"'>");var p=true;if(e[0]=="getFormDataAsTree"){p=false}else{p=true}var o=new Array();if(d("#"+k).val().split(",").length>1){var u=d("#"+k).val().split(",");for(var s=0;s<u.length;s++){o.push(u[s])}}else{if(d("#"+k).val().indexOf("${data}")>0){o.push(d("#data").val())}else{o.push(d("#"+k).val())}}var n=this;var m={async:{otherParam:{serviceName:h,methodName:e,data:o}},view:{showLine:true},check:{enable:j},src:"control",callback:{onClick:function(x,z,y){if(n.options.mutiSelect){return}var w=z.replace("_ztree","");if(typeof(y.data)=="object"){d("#"+w).val(y.name);d("#_"+w).val(y.data.reservedText1+";"+y.name)}else{d("#"+w).val(y.name);d("#_"+w).val(y.data)}n.setValue2Object()},onCheck:function(w,y,x){if(!n.options.mutiSelect){return}n.setValue2Object()}}};this.$_editableElem.val(g.columnProperty.defaultValue);this.$editableElem.comboTree({labelField:r,valueField:"_"+r,width:g.treeWidth,height:g.treeHeight,treeSetting:m,initService:g.initService,initServiceParam:g.initServiceParam});var n=this;this.$editableElem.keyup(function(){var w={};w[d(this).val()]=d(this).val();n.setValueByMap(JSON.stringify(w),false)});this.$editableElem.bind("paste",function(){var w=this;window.setTimeout(function(){var x={};x[d(w).val()]=d(w).val();n.setValueByMap(JSON.stringify(x),false)},100)})},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.getDisplayValue())},setValue2EditableElem:function(){if(this.$editableElem==null){return}this.$_editableElem.val(this.getValue());this.$editableElem.val(this.getDisplayValue())},isValueMap:function(){return true},setValue:function(h){var f=this.options;if(h.length>0){var e=null;if(h.indexOf(",")!=-1){e=h.split(",")}else{e=h.split(";")}var j={};for(var g=0;g<e.length;g++){j[e[g]]=e[g]}this.setValueByMap(JSON.stringify(j))}},setValue2Object:function(){var k=this.$_editableElem.val();if(k.length==0){this.setValueByMap("");return}var h=this.$editableElem.val();var f=k.split(";");var j=h.split(";");if(f.length!=j.length){throw new Error("!")}var e={};for(var g=0;g<f.length;g++){e[f[g]]=j[g]}this.setValueByMap(JSON.stringify(e))}};d.fn.wcomboTree=function(f){var h=false;var e=null;if(arguments.length==2){h=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var g=d(this);data=g.data("wcomboTree");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var k=d(this),j=k.data("wcomboTree"),i=typeof f=="object"&&f;if(!j){j=new c(d(this),i);d.extend(j,d.wControlInterface);d.extend(j,d.wTextCommonMethod);d.extend(j,d.ComboTree);j.init();k.data("wcomboTree",j)}if(typeof f=="string"){if(h==true&&e!=null){return j[f](e)}else{return j[f]()}}})};d.fn.wcomboTree.Constructor=c;d.fn.wcomboTree.defaults={columnProperty:b,commonProperty:a,disabled:false,readOnly:false,isShowAsLabel:false,isHide:false,serviceName:null,treeWidth:220,treeHeight:220,mutiSelect:true,realDisplay:{},initService:"dataDictionaryService.getKeyValuePair",initServiceParam:["DY_FORM_FIELD_MAPPING"],isinitTreeById:false}})(jQuery);
;
(function(d){var c={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var b={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var a=function(e,f){this.options=d.extend({},d.fn.wembedded.defaults,f);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=e};a.prototype={constructor:a,};d.Embedded={createEditableElem:function(){if(this.$editableElem!=null){return}var g=this.options;var e=this.getCtlName();var f=document.createElement("input");f.setAttribute("class",this.editableClass);f.setAttribute("name",e);f.setAttribute("type","text");f.setAttribute("maxlength",g.columnProperty.length);this.$placeHolder.after(d(f));this.$editableElem=this.$placeHolder.next("."+this.editableClass);var h=this;this.$editableElem.keyup(function(i){h.setValue(h.$editableElem.val(),false)});this.$editableElem.bind("paste",function(i){window.setTimeout(function(){h.setValue(h.$editableElem.val(),false)},100)});this.$editableElem.bind("change",function(){h.setValue(h.$editableElem.val(),false)})},setDisplayAsLabel:function(){var f=this.options;if(this.$labelElem==null){var e=document.createElement("iframe");e.setAttribute("class",this.labelClass);e.setAttribute("name",this.getCtlName());d(e).css("border","0");this.$placeHolder.after(d(e));this.$labelElem=this.$placeHolder.next("."+this.labelClass)}this.$labelElem.attr("src",this.value);this.$labelElem.show();f.isShowAsLabel=true;this.hideEditableElem();this.setValue2LabelElem();if(this.setCtlField){this.setCtlField()}if(this.value==null||typeof this.value=="undefined"||d.trim(this.value).length==0){this.$labelElem.css("height",0);return}else{this.$labelElem.css(this.getTextInputCss())}},};d.fn.wembedded=function(f){var i=false;var e=null;if(arguments.length==2){i=true;e=arguments[1]}if(typeof f=="string"){if(f==="getObject"){var h=d(this);var g=h.data("wembedded");if(g){return g}else{throw new Error("This object is not available")}}}return this.each(function(){var l=d(this),k=l.data("wembedded"),j=typeof f=="object"&&f;if(!k){k=new a(d(this),j);d.extend(k,d.wControlInterface);d.extend(k,d.wTextCommonMethod);d.extend(k,d.Embedded);k.init();l.data("wembedded",k)}if(typeof f=="string"){if(i==true&&e!=null){return k[f](e)}else{return k[f]()}}})};d.fn.wembedded.Constructor=a;d.fn.wembedded.defaults={columnProperty:c,commonProperty:b,readOnly:false,disabled:false,isHide:false,isShowAsLabel:false,formulas:{}}})(jQuery);
;
(function($){var columnProperty={applyTo:null,columnName:null,displayName:null,dbDataType:"",indexed:null,showed:null,sorted:null,sysType:null,length:null,showType:"1",defaultValue:null,valueCreateMethod:"1",onlyreadUrl:null,};var commonProperty={inputMode:null,fieldCheckRules:null,fontSize:null,fontColor:null,ctlWidth:null,ctlHight:null,textAlign:null,};var JobSelect=function($placeHolder,options){this.options=$.extend({},$.fn.wjobSelect.defaults,options);this.value="";this.$editableElem=null;this.$labelElem=null;this.$placeHolder=$placeHolder};JobSelect.prototype={constructor:JobSelect,};$.JobSelect={createEditableElem:function(){if(this.$editableElem!=null){return}var options=this.options;var ctlName=this.getCtlName();var editableElem=document.createElement("select");editableElem.setAttribute("class",this.editableClass);editableElem.setAttribute("name",ctlName);$(editableElem).css(this.getTextInputCss());this.$placeHolder.after($(editableElem));this.$editableElem=this.$placeHolder.next("."+this.editableClass);this.drawOptions();var _this=this;this.$editableElem.change(function(){var $selectedOpt=$(this).find("option:selected");var realValue=$selectedOpt.val();_this.setValue(realValue)})},setOptionSet:function(optionSet){this.options.optionSet=optionSet},drawOptions:function(){var optionSet=this.options.optionSet;if(this.$editableElem==null){this.createEditableElem()}this.$editableElem.empty();for(var i=0;i<optionSet.length;i++){this.$editableElem.append("<option value='"+optionSet[i].code+"'>"+optionSet[i].name+"</option>")}this.setValue(this.$editableElem.find("option").first().val())},setDefaultValue:function(defaultValue){if(typeof defaultValue=="undefined"||defaultValue==null||defaultValue.length==0){defaultValue={};defaultValue[this.options.optionSet[0].code]=this.options.optionSet[0].name}this.setValueByMap(JSON.cStringify(defaultValue))},setValue2LabelElem:function(){if(this.$labelElem==null){return}this.$labelElem.html(this.getDisplayValue())},setValue2EditableElem:function(){if(this.$editableElem==null){return}var valueObj={};if(this.value==null||$.trim(this.value).length==0){this.$editableElem.val("");return}else{valueObj=eval("("+this.value+")")}for(var i in valueObj){this.$editableElem.val(i)}},setValue:function(value){if(typeof value=="undefined"||value==null||$.trim(value).length==0){return}var valueMap=this.getValueMapInOptionSet(value);if(typeof valueMap=="string"){this.setValueByMap(valueMap)}else{this.setValueByMap(JSON.cStringify(valueMap))}},isValueMap:function(){return true},getValueMapInOptionSet:function(value){var optionSet=this.options.optionSet;for(var i in optionSet){var option=optionSet[i];if(option.code==value){var res={};res[value]=option.name;return res}}},setValueByMap:function(valuemap,isRender){var internalCall=false;for(var i in $.JobSelect){if($.JobSelect[i]==arguments.callee.caller){internalCall=true;break}}if(internalCall){}else{this.setDisplayAsLabel()}$.wControlInterface.setValueByMap.call(this,valuemap,isRender)},};$.fn.wjobSelect=function(option){var method=false;var args=null;if(arguments.length==2){method=true;args=arguments[1]}if(typeof option=="string"){if(option==="getObject"){var $this=$(this);var data=$this.data("wjobSelect");if(data){return data}else{throw new Error("This object is not available")}}}return this.each(function(){var $this=$(this),data=$this.data("wjobSelect"),options=typeof option=="object"&&option;if(!data){data=new JobSelect($(this),options);$.extend(data,$.wControlInterface);$.extend(data,$.JobSelect);data.init();$this.data("wjobSelect",data)}if(typeof option=="string"){if(method==true&&args!=null){return data[option](args)}else{return data[option]()}}})};$.fn.wjobSelect.Constructor=JobSelect;$.fn.wjobSelect.defaults={columnProperty:columnProperty,commonProperty:commonProperty,readOnly:false,disabled:false,isHide:false,isShowAsLabel:false}})(jQuery);
;
var cacheType={formUuid:1,options:2,formDefinition:3,dataUuid:4,deletedFormDataOfSubform:"deletedFormDataOfSubform",formula:"formula"};$(function(){$.dyform=$.dyform||{};$.extend($.dyform,{getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(e){}}return ret},extend:function(options){$.extend($.fn.dyform,options);if(!this.no_legacy_api){$.fn.extend(options)}},getCellId:function(rowId,fieldName){return $.wSubFormMethod.getCellId(rowId,fieldName)},setValue:function(control,cellValue,dataUuid){if(!control){return}control.setDataUuid(dataUuid);if(control.isValueMap()){if(cellValue!=null&&cellValue.indexOf("{")==-1){control.setValue(cellValue)}else{control.setValueByMap(cellValue)}}else{control.setValue(cellValue)}},getValue:function(control){if(control==null){console.log("control is null");return}var value="";if(control.isValueMap()){var valueMap=control.getValueMap();if(typeof valueMap=="string"){value=valueMap}else{value=JSON.cStringify(control.getValueMap())}}else{value=control.getValue()}return value},getDisplayValue:function(control){if(control==null){console.log("control is null");return}var value="";if(control.isValueMap()){value=control.getDisplayValue()}else{value=control.getValue()}return value},modelReg:/\${([^}]*)}/i,formulaReg:/\${([^}]*)}/g});$.fn.dyform=function(options){if(this.size()==0){throw new Error("zero elements found by selector["+this.selector+"]")}if(this.size()>1){throw new Error("more than one element found by selector["+this.selector+"]")}else{if(this[0].nodeName!="FORM"){throw new Error("dataform container must be a form html element")}}this.attr("class","dyform");if(typeof options=="string"){var fn=$.dyform.getAccessor($.fn.dyform,options);if(!fn){throw ("jqGrid - No such method: "+options)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}else{var fn=$.dyform.getAccessor($.fn.dyform,"parseForm");return fn.apply(this,arguments)}};$.dyform.extend({$:function(selector){return $(selector,this[0])},addCAControlObject:function(){if(this.isEnableSignature()&&$.browser&&$.browser.msie){}},parseForm:function(options){console.log("");var time1=(new Date()).getTime();var formDefinition=options.definition;if(typeof formDefinition=="string"){formDefinition=(eval("("+formDefinition+")"))}var data=options.data;var defaults={displayAsLabel:false,displayAsFormModel:true,success:function(){},error:function(){}};$.extend(defaults,options);this.cache.put.call(this,cacheType.formUuid,formDefinition.uuid);$.extend(formDefinition,formDefinitionMethod);this.cache.put.call(this,cacheType.formDefinition,formDefinition);this.cache.put.call(this,cacheType.options,defaults);this.addCAControlObject();this.validSignatureUSB();var displayFormModelId=formDefinition.displayFormModelId;if(this.isDisplayAsModel()){var model=loadDisplayModelDefintionByModelId(displayFormModelId);if(model==null||model==undefined){defaults.error.call(this,dymsg.modelIdNotFound);return}$(this).html(model.html);this.formatModel(formDefinition)}else{var html="<span id='_htmldyform_'>"+formDefinition.html+"</span>";var srcpattern=/src="\/resources[^\"]+ckeditor[^\"]+plugins[^\"]+images[^\"]+jpg\"/;var srcpattern2=/src="resources[^\"]+ckeditor[^\"]+plugins[^\"]+images[^\"]+jpg\"/;html=html.replace(srcpattern,"");html=html.replace(srcpattern2,"");while(srcpattern.test(html)||srcpattern2.test(html)){html=html.replace(srcpattern,"");html=html.replace(srcpattern2,"")}$(this).html($(html).html());this.parseBlock(formDefinition)}$(".label").removeClass("label");var time1=(new Date()).getTime();var formUuids=[];this.$("table[formUuid]").each(function(){var formUuid=$(this).attr("formUuid");formUuids.push(formUuid)});var formData=formDefinition.defaultFormData;var definitionObjs=formDefinition.subformDefinitions;var definitionMap={};if(typeof definitionObjs!="undefined"&&definitionObjs!=null&&definitionObjs.length>0){for(var i=0;i<definitionObjs.length;i++){var definitionObj=eval("("+definitionObjs[i]+")");$.extend(definitionObj,formDefinitionMethod);definitionMap[definitionObj.uuid]=definitionObj}}var time2=(new Date()).getTime();console.log(":"+(time2-time1)/1000+"s");this.parseMainForm(formDefinition,formData);this.parseSubform(formDefinition,definitionMap);var time2=(new Date()).getTime();console.log(":"+(time2-time1)/1000+"s");this.fillFormData(data,function(){});var time3=(new Date()).getTime();console.log(":"+(time3-time2)/1000+"s");var timex=(new Date()).getTime();if(this.isDisplayAsLabel()){this.showAsLabel()}var timey=(new Date()).getTime();console.log(":"+(timey-timex)/1000+"s");var _this=this;$(window).resize(function(){var formUuid=_this.getFormUuid();var formDefinition=_this.cache.get.call(_this,cacheType.formDefinition,formUuid);var subforms=formDefinition.subforms;for(var i in subforms){var subform=subforms[i];var subformctl=$.ControlManager.getSubFormControl(subform.formUuid);if(subformctl){subformctl.resetGridWidth()}}});var timex=new Date();defaults.success.apply(this);var timey=new Date();console.log(":"+(timey-timex)/1000+"s");try{if(typeof this[formDefinition.outerId]=="function"){this[formDefinition.outerId]()}}catch(e){console.log(e)}var timez=new Date();console.log("js:"+(timez-timey)/1000+"s");console.log(":"+(timez-time1)/1000+"s");if(this.isCreate()){this.addRowEmptyDatasByDefaultRowCount()}if(this.formParseComplete){this.formParseComplete()}},getOptional:function(){var options=this.cache.get.call(this,cacheType.options);return options.optional},isCreate:function(){if(this.getOptional()&&this.getOptional().isFirst){return true}else{return false}},formatModel:function(formDefinition){$(".model_field[name]").each(function(){var name=$(this).attr("name");if(name==undefined&&$.trim(name).length==0){return true}var fieldDefinition=formDefinition.fields[name];if(typeof fieldDefinition=="undefined"){return true}fieldDefinition.showType=dyshowType.showAsLabel;var titleHtml=$(this).html();titleHtml=titleHtml.replace($.dyform.modelReg,"<img class='value' name='"+name+"'/>");$(this).html(titleHtml)});var _this=this;this.$("table[formUuid]").each(function(){$.ControlManager.createSubFormControl($(this),_this,formDefinition)});$(".model_subform[name]").each(function(){var name=$(this).attr("name");if(name==undefined&&$.trim(name).length==0){return true}var subDefinitions=formDefinition.subforms;if(typeof subDefinitions=="undefined"||subDefinitions.length==0){return true}var formUuid=undefined;for(var i in subDefinitions){var subDefinition=subDefinitions[i];if(subDefinition.outerId==name){formUuid=subDefinition.formUuid;break}}if(!formUuid){return true}var titleHtml=$(this).html();titleHtml=titleHtml.replace($.dyform.modelReg,"<table formUuid='"+formUuid+"'></table>");$(this).html(titleHtml)})},isDisplayAsModel:function(){var displayFormModelId=this.getFormDefinition(this.getFormUuid()).displayFormModelId;var options=this.cache.get.call(this,cacheType.options);if(options.displayAsFormModel==true&&options.displayAsLabel==true&&displayFormModelId!=undefined&&$.trim(displayFormModelId).length>0){return true}else{return false}},isDisplayAsLabel:function(){var options=this.cache.get.call(this,cacheType.options);return options.displayAsLabel},setDataUuid:function(dataUuid){this.cache.put.call(this,cacheType.dataUuid,dataUuid)},getDataUuid:function(){return this.cache.get.call(this,cacheType.dataUuid)},getFormUuid:function(formId){if(formId){var formDefinitions=this.getFormDefinition();for(var i in formDefinitions){if(formDefinitions[i].outerId==formId){return i}}}else{return this.cache.get.call(this,cacheType.formUuid)}},getFormId:function(formUuid){if(formUuid){var formDefinitions=this.getFormDefinition();for(var i in formDefinitions){if(formDefinitions[i].uuid==formUuid){return formDefinitions[i].outerId}}}else{return this.getFormId(this.getFormUuid())}},getFormDefinition:function(formUuid){var formDefinition=this.cache.get.call(this,cacheType.formDefinition,formUuid);return formDefinition},getMainformValueKeySetMap:function(){var keyMap={};var fields=this.getFormDefinition(this.getFormUuid()).fields;for(var field in fields){var inputMode=fields[field].inputMode;if(inputMode==dyFormInputMode.treeSelect||inputMode==dyFormInputMode.radio||inputMode==dyFormInputMode.checkbox||inputMode==dyFormInputMode.selectMutilFase){var optionSet=fields[field].optionSet;if(typeof optionSet=="undefined"||optionSet==null||optionSet.length==0){console.log("field["+field+"] optionSet undefined");continue}var obj={};for(var key in optionSet){var value=optionSet[key];obj[value]=key}keyMap[field]=obj}}return keyMap},getMainformValueFormatSetMap:function(){var keyMap={};var fields=this.getFormDefinition(this.getFormUuid()).fields;for(var field in fields){var inputMode=fields[field].inputMode;if(inputMode==dyFormInputMode.date){var fmt=fields[field].contentFormat;if(typeof fmt=="undefined"||fmt==null){console.log("field["+field+"] contentFormat undefined");continue}var format="";if(fmt==dyDateFmt.yearMonthDate){format="yyyy-MM-dd"}else{if(fmt==dyDateFmt.dateTimeHour){format="yyyy-MM-dd HH"}else{if(fmt==dyDateFmt.dateTimeMin){format="yyyy-MM-dd HH:mm"}else{if(fmt==dyDateFmt.dateTimeSec){format="yyyy-MM-dd HH:mm:ss"}else{if(fmt==dyDateFmt.timeHour){format="HH"}else{if(fmt==dyDateFmt.timeMin){format="HH:mm"}else{if(fmt==dyDateFmt.timeSec){format="HH:mm:ss"}else{if(fmt==dyDateFmt.yearMonthDateCn){format="yyyyMMdd"}else{if(fmt==dyDateFmt.yearCn){format="yyyy"}else{if(fmt==dyDateFmt.yearMonthCn){format="yyyyMM"}else{if(fmt==dyDateFmt.monthDateCn){format="MMdd"}else{if(fmt==dyDateFmt.year){format="yyyy"}}}}}}}}}}}}keyMap[field]=format}}return keyMap},collectFormData:function(){console.log("-----"+new Date());var time1=(new Date()).getTime();var formData={};var deletedFormDatas=this.getDeletedRowIds();var formDatas=this.getFormDatas();if(this.isEnableSignature()){var signature=this.createSignature(formData);formData.signature=signature}formData.formDatas=formDatas;formData.deletedFormDatas=deletedFormDatas;formData.formUuid=this.getFormUuid();var time2=(new Date()).getTime();console.log(":"+(time2-time1)/1000+"s");console.log("-----"+new Date());return formData},collectFormDisplayData:function(){console.log("-----"+new Date());var time1=(new Date()).getTime();var formData={};var deletedFormDatas=this.getDeletedRowIds();var formDatas=this.getFormDisplayDatas();if(this.isEnableSignature()){var signature=this.createSignature(formData);formData.signature=signature}formData.formDatas=formDatas;formData.deletedFormDatas=deletedFormDatas;formData.formUuid=this.getFormUuid();var time2=(new Date()).getTime();console.log(":"+(time2-time1)/1000+"s");console.log("-----"+new Date());return formData},isEnableSignature:function(){var formUuidOfMainform=this.getFormUuid();var formDefinitionOfMainform=this.getFormDefinition(formUuidOfMainform);var enableSignature=formDefinitionOfMainform.enableSignature;if(enableSignature==signature.enable){return true}else{return false}},createSignature:function(signedData){var jsonString=JSON.cStringify(signedData);var signature={};$.ajax({url:ctx+"/dyformdata/getDigestValue",cache:false,async:false,type:"POST",data:jsonString,dataType:"json",contentType:"application/json",success:function(result){var dataSignature=result.data;var b=fjcaWs.OpenFJCAUSBKey();if(!b){signature.status=-1;signature.remark="lose to open FJCAUSBKey"}else{fjcaWs.ReadCertFromKey();var cert=fjcaWs.GetCertData();fjcaWs.SignDataWithKey(dataSignature.digestValue);var signData=fjcaWs.GetSignData();fjcaWs.CloseUSBKey();signature.signedData=jsonString;signature.digestValue=dataSignature.digestValue;signature.certificate=cert;signature.signatureValue=signData;signature.status=1;signature.digestAlgorithm=dataSignature.digestAlgorithm}},error:function(jqXHR){console.log("lose to get digestValue");var faultData=JSON.parse(jqXHR.responseText);signature.status=-1;signature.remark=faultData.msg}});return signature},validateForm:function(){if(!this.validSignatureUSB()){return false}var formUuid=this.getFormUuid();var dataUuid=this.getDataUuid();var valid1=this.validateMainform(formUuid);var valid2=this.validateSubform(formUuid);return valid1&&valid2},validSignatureUSB:function(){if(this.isEnableSignature()){if(Browser.isIE()){}else{oAlert("IE!")}return checkCAKey()}return true},fillFormData:function(formDatas,callback){var formUuid=this.getFormUuid();var time1=(new Date()).getTime();for(var i in formDatas){var formData=formDatas[i];if(formUuid==i){this.fillFormDataOfMainform(formData[0])}}var time2=(new Date()).getTime();console.log(":"+(time2-time1)/1000+"s");var time3=(new Date()).getTime();for(var i in formDatas){var formData=formDatas[i];if(formUuid==i){}else{var subformctl=$.ControlManager.getSubFormControl(i);if(!subformctl){continue}subformctl.setMainformDataUuid(this.getDataUuid());console.log(JSON.cStringify(formData));subformctl.fillFormData(formData)}}var time4=(new Date()).getTime();console.log(":"+(time4-time3)/1000+"s");if(callback){callback.apply(this)}},fillFormDisplayData:function(formDatas,formUuid,callback){if(typeof formUuid=="undefined"||formUuid==null){formUuid=this.getFormUuid()}var time1=(new Date()).getTime();for(var fi in formDatas){if(formUuid!=fi){continue}var cacheVK=this.getMainformValueKeySetMap();var cacheVF=this.getMainformValueFormatSetMap();var formData=formDatas[fi];var mainFormData=formData[0];for(var key in mainFormData){if(typeof cacheVF[key]!="undefined"&&cacheVF[key]!=""){var disValue=mainFormData[key];var fmt=cacheVF[key];try{var dateVar=new Date(Date.parse(disValue.replace(/-/g,"/")));if(!isNaN(dateVar.getTime())){mainFormData[key]=dateVar.format(fmt)}}catch(e){console.log(e)}continue}var optionSet=cacheVK[key];if(typeof optionSet=="undefined"||optionSet==null){continue}var disValue=mainFormData[key];var value=optionSet[disValue];if(typeof value=="undefined"||value==null){continue}mainFormData[key]=value}cacheVK=null}var time2=(new Date()).getTime();console.log("(->):"+(time2-time1)/1000+"s");var time3=(new Date()).getTime();for(var di in formDatas){if(formUuid==di){}else{var formData=formDatas[di];if(formData.length<=0){continue}var subformctl=$.ControlManager.getSubFormControl(di);if(typeof subformctl=="undefined"||subformctl==null){continue}var cacheVK=undefined;var cacheVF=undefined;for(var fi=0;fi<formData.length;fi++){var subFormData=formData[fi];if(typeof cacheVK=="undefined"||cacheVK==null){cacheVK=subformctl.getSubformValueKeySetMap()}if(typeof cacheVF=="undefined"||cacheVF==null){cacheVF=subformctl.getSubformValueFormatSetMap()}for(var key in subFormData){if(typeof cacheVF[key]!="undefined"&&cacheVF[key]!=""){var disValue=subFormData[key];var fmt=cacheVF[key];try{var dateVar=new Date(Date.parse(disValue.replace(/-/g,"/")));if(!isNaN(dateVar.getTime())){subFormData[key]=dateVar.format(fmt)}}catch(e){console.log(e)}continue}var optionSet=cacheVK[key];if(typeof optionSet=="undefined"||optionSet==null){continue}var disValue=subFormData[key];var value=optionSet[disValue];if(typeof value=="undefined"||value==null){continue}subFormData[key]=value}}cacheVK=null;cacheVF=null}}var time4=(new Date()).getTime();console.log("(->):"+(time4-time3)/1000+"s");this.fillFormData(formDatas,callback)},fillFormDatas:function(formDatas,callback){var formDatasKeyUuid={};for(var i in formDatas){var formData=formDatas[i];var uuid=this.getFormUuid(i);formDatasKeyUuid[uuid]=formData}this.fillFormData(formDatasKeyUuid,callback)},fillFormDisplayDatas:function(formDatas,mainFormId,callback){if(typeof mainFormId=="undefined"||mainFormId==null){mainFormId=this.getFormId()}var formDatasKeyUuid={};for(var i in formDatas){if(typeof i=="undefined"||i==null){continue}var formData=formDatas[i];var uuid="";if(mainFormId==i){uuid=this.getFormUuid()}else{uuid=this.getFormUuid(i)}formDatasKeyUuid[uuid]=formData}this.fillFormDisplayData(formDatasKeyUuid,callback)},fillFormDataOfMainform:function(formData){this.setDataUuid(formData.uuid);var _this=this;this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var value=formData[fieldName];if(typeof value=="undefined"){return true}_this.setFieldValueByFieldName(fieldName,value)})},createUuid:function(){return new UUID().id.toLowerCase()},setReadOnly:function(){this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var control=$.ControlManager.getCtl(fieldName);if(typeof control=="undefined"||control==null){return true}control.setReadOnly(true)});this.$("table[formUuid]").each(function(){var subformctl=$.ControlManager.getSubFormControl($(this).attr("formUuid"));subformctl.setReadOnly()});this.invoke("afterSetReadOnly")},setTextFile2SWF:function(enable){var formUuidOfMainform=this.getFormUuid();var formDefinitionOfMainform=this.getFormDefinition(formUuidOfMainform);this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var control=$.ControlManager.getCtl(fieldName);if(typeof control=="undefined"||control==null){return true}if(formDefinitionOfMainform.isInputModeAsAttach(fieldName)){control.setTextFile2SWF(enable)}});this.$("table[formUuid]").each(function(){var subformctl=$.ControlManager.getSubFormControl($(this).attr("formUuid"));subformctl.setTextFile2SWF()})},setEditable:function(){this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var control=$.ControlManager.getCtl(fieldName);if(typeof control=="undefined"||control==null){return true}control.setEditable()});this.$("table[formUuid]").each(function(){var subformctl=$.ControlManager.getSubFormControl($(this).attr("formUuid"));subformctl.setEditable()});this.invoke("afterSetEditable")},showAsLabel:function(){var _this=this;this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var control=_this.getControl(fieldName);if(typeof control=="undefined"||control==null){return true}control.setDisplayAsLabel()});this.$("table[formUuid]").each(function(){var subformctl=_this.getSubformControl($(this).attr("formUuid"));subformctl.setDisplayAsLabel()});this.invoke("afterShowAsLabel")},handleException:function(exceptionData){},enableSignature:function(enable){var _this=this;var formUuidOfMainform=this.getFormUuid();var formDefinitionOfMainform=this.getFormDefinition(formUuidOfMainform);if(enable){formDefinitionOfMainform.enableSignature=signature.enable}else{formDefinitionOfMainform.enableSignature=signature.disable}this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var control=_this.getControl(fieldName);if(typeof control=="undefined"||control==null){return true}if(formDefinitionOfMainform.isInputModeAsAttach(fieldName)){control.enableSignature(enable)}});this.$("table[formUuid]").each(function(){var subformctl=_this.getSubformControl($(this).attr("formUuid"));subformctl.enableSignature(enable)})}});$.dyform.extend({getFieldNameByApplyTo:function(applyTo,formUuid){if((typeof applyTo=="object")&&(typeof applyTo.fieldMappingName)!="undefined"){applyTo=applyTo.fieldMappingName}if(typeof formUuid=="undefined"||formUuid==null){formUuid==this.getFormUuid()}var formDefinition=this.getFormDefinition(formUuid);var applyTo2FieldName=formDefinition.applyTo2FieldName;if(typeof applyTo2FieldName=="undefined"){applyTo2FieldName={};var fields=formDefinition.fields;for(var fieldName in fields){var field=fields[fieldName];var applyTotmp=field.applyTo;applyTo2FieldName[fieldName]=fieldName;if(typeof applyTotmp!="undefined"&&applyTotmp.length>0){var tos=applyTotmp.split(";");for(var i=0;i<tos.length;i++){var to=tos[i];applyTo2FieldName[to]=fieldName}}}formDefinition.applyTo2FieldName=applyTo2FieldName}var fieldName=applyTo2FieldName[applyTo];if(typeof fieldName=="undefined"){console.log("cann't get the fieldName for mappingName["+JSON.cStringify(applyTo)+"][formID:"+formDefinition.outerId+"]")}return fieldName},setFieldValue:function(mappingName,data,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);if(!fieldName){return}if(data==null||!data.value){this.setFieldValueByFieldName(fieldName,data,dataUuid)}else{this.setFieldValueByFieldName(fieldName,data.value,dataUuid)}},setFieldValueByFieldName:function(fieldName,data,dataUuid){var control=this.getControl(fieldName,dataUuid);if(!control){console.log("cann't find field["+fieldName+"]");return}$.dyform.setValue(control,data,this.getDataUuid())},getFieldValueByFieldName:function(fieldName,dataUuid){var control=this.getControl(fieldName,dataUuid);if(control==null){console.log("control cann't find ,fieldName="+fieldName+"dataUuid="+dataUuid);return}return $.dyform.getValue(control)},getFieldValue:function(mappingName,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);if(typeof fieldName=="undefined"){return null}return this.getFieldValueByFieldName(fieldName,dataUuid)},setFieldReadOnlyByFieldName:function(fieldName,dataUuid){var control=this.getControl(fieldName,dataUuid);control.setReadOnly(true)},setFieldReadOnly:function(mappingName,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);this.setFieldReadOnlyByFieldName(fieldName,dataUuid)},setFieldEditableByFieldName:function(fieldName,dataUuid){var control=this.getControl(fieldName,dataUuid);control.setEditable(true)},setFieldEditable:function(mappingName,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);this.setFieldEditableByFieldName(fieldName,dataUuid)},setFieldAsLabelByFieldName:function(fieldName,dataUuid){var control=this.getControl(fieldName,dataUuid);control.setDisplayAsLabel(true)},setFieldAsLabel:function(mappingName,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);this.setFieldAsLabelByFieldName(fieldName,dataUuid)},setFieldAsHiddenByFieldName:function(fieldName,dataUuid){var control=this.getControl(fieldName,dataUuid);control.setVisible(false)},setFieldAsHide:function(mappingName,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);this.setFieldAsHiddenByFieldName(fieldName,dataUuid)},setFieldAsShowByFieldName:function(fieldName,dataUuid){var control=this.getControl(fieldName,dataUuid);control.setVisible(true)},setFieldAsShow:function(mappingName,dataUuid){var formUuid=this.getFormUuidByRowId(dataUuid);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);this.setFieldAsShowByFieldName(fieldName,dataUuid)},getControl:function(fieldName,dataUuidOfSubform){var controlId=fieldName;if(typeof dataUuidOfSubform!="undefined"&&dataUuidOfSubform!=this.getDataUuid()){controlId=$.dyform.getCellId(dataUuidOfSubform,fieldName)}return $.ControlManager.getCtl(controlId)},isControl:function(fieldName,dataUuidOfSubform){return this.getControl(fieldName,dataUuidOfSubform)==null?false:true},autoWidth:function(){$(window).trigger("resize")},bind2Control:function(option){var defaults={type:"click",mappingName:null,dataUuid:this.getDataUuid(),callback:function(){}};$.extend(defaults,option);var formUuid=this.getFormUuidByRowId(defaults.dataUuid);var fieldName=this.getFieldNameByApplyTo(defaults.mappingName,formUuid);var control=this.getControl(fieldName,defaults.dataUuid);if(!control){console.log("bind2Control cann't find control :"+JSON.cStringify(option));return}control.bind(defaults.type,defaults.callback)},bind2Dyform:function(eventname,event){var options=this.cache.get.call(this,cacheType.options);var events=options.events;if(typeof events=="undefined"){options.events={};events=options.events}events[eventname]=event},invoke:function(method){var options=this.cache.get.call(this,cacheType.options);var events=options.events;if(events&&events[method]){events[method].apply(this,$.makeArray(arguments).slice(1))}},});$.dyform.extend({getSubformControl:function(formUuidOfSubform){var control=$.ControlManager.getSubFormControl(formUuidOfSubform);return control},hideSubFormByFormUuid:function(formUuid){var subformctl=this.getSubformControl(formUuid);subformctl.hide()},hideSubForm:function(formId){var formUuid=this.getFormUuid(formId);this.hideSubFormByFormUuid(formUuid)},showSubFormByFormUuid:function(formUuid){var subformctl=this.getSubformControl(formUuid);subformctl.show()},showSubForm:function(formId){var formUuid=this.getFormUuid(formId);this.showSubFormByFormUuid(formUuid)},addRowDataByFormUuid:function(formUuid,data){var subformCtl=this.getSubformControl(formUuid);subformCtl.addRowData(data)},addRowData:function(formId,data){var formUuid=this.getFormUuid(formId);return this.addRowDataByFormUuid(formUuid,data)},updateRowDataByFormUuid:function(formUuid,data){var subformCtl=this.getSubformControl(formUuid);subformCtl.updateRowData(data)},updateRowData:function(formId,data){var formUuid=this.getFormUuid(formId);this.updateRowDataByFormUuid(formUuid,data)},deleteRowDataByFormUuid:function(formUuid,rowId){var subformCtl=this.getSubformControl(formUuid);subformCtl.delRowData(rowId)},deleteRowData:function(formId,rowId){var formUuid=this.getFormUuid(formId);this.deleteRowDataByFormUuid(formUuid,rowId)},getRowDataByFormUuid:function(formUuid,rowId){var subformCtl=this.getSubformControl(formUuid);return subformCtl.getRowData(rowId)},getRowData:function(formId,rowId){var formUuid=this.getFormUuid(formId);return this.getRowDataByFormUuid(formUuid,rowId)},getSelectedRowDataByFormUuid:function(formUuid){var subformCtl=this.getSubformControl(formUuid);if(typeof subformCtl.selectedRowId=="undefined"){return[]}return subformCtl.getRowData(subformCtl.selectedRowId)},getSelectedRowData:function(formId){var formUuid=this.getFormUuid(formId);return this.getSelectedRowDataByFormUuid(formUuid)},collectSubformDataByFormUuid:function(formUuid){var subformCtl=this.getSubformControl(formUuid);return subformCtl.collectSubformData()},collectSubformDisplayDataByFormUuid:function(formUuid){var subformCtl=this.getSubformControl(formUuid);return subformCtl.collectSubformDisplayData()},group:function(formId){var formUuid=this.getFormUuid(formId);var subformCtl=this.getSubformControl(formUuid);subformCtl.group()},getAllRowData:function(formInfo){return this.collectSubformData(formInfo.id)},setColumnReadOnly:function(formId,mappingName){this.setColumnAsLabel(formId,mappingName)},setSubformReadOnlyByFormUuid:function(formUuid){var subformCtl=this.getSubformControl(formUuid);subformCtl.setReadOnly()},setSubformReadOnly:function(formId){var formUuid=this.getFormUuid(formId);this.setSubformReadOnlyByFormUuid(formUuid)},setSubformLabelByFormUuid:function(formUuid){var subformCtl=this.getSubformControl(formUuid);subformCtl.setDisplayAsLabel()},setSubformLabel:function(formId){var formUuid=this.getFormUuid(formId);this.setSubformLabelByFormUuid(formUuid)},setColumnAsLabel:function(formId,mappingName){var formUuid=this.getFormUuid(formId);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);var subformCtl=this.getSubformControl(formUuid);subformCtl.setColumnAsLabel(fieldName)},setColumnEditable:function(formId,mappingName){var formUuid=this.getFormUuid(formId);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);var subformCtl=this.getSubformControl(formUuid);subformCtl.setColumnEditable(fieldName)},setColumnCtl:function(formId,mappingName,controlable){var formUuid=this.getFormUuid(formId);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);var subformCtl=this.getSubformControl(formUuid);subformCtl.setColumnCtl(fieldName,controlable)},hideColumnByFieldName:function(formId,fieldName){var formUuid=this.getFormUuid(formId);var subformctl=this.getSubformControl(formUuid);subformctl.hideColumn(fieldName);subformctl.resetGridWidth()},hideColumn:function(formId,mappingName){var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);this.hideColumnByFieldName(formId,fieldName)},showColumn:function(formId,mappingName){var formUuid=this.getFormUuid(formId);var fieldName=this.getFieldNameByApplyTo(mappingName,formUuid);var subformctl=this.getSubformControl(formUuid);subformctl.showColumn(fieldName);subformctl.resetGridWidth()},getFormUuidByRowId:function(rowId){if(typeof rowId=="undefined"||rowId==null){return this.getFormUuid()}var formDatas=this.getFormDatas();for(var i in formDatas){var records=formDatas[i];for(var index=0;index<records.length;index++){if(records[index]["uuid"]==rowId){return i}}}return null},getRowIds:function(formUuid){var rowIds=[];var formDatas=this.collectSubformDataByFormUuid(formUuid);for(var index=0;index<formDatas.length;index++){var record=formDatas[index];rowIds.push(record.uuid)}return rowIds},hideOperateBtn:function(formId){var formUuid=this.getFormUuid(formId);this.hideOperateBtnByFormUuid(formUuid)},hideOperateBtnByFormUuid:function(formUuid){var subformctl=this.getSubformControl(formUuid);subformctl.hideOperateBtn()},showOperateBtn:function(formId){var formUuid=this.getFormUuid(formId);this.showOperateBtnByFormUuid(formUuid)},showOperateBtnByFormUuid:function(formUuid){var subformctl=this.getSubformControl(formUuid);subformctl.showOperateBtn()},addRowEmptyDataByDefaultRowCount:function(formId){var formUuid=this.getFormUuid(formId);var subformctl=this.getSubformControl(formUuid);if(typeof subformctl=="undefined"){return}var subformconfig=subformctl.options.formDefinition.subforms[formUuid];if(typeof subformconfig.defaultRowCount=="undefined"||subformconfig.defaultRowCount==0){return}else{var count=parseInt(subformconfig.defaultRowCount,10);for(var index=0;index<count;index++){var id=this.createUuid();this.addRowDataByFormUuid(formUuid,{id:id,uuid:id})}}},addRowEmptyDatasByDefaultRowCount:function(){var formUuid=this.getFormUuid();var formDefinition=this.cache.get.call(this,cacheType.formDefinition,formUuid);var subforms=formDefinition.subforms;for(var i in subforms){var subform=subforms[i];this.addRowEmptyDataByDefaultRowCount(subform.outerId)}}});$.dyform.extend({parseBlock:function(formDefinition){var blocks=formDefinition.blocks;if(typeof blocks=="undefined"){return}for(var i in blocks){var block=blocks[i];var hide=block.hide;if(typeof hide=="undefined"){continue}if(hide==true){this.$("td[blockCode='"+i+"']").parent().parent().hide()}else{this.$("td[blockCode='"+i+"']").parent().parent().show()}}},parseMainForm:function(formDefinition,formData){var _this=this;this.$(".value[name]").each(function(){var name=$(this).attr("name");var fieldDefinition=formDefinition.fields[name];if(typeof fieldDefinition=="undefined"){return true}$.ControlManager.createCtl($(this),fieldDefinition,formDefinition);var control=$.ControlManager.getCtl(fieldDefinition.name);if(typeof formData!="undefined"){var value=formData[name];if(typeof value!="undefined"&&value!=null){$.dyform.setValue(control,value,null)}}control.setPos(dyControlPos.mainForm);$(".label").removeClass("label")});if(formDefinition.customJs&&$.trim(formDefinition.customJs).length>0){try{eval(formDefinition.customJs)}catch(e){console.error(e)}}},parseSubform:function(formDefinition,definitions){var _this=this;this.$("table[formUuid]").each(function(){var formUuid=$(this).attr("formUuid");var subformDefinition=null;if(typeof definitions=="undefined"||typeof definitions[formUuid]=="undefined"){subformDefinition=loadFormDefinition(formUuid)}else{subformDefinition=definitions[formUuid]}if(typeof subformDefinition=="undefined"||subformDefinition==null){return true}$.ControlManager.createSubFormControl($(this),_this,formDefinition,subformDefinition);if(subformDefinition.customJs&&$.trim(subformDefinition.customJs).length>0){try{eval(subformDefinition.customJs)}catch(e){console.error(e)}}})},cache:{put:function(type,data){switch(type){case cacheType.formUuid:$(this).data("formUuid",data);break;case cacheType.options:$(this).data("options",data);break;case cacheType.formDefinition:var formDefinitions=$(this).data("formDefinition");if(typeof formDefinitions=="undefined"||formDefinitions==null){formDefinitions={}}formDefinitions[data.uuid]=data;$(this).data("formDefinition",formDefinitions);break;case cacheType.dataUuid:$(this).data("dataUuid",data);break;case cacheType.formula:break;default:throw new Error("unknown cacheType when put data into cache")}},get:function(type,key){var data=null;switch(type){case cacheType.formUuid:data=$(this).data("formUuid");break;case cacheType.options:data=$(this).data("options");break;case cacheType.formDefinition:if(typeof key=="undefined"||key==null){data=$(this).data("formDefinition")}else{var formDefinitions=$(this).data("formDefinition");if(typeof formDefinitions=="undefined"||formDefinitions==null){throw new Error("there is no form definition in the cache")}data=formDefinitions[key]}break;case cacheType.dataUuid:data=$(this).data("dataUuid");break;case cacheType.formula:data=$(this).data(cacheType.formula);if(typeof data=="undefined"||data==null){data={}}break;default:throw new Error("unknown cachetype when get data from cache")}return data}},validateMainform:function(formUuid){var valid=true;this.$(".value[name]").each(function(){var fieldName=$(this).attr("name");var control=$.ControlManager.getCtl(fieldName);if(typeof control=="undefined"||control==null){return true}var v=control.validate();valid=valid&&v});return valid},validateSubform:function(formUuid){var formDefinition=this.cache.get.call(this,cacheType.formDefinition,formUuid);var valid=true;var subforms=formDefinition.subforms;for(var i in subforms){try{var subformcontrol=$.ControlManager.getSubFormControl(subforms[i].formUuid);if(!subformcontrol){continue}var v=subformcontrol.validate();valid=valid&&v}catch(e){console.log(e)}}return valid},collectMainformData:function(formUuid){var formData={};this.$(".value[name][pos!='"+dyControlPos.subForm+"']").each(function(){var fieldName=$(this).attr("name");var control=$.ControlManager.getCtl(fieldName);if(typeof control=="undefined"||control==null){return true}formData[fieldName]=$.dyform.getValue(control)});var dataUuid=this.getDataUuid();if(typeof dataUuid=="undefined"){dataUuid=this.createUuid();this.setDataUuid(dataUuid)}formData.uuid=dataUuid;return formData},collectMainformDisplayData:function(formUuid){var formData={};this.$(".value[name][pos!='"+dyControlPos.subForm+"']").each(function(){var fieldName=$(this).attr("name");var control=$.ControlManager.getCtl(fieldName);if(typeof control=="undefined"||control==null){return true}formData[fieldName]=$.dyform.getDisplayValue(control)});var dataUuid=this.getDataUuid();if(typeof dataUuid=="undefined"){dataUuid=this.createUuid();this.setDataUuid(dataUuid)}formData.uuid=dataUuid;return formData},loadDefaultFormData:function(formUuid){var formData={};var url=ctx+"/dyformdata/getDefaultFormData";$.ajax({url:url,cache:false,async:false,type:"POST",data:{formUuid:formUuid},dataType:"json",success:function(result){if(result.success=="true"||result.success==true){formData=result.data}else{}},error:function(data){console.log(JSON.cStringify(data))}});return formData},getFormDatas:function(){var formDatas={};var formUuid=this.getFormUuid();var formDefinition=this.cache.get.call(this,cacheType.formDefinition,formUuid);var subforms=formDefinition.subforms;for(var i in subforms){var subform=subforms[i];try{var subformctl=$.ControlManager.getSubFormControl(subform.formUuid);if(!subformctl){continue}formDatas[subform.formUuid]=subformctl.collectSubformData()}catch(e){console.log(e)}}formDatas[formUuid]=[];formDatas[formUuid].push(this.collectMainformData(formUuid));return formDatas},getFormDisplayDatas:function(){var formDatas={};var formUuid=this.getFormUuid();var formDefinition=this.cache.get.call(this,cacheType.formDefinition,formUuid);var subforms=formDefinition.subforms;for(var i in subforms){var subform=subforms[i];try{var subformctl=$.ControlManager.getSubFormControl(subform.formUuid);if(!subformctl){continue}formDatas[subform.formUuid]=subformctl.collectSubformDisplayData()}catch(e){console.log(e)}}formDatas[formUuid]=[];formDatas[formUuid].push(this.collectMainformDisplayData(formUuid));return formDatas},getDeletedRowIds:function(){var formUuid=this.getFormUuid();var formDefinition=this.cache.get.call(this,cacheType.formDefinition,formUuid);var deletedFormDatas={};var subforms=formDefinition.subforms;for(var i in subforms){var subform=subforms[i];try{var subformctl=this.getSubformControl(subform.formUuid);if(!subformctl){continue}deletedFormDatas[subform.formUuid]=subformctl.getDeleteRows()}catch(e){console.log(e)}}return deletedFormDatas},collectSubformData:function(formId){var formUuid=this.getFormUuid(formId);return this.collectSubformDataByFormUuid(formUuid)},collectSubformDisplayData:function(formId){var formUuid=this.getFormUuid(formId);return this.collectSubformDisplayDataByFormUuid(formUuid)}})});
;

;
