 
<div id="treeselectAttrCfgDiv" title='属性设置' style=" height: 400px; overflow: auto;" >
	<div> 
		<div class="dyform">
			<div class="post-sign">
				<div class="post-detail">
		<table>
		
			<tr class="odd">
				<td class="Label">字段编码</td>
				<td class="value"><input type="text"
					name="name" id="name" value="" class="w100"/>  
			</tr>
			<!--3 -->
			<tr class="odd">
				<td class="Label">显示名称</td>
				<td class="value"><input type="text" class="w100" name="displayName"
					id="displayName" value="" /></td>
			</tr>
			<!--1 -->
			<tr class="odd">
				<td class="Label">应用于</td>
				<td class="value"><input type="text" class="w100" name="applyTo"
					id="applyTo" value="" /> </td>
			</tr>
		
			<tr >
				<td class="Label">默认值</td>
				<td class="value">
				<input type="text" value="" name="defaultValue"  id="defaultValue" /> 
				</td>
			</tr>
			
				<tr class="odd">
				<td class="Label">字段长度</td>
				<td class="value">
					 <input type="text" value="" name="length"  id="length"  /> 
				</td>
			</tr>
			
			
			<tr >
				<td class="Label">真实值/显示值</td>
				<td class="value">
					 真实值字段
					 <select name="realDisplay_real" id="realDisplay_real" style="width: 200px;">
					 	<option value="">--请选择--</option>
					 	
					 </select>
					显示值字段	
					 <select name="realDisplay_display" id="realDisplay_display"  style="width: 200px;">
					 	<option value="">--请选择--</option> 
					 </select>
					
				</td>
				 
			</tr>
			
			<!-- <tr >
				<td class="Label">真实值字段<br/></td>
				<td class="value">
					 <select name="realDisplay_real" id="realDisplay_real">
					 	<option value="">--请选择--</option>
					 	
					 </select>
				</td>
			</tr> -->
			
			<tr>
				<td class="Label">数据来源</td>
				<td class="value"><input type="text" id="serviceName" name="serviceName" /></td>
			</tr> 
			
			<tr>
				<td class="Label">选择模式</td>
				<td class="value"> 
					<div class="tr_td_div_left" style="padding-top: 9px;"> 
				<input type="radio" name="mutiSelect" value="false" >单选
						<input type="radio" name="mutiSelect" value="true" checked="checked"> 多选
					</div>
				</td>
			</tr>
			
			<tr>
				<td class="Label">字体样式</td>
				<td class="value">
				
				<div class="tr_td_div_left">
					<span id="fontcolorElement" class="fontColorCss" ></span>
					<input type="hidden" value="" id="fontColor">
					<div class="subcolorCss" id="subcolor" >
					<div style="display: none;" class="colors">
						<span onclick="selColor('black');" style="background-color:black;" class="selectcolor"></span>
						<span onclick="selColor('red');" style="background-color:red " class="selectcolor"></span>
						<span onclick="selColor('blue');" style="background-color:blue " class="selectcolor"></span>
						<span onclick="selColor('orange');" style="background-color:orange " class="selectcolor"></span>
						<span onclick="selColor('green');" style="background-color:green " class="selectcolor"></span>
						<span onclick="selColor('yellow');" style="background-color:yellow " class="selectcolor"></span>
						<span onclick="selColor('purple');" style="background-color:purple " class="selectcolor"></span>
						<span onclick="selColor('silver');" style="background-color:silver " class="selectcolor"></span>
						<span onclick="selColor('tan');" style="background-color:tan " class="selectcolor"></span>
						<span onclick="selColor('maroon');" style="background-color:maroon;" class="selectcolor"></span>
						<span onclick="selColor('olive');" style="background-color:olive;" class="selectcolor"></span>
						<span onclick="selColor('gray');" style="background-color:gray;" class="selectcolor"></span>
						<span onclick="selColor('lime');" style="background-color:lime;" class="selectcolor"></span>
					</div>
					</div>
				</div>
			 <div class="tr_td_div_left">
					<select name="fontSize" id="fontSize" style="display: block;float: left;width: 112px;">
						
						<option value="8" style="font-size:8px;">8</option>
						<option value="9" style="font-size:9px;">9</option>
						<option value="10" style="font-size:10px;">10</option>
						<option value="11" style="font-size:11px;">11</option>
						<option value="12" style="font-size:12px;" selected="selected">12</option>
						<option value="14" style="font-size:14px;">14</option>
						<option value="16" style="font-size:16px;">16</option>
						<option value="18" style="font-size:18px;">18</option>
						<option value="20" style="font-size:20px;">20</option>
						<option value="22" style="font-size:22px;">22</option>
						<option value="24" style="font-size:24px;">24</option>
						<option value="26" style="font-size:26px;">26</option>
						<option value="28" style="font-size:28px;">28</option>
						<option value="36" style="font-size:36px;">36</option>
						<option value="48" style="font-size:48px;">48</option>
						<option value="72" style="font-size:72px;">72</option>
					</select>
				</div>
				</td>
			</tr>
			
			
			<tr  class="odd">
				<td class="Label">控件样式</td>
				<td class="value">
				 
				<div class="tr_td_div_left">
					<span style="float: left;padding-top: 9px;margin-right: 3px;">宽度:</span><input type="text" name="ctlWidth" id="ctlWidth" style="width: 25px;float: left;"/>
				</div>
				<div class="tr_td_div_left">
					<span style="float: left;padding-top: 9px;margin-right: 3px;">高度:</span><input type="text" name="ctlHight" id="ctlHight" style="width: 25px;float: left;"/>
				</div>
				<div class="tr_td_div_left">
					<select name="textAlign" id="textAlign"  style="width: 100px;">
						<option value="">--对齐方式--</option>
						<option value="center">居中</option>
						<option value="left">靠左</option>
						<option value="right">靠右</option>
					</select>
				</div>
				<div class="tr_td_div_left">
					<span style="float: left;padding-top: 9px;margin-right: 3px;">下拉框宽度:</span><input type="text" name="treeWidth" id="treeWidth" style="width: 25px;float: left;"/>
				</div>
					<div class="tr_td_div_left">
					<span style="float: left;padding-top: 9px;margin-right: 3px;">下拉框高度:</span><input type="text" name="treeHeight" id="treeHeight" style="width: 25px;float: left;"/>
				</div>
				</td>
			</tr>
 			<tr>
				<td class="Label">编辑模式</td>
				<td class="value"> 
					<div class="tr_td_div_left" style="padding-top: 9px;"> 
										<input type="radio" name="showType" value="1" checked="checked">可编辑
						<input type="radio" name="showType" value="3"> 只读
						<input type="radio" name="showType" value="2">显示文本
						<input type="radio" name="showType" value="4"> 禁用
						<input type="radio" name="showType" value="5"> 隐藏
					</div>
				</td>
			</tr>
			 
			<tr class="odd" >
				<td class="Label">校验规则</td>
				<td class="value">
					<input type="checkbox" name="fieldCheckRules" id="checkRule_1" value="1"  onclick="checkMust(this)"/><label for="checkRule_1">非空</label>  
					<input type="checkbox" name="fieldCheckRules" id="checkRule_5" value="5" onclick="checkUnique(this)"/><label for="checkRule_5">唯一</label></td>
			</tr> 
			
				 
			<tr id="tr_onlyreadUrl" >
				<td class="Label">标识地址</td>
				<td class="value"><input type="text" id="onlyreadUrl" name="onlyreadUrl" /></td>
			</tr> 
			
		
			
		</table>
		
	</div>
	</div>
		</div>
		</div>
</div>
<script type="text/javascript">


var treeselectctl = {};

treeselectctl.$ =  function(selector){ 
	return $(selector, $("#treeselectAttrCfgDiv"));
} 

$.extend(treeselectctl, $.ControlConfigUtil);
 
/**
 * 初始化属性窗口
 */
 treeselectctl.initPropertyDialog = function (editor){
	 $(".cke_reset_all").removeClass("cke_reset_all");//删除ckeditor内部的局css
	this.editor = editor;
	//loadCommonJsFile();//加载自定义的ckeditor公共js 
	var focusedDom = editor.focusedDom;//当前editor被双击的对象(CKEDITOR.dom.node类) 
	var field = null;
	if(focusedDom != null && (typeof focusedDom) != "undefined"){
		var fieldName = $(focusedDom).attr("name");
		field = formDefinition.fields[fieldName];//表单中从表的信息 
	}
	this.initProperty(field);
};

treeselectctl.initProperty = function(field){
	if(field == null ||  (typeof field) == "undefined"){
		field = new WComboTreeClass();
		field.dbDataType = dyFormInputType.text;
		field.valueCreateMethod = "1";
		field.inputMode =  dyFormInputMode.treeSelect;
	}
	
	
	
	//控件属性初始化公共设置.
	this.ctlPropertyComInitSet(field);
	//私有属性
	$("#serviceName").val(field.serviceName); 
	$("#treeWidth").val(field.treeWidth); 
	$("#treeHeight").val(field.treeHeight); 
	$("input[name='mutiSelect'][value='"+field.mutiSelect+"']").attr("checked",true);
}


treeselectctl.exitDialog = function(){
	this.editor.focusedDom = null;
}

treeselectctl.collectFormAndFillCkeditor = function(){ 
	var field = new WComboTreeClass();
	field.inputMode =  dyFormInputMode.treeSelect;
	//控件公共属性收集
	var checkpass=this.collectFormCtlComProperty(field, this);
	if(!checkpass){
		return false;
	}
	
	field.serviceName = $("#serviceName").val(); 

	
	var mutiselect= $("input[name='mutiSelect']:checked").val();
	if(mutiselect=='true'){
		field.mutiSelect=true;
	}else{
		field.mutiSelect=false;
	} 
	
	field.treeWidth=$("#treeWidth").val(); 
	field.treeHeight=$("#treeHeight").val(); 
	 
	//创建控件占位符
	this.createControlPlaceHolder(this,this.editor.imageOfTreeSelectctl,field);
	
	formDefinition.addField(field.name, field);
	
	return true;
}




</script>